"use strict";(self.webpackChunklob=self.webpackChunklob||[]).push([[782],{"./node_modules/@zxing/ngx-scanner/fesm2022/zxing-ngx-scanner.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>ZXingScannerModule});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),common_module=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs");function fixStack(target,fn){void 0===fn&&(fn=target.constructor);var captureStackTrace=Error.captureStackTrace;captureStackTrace&&captureStackTrace(target,fn)}var _extendStatics,__extends=(_extendStatics=function extendStatics(d,b){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},_extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),CustomError=function(_super){function CustomError(message,options){var _newTarget=this.constructor,_this=_super.call(this,message,options)||this;return Object.defineProperty(_this,"name",{value:_newTarget.name,enumerable:!1,configurable:!0}),function fixProto(target,prototype){var setPrototypeOf=Object.setPrototypeOf;setPrototypeOf?setPrototypeOf(target,prototype):target.__proto__=prototype}(_this,_newTarget.prototype),fixStack(_this),_this}return __extends(CustomError,_super),CustomError}(Error);var extendStatics,Exception_extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});const core_Exception=function(_super){function Exception(message){void 0===message&&(message=void 0);var _this=_super.call(this,message)||this;return _this.message=message,_this}return Exception_extends(Exception,_super),Exception.prototype.getKind=function(){return this.constructor.kind},Exception.kind="Exception",Exception}(CustomError);var ArgumentException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_ArgumentException=function(_super){function ArgumentException(){return null!==_super&&_super.apply(this,arguments)||this}return ArgumentException_extends(ArgumentException,_super),ArgumentException.kind="ArgumentException",ArgumentException}(core_Exception);var IllegalArgumentException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_IllegalArgumentException=function(_super){function IllegalArgumentException(){return null!==_super&&_super.apply(this,arguments)||this}return IllegalArgumentException_extends(IllegalArgumentException,_super),IllegalArgumentException.kind="IllegalArgumentException",IllegalArgumentException}(core_Exception);const core_BinaryBitmap=function(){function BinaryBitmap(binarizer){if(this.binarizer=binarizer,null===binarizer)throw new core_IllegalArgumentException("Binarizer must be non-null.")}return BinaryBitmap.prototype.getWidth=function(){return this.binarizer.getWidth()},BinaryBitmap.prototype.getHeight=function(){return this.binarizer.getHeight()},BinaryBitmap.prototype.getBlackRow=function(y,row){return this.binarizer.getBlackRow(y,row)},BinaryBitmap.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},BinaryBitmap.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},BinaryBitmap.prototype.crop=function(left,top,width,height){var newSource=this.binarizer.getLuminanceSource().crop(left,top,width,height);return new BinaryBitmap(this.binarizer.createBinarizer(newSource))},BinaryBitmap.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},BinaryBitmap.prototype.rotateCounterClockwise=function(){var newSource=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new BinaryBitmap(this.binarizer.createBinarizer(newSource))},BinaryBitmap.prototype.rotateCounterClockwise45=function(){var newSource=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new BinaryBitmap(this.binarizer.createBinarizer(newSource))},BinaryBitmap.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},BinaryBitmap}();var ChecksumException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_ChecksumException=function(_super){function ChecksumException(){return null!==_super&&_super.apply(this,arguments)||this}return ChecksumException_extends(ChecksumException,_super),ChecksumException.getChecksumInstance=function(){return new ChecksumException},ChecksumException.kind="ChecksumException",ChecksumException}(core_Exception);const core_Binarizer=function(){function Binarizer(source){this.source=source}return Binarizer.prototype.getLuminanceSource=function(){return this.source},Binarizer.prototype.getWidth=function(){return this.source.getWidth()},Binarizer.prototype.getHeight=function(){return this.source.getHeight()},Binarizer}();const util_System=function(){function System(){}return System.arraycopy=function(src,srcPos,dest,destPos,length){for(;length--;)dest[destPos++]=src[srcPos++]},System.currentTimeMillis=function(){return Date.now()},System}();var IndexOutOfBoundsException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_IndexOutOfBoundsException=function(_super){function IndexOutOfBoundsException(){return null!==_super&&_super.apply(this,arguments)||this}return IndexOutOfBoundsException_extends(IndexOutOfBoundsException,_super),IndexOutOfBoundsException.kind="IndexOutOfBoundsException",IndexOutOfBoundsException}(core_Exception);var ArrayIndexOutOfBoundsException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_ArrayIndexOutOfBoundsException=function(_super){function ArrayIndexOutOfBoundsException(index,message){void 0===index&&(index=void 0),void 0===message&&(message=void 0);var _this=_super.call(this,message)||this;return _this.index=index,_this.message=message,_this}return ArrayIndexOutOfBoundsException_extends(ArrayIndexOutOfBoundsException,_super),ArrayIndexOutOfBoundsException.kind="ArrayIndexOutOfBoundsException",ArrayIndexOutOfBoundsException}(core_IndexOutOfBoundsException);var __values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Arrays=function(){function Arrays(){}return Arrays.fill=function(a,val){for(var i=0,len=a.length;i<len;i++)a[i]=val},Arrays.fillWithin=function(a,fromIndex,toIndex,val){Arrays.rangeCheck(a.length,fromIndex,toIndex);for(var i=fromIndex;i<toIndex;i++)a[i]=val},Arrays.rangeCheck=function(arrayLength,fromIndex,toIndex){if(fromIndex>toIndex)throw new core_IllegalArgumentException("fromIndex("+fromIndex+") > toIndex("+toIndex+")");if(fromIndex<0)throw new core_ArrayIndexOutOfBoundsException(fromIndex);if(toIndex>arrayLength)throw new core_ArrayIndexOutOfBoundsException(toIndex)},Arrays.asList=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return args},Arrays.create=function(rows,cols,value){return Array.from({length:rows}).map(function(x){return Array.from({length:cols}).fill(value)})},Arrays.createInt32Array=function(rows,cols,value){return Array.from({length:rows}).map(function(x){return Int32Array.from({length:cols}).fill(value)})},Arrays.equals=function(first,second){if(!first)return!1;if(!second)return!1;if(!first.length)return!1;if(!second.length)return!1;if(first.length!==second.length)return!1;for(var i=0,length_1=first.length;i<length_1;i++)if(first[i]!==second[i])return!1;return!0},Arrays.hashCode=function(a){var e_1,_a;if(null===a)return 0;var result=1;try{for(var a_1=__values(a),a_1_1=a_1.next();!a_1_1.done;a_1_1=a_1.next()){result=31*result+a_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{a_1_1&&!a_1_1.done&&(_a=a_1.return)&&_a.call(a_1)}finally{if(e_1)throw e_1.error}}return result},Arrays.fillUint8Array=function(a,value){for(var i=0;i!==a.length;i++)a[i]=value},Arrays.copyOf=function(original,newLength){return original.slice(0,newLength)},Arrays.copyOfUint8Array=function(original,newLength){if(original.length<=newLength){var newArray=new Uint8Array(newLength);return newArray.set(original),newArray}return original.slice(0,newLength)},Arrays.copyOfRange=function(original,from,to){var newLength=to-from,copy=new Int32Array(newLength);return util_System.arraycopy(original,from,copy,0,newLength),copy},Arrays.binarySearch=function(ar,el,comparator){void 0===comparator&&(comparator=Arrays.numberComparator);for(var m=0,n=ar.length-1;m<=n;){var k=n+m>>1,cmp=comparator(el,ar[k]);if(cmp>0)m=k+1;else{if(!(cmp<0))return k;n=k-1}}return-m-1},Arrays.numberComparator=function(a,b){return a-b},Arrays}();const util_Arrays=Arrays;const util_Integer=function(){function Integer(){}return Integer.numberOfTrailingZeros=function(i){var y;if(0===i)return 32;var n=31;return 0!==(y=i<<16)&&(n-=16,i=y),0!==(y=i<<8)&&(n-=8,i=y),0!==(y=i<<4)&&(n-=4,i=y),0!==(y=i<<2)&&(n-=2,i=y),n-(i<<1>>>31)},Integer.numberOfLeadingZeros=function(i){if(0===i)return 32;var n=1;return i>>>16==0&&(n+=16,i<<=16),i>>>24==0&&(n+=8,i<<=8),i>>>28==0&&(n+=4,i<<=4),i>>>30==0&&(n+=2,i<<=2),n-=i>>>31},Integer.toHexString=function(i){return i.toString(16)},Integer.toBinaryString=function(intNumber){return String(parseInt(String(intNumber),2))},Integer.bitCount=function(i){return i=(i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135,i+=i>>>8,63&(i+=i>>>16)},Integer.truncDivision=function(dividend,divisor){return Math.trunc(dividend/divisor)},Integer.parseInt=function(num,radix){return void 0===radix&&(radix=void 0),parseInt(num,radix)},Integer.MIN_VALUE_32_BITS=-2147483648,Integer.MAX_VALUE=Number.MAX_SAFE_INTEGER,Integer}();const common_BitArray=function(){function BitArray(size,bits){void 0===size?(this.size=0,this.bits=new Int32Array(1)):(this.size=size,this.bits=null==bits?BitArray.makeArray(size):bits)}return BitArray.prototype.getSize=function(){return this.size},BitArray.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},BitArray.prototype.ensureCapacity=function(size){if(size>32*this.bits.length){var newBits=BitArray.makeArray(size);util_System.arraycopy(this.bits,0,newBits,0,this.bits.length),this.bits=newBits}},BitArray.prototype.get=function(i){return!!(this.bits[Math.floor(i/32)]&1<<(31&i))},BitArray.prototype.set=function(i){this.bits[Math.floor(i/32)]|=1<<(31&i)},BitArray.prototype.flip=function(i){this.bits[Math.floor(i/32)]^=1<<(31&i)},BitArray.prototype.getNextSet=function(from){var size=this.size;if(from>=size)return size;var bits=this.bits,bitsOffset=Math.floor(from/32),currentBits=bits[bitsOffset];currentBits&=~((1<<(31&from))-1);for(var length=bits.length;0===currentBits;){if(++bitsOffset===length)return size;currentBits=bits[bitsOffset]}var result=32*bitsOffset+util_Integer.numberOfTrailingZeros(currentBits);return result>size?size:result},BitArray.prototype.getNextUnset=function(from){var size=this.size;if(from>=size)return size;var bits=this.bits,bitsOffset=Math.floor(from/32),currentBits=~bits[bitsOffset];currentBits&=~((1<<(31&from))-1);for(var length=bits.length;0===currentBits;){if(++bitsOffset===length)return size;currentBits=~bits[bitsOffset]}var result=32*bitsOffset+util_Integer.numberOfTrailingZeros(currentBits);return result>size?size:result},BitArray.prototype.setBulk=function(i,newBits){this.bits[Math.floor(i/32)]=newBits},BitArray.prototype.setRange=function(start,end){if(end<start||start<0||end>this.size)throw new core_IllegalArgumentException;if(end!==start){end--;for(var firstInt=Math.floor(start/32),lastInt=Math.floor(end/32),bits=this.bits,i=firstInt;i<=lastInt;i++){var mask=(2<<(i<lastInt?31:31&end))-(1<<(i>firstInt?0:31&start));bits[i]|=mask}}},BitArray.prototype.clear=function(){for(var max=this.bits.length,bits=this.bits,i=0;i<max;i++)bits[i]=0},BitArray.prototype.isRange=function(start,end,value){if(end<start||start<0||end>this.size)throw new core_IllegalArgumentException;if(end===start)return!0;end--;for(var firstInt=Math.floor(start/32),lastInt=Math.floor(end/32),bits=this.bits,i=firstInt;i<=lastInt;i++){var mask=(2<<(i<lastInt?31:31&end))-(1<<(i>firstInt?0:31&start))&4294967295;if((bits[i]&mask)!==(value?mask:0))return!1}return!0},BitArray.prototype.appendBit=function(bit){this.ensureCapacity(this.size+1),bit&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},BitArray.prototype.appendBits=function(value,numBits){if(numBits<0||numBits>32)throw new core_IllegalArgumentException("Num bits must be between 0 and 32");this.ensureCapacity(this.size+numBits);for(var numBitsLeft=numBits;numBitsLeft>0;numBitsLeft--)this.appendBit(1==(value>>numBitsLeft-1&1))},BitArray.prototype.appendBitArray=function(other){var otherSize=other.size;this.ensureCapacity(this.size+otherSize);for(var i=0;i<otherSize;i++)this.appendBit(other.get(i))},BitArray.prototype.xor=function(other){if(this.size!==other.size)throw new core_IllegalArgumentException("Sizes don't match");for(var bits=this.bits,i=0,length_1=bits.length;i<length_1;i++)bits[i]^=other.bits[i]},BitArray.prototype.toBytes=function(bitOffset,array,offset,numBytes){for(var i=0;i<numBytes;i++){for(var theByte=0,j=0;j<8;j++)this.get(bitOffset)&&(theByte|=1<<7-j),bitOffset++;array[offset+i]=theByte}},BitArray.prototype.getBitArray=function(){return this.bits},BitArray.prototype.reverse=function(){for(var newBits=new Int32Array(this.bits.length),len=Math.floor((this.size-1)/32),oldBitsLen=len+1,bits=this.bits,i=0;i<oldBitsLen;i++){var x=bits[i];x=(x=(x=(x=(x=x>>1&1431655765|(1431655765&x)<<1)>>2&858993459|(858993459&x)<<2)>>4&252645135|(252645135&x)<<4)>>8&16711935|(16711935&x)<<8)>>16&65535|(65535&x)<<16,newBits[len-i]=x}if(this.size!==32*oldBitsLen){var leftOffset=32*oldBitsLen-this.size,currentInt=newBits[0]>>>leftOffset;for(i=1;i<oldBitsLen;i++){var nextInt=newBits[i];currentInt|=nextInt<<32-leftOffset,newBits[i-1]=currentInt,currentInt=nextInt>>>leftOffset}newBits[oldBitsLen-1]=currentInt}this.bits=newBits},BitArray.makeArray=function(size){return new Int32Array(Math.floor((size+31)/32))},BitArray.prototype.equals=function(o){if(!(o instanceof BitArray))return!1;var other=o;return this.size===other.size&&util_Arrays.equals(this.bits,other.bits)},BitArray.prototype.hashCode=function(){return 31*this.size+util_Arrays.hashCode(this.bits)},BitArray.prototype.toString=function(){for(var result="",i=0,size=this.size;i<size;i++)7&i||(result+=" "),result+=this.get(i)?"X":".";return result},BitArray.prototype.clone=function(){return new BitArray(this.size,this.bits.slice())},BitArray.prototype.toArray=function(){for(var result=[],i=0,size=this.size;i<size;i++)result.push(this.get(i));return result},BitArray}();var DecodeHintType;!function(DecodeHintType){DecodeHintType[DecodeHintType.OTHER=0]="OTHER",DecodeHintType[DecodeHintType.PURE_BARCODE=1]="PURE_BARCODE",DecodeHintType[DecodeHintType.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",DecodeHintType[DecodeHintType.TRY_HARDER=3]="TRY_HARDER",DecodeHintType[DecodeHintType.CHARACTER_SET=4]="CHARACTER_SET",DecodeHintType[DecodeHintType.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",DecodeHintType[DecodeHintType.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",DecodeHintType[DecodeHintType.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",DecodeHintType[DecodeHintType.ASSUME_GS1=8]="ASSUME_GS1",DecodeHintType[DecodeHintType.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",DecodeHintType[DecodeHintType.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",DecodeHintType[DecodeHintType.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"}(DecodeHintType||(DecodeHintType={}));const core_DecodeHintType=DecodeHintType;var FormatException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_FormatException=function(_super){function FormatException(){return null!==_super&&_super.apply(this,arguments)||this}return FormatException_extends(FormatException,_super),FormatException.getFormatInstance=function(){return new FormatException},FormatException.kind="FormatException",FormatException}(core_Exception);var CharacterSetValueIdentifiers,CharacterSetECI_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(CharacterSetValueIdentifiers){CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.Cp437=0]="Cp437",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_1=1]="ISO8859_1",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_2=2]="ISO8859_2",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_3=3]="ISO8859_3",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_4=4]="ISO8859_4",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_5=5]="ISO8859_5",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_6=6]="ISO8859_6",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_7=7]="ISO8859_7",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_8=8]="ISO8859_8",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_9=9]="ISO8859_9",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_10=10]="ISO8859_10",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_11=11]="ISO8859_11",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_13=12]="ISO8859_13",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_14=13]="ISO8859_14",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_15=14]="ISO8859_15",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ISO8859_16=15]="ISO8859_16",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.SJIS=16]="SJIS",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.Cp1250=17]="Cp1250",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.Cp1251=18]="Cp1251",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.Cp1252=19]="Cp1252",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.Cp1256=20]="Cp1256",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.UTF8=22]="UTF8",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.ASCII=23]="ASCII",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.Big5=24]="Big5",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.GB18030=25]="GB18030",CharacterSetValueIdentifiers[CharacterSetValueIdentifiers.EUC_KR=26]="EUC_KR"}(CharacterSetValueIdentifiers||(CharacterSetValueIdentifiers={}));var CharacterSetECI=function(){function CharacterSetECI(valueIdentifier,valuesParam,name){for(var e_1,_a,otherEncodingNames=[],_i=3;_i<arguments.length;_i++)otherEncodingNames[_i-3]=arguments[_i];this.valueIdentifier=valueIdentifier,this.name=name,this.values="number"==typeof valuesParam?Int32Array.from([valuesParam]):valuesParam,this.otherEncodingNames=otherEncodingNames,CharacterSetECI.VALUE_IDENTIFIER_TO_ECI.set(valueIdentifier,this),CharacterSetECI.NAME_TO_ECI.set(name,this);for(var values=this.values,i=0,length_1=values.length;i!==length_1;i++){var v=values[i];CharacterSetECI.VALUES_TO_ECI.set(v,this)}try{for(var otherEncodingNames_1=CharacterSetECI_values(otherEncodingNames),otherEncodingNames_1_1=otherEncodingNames_1.next();!otherEncodingNames_1_1.done;otherEncodingNames_1_1=otherEncodingNames_1.next()){var otherName=otherEncodingNames_1_1.value;CharacterSetECI.NAME_TO_ECI.set(otherName,this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{otherEncodingNames_1_1&&!otherEncodingNames_1_1.done&&(_a=otherEncodingNames_1.return)&&_a.call(otherEncodingNames_1)}finally{if(e_1)throw e_1.error}}}return CharacterSetECI.prototype.getValueIdentifier=function(){return this.valueIdentifier},CharacterSetECI.prototype.getName=function(){return this.name},CharacterSetECI.prototype.getValue=function(){return this.values[0]},CharacterSetECI.getCharacterSetECIByValue=function(value){if(value<0||value>=900)throw new core_FormatException("incorect value");var characterSet=CharacterSetECI.VALUES_TO_ECI.get(value);if(void 0===characterSet)throw new core_FormatException("incorect value");return characterSet},CharacterSetECI.getCharacterSetECIByName=function(name){var characterSet=CharacterSetECI.NAME_TO_ECI.get(name);if(void 0===characterSet)throw new core_FormatException("incorect value");return characterSet},CharacterSetECI.prototype.equals=function(o){if(!(o instanceof CharacterSetECI))return!1;var other=o;return this.getName()===other.getName()},CharacterSetECI.VALUE_IDENTIFIER_TO_ECI=new Map,CharacterSetECI.VALUES_TO_ECI=new Map,CharacterSetECI.NAME_TO_ECI=new Map,CharacterSetECI.Cp437=new CharacterSetECI(CharacterSetValueIdentifiers.Cp437,Int32Array.from([0,2]),"Cp437"),CharacterSetECI.ISO8859_1=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),CharacterSetECI.ISO8859_2=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),CharacterSetECI.ISO8859_3=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),CharacterSetECI.ISO8859_4=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),CharacterSetECI.ISO8859_5=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),CharacterSetECI.ISO8859_6=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),CharacterSetECI.ISO8859_7=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),CharacterSetECI.ISO8859_8=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),CharacterSetECI.ISO8859_9=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),CharacterSetECI.ISO8859_10=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),CharacterSetECI.ISO8859_11=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),CharacterSetECI.ISO8859_13=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),CharacterSetECI.ISO8859_14=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),CharacterSetECI.ISO8859_15=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),CharacterSetECI.ISO8859_16=new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),CharacterSetECI.SJIS=new CharacterSetECI(CharacterSetValueIdentifiers.SJIS,20,"SJIS","Shift_JIS"),CharacterSetECI.Cp1250=new CharacterSetECI(CharacterSetValueIdentifiers.Cp1250,21,"Cp1250","windows-1250"),CharacterSetECI.Cp1251=new CharacterSetECI(CharacterSetValueIdentifiers.Cp1251,22,"Cp1251","windows-1251"),CharacterSetECI.Cp1252=new CharacterSetECI(CharacterSetValueIdentifiers.Cp1252,23,"Cp1252","windows-1252"),CharacterSetECI.Cp1256=new CharacterSetECI(CharacterSetValueIdentifiers.Cp1256,24,"Cp1256","windows-1256"),CharacterSetECI.UnicodeBigUnmarked=new CharacterSetECI(CharacterSetValueIdentifiers.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),CharacterSetECI.UTF8=new CharacterSetECI(CharacterSetValueIdentifiers.UTF8,26,"UTF8","UTF-8"),CharacterSetECI.ASCII=new CharacterSetECI(CharacterSetValueIdentifiers.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),CharacterSetECI.Big5=new CharacterSetECI(CharacterSetValueIdentifiers.Big5,28,"Big5"),CharacterSetECI.GB18030=new CharacterSetECI(CharacterSetValueIdentifiers.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),CharacterSetECI.EUC_KR=new CharacterSetECI(CharacterSetValueIdentifiers.EUC_KR,30,"EUC_KR","EUC-KR"),CharacterSetECI}();const common_CharacterSetECI=CharacterSetECI;var UnsupportedOperationException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_UnsupportedOperationException=function(_super){function UnsupportedOperationException(){return null!==_super&&_super.apply(this,arguments)||this}return UnsupportedOperationException_extends(UnsupportedOperationException,_super),UnsupportedOperationException.kind="UnsupportedOperationException",UnsupportedOperationException}(core_Exception);const util_StringEncoding=function(){function StringEncoding(){}return StringEncoding.decode=function(bytes,encoding){var encodingName=this.encodingName(encoding);return this.customDecoder?this.customDecoder(bytes,encodingName):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(encodingName)?this.decodeFallback(bytes,encodingName):new TextDecoder(encodingName).decode(bytes)},StringEncoding.shouldDecodeOnFallback=function(encodingName){return!StringEncoding.isBrowser()&&"ISO-8859-1"===encodingName},StringEncoding.encode=function(s,encoding){var encodingName=this.encodingName(encoding);return this.customEncoder?this.customEncoder(s,encodingName):"undefined"==typeof TextEncoder?this.encodeFallback(s):(new TextEncoder).encode(s)},StringEncoding.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},StringEncoding.encodingName=function(encoding){return"string"==typeof encoding?encoding:encoding.getName()},StringEncoding.encodingCharacterSet=function(encoding){return encoding instanceof common_CharacterSetECI?encoding:common_CharacterSetECI.getCharacterSetECIByName(encoding)},StringEncoding.decodeFallback=function(bytes,encoding){var characterSet=this.encodingCharacterSet(encoding);if(StringEncoding.isDecodeFallbackSupported(characterSet)){for(var s="",i=0,length_1=bytes.length;i<length_1;i++){var h=bytes[i].toString(16);h.length<2&&(h="0"+h),s+="%"+h}return decodeURIComponent(s)}if(characterSet.equals(common_CharacterSetECI.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(bytes.buffer));throw new core_UnsupportedOperationException("Encoding "+this.encodingName(encoding)+" not supported by fallback.")},StringEncoding.isDecodeFallbackSupported=function(characterSet){return characterSet.equals(common_CharacterSetECI.UTF8)||characterSet.equals(common_CharacterSetECI.ISO8859_1)||characterSet.equals(common_CharacterSetECI.ASCII)},StringEncoding.encodeFallback=function(s){for(var charList=btoa(unescape(encodeURIComponent(s))).split(""),uintArray=[],i=0;i<charList.length;i++)uintArray.push(charList[i].charCodeAt(0));return new Uint8Array(uintArray)},StringEncoding}();const common_StringUtils=function(){function StringUtils(){}return StringUtils.castAsNonUtf8Char=function(code,encoding){void 0===encoding&&(encoding=null);var e=encoding?encoding.getName():this.ISO88591;return util_StringEncoding.decode(new Uint8Array([code]),e)},StringUtils.guessEncoding=function(bytes,hints){if(null!=hints&&void 0!==hints.get(core_DecodeHintType.CHARACTER_SET))return hints.get(core_DecodeHintType.CHARACTER_SET).toString();for(var length=bytes.length,canBeISO88591=!0,canBeShiftJIS=!0,canBeUTF8=!0,utf8BytesLeft=0,utf2BytesChars=0,utf3BytesChars=0,utf4BytesChars=0,sjisBytesLeft=0,sjisKatakanaChars=0,sjisCurKatakanaWordLength=0,sjisCurDoubleBytesWordLength=0,sjisMaxKatakanaWordLength=0,sjisMaxDoubleBytesWordLength=0,isoHighOther=0,utf8bom=bytes.length>3&&239===bytes[0]&&187===bytes[1]&&191===bytes[2],i=0;i<length&&(canBeISO88591||canBeShiftJIS||canBeUTF8);i++){var value=255&bytes[i];canBeUTF8&&(utf8BytesLeft>0?128&value?utf8BytesLeft--:canBeUTF8=!1:128&value&&(64&value?(utf8BytesLeft++,32&value?(utf8BytesLeft++,16&value?(utf8BytesLeft++,8&value?canBeUTF8=!1:utf4BytesChars++):utf3BytesChars++):utf2BytesChars++):canBeUTF8=!1)),canBeISO88591&&(value>127&&value<160?canBeISO88591=!1:value>159&&(value<192||215===value||247===value)&&isoHighOther++),canBeShiftJIS&&(sjisBytesLeft>0?value<64||127===value||value>252?canBeShiftJIS=!1:sjisBytesLeft--:128===value||160===value||value>239?canBeShiftJIS=!1:value>160&&value<224?(sjisKatakanaChars++,sjisCurDoubleBytesWordLength=0,++sjisCurKatakanaWordLength>sjisMaxKatakanaWordLength&&(sjisMaxKatakanaWordLength=sjisCurKatakanaWordLength)):value>127?(sjisBytesLeft++,sjisCurKatakanaWordLength=0,++sjisCurDoubleBytesWordLength>sjisMaxDoubleBytesWordLength&&(sjisMaxDoubleBytesWordLength=sjisCurDoubleBytesWordLength)):(sjisCurKatakanaWordLength=0,sjisCurDoubleBytesWordLength=0))}return canBeUTF8&&utf8BytesLeft>0&&(canBeUTF8=!1),canBeShiftJIS&&sjisBytesLeft>0&&(canBeShiftJIS=!1),canBeUTF8&&(utf8bom||utf2BytesChars+utf3BytesChars+utf4BytesChars>0)?StringUtils.UTF8:canBeShiftJIS&&(StringUtils.ASSUME_SHIFT_JIS||sjisMaxKatakanaWordLength>=3||sjisMaxDoubleBytesWordLength>=3)?StringUtils.SHIFT_JIS:canBeISO88591&&canBeShiftJIS?2===sjisMaxKatakanaWordLength&&2===sjisKatakanaChars||10*isoHighOther>=length?StringUtils.SHIFT_JIS:StringUtils.ISO88591:canBeISO88591?StringUtils.ISO88591:canBeShiftJIS?StringUtils.SHIFT_JIS:canBeUTF8?StringUtils.UTF8:StringUtils.PLATFORM_DEFAULT_ENCODING},StringUtils.format=function(append){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var i=-1;return append.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function callback(exp,p0,p1,p2,p3,p4){if("%%"===exp)return"%";if(void 0!==args[++i]){exp=p2?parseInt(p2.substr(1)):void 0;var val,base=p3?parseInt(p3.substr(1)):void 0;switch(p4){case"s":val=args[i];break;case"c":val=args[i][0];break;case"f":val=parseFloat(args[i]).toFixed(exp);break;case"p":val=parseFloat(args[i]).toPrecision(exp);break;case"e":val=parseFloat(args[i]).toExponential(exp);break;case"x":val=parseInt(args[i]).toString(base||16);break;case"d":val=parseFloat(parseInt(args[i],base||10).toPrecision(exp)).toFixed(0)}val="object"==typeof val?JSON.stringify(val):(+val).toString(base);for(var size=parseInt(p1),ch=p1&&p1[0]+""=="0"?"0":" ";val.length<size;)val=void 0!==p0?val+ch:ch+val;return val}})},StringUtils.getBytes=function(str,encoding){return util_StringEncoding.encode(str,encoding)},StringUtils.getCharCode=function(str,index){return void 0===index&&(index=0),str.charCodeAt(index)},StringUtils.getCharAt=function(charCode){return String.fromCharCode(charCode)},StringUtils.SHIFT_JIS=common_CharacterSetECI.SJIS.getName(),StringUtils.GB2312="GB2312",StringUtils.ISO88591=common_CharacterSetECI.ISO8859_1.getName(),StringUtils.EUC_JP="EUC_JP",StringUtils.UTF8=common_CharacterSetECI.UTF8.getName(),StringUtils.PLATFORM_DEFAULT_ENCODING=StringUtils.UTF8,StringUtils.ASSUME_SHIFT_JIS=!1,StringUtils}();const util_StringBuilder=function(){function StringBuilder(value){void 0===value&&(value=""),this.value=value}return StringBuilder.prototype.enableDecoding=function(encoding){return this.encoding=encoding,this},StringBuilder.prototype.append=function(s){return"string"==typeof s?this.value+=s.toString():this.encoding?this.value+=common_StringUtils.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this},StringBuilder.prototype.appendChars=function(str,offset,len){for(var i=offset;offset<offset+len;i++)this.append(str[i]);return this},StringBuilder.prototype.length=function(){return this.value.length},StringBuilder.prototype.charAt=function(n){return this.value.charAt(n)},StringBuilder.prototype.deleteCharAt=function(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)},StringBuilder.prototype.setCharAt=function(n,c){this.value=this.value.substr(0,n)+c+this.value.substr(n+1)},StringBuilder.prototype.substring=function(start,end){return this.value.substring(start,end)},StringBuilder.prototype.setLengthToZero=function(){this.value=""},StringBuilder.prototype.toString=function(){return this.value},StringBuilder.prototype.insert=function(n,c){this.value=this.value.substring(0,n)+c+this.value.substring(n)},StringBuilder}();const common_BitMatrix=function(){function BitMatrix(width,height,rowSize,bits){if(this.width=width,this.height=height,this.rowSize=rowSize,this.bits=bits,null==height&&(height=width),this.height=height,width<1||height<1)throw new core_IllegalArgumentException("Both dimensions must be greater than 0");null==rowSize&&(rowSize=Math.floor((width+31)/32)),this.rowSize=rowSize,null==bits&&(this.bits=new Int32Array(this.rowSize*this.height))}return BitMatrix.parseFromBooleanArray=function(image){for(var height=image.length,width=image[0].length,bits=new BitMatrix(width,height),i=0;i<height;i++)for(var imageI=image[i],j=0;j<width;j++)imageI[j]&&bits.set(j,i);return bits},BitMatrix.parseFromString=function(stringRepresentation,setString,unsetString){if(null===stringRepresentation)throw new core_IllegalArgumentException("stringRepresentation cannot be null");for(var bits=new Array(stringRepresentation.length),bitsPos=0,rowStartPos=0,rowLength=-1,nRows=0,pos=0;pos<stringRepresentation.length;)if("\n"===stringRepresentation.charAt(pos)||"\r"===stringRepresentation.charAt(pos)){if(bitsPos>rowStartPos){if(-1===rowLength)rowLength=bitsPos-rowStartPos;else if(bitsPos-rowStartPos!==rowLength)throw new core_IllegalArgumentException("row lengths do not match");rowStartPos=bitsPos,nRows++}pos++}else if(stringRepresentation.substring(pos,pos+setString.length)===setString)pos+=setString.length,bits[bitsPos]=!0,bitsPos++;else{if(stringRepresentation.substring(pos,pos+unsetString.length)!==unsetString)throw new core_IllegalArgumentException("illegal character encountered: "+stringRepresentation.substring(pos));pos+=unsetString.length,bits[bitsPos]=!1,bitsPos++}if(bitsPos>rowStartPos){if(-1===rowLength)rowLength=bitsPos-rowStartPos;else if(bitsPos-rowStartPos!==rowLength)throw new core_IllegalArgumentException("row lengths do not match");nRows++}for(var matrix=new BitMatrix(rowLength,nRows),i=0;i<bitsPos;i++)bits[i]&&matrix.set(Math.floor(i%rowLength),Math.floor(i/rowLength));return matrix},BitMatrix.prototype.get=function(x,y){var offset=y*this.rowSize+Math.floor(x/32);return!!(this.bits[offset]>>>(31&x)&1)},BitMatrix.prototype.set=function(x,y){var offset=y*this.rowSize+Math.floor(x/32);this.bits[offset]|=1<<(31&x)&4294967295},BitMatrix.prototype.unset=function(x,y){var offset=y*this.rowSize+Math.floor(x/32);this.bits[offset]&=~(1<<(31&x)&4294967295)},BitMatrix.prototype.flip=function(x,y){var offset=y*this.rowSize+Math.floor(x/32);this.bits[offset]^=1<<(31&x)&4294967295},BitMatrix.prototype.xor=function(mask){if(this.width!==mask.getWidth()||this.height!==mask.getHeight()||this.rowSize!==mask.getRowSize())throw new core_IllegalArgumentException("input matrix dimensions do not match");for(var rowArray=new common_BitArray(Math.floor(this.width/32)+1),rowSize=this.rowSize,bits=this.bits,y=0,height=this.height;y<height;y++)for(var offset=y*rowSize,row=mask.getRow(y,rowArray).getBitArray(),x=0;x<rowSize;x++)bits[offset+x]^=row[x]},BitMatrix.prototype.clear=function(){for(var bits=this.bits,max=bits.length,i=0;i<max;i++)bits[i]=0},BitMatrix.prototype.setRegion=function(left,top,width,height){if(top<0||left<0)throw new core_IllegalArgumentException("Left and top must be nonnegative");if(height<1||width<1)throw new core_IllegalArgumentException("Height and width must be at least 1");var right=left+width,bottom=top+height;if(bottom>this.height||right>this.width)throw new core_IllegalArgumentException("The region must fit inside the matrix");for(var rowSize=this.rowSize,bits=this.bits,y=top;y<bottom;y++)for(var offset=y*rowSize,x=left;x<right;x++)bits[offset+Math.floor(x/32)]|=1<<(31&x)&4294967295},BitMatrix.prototype.getRow=function(y,row){null==row||row.getSize()<this.width?row=new common_BitArray(this.width):row.clear();for(var rowSize=this.rowSize,bits=this.bits,offset=y*rowSize,x=0;x<rowSize;x++)row.setBulk(32*x,bits[offset+x]);return row},BitMatrix.prototype.setRow=function(y,row){util_System.arraycopy(row.getBitArray(),0,this.bits,y*this.rowSize,this.rowSize)},BitMatrix.prototype.rotate180=function(){for(var width=this.getWidth(),height=this.getHeight(),topRow=new common_BitArray(width),bottomRow=new common_BitArray(width),i=0,length_1=Math.floor((height+1)/2);i<length_1;i++)topRow=this.getRow(i,topRow),bottomRow=this.getRow(height-1-i,bottomRow),topRow.reverse(),bottomRow.reverse(),this.setRow(i,bottomRow),this.setRow(height-1-i,topRow)},BitMatrix.prototype.getEnclosingRectangle=function(){for(var width=this.width,height=this.height,rowSize=this.rowSize,bits=this.bits,left=width,top=height,right=-1,bottom=-1,y=0;y<height;y++)for(var x32=0;x32<rowSize;x32++){var theBits=bits[y*rowSize+x32];if(0!==theBits){if(y<top&&(top=y),y>bottom&&(bottom=y),32*x32<left){for(var bit=0;!(theBits<<31-bit&4294967295);)bit++;32*x32+bit<left&&(left=32*x32+bit)}if(32*x32+31>right){for(bit=31;theBits>>>bit===0;)bit--;32*x32+bit>right&&(right=32*x32+bit)}}}return right<left||bottom<top?null:Int32Array.from([left,top,right-left+1,bottom-top+1])},BitMatrix.prototype.getTopLeftOnBit=function(){for(var rowSize=this.rowSize,bits=this.bits,bitsOffset=0;bitsOffset<bits.length&&0===bits[bitsOffset];)bitsOffset++;if(bitsOffset===bits.length)return null;for(var y=bitsOffset/rowSize,x=bitsOffset%rowSize*32,theBits=bits[bitsOffset],bit=0;!(theBits<<31-bit&4294967295);)bit++;return x+=bit,Int32Array.from([x,y])},BitMatrix.prototype.getBottomRightOnBit=function(){for(var rowSize=this.rowSize,bits=this.bits,bitsOffset=bits.length-1;bitsOffset>=0&&0===bits[bitsOffset];)bitsOffset--;if(bitsOffset<0)return null;for(var y=Math.floor(bitsOffset/rowSize),x=32*Math.floor(bitsOffset%rowSize),theBits=bits[bitsOffset],bit=31;theBits>>>bit===0;)bit--;return x+=bit,Int32Array.from([x,y])},BitMatrix.prototype.getWidth=function(){return this.width},BitMatrix.prototype.getHeight=function(){return this.height},BitMatrix.prototype.getRowSize=function(){return this.rowSize},BitMatrix.prototype.equals=function(o){if(!(o instanceof BitMatrix))return!1;var other=o;return this.width===other.width&&this.height===other.height&&this.rowSize===other.rowSize&&util_Arrays.equals(this.bits,other.bits)},BitMatrix.prototype.hashCode=function(){var hash=this.width;return hash=31*(hash=31*(hash=31*(hash=31*hash+this.width)+this.height)+this.rowSize)+util_Arrays.hashCode(this.bits)},BitMatrix.prototype.toString=function(setString,unsetString,lineSeparator){return void 0===setString&&(setString="X "),void 0===unsetString&&(unsetString="  "),void 0===lineSeparator&&(lineSeparator="\n"),this.buildToString(setString,unsetString,lineSeparator)},BitMatrix.prototype.buildToString=function(setString,unsetString,lineSeparator){for(var result=new util_StringBuilder,y=0,height=this.height;y<height;y++){for(var x=0,width=this.width;x<width;x++)result.append(this.get(x,y)?setString:unsetString);result.append(lineSeparator)}return result.toString()},BitMatrix.prototype.clone=function(){return new BitMatrix(this.width,this.height,this.rowSize,this.bits.slice())},BitMatrix}();var NotFoundException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_NotFoundException=function(_super){function NotFoundException(){return null!==_super&&_super.apply(this,arguments)||this}return NotFoundException_extends(NotFoundException,_super),NotFoundException.getNotFoundInstance=function(){return new NotFoundException},NotFoundException.kind="NotFoundException",NotFoundException}(core_Exception);var GlobalHistogramBinarizer_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const common_GlobalHistogramBinarizer=function(_super){function GlobalHistogramBinarizer(source){var _this=_super.call(this,source)||this;return _this.luminances=GlobalHistogramBinarizer.EMPTY,_this.buckets=new Int32Array(GlobalHistogramBinarizer.LUMINANCE_BUCKETS),_this}return GlobalHistogramBinarizer_extends(GlobalHistogramBinarizer,_super),GlobalHistogramBinarizer.prototype.getBlackRow=function(y,row){var source=this.getLuminanceSource(),width=source.getWidth();null==row||row.getSize()<width?row=new common_BitArray(width):row.clear(),this.initArrays(width);for(var localLuminances=source.getRow(y,this.luminances),localBuckets=this.buckets,x=0;x<width;x++)localBuckets[(255&localLuminances[x])>>GlobalHistogramBinarizer.LUMINANCE_SHIFT]++;var blackPoint=GlobalHistogramBinarizer.estimateBlackPoint(localBuckets);if(width<3)for(x=0;x<width;x++)(255&localLuminances[x])<blackPoint&&row.set(x);else{var left=255&localLuminances[0],center=255&localLuminances[1];for(x=1;x<width-1;x++){var right=255&localLuminances[x+1];(4*center-left-right)/2<blackPoint&&row.set(x),left=center,center=right}}return row},GlobalHistogramBinarizer.prototype.getBlackMatrix=function(){var source=this.getLuminanceSource(),width=source.getWidth(),height=source.getHeight(),matrix=new common_BitMatrix(width,height);this.initArrays(width);for(var localBuckets=this.buckets,y=1;y<5;y++)for(var row=Math.floor(height*y/5),localLuminances_1=source.getRow(row,this.luminances),right=Math.floor(4*width/5),x=Math.floor(width/5);x<right;x++){localBuckets[(255&localLuminances_1[x])>>GlobalHistogramBinarizer.LUMINANCE_SHIFT]++}var blackPoint=GlobalHistogramBinarizer.estimateBlackPoint(localBuckets),localLuminances=source.getMatrix();for(y=0;y<height;y++){var offset=y*width;for(x=0;x<width;x++){(255&localLuminances[offset+x])<blackPoint&&matrix.set(x,y)}}return matrix},GlobalHistogramBinarizer.prototype.createBinarizer=function(source){return new GlobalHistogramBinarizer(source)},GlobalHistogramBinarizer.prototype.initArrays=function(luminanceSize){this.luminances.length<luminanceSize&&(this.luminances=new Uint8ClampedArray(luminanceSize));for(var buckets=this.buckets,x=0;x<GlobalHistogramBinarizer.LUMINANCE_BUCKETS;x++)buckets[x]=0},GlobalHistogramBinarizer.estimateBlackPoint=function(buckets){for(var numBuckets=buckets.length,maxBucketCount=0,firstPeak=0,firstPeakSize=0,x=0;x<numBuckets;x++)buckets[x]>firstPeakSize&&(firstPeak=x,firstPeakSize=buckets[x]),buckets[x]>maxBucketCount&&(maxBucketCount=buckets[x]);var secondPeak=0,secondPeakScore=0;for(x=0;x<numBuckets;x++){var distanceToBiggest=x-firstPeak;(score=buckets[x]*distanceToBiggest*distanceToBiggest)>secondPeakScore&&(secondPeak=x,secondPeakScore=score)}if(firstPeak>secondPeak){var temp=firstPeak;firstPeak=secondPeak,secondPeak=temp}if(secondPeak-firstPeak<=numBuckets/16)throw new core_NotFoundException;var bestValley=secondPeak-1,bestValleyScore=-1;for(x=secondPeak-1;x>firstPeak;x--){var score,fromFirst=x-firstPeak;(score=fromFirst*fromFirst*(secondPeak-x)*(maxBucketCount-buckets[x]))>bestValleyScore&&(bestValley=x,bestValleyScore=score)}return bestValley<<GlobalHistogramBinarizer.LUMINANCE_SHIFT},GlobalHistogramBinarizer.LUMINANCE_BITS=5,GlobalHistogramBinarizer.LUMINANCE_SHIFT=8-GlobalHistogramBinarizer.LUMINANCE_BITS,GlobalHistogramBinarizer.LUMINANCE_BUCKETS=1<<GlobalHistogramBinarizer.LUMINANCE_BITS,GlobalHistogramBinarizer.EMPTY=Uint8ClampedArray.from([0]),GlobalHistogramBinarizer}(core_Binarizer);var HybridBinarizer_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const common_HybridBinarizer=function(_super){function HybridBinarizer(source){var _this=_super.call(this,source)||this;return _this.matrix=null,_this}return HybridBinarizer_extends(HybridBinarizer,_super),HybridBinarizer.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var source=this.getLuminanceSource(),width=source.getWidth(),height=source.getHeight();if(width>=HybridBinarizer.MINIMUM_DIMENSION&&height>=HybridBinarizer.MINIMUM_DIMENSION){var luminances=source.getMatrix(),subWidth=width>>HybridBinarizer.BLOCK_SIZE_POWER;0!==(width&HybridBinarizer.BLOCK_SIZE_MASK)&&subWidth++;var subHeight=height>>HybridBinarizer.BLOCK_SIZE_POWER;0!==(height&HybridBinarizer.BLOCK_SIZE_MASK)&&subHeight++;var blackPoints=HybridBinarizer.calculateBlackPoints(luminances,subWidth,subHeight,width,height),newMatrix=new common_BitMatrix(width,height);HybridBinarizer.calculateThresholdForBlock(luminances,subWidth,subHeight,width,height,blackPoints,newMatrix),this.matrix=newMatrix}else this.matrix=_super.prototype.getBlackMatrix.call(this);return this.matrix},HybridBinarizer.prototype.createBinarizer=function(source){return new HybridBinarizer(source)},HybridBinarizer.calculateThresholdForBlock=function(luminances,subWidth,subHeight,width,height,blackPoints,matrix){for(var maxYOffset=height-HybridBinarizer.BLOCK_SIZE,maxXOffset=width-HybridBinarizer.BLOCK_SIZE,y=0;y<subHeight;y++){var yoffset=y<<HybridBinarizer.BLOCK_SIZE_POWER;yoffset>maxYOffset&&(yoffset=maxYOffset);for(var top_1=HybridBinarizer.cap(y,2,subHeight-3),x=0;x<subWidth;x++){var xoffset=x<<HybridBinarizer.BLOCK_SIZE_POWER;xoffset>maxXOffset&&(xoffset=maxXOffset);for(var left=HybridBinarizer.cap(x,2,subWidth-3),sum=0,z=-2;z<=2;z++){var blackRow=blackPoints[top_1+z];sum+=blackRow[left-2]+blackRow[left-1]+blackRow[left]+blackRow[left+1]+blackRow[left+2]}var average=sum/25;HybridBinarizer.thresholdBlock(luminances,xoffset,yoffset,average,width,matrix)}}},HybridBinarizer.cap=function(value,min,max){return value<min?min:value>max?max:value},HybridBinarizer.thresholdBlock=function(luminances,xoffset,yoffset,threshold,stride,matrix){for(var y=0,offset=yoffset*stride+xoffset;y<HybridBinarizer.BLOCK_SIZE;y++,offset+=stride)for(var x=0;x<HybridBinarizer.BLOCK_SIZE;x++)(255&luminances[offset+x])<=threshold&&matrix.set(xoffset+x,yoffset+y)},HybridBinarizer.calculateBlackPoints=function(luminances,subWidth,subHeight,width,height){for(var maxYOffset=height-HybridBinarizer.BLOCK_SIZE,maxXOffset=width-HybridBinarizer.BLOCK_SIZE,blackPoints=new Array(subHeight),y=0;y<subHeight;y++){blackPoints[y]=new Int32Array(subWidth);var yoffset=y<<HybridBinarizer.BLOCK_SIZE_POWER;yoffset>maxYOffset&&(yoffset=maxYOffset);for(var x=0;x<subWidth;x++){var xoffset=x<<HybridBinarizer.BLOCK_SIZE_POWER;xoffset>maxXOffset&&(xoffset=maxXOffset);for(var sum=0,min=255,max=0,yy=0,offset=yoffset*width+xoffset;yy<HybridBinarizer.BLOCK_SIZE;yy++,offset+=width){for(var xx=0;xx<HybridBinarizer.BLOCK_SIZE;xx++){var pixel=255&luminances[offset+xx];sum+=pixel,pixel<min&&(min=pixel),pixel>max&&(max=pixel)}if(max-min>HybridBinarizer.MIN_DYNAMIC_RANGE)for(yy++,offset+=width;yy<HybridBinarizer.BLOCK_SIZE;yy++,offset+=width)for(xx=0;xx<HybridBinarizer.BLOCK_SIZE;xx++)sum+=255&luminances[offset+xx]}var average=sum>>2*HybridBinarizer.BLOCK_SIZE_POWER;if(max-min<=HybridBinarizer.MIN_DYNAMIC_RANGE&&(average=min/2,y>0&&x>0)){var averageNeighborBlackPoint=(blackPoints[y-1][x]+2*blackPoints[y][x-1]+blackPoints[y-1][x-1])/4;min<averageNeighborBlackPoint&&(average=averageNeighborBlackPoint)}blackPoints[y][x]=average}}return blackPoints},HybridBinarizer.BLOCK_SIZE_POWER=3,HybridBinarizer.BLOCK_SIZE=1<<HybridBinarizer.BLOCK_SIZE_POWER,HybridBinarizer.BLOCK_SIZE_MASK=HybridBinarizer.BLOCK_SIZE-1,HybridBinarizer.MINIMUM_DIMENSION=5*HybridBinarizer.BLOCK_SIZE,HybridBinarizer.MIN_DYNAMIC_RANGE=24,HybridBinarizer}(common_GlobalHistogramBinarizer);const core_LuminanceSource=function(){function LuminanceSource(width,height){this.width=width,this.height=height}return LuminanceSource.prototype.getWidth=function(){return this.width},LuminanceSource.prototype.getHeight=function(){return this.height},LuminanceSource.prototype.isCropSupported=function(){return!1},LuminanceSource.prototype.crop=function(left,top,width,height){throw new core_UnsupportedOperationException("This luminance source does not support cropping.")},LuminanceSource.prototype.isRotateSupported=function(){return!1},LuminanceSource.prototype.rotateCounterClockwise=function(){throw new core_UnsupportedOperationException("This luminance source does not support rotation by 90 degrees.")},LuminanceSource.prototype.rotateCounterClockwise45=function(){throw new core_UnsupportedOperationException("This luminance source does not support rotation by 45 degrees.")},LuminanceSource.prototype.toString=function(){for(var row=new Uint8ClampedArray(this.width),result=new util_StringBuilder,y=0;y<this.height;y++){for(var sourceRow=this.getRow(y,row),x=0;x<this.width;x++){var luminance=255&sourceRow[x],c=void 0;c=luminance<64?"#":luminance<128?"+":luminance<192?".":" ",result.append(c)}result.append("\n")}return result.toString()},LuminanceSource}();var InvertedLuminanceSource_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_InvertedLuminanceSource=function(_super){function InvertedLuminanceSource(delegate){var _this=_super.call(this,delegate.getWidth(),delegate.getHeight())||this;return _this.delegate=delegate,_this}return InvertedLuminanceSource_extends(InvertedLuminanceSource,_super),InvertedLuminanceSource.prototype.getRow=function(y,row){for(var sourceRow=this.delegate.getRow(y,row),width=this.getWidth(),i=0;i<width;i++)sourceRow[i]=255-(255&sourceRow[i]);return sourceRow},InvertedLuminanceSource.prototype.getMatrix=function(){for(var matrix=this.delegate.getMatrix(),length=this.getWidth()*this.getHeight(),invertedMatrix=new Uint8ClampedArray(length),i=0;i<length;i++)invertedMatrix[i]=255-(255&matrix[i]);return invertedMatrix},InvertedLuminanceSource.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},InvertedLuminanceSource.prototype.crop=function(left,top,width,height){return new InvertedLuminanceSource(this.delegate.crop(left,top,width,height))},InvertedLuminanceSource.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},InvertedLuminanceSource.prototype.invert=function(){return this.delegate},InvertedLuminanceSource.prototype.rotateCounterClockwise=function(){return new InvertedLuminanceSource(this.delegate.rotateCounterClockwise())},InvertedLuminanceSource.prototype.rotateCounterClockwise45=function(){return new InvertedLuminanceSource(this.delegate.rotateCounterClockwise45())},InvertedLuminanceSource}(core_LuminanceSource);var HTMLCanvasElementLuminanceSource_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),HTMLCanvasElementLuminanceSource=function(_super){function HTMLCanvasElementLuminanceSource(canvas,doAutoInvert){void 0===doAutoInvert&&(doAutoInvert=!1);var _this=_super.call(this,canvas.width,canvas.height)||this;return _this.canvas=canvas,_this.tempCanvasElement=null,_this.buffer=HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(canvas,doAutoInvert),_this}return HTMLCanvasElementLuminanceSource_extends(HTMLCanvasElementLuminanceSource,_super),HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData=function(canvas,doAutoInvert){void 0===doAutoInvert&&(doAutoInvert=!1);var imageData=canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height);return HTMLCanvasElementLuminanceSource.toGrayscaleBuffer(imageData.data,canvas.width,canvas.height,doAutoInvert)},HTMLCanvasElementLuminanceSource.toGrayscaleBuffer=function(imageBuffer,width,height,doAutoInvert){void 0===doAutoInvert&&(doAutoInvert=!1);var grayscaleBuffer=new Uint8ClampedArray(width*height);if(HTMLCanvasElementLuminanceSource.FRAME_INDEX=!HTMLCanvasElementLuminanceSource.FRAME_INDEX,HTMLCanvasElementLuminanceSource.FRAME_INDEX||!doAutoInvert)for(var i=0,j=0,length_1=imageBuffer.length;i<length_1;i+=4,j++){var gray=void 0;if(0===imageBuffer[i+3])gray=255;else gray=306*imageBuffer[i]+601*imageBuffer[i+1]+117*imageBuffer[i+2]+512>>10;grayscaleBuffer[j]=gray}else{i=0,j=0;for(var length_2=imageBuffer.length;i<length_2;i+=4,j++){gray=void 0;if(0===imageBuffer[i+3])gray=255;else gray=306*imageBuffer[i]+601*imageBuffer[i+1]+117*imageBuffer[i+2]+512>>10;grayscaleBuffer[j]=255-gray}}return grayscaleBuffer},HTMLCanvasElementLuminanceSource.prototype.getRow=function(y,row){if(y<0||y>=this.getHeight())throw new core_IllegalArgumentException("Requested row is outside the image: "+y);var width=this.getWidth(),start=y*width;return null===row?row=this.buffer.slice(start,start+width):(row.length<width&&(row=new Uint8ClampedArray(width)),row.set(this.buffer.slice(start,start+width))),row},HTMLCanvasElementLuminanceSource.prototype.getMatrix=function(){return this.buffer},HTMLCanvasElementLuminanceSource.prototype.isCropSupported=function(){return!0},HTMLCanvasElementLuminanceSource.prototype.crop=function(left,top,width,height){return _super.prototype.crop.call(this,left,top,width,height),this},HTMLCanvasElementLuminanceSource.prototype.isRotateSupported=function(){return!0},HTMLCanvasElementLuminanceSource.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},HTMLCanvasElementLuminanceSource.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},HTMLCanvasElementLuminanceSource.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var tempCanvasElement=this.canvas.ownerDocument.createElement("canvas");tempCanvasElement.width=this.canvas.width,tempCanvasElement.height=this.canvas.height,this.tempCanvasElement=tempCanvasElement}return this.tempCanvasElement},HTMLCanvasElementLuminanceSource.prototype.rotate=function(angle){var tempCanvasElement=this.getTempCanvasElement(),tempContext=tempCanvasElement.getContext("2d"),angleRadians=angle*HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS,width=this.canvas.width,height=this.canvas.height,newWidth=Math.ceil(Math.abs(Math.cos(angleRadians))*width+Math.abs(Math.sin(angleRadians))*height),newHeight=Math.ceil(Math.abs(Math.sin(angleRadians))*width+Math.abs(Math.cos(angleRadians))*height);return tempCanvasElement.width=newWidth,tempCanvasElement.height=newHeight,tempContext.translate(newWidth/2,newHeight/2),tempContext.rotate(angleRadians),tempContext.drawImage(this.canvas,width/-2,height/-2),this.buffer=HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(tempCanvasElement),this},HTMLCanvasElementLuminanceSource.prototype.invert=function(){return new core_InvertedLuminanceSource(this)},HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS=Math.PI/180,HTMLCanvasElementLuminanceSource.FRAME_INDEX=!0,HTMLCanvasElementLuminanceSource}(core_LuminanceSource),VideoInputDevice=function(){function VideoInputDevice(deviceId,label,groupId){this.deviceId=deviceId,this.label=label,this.kind="videoinput",this.groupId=groupId||void 0}return VideoInputDevice.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},VideoInputDevice}(),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},BrowserCodeReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},BrowserCodeReader=function(){function BrowserCodeReader(reader,timeBetweenScansMillis,_hints){void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500),this.reader=reader,this.timeBetweenScansMillis=timeBetweenScansMillis,this._hints=_hints,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(BrowserCodeReader.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(BrowserCodeReader.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(BrowserCodeReader.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(BrowserCodeReader.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(millis){this._timeBetweenDecodingAttempts=millis<0?0:millis},enumerable:!1,configurable:!0}),Object.defineProperty(BrowserCodeReader.prototype,"hints",{get:function(){return this._hints},set:function(hints){this._hints=hints||null},enumerable:!1,configurable:!0}),BrowserCodeReader.prototype.listVideoInputDevices=function(){return __awaiter(this,void 0,void 0,function(){var devices,videoDevices,devices_1,devices_1_1,device,kind,deviceId,label,groupId,videoDevice,e_1,_a;return __generator(this,function(_b){switch(_b.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:devices=_b.sent(),videoDevices=[];try{for(devices_1=BrowserCodeReader_values(devices),devices_1_1=devices_1.next();!devices_1_1.done;devices_1_1=devices_1.next())device=devices_1_1.value,"videoinput"===(kind="video"===device.kind?"videoinput":device.kind)&&(deviceId=device.deviceId||device.id,label=device.label||"Video device "+(videoDevices.length+1),groupId=device.groupId,videoDevice={deviceId,label,kind,groupId},videoDevices.push(videoDevice))}catch(e_1_1){e_1={error:e_1_1}}finally{try{devices_1_1&&!devices_1_1.done&&(_a=devices_1.return)&&_a.call(devices_1)}finally{if(e_1)throw e_1.error}}return[2,videoDevices]}})})},BrowserCodeReader.prototype.getVideoInputDevices=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,_a.sent().map(function(d){return new VideoInputDevice(d.deviceId,d.label)})]}})})},BrowserCodeReader.prototype.findDeviceById=function(deviceId){return __awaiter(this,void 0,void 0,function(){var devices;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(devices=_a.sent())?[2,devices.find(function(x){return x.deviceId===deviceId})]:[2,null]}})})},BrowserCodeReader.prototype.decodeFromInputVideoDevice=function(deviceId,videoSource){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.decodeOnceFromVideoDevice(deviceId,videoSource)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeOnceFromVideoDevice=function(deviceId,videoSource){return __awaiter(this,void 0,void 0,function(){var constraints;return __generator(this,function(_a){switch(_a.label){case 0:return this.reset(),constraints={video:deviceId?{deviceId:{exact:deviceId}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(constraints,videoSource)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeOnceFromConstraints=function(constraints,videoSource){return __awaiter(this,void 0,void 0,function(){var stream;return __generator(this,function(_a){switch(_a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(constraints)];case 1:return stream=_a.sent(),[4,this.decodeOnceFromStream(stream,videoSource)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeOnceFromStream=function(stream,videoSource){return __awaiter(this,void 0,void 0,function(){var video;return __generator(this,function(_a){switch(_a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(stream,videoSource)];case 1:return video=_a.sent(),[4,this.decodeOnce(video)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeFromInputVideoDeviceContinuously=function(deviceId,videoSource,callbackFn){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.decodeFromVideoDevice(deviceId,videoSource,callbackFn)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeFromVideoDevice=function(deviceId,videoSource,callbackFn){return __awaiter(this,void 0,void 0,function(){var constraints;return __generator(this,function(_a){switch(_a.label){case 0:return constraints={video:deviceId?{deviceId:{exact:deviceId}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(constraints,videoSource,callbackFn)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeFromConstraints=function(constraints,videoSource,callbackFn){return __awaiter(this,void 0,void 0,function(){var stream;return __generator(this,function(_a){switch(_a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(constraints)];case 1:return stream=_a.sent(),[4,this.decodeFromStream(stream,videoSource,callbackFn)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeFromStream=function(stream,videoSource,callbackFn){return __awaiter(this,void 0,void 0,function(){var video;return __generator(this,function(_a){switch(_a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(stream,videoSource)];case 1:return video=_a.sent(),[4,this.decodeContinuously(video,callbackFn)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},BrowserCodeReader.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},BrowserCodeReader.prototype.attachStreamToVideo=function(stream,videoSource){return __awaiter(this,void 0,void 0,function(){var videoElement;return __generator(this,function(_a){switch(_a.label){case 0:return videoElement=this.prepareVideoElement(videoSource),this.addVideoSource(videoElement,stream),this.videoElement=videoElement,this.stream=stream,[4,this.playVideoOnLoadAsync(videoElement)];case 1:return _a.sent(),[2,videoElement]}})})},BrowserCodeReader.prototype.playVideoOnLoadAsync=function(videoElement){var _this=this;return new Promise(function(resolve,reject){return _this.playVideoOnLoad(videoElement,function(){return resolve()})})},BrowserCodeReader.prototype.playVideoOnLoad=function(element,callbackFn){var _this=this;this.videoEndedListener=function(){return _this.stopStreams()},this.videoCanPlayListener=function(){return _this.tryPlayVideo(element)},element.addEventListener("ended",this.videoEndedListener),element.addEventListener("canplay",this.videoCanPlayListener),element.addEventListener("playing",callbackFn),this.tryPlayVideo(element)},BrowserCodeReader.prototype.isVideoPlaying=function(video){return video.currentTime>0&&!video.paused&&!video.ended&&video.readyState>2},BrowserCodeReader.prototype.tryPlayVideo=function(videoElement){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_b){switch(_b.label){case 0:if(this.isVideoPlaying(videoElement))return console.warn("Trying to play video that is already playing."),[2];_b.label=1;case 1:return _b.trys.push([1,3,,4]),[4,videoElement.play()];case 2:return _b.sent(),[3,4];case 3:return _b.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},BrowserCodeReader.prototype.getMediaElement=function(mediaElementId,type){var mediaElement=document.getElementById(mediaElementId);if(!mediaElement)throw new core_ArgumentException("element with id '"+mediaElementId+"' not found");if(mediaElement.nodeName.toLowerCase()!==type.toLowerCase())throw new core_ArgumentException("element with id '"+mediaElementId+"' must be an "+type+" element");return mediaElement},BrowserCodeReader.prototype.decodeFromImage=function(source,url){if(!source&&!url)throw new core_ArgumentException("either imageElement with a src set or an url must be provided");return url&&!source?this.decodeFromImageUrl(url):this.decodeFromImageElement(source)},BrowserCodeReader.prototype.decodeFromVideo=function(source,url){if(!source&&!url)throw new core_ArgumentException("Either an element with a src set or an URL must be provided");return url&&!source?this.decodeFromVideoUrl(url):this.decodeFromVideoElement(source)},BrowserCodeReader.prototype.decodeFromVideoContinuously=function(source,url,callbackFn){if(void 0===source&&void 0===url)throw new core_ArgumentException("Either an element with a src set or an URL must be provided");return url&&!source?this.decodeFromVideoUrlContinuously(url,callbackFn):this.decodeFromVideoElementContinuously(source,callbackFn)},BrowserCodeReader.prototype.decodeFromImageElement=function(source){if(!source)throw new core_ArgumentException("An image element must be provided.");this.reset();var element=this.prepareImageElement(source);return this.imageElement=element,this.isImageLoaded(element)?this.decodeOnce(element,!1,!0):this._decodeOnLoadImage(element)},BrowserCodeReader.prototype.decodeFromVideoElement=function(source){var element=this._decodeFromVideoElementSetup(source);return this._decodeOnLoadVideo(element)},BrowserCodeReader.prototype.decodeFromVideoElementContinuously=function(source,callbackFn){var element=this._decodeFromVideoElementSetup(source);return this._decodeOnLoadVideoContinuously(element,callbackFn)},BrowserCodeReader.prototype._decodeFromVideoElementSetup=function(source){if(!source)throw new core_ArgumentException("A video element must be provided.");this.reset();var element=this.prepareVideoElement(source);return this.videoElement=element,element},BrowserCodeReader.prototype.decodeFromImageUrl=function(url){if(!url)throw new core_ArgumentException("An URL must be provided.");this.reset();var element=this.prepareImageElement();this.imageElement=element;var decodeTask=this._decodeOnLoadImage(element);return element.src=url,decodeTask},BrowserCodeReader.prototype.decodeFromVideoUrl=function(url){if(!url)throw new core_ArgumentException("An URL must be provided.");this.reset();var element=this.prepareVideoElement(),decodeTask=this.decodeFromVideoElement(element);return element.src=url,decodeTask},BrowserCodeReader.prototype.decodeFromVideoUrlContinuously=function(url,callbackFn){if(!url)throw new core_ArgumentException("An URL must be provided.");this.reset();var element=this.prepareVideoElement(),decodeTask=this.decodeFromVideoElementContinuously(element,callbackFn);return element.src=url,decodeTask},BrowserCodeReader.prototype._decodeOnLoadImage=function(element){var _this=this;return new Promise(function(resolve,reject){_this.imageLoadedListener=function(){return _this.decodeOnce(element,!1,!0).then(resolve,reject)},element.addEventListener("load",_this.imageLoadedListener)})},BrowserCodeReader.prototype._decodeOnLoadVideo=function(videoElement){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.playVideoOnLoadAsync(videoElement)];case 1:return _a.sent(),[4,this.decodeOnce(videoElement)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype._decodeOnLoadVideoContinuously=function(videoElement,callbackFn){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.playVideoOnLoadAsync(videoElement)];case 1:return _a.sent(),this.decodeContinuously(videoElement,callbackFn),[2]}})})},BrowserCodeReader.prototype.isImageLoaded=function(img){return!!img.complete&&0!==img.naturalWidth},BrowserCodeReader.prototype.prepareImageElement=function(imageSource){var imageElement;return void 0===imageSource&&((imageElement=document.createElement("img")).width=200,imageElement.height=200),"string"==typeof imageSource&&(imageElement=this.getMediaElement(imageSource,"img")),imageSource instanceof HTMLImageElement&&(imageElement=imageSource),imageElement},BrowserCodeReader.prototype.prepareVideoElement=function(videoSource){var videoElement;return videoSource||"undefined"==typeof document||((videoElement=document.createElement("video")).width=200,videoElement.height=200),"string"==typeof videoSource&&(videoElement=this.getMediaElement(videoSource,"video")),videoSource instanceof HTMLVideoElement&&(videoElement=videoSource),videoElement.setAttribute("autoplay","true"),videoElement.setAttribute("muted","true"),videoElement.setAttribute("playsinline","true"),videoElement},BrowserCodeReader.prototype.decodeOnce=function(element,retryIfNotFound,retryIfChecksumOrFormatError){var _this=this;void 0===retryIfNotFound&&(retryIfNotFound=!0),void 0===retryIfChecksumOrFormatError&&(retryIfChecksumOrFormatError=!0),this._stopAsyncDecode=!1;var loop=function(resolve,reject){if(_this._stopAsyncDecode)return reject(new core_NotFoundException("Video stream has ended before any code could be detected.")),void(_this._stopAsyncDecode=void 0);try{resolve(_this.decode(element))}catch(e){if(retryIfNotFound&&e instanceof core_NotFoundException||(e instanceof core_ChecksumException||e instanceof core_FormatException)&&retryIfChecksumOrFormatError)return setTimeout(loop,_this._timeBetweenDecodingAttempts,resolve,reject);reject(e)}};return new Promise(function(resolve,reject){return loop(resolve,reject)})},BrowserCodeReader.prototype.decodeContinuously=function(element,callbackFn){var _this=this;this._stopContinuousDecode=!1;var loop=function(){if(_this._stopContinuousDecode)_this._stopContinuousDecode=void 0;else try{var result=_this.decode(element);callbackFn(result,null),setTimeout(loop,_this.timeBetweenScansMillis)}catch(e){callbackFn(null,e),(e instanceof core_ChecksumException||e instanceof core_FormatException||e instanceof core_NotFoundException)&&setTimeout(loop,_this._timeBetweenDecodingAttempts)}};loop()},BrowserCodeReader.prototype.decode=function(element){var binaryBitmap=this.createBinaryBitmap(element);return this.decodeBitmap(binaryBitmap)},BrowserCodeReader.prototype.createBinaryBitmap=function(mediaElement){this.getCaptureCanvasContext(mediaElement);var doAutoInvert=!1;mediaElement instanceof HTMLVideoElement?(this.drawFrameOnCanvas(mediaElement),doAutoInvert=!0):this.drawImageOnCanvas(mediaElement);var canvas=this.getCaptureCanvas(mediaElement),luminanceSource=new HTMLCanvasElementLuminanceSource(canvas,doAutoInvert),hybridBinarizer=new common_HybridBinarizer(luminanceSource);return new core_BinaryBitmap(hybridBinarizer)},BrowserCodeReader.prototype.getCaptureCanvasContext=function(mediaElement){if(!this.captureCanvasContext){var elem=this.getCaptureCanvas(mediaElement),ctx=void 0;try{ctx=elem.getContext("2d",{willReadFrequently:!0})}catch(e){ctx=elem.getContext("2d")}this.captureCanvasContext=ctx}return this.captureCanvasContext},BrowserCodeReader.prototype.getCaptureCanvas=function(mediaElement){if(!this.captureCanvas){var elem=this.createCaptureCanvas(mediaElement);this.captureCanvas=elem}return this.captureCanvas},BrowserCodeReader.prototype.drawFrameOnCanvas=function(srcElement,dimensions,canvasElementContext){void 0===dimensions&&(dimensions={sx:0,sy:0,sWidth:srcElement.videoWidth,sHeight:srcElement.videoHeight,dx:0,dy:0,dWidth:srcElement.videoWidth,dHeight:srcElement.videoHeight}),void 0===canvasElementContext&&(canvasElementContext=this.captureCanvasContext),canvasElementContext.drawImage(srcElement,dimensions.sx,dimensions.sy,dimensions.sWidth,dimensions.sHeight,dimensions.dx,dimensions.dy,dimensions.dWidth,dimensions.dHeight)},BrowserCodeReader.prototype.drawImageOnCanvas=function(srcElement,dimensions,canvasElementContext){void 0===dimensions&&(dimensions={sx:0,sy:0,sWidth:srcElement.naturalWidth,sHeight:srcElement.naturalHeight,dx:0,dy:0,dWidth:srcElement.naturalWidth,dHeight:srcElement.naturalHeight}),void 0===canvasElementContext&&(canvasElementContext=this.captureCanvasContext),canvasElementContext.drawImage(srcElement,dimensions.sx,dimensions.sy,dimensions.sWidth,dimensions.sHeight,dimensions.dx,dimensions.dy,dimensions.dWidth,dimensions.dHeight)},BrowserCodeReader.prototype.decodeBitmap=function(binaryBitmap){return this.reader.decode(binaryBitmap,this._hints)},BrowserCodeReader.prototype.createCaptureCanvas=function(mediaElement){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var width,height,canvasElement=document.createElement("canvas");return void 0!==mediaElement&&(mediaElement instanceof HTMLVideoElement?(width=mediaElement.videoWidth,height=mediaElement.videoHeight):mediaElement instanceof HTMLImageElement&&(width=mediaElement.naturalWidth||mediaElement.width,height=mediaElement.naturalHeight||mediaElement.height)),canvasElement.style.width=width+"px",canvasElement.style.height=height+"px",canvasElement.width=width,canvasElement.height=height,canvasElement},BrowserCodeReader.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},BrowserCodeReader.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},BrowserCodeReader.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},BrowserCodeReader.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},BrowserCodeReader.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},BrowserCodeReader.prototype.addVideoSource=function(videoElement,stream){try{videoElement.srcObject=stream}catch(err){videoElement.src=URL.createObjectURL(stream)}},BrowserCodeReader.prototype.cleanVideoSource=function(videoElement){try{videoElement.srcObject=null}catch(err){videoElement.src=""}this.videoElement.removeAttribute("src")},BrowserCodeReader}();const core_Result=function(){function Result(text,rawBytes,numBits,resultPoints,format,timestamp){void 0===numBits&&(numBits=null==rawBytes?0:8*rawBytes.length),void 0===timestamp&&(timestamp=util_System.currentTimeMillis()),this.text=text,this.rawBytes=rawBytes,this.numBits=numBits,this.resultPoints=resultPoints,this.format=format,this.timestamp=timestamp,this.text=text,this.rawBytes=rawBytes,this.numBits=null==numBits?null==rawBytes?0:8*rawBytes.length:numBits,this.resultPoints=resultPoints,this.format=format,this.resultMetadata=null,this.timestamp=null==timestamp?util_System.currentTimeMillis():timestamp}return Result.prototype.getText=function(){return this.text},Result.prototype.getRawBytes=function(){return this.rawBytes},Result.prototype.getNumBits=function(){return this.numBits},Result.prototype.getResultPoints=function(){return this.resultPoints},Result.prototype.getBarcodeFormat=function(){return this.format},Result.prototype.getResultMetadata=function(){return this.resultMetadata},Result.prototype.putMetadata=function(type,value){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(type,value)},Result.prototype.putAllMetadata=function(metadata){null!==metadata&&(null===this.resultMetadata?this.resultMetadata=metadata:this.resultMetadata=new Map(metadata))},Result.prototype.addResultPoints=function(newPoints){var oldPoints=this.resultPoints;if(null===oldPoints)this.resultPoints=newPoints;else if(null!==newPoints&&newPoints.length>0){var allPoints=new Array(oldPoints.length+newPoints.length);util_System.arraycopy(oldPoints,0,allPoints,0,oldPoints.length),util_System.arraycopy(newPoints,0,allPoints,oldPoints.length,newPoints.length),this.resultPoints=allPoints}},Result.prototype.getTimestamp=function(){return this.timestamp},Result.prototype.toString=function(){return this.text},Result}();var BarcodeFormat;!function(BarcodeFormat){BarcodeFormat[BarcodeFormat.AZTEC=0]="AZTEC",BarcodeFormat[BarcodeFormat.CODABAR=1]="CODABAR",BarcodeFormat[BarcodeFormat.CODE_39=2]="CODE_39",BarcodeFormat[BarcodeFormat.CODE_93=3]="CODE_93",BarcodeFormat[BarcodeFormat.CODE_128=4]="CODE_128",BarcodeFormat[BarcodeFormat.DATA_MATRIX=5]="DATA_MATRIX",BarcodeFormat[BarcodeFormat.EAN_8=6]="EAN_8",BarcodeFormat[BarcodeFormat.EAN_13=7]="EAN_13",BarcodeFormat[BarcodeFormat.ITF=8]="ITF",BarcodeFormat[BarcodeFormat.MAXICODE=9]="MAXICODE",BarcodeFormat[BarcodeFormat.PDF_417=10]="PDF_417",BarcodeFormat[BarcodeFormat.QR_CODE=11]="QR_CODE",BarcodeFormat[BarcodeFormat.RSS_14=12]="RSS_14",BarcodeFormat[BarcodeFormat.RSS_EXPANDED=13]="RSS_EXPANDED",BarcodeFormat[BarcodeFormat.UPC_A=14]="UPC_A",BarcodeFormat[BarcodeFormat.UPC_E=15]="UPC_E",BarcodeFormat[BarcodeFormat.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(BarcodeFormat||(BarcodeFormat={}));const core_BarcodeFormat=BarcodeFormat;var ResultMetadataType;!function(ResultMetadataType){ResultMetadataType[ResultMetadataType.OTHER=0]="OTHER",ResultMetadataType[ResultMetadataType.ORIENTATION=1]="ORIENTATION",ResultMetadataType[ResultMetadataType.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ResultMetadataType[ResultMetadataType.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ResultMetadataType[ResultMetadataType.ISSUE_NUMBER=4]="ISSUE_NUMBER",ResultMetadataType[ResultMetadataType.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ResultMetadataType[ResultMetadataType.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ResultMetadataType[ResultMetadataType.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ResultMetadataType[ResultMetadataType.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ResultMetadataType[ResultMetadataType.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ResultMetadataType[ResultMetadataType.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(ResultMetadataType||(ResultMetadataType={}));const core_ResultMetadataType=ResultMetadataType;const common_DecoderResult=function(){function DecoderResult(rawBytes,text,byteSegments,ecLevel,structuredAppendSequenceNumber,structuredAppendParity){void 0===structuredAppendSequenceNumber&&(structuredAppendSequenceNumber=-1),void 0===structuredAppendParity&&(structuredAppendParity=-1),this.rawBytes=rawBytes,this.text=text,this.byteSegments=byteSegments,this.ecLevel=ecLevel,this.structuredAppendSequenceNumber=structuredAppendSequenceNumber,this.structuredAppendParity=structuredAppendParity,this.numBits=null==rawBytes?0:8*rawBytes.length}return DecoderResult.prototype.getRawBytes=function(){return this.rawBytes},DecoderResult.prototype.getNumBits=function(){return this.numBits},DecoderResult.prototype.setNumBits=function(numBits){this.numBits=numBits},DecoderResult.prototype.getText=function(){return this.text},DecoderResult.prototype.getByteSegments=function(){return this.byteSegments},DecoderResult.prototype.getECLevel=function(){return this.ecLevel},DecoderResult.prototype.getErrorsCorrected=function(){return this.errorsCorrected},DecoderResult.prototype.setErrorsCorrected=function(errorsCorrected){this.errorsCorrected=errorsCorrected},DecoderResult.prototype.getErasures=function(){return this.erasures},DecoderResult.prototype.setErasures=function(erasures){this.erasures=erasures},DecoderResult.prototype.getOther=function(){return this.other},DecoderResult.prototype.setOther=function(other){this.other=other},DecoderResult.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},DecoderResult.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},DecoderResult.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},DecoderResult}();const reedsolomon_AbstractGenericGF=function(){function AbstractGenericGF(){}return AbstractGenericGF.prototype.exp=function(a){return this.expTable[a]},AbstractGenericGF.prototype.log=function(a){if(0===a)throw new core_IllegalArgumentException;return this.logTable[a]},AbstractGenericGF.addOrSubtract=function(a,b){return a^b},AbstractGenericGF}();const reedsolomon_GenericGFPoly=function(){function GenericGFPoly(field,coefficients){if(0===coefficients.length)throw new core_IllegalArgumentException;this.field=field;var coefficientsLength=coefficients.length;if(coefficientsLength>1&&0===coefficients[0]){for(var firstNonZero=1;firstNonZero<coefficientsLength&&0===coefficients[firstNonZero];)firstNonZero++;firstNonZero===coefficientsLength?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(coefficientsLength-firstNonZero),util_System.arraycopy(coefficients,firstNonZero,this.coefficients,0,this.coefficients.length))}else this.coefficients=coefficients}return GenericGFPoly.prototype.getCoefficients=function(){return this.coefficients},GenericGFPoly.prototype.getDegree=function(){return this.coefficients.length-1},GenericGFPoly.prototype.isZero=function(){return 0===this.coefficients[0]},GenericGFPoly.prototype.getCoefficient=function(degree){return this.coefficients[this.coefficients.length-1-degree]},GenericGFPoly.prototype.evaluateAt=function(a){if(0===a)return this.getCoefficient(0);var result,coefficients=this.coefficients;if(1===a){result=0;for(var i=0,length_1=coefficients.length;i!==length_1;i++){var coefficient=coefficients[i];result=reedsolomon_AbstractGenericGF.addOrSubtract(result,coefficient)}return result}result=coefficients[0];var size=coefficients.length,field=this.field;for(i=1;i<size;i++)result=reedsolomon_AbstractGenericGF.addOrSubtract(field.multiply(a,result),coefficients[i]);return result},GenericGFPoly.prototype.addOrSubtract=function(other){if(!this.field.equals(other.field))throw new core_IllegalArgumentException("GenericGFPolys do not have same GenericGF field");if(this.isZero())return other;if(other.isZero())return this;var smallerCoefficients=this.coefficients,largerCoefficients=other.coefficients;if(smallerCoefficients.length>largerCoefficients.length){var temp=smallerCoefficients;smallerCoefficients=largerCoefficients,largerCoefficients=temp}var sumDiff=new Int32Array(largerCoefficients.length),lengthDiff=largerCoefficients.length-smallerCoefficients.length;util_System.arraycopy(largerCoefficients,0,sumDiff,0,lengthDiff);for(var i=lengthDiff;i<largerCoefficients.length;i++)sumDiff[i]=reedsolomon_AbstractGenericGF.addOrSubtract(smallerCoefficients[i-lengthDiff],largerCoefficients[i]);return new GenericGFPoly(this.field,sumDiff)},GenericGFPoly.prototype.multiply=function(other){if(!this.field.equals(other.field))throw new core_IllegalArgumentException("GenericGFPolys do not have same GenericGF field");if(this.isZero()||other.isZero())return this.field.getZero();for(var aCoefficients=this.coefficients,aLength=aCoefficients.length,bCoefficients=other.coefficients,bLength=bCoefficients.length,product=new Int32Array(aLength+bLength-1),field=this.field,i=0;i<aLength;i++)for(var aCoeff=aCoefficients[i],j=0;j<bLength;j++)product[i+j]=reedsolomon_AbstractGenericGF.addOrSubtract(product[i+j],field.multiply(aCoeff,bCoefficients[j]));return new GenericGFPoly(field,product)},GenericGFPoly.prototype.multiplyScalar=function(scalar){if(0===scalar)return this.field.getZero();if(1===scalar)return this;for(var size=this.coefficients.length,field=this.field,product=new Int32Array(size),coefficients=this.coefficients,i=0;i<size;i++)product[i]=field.multiply(coefficients[i],scalar);return new GenericGFPoly(field,product)},GenericGFPoly.prototype.multiplyByMonomial=function(degree,coefficient){if(degree<0)throw new core_IllegalArgumentException;if(0===coefficient)return this.field.getZero();for(var coefficients=this.coefficients,size=coefficients.length,product=new Int32Array(size+degree),field=this.field,i=0;i<size;i++)product[i]=field.multiply(coefficients[i],coefficient);return new GenericGFPoly(field,product)},GenericGFPoly.prototype.divide=function(other){if(!this.field.equals(other.field))throw new core_IllegalArgumentException("GenericGFPolys do not have same GenericGF field");if(other.isZero())throw new core_IllegalArgumentException("Divide by 0");for(var field=this.field,quotient=field.getZero(),remainder=this,denominatorLeadingTerm=other.getCoefficient(other.getDegree()),inverseDenominatorLeadingTerm=field.inverse(denominatorLeadingTerm);remainder.getDegree()>=other.getDegree()&&!remainder.isZero();){var degreeDifference=remainder.getDegree()-other.getDegree(),scale=field.multiply(remainder.getCoefficient(remainder.getDegree()),inverseDenominatorLeadingTerm),term=other.multiplyByMonomial(degreeDifference,scale),iterationQuotient=field.buildMonomial(degreeDifference,scale);quotient=quotient.addOrSubtract(iterationQuotient),remainder=remainder.addOrSubtract(term)}return[quotient,remainder]},GenericGFPoly.prototype.toString=function(){for(var result="",degree=this.getDegree();degree>=0;degree--){var coefficient=this.getCoefficient(degree);if(0!==coefficient){if(coefficient<0?(result+=" - ",coefficient=-coefficient):result.length>0&&(result+=" + "),0===degree||1!==coefficient){var alphaPower=this.field.log(coefficient);0===alphaPower?result+="1":1===alphaPower?result+="a":(result+="a^",result+=alphaPower)}0!==degree&&(1===degree?result+="x":(result+="x^",result+=degree))}}return result},GenericGFPoly}();var ArithmeticException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_ArithmeticException=function(_super){function ArithmeticException(){return null!==_super&&_super.apply(this,arguments)||this}return ArithmeticException_extends(ArithmeticException,_super),ArithmeticException.kind="ArithmeticException",ArithmeticException}(core_Exception);var GenericGF_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const reedsolomon_GenericGF=function(_super){function GenericGF(primitive,size,generatorBase){var _this=_super.call(this)||this;_this.primitive=primitive,_this.size=size,_this.generatorBase=generatorBase;for(var expTable=new Int32Array(size),x=1,i=0;i<size;i++)expTable[i]=x,(x*=2)>=size&&(x^=primitive,x&=size-1);_this.expTable=expTable;var logTable=new Int32Array(size);for(i=0;i<size-1;i++)logTable[expTable[i]]=i;return _this.logTable=logTable,_this.zero=new reedsolomon_GenericGFPoly(_this,Int32Array.from([0])),_this.one=new reedsolomon_GenericGFPoly(_this,Int32Array.from([1])),_this}return GenericGF_extends(GenericGF,_super),GenericGF.prototype.getZero=function(){return this.zero},GenericGF.prototype.getOne=function(){return this.one},GenericGF.prototype.buildMonomial=function(degree,coefficient){if(degree<0)throw new core_IllegalArgumentException;if(0===coefficient)return this.zero;var coefficients=new Int32Array(degree+1);return coefficients[0]=coefficient,new reedsolomon_GenericGFPoly(this,coefficients)},GenericGF.prototype.inverse=function(a){if(0===a)throw new core_ArithmeticException;return this.expTable[this.size-this.logTable[a]-1]},GenericGF.prototype.multiply=function(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.size-1)]},GenericGF.prototype.getSize=function(){return this.size},GenericGF.prototype.getGeneratorBase=function(){return this.generatorBase},GenericGF.prototype.toString=function(){return"GF(0x"+util_Integer.toHexString(this.primitive)+","+this.size+")"},GenericGF.prototype.equals=function(o){return o===this},GenericGF.AZTEC_DATA_12=new GenericGF(4201,4096,1),GenericGF.AZTEC_DATA_10=new GenericGF(1033,1024,1),GenericGF.AZTEC_DATA_6=new GenericGF(67,64,1),GenericGF.AZTEC_PARAM=new GenericGF(19,16,1),GenericGF.QR_CODE_FIELD_256=new GenericGF(285,256,0),GenericGF.DATA_MATRIX_FIELD_256=new GenericGF(301,256,1),GenericGF.AZTEC_DATA_8=GenericGF.DATA_MATRIX_FIELD_256,GenericGF.MAXICODE_FIELD_64=GenericGF.AZTEC_DATA_6,GenericGF}(reedsolomon_AbstractGenericGF);var ReedSolomonException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_ReedSolomonException=function(_super){function ReedSolomonException(){return null!==_super&&_super.apply(this,arguments)||this}return ReedSolomonException_extends(ReedSolomonException,_super),ReedSolomonException.kind="ReedSolomonException",ReedSolomonException}(core_Exception);var IllegalStateException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_IllegalStateException=function(_super){function IllegalStateException(){return null!==_super&&_super.apply(this,arguments)||this}return IllegalStateException_extends(IllegalStateException,_super),IllegalStateException.kind="IllegalStateException",IllegalStateException}(core_Exception);const reedsolomon_ReedSolomonDecoder=function(){function ReedSolomonDecoder(field){this.field=field}return ReedSolomonDecoder.prototype.decode=function(received,twoS){for(var field=this.field,poly=new reedsolomon_GenericGFPoly(field,received),syndromeCoefficients=new Int32Array(twoS),noError=!0,i=0;i<twoS;i++){var evalResult=poly.evaluateAt(field.exp(i+field.getGeneratorBase()));syndromeCoefficients[syndromeCoefficients.length-1-i]=evalResult,0!==evalResult&&(noError=!1)}if(!noError){var syndrome=new reedsolomon_GenericGFPoly(field,syndromeCoefficients),sigmaOmega=this.runEuclideanAlgorithm(field.buildMonomial(twoS,1),syndrome,twoS),sigma=sigmaOmega[0],omega=sigmaOmega[1],errorLocations=this.findErrorLocations(sigma),errorMagnitudes=this.findErrorMagnitudes(omega,errorLocations);for(i=0;i<errorLocations.length;i++){var position=received.length-1-field.log(errorLocations[i]);if(position<0)throw new core_ReedSolomonException("Bad error location");received[position]=reedsolomon_GenericGF.addOrSubtract(received[position],errorMagnitudes[i])}}},ReedSolomonDecoder.prototype.runEuclideanAlgorithm=function(a,b,R){if(a.getDegree()<b.getDegree()){var temp=a;a=b,b=temp}for(var field=this.field,rLast=a,r=b,tLast=field.getZero(),t=field.getOne();r.getDegree()>=(R/2|0);){var rLastLast=rLast,tLastLast=tLast;if(tLast=t,(rLast=r).isZero())throw new core_ReedSolomonException("r_{i-1} was zero");r=rLastLast;for(var q=field.getZero(),denominatorLeadingTerm=rLast.getCoefficient(rLast.getDegree()),dltInverse=field.inverse(denominatorLeadingTerm);r.getDegree()>=rLast.getDegree()&&!r.isZero();){var degreeDiff=r.getDegree()-rLast.getDegree(),scale=field.multiply(r.getCoefficient(r.getDegree()),dltInverse);q=q.addOrSubtract(field.buildMonomial(degreeDiff,scale)),r=r.addOrSubtract(rLast.multiplyByMonomial(degreeDiff,scale))}if(t=q.multiply(tLast).addOrSubtract(tLastLast),r.getDegree()>=rLast.getDegree())throw new core_IllegalStateException("Division algorithm failed to reduce polynomial?")}var sigmaTildeAtZero=t.getCoefficient(0);if(0===sigmaTildeAtZero)throw new core_ReedSolomonException("sigmaTilde(0) was zero");var inverse=field.inverse(sigmaTildeAtZero);return[t.multiplyScalar(inverse),r.multiplyScalar(inverse)]},ReedSolomonDecoder.prototype.findErrorLocations=function(errorLocator){var numErrors=errorLocator.getDegree();if(1===numErrors)return Int32Array.from([errorLocator.getCoefficient(1)]);for(var result=new Int32Array(numErrors),e=0,field=this.field,i=1;i<field.getSize()&&e<numErrors;i++)0===errorLocator.evaluateAt(i)&&(result[e]=field.inverse(i),e++);if(e!==numErrors)throw new core_ReedSolomonException("Error locator degree does not match number of roots");return result},ReedSolomonDecoder.prototype.findErrorMagnitudes=function(errorEvaluator,errorLocations){for(var s=errorLocations.length,result=new Int32Array(s),field=this.field,i=0;i<s;i++){for(var xiInverse=field.inverse(errorLocations[i]),denominator=1,j=0;j<s;j++)if(i!==j){var term=field.multiply(errorLocations[j],xiInverse),termPlus1=1&term?-2&term:1|term;denominator=field.multiply(denominator,termPlus1)}result[i]=field.multiply(errorEvaluator.evaluateAt(xiInverse),field.inverse(denominator)),0!==field.getGeneratorBase()&&(result[i]=field.multiply(result[i],xiInverse))}return result},ReedSolomonDecoder}();var Table;!function(Table){Table[Table.UPPER=0]="UPPER",Table[Table.LOWER=1]="LOWER",Table[Table.MIXED=2]="MIXED",Table[Table.DIGIT=3]="DIGIT",Table[Table.PUNCT=4]="PUNCT",Table[Table.BINARY=5]="BINARY"}(Table||(Table={}));const decoder_Decoder=function(){function Decoder(){}return Decoder.prototype.decode=function(detectorResult){this.ddata=detectorResult;var matrix=detectorResult.getBits(),rawbits=this.extractBits(matrix),correctedBits=this.correctBits(rawbits),rawBytes=Decoder.convertBoolArrayToByteArray(correctedBits),result=Decoder.getEncodedData(correctedBits),decoderResult=new common_DecoderResult(rawBytes,result,null,null);return decoderResult.setNumBits(correctedBits.length),decoderResult},Decoder.highLevelDecode=function(correctedBits){return this.getEncodedData(correctedBits)},Decoder.getEncodedData=function(correctedBits){for(var endIndex=correctedBits.length,latchTable=Table.UPPER,shiftTable=Table.UPPER,result="",index=0;index<endIndex;)if(shiftTable===Table.BINARY){if(endIndex-index<5)break;var length_1=Decoder.readCode(correctedBits,index,5);if(index+=5,0===length_1){if(endIndex-index<11)break;length_1=Decoder.readCode(correctedBits,index,11)+31,index+=11}for(var charCount=0;charCount<length_1;charCount++){if(endIndex-index<8){index=endIndex;break}var code=Decoder.readCode(correctedBits,index,8);result+=common_StringUtils.castAsNonUtf8Char(code),index+=8}shiftTable=latchTable}else{var size=shiftTable===Table.DIGIT?4:5;if(endIndex-index<size)break;code=Decoder.readCode(correctedBits,index,size);index+=size;var str=Decoder.getCharacter(shiftTable,code);str.startsWith("CTRL_")?(latchTable=shiftTable,shiftTable=Decoder.getTable(str.charAt(5)),"L"===str.charAt(6)&&(latchTable=shiftTable)):(result+=str,shiftTable=latchTable)}return result},Decoder.getTable=function(t){switch(t){case"L":return Table.LOWER;case"P":return Table.PUNCT;case"M":return Table.MIXED;case"D":return Table.DIGIT;case"B":return Table.BINARY;default:return Table.UPPER}},Decoder.getCharacter=function(table,code){switch(table){case Table.UPPER:return Decoder.UPPER_TABLE[code];case Table.LOWER:return Decoder.LOWER_TABLE[code];case Table.MIXED:return Decoder.MIXED_TABLE[code];case Table.PUNCT:return Decoder.PUNCT_TABLE[code];case Table.DIGIT:return Decoder.DIGIT_TABLE[code];default:throw new core_IllegalStateException("Bad table")}},Decoder.prototype.correctBits=function(rawbits){var gf,codewordSize;this.ddata.getNbLayers()<=2?(codewordSize=6,gf=reedsolomon_GenericGF.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(codewordSize=8,gf=reedsolomon_GenericGF.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(codewordSize=10,gf=reedsolomon_GenericGF.AZTEC_DATA_10):(codewordSize=12,gf=reedsolomon_GenericGF.AZTEC_DATA_12);var numDataCodewords=this.ddata.getNbDatablocks(),numCodewords=rawbits.length/codewordSize;if(numCodewords<numDataCodewords)throw new core_FormatException;for(var offset=rawbits.length%codewordSize,dataWords=new Int32Array(numCodewords),i=0;i<numCodewords;i++,offset+=codewordSize)dataWords[i]=Decoder.readCode(rawbits,offset,codewordSize);try{new reedsolomon_ReedSolomonDecoder(gf).decode(dataWords,numCodewords-numDataCodewords)}catch(ex){throw new core_FormatException(ex)}var mask=(1<<codewordSize)-1,stuffedBits=0;for(i=0;i<numDataCodewords;i++){if(0===(dataWord=dataWords[i])||dataWord===mask)throw new core_FormatException;1!==dataWord&&dataWord!==mask-1||stuffedBits++}var correctedBits=new Array(numDataCodewords*codewordSize-stuffedBits),index=0;for(i=0;i<numDataCodewords;i++){var dataWord;if(1===(dataWord=dataWords[i])||dataWord===mask-1)correctedBits.fill(dataWord>1,index,index+codewordSize-1),index+=codewordSize-1;else for(var bit=codewordSize-1;bit>=0;--bit)correctedBits[index++]=!!(dataWord&1<<bit)}return correctedBits},Decoder.prototype.extractBits=function(matrix){var compact=this.ddata.isCompact(),layers=this.ddata.getNbLayers(),baseMatrixSize=(compact?11:14)+4*layers,alignmentMap=new Int32Array(baseMatrixSize),rawbits=new Array(this.totalBitsInLayer(layers,compact));if(compact)for(var i=0;i<alignmentMap.length;i++)alignmentMap[i]=i;else{var matrixSize=baseMatrixSize+1+2*util_Integer.truncDivision(util_Integer.truncDivision(baseMatrixSize,2)-1,15),origCenter=baseMatrixSize/2,center=util_Integer.truncDivision(matrixSize,2);for(i=0;i<origCenter;i++){var newOffset=i+util_Integer.truncDivision(i,15);alignmentMap[origCenter-i-1]=center-newOffset-1,alignmentMap[origCenter+i]=center+newOffset+1}}i=0;for(var rowOffset=0;i<layers;i++){for(var rowSize=4*(layers-i)+(compact?9:12),low=2*i,high=baseMatrixSize-1-low,j=0;j<rowSize;j++)for(var columnOffset=2*j,k=0;k<2;k++)rawbits[rowOffset+columnOffset+k]=matrix.get(alignmentMap[low+k],alignmentMap[low+j]),rawbits[rowOffset+2*rowSize+columnOffset+k]=matrix.get(alignmentMap[low+j],alignmentMap[high-k]),rawbits[rowOffset+4*rowSize+columnOffset+k]=matrix.get(alignmentMap[high-k],alignmentMap[high-j]),rawbits[rowOffset+6*rowSize+columnOffset+k]=matrix.get(alignmentMap[high-j],alignmentMap[low+k]);rowOffset+=8*rowSize}return rawbits},Decoder.readCode=function(rawbits,startIndex,length){for(var res=0,i=startIndex;i<startIndex+length;i++)res<<=1,rawbits[i]&&(res|=1);return res},Decoder.readByte=function(rawbits,startIndex){var n=rawbits.length-startIndex;return n>=8?Decoder.readCode(rawbits,startIndex,8):Decoder.readCode(rawbits,startIndex,n)<<8-n},Decoder.convertBoolArrayToByteArray=function(boolArr){for(var byteArr=new Uint8Array((boolArr.length+7)/8),i=0;i<byteArr.length;i++)byteArr[i]=Decoder.readByte(boolArr,8*i);return byteArr},Decoder.prototype.totalBitsInLayer=function(layers,compact){return((compact?88:112)+16*layers)*layers},Decoder.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Decoder.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Decoder.MIXED_TABLE=["CTRL_PS"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Decoder.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Decoder.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],Decoder}();const detector_MathUtils=function(){function MathUtils(){}return MathUtils.round=function(d){return isNaN(d)?0:d<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:d>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:d+(d<0?-.5:.5)|0},MathUtils.distance=function(aX,aY,bX,bY){var xDiff=aX-bX,yDiff=aY-bY;return Math.sqrt(xDiff*xDiff+yDiff*yDiff)},MathUtils.sum=function(array){for(var count=0,i=0,length_1=array.length;i!==length_1;i++){count+=array[i]}return count},MathUtils}();const util_Float=function(){function Float(){}return Float.floatToIntBits=function(f){return f},Float.MAX_VALUE=Number.MAX_SAFE_INTEGER,Float}();const core_ResultPoint=function(){function ResultPoint(x,y){this.x=x,this.y=y}return ResultPoint.prototype.getX=function(){return this.x},ResultPoint.prototype.getY=function(){return this.y},ResultPoint.prototype.equals=function(other){if(other instanceof ResultPoint){var otherPoint=other;return this.x===otherPoint.x&&this.y===otherPoint.y}return!1},ResultPoint.prototype.hashCode=function(){return 31*util_Float.floatToIntBits(this.x)+util_Float.floatToIntBits(this.y)},ResultPoint.prototype.toString=function(){return"("+this.x+","+this.y+")"},ResultPoint.orderBestPatterns=function(patterns){var pointA,pointB,pointC,zeroOneDistance=this.distance(patterns[0],patterns[1]),oneTwoDistance=this.distance(patterns[1],patterns[2]),zeroTwoDistance=this.distance(patterns[0],patterns[2]);if(oneTwoDistance>=zeroOneDistance&&oneTwoDistance>=zeroTwoDistance?(pointB=patterns[0],pointA=patterns[1],pointC=patterns[2]):zeroTwoDistance>=oneTwoDistance&&zeroTwoDistance>=zeroOneDistance?(pointB=patterns[1],pointA=patterns[0],pointC=patterns[2]):(pointB=patterns[2],pointA=patterns[0],pointC=patterns[1]),this.crossProductZ(pointA,pointB,pointC)<0){var temp=pointA;pointA=pointC,pointC=temp}patterns[0]=pointA,patterns[1]=pointB,patterns[2]=pointC},ResultPoint.distance=function(pattern1,pattern2){return detector_MathUtils.distance(pattern1.x,pattern1.y,pattern2.x,pattern2.y)},ResultPoint.crossProductZ=function(pointA,pointB,pointC){var bX=pointB.x,bY=pointB.y;return(pointC.x-bX)*(pointA.y-bY)-(pointC.y-bY)*(pointA.x-bX)},ResultPoint}();const common_DetectorResult=function(){function DetectorResult(bits,points){this.bits=bits,this.points=points}return DetectorResult.prototype.getBits=function(){return this.bits},DetectorResult.prototype.getPoints=function(){return this.points},DetectorResult}();var AztecDetectorResult_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const aztec_AztecDetectorResult=function(_super){function AztecDetectorResult(bits,points,compact,nbDatablocks,nbLayers){var _this=_super.call(this,bits,points)||this;return _this.compact=compact,_this.nbDatablocks=nbDatablocks,_this.nbLayers=nbLayers,_this}return AztecDetectorResult_extends(AztecDetectorResult,_super),AztecDetectorResult.prototype.getNbLayers=function(){return this.nbLayers},AztecDetectorResult.prototype.getNbDatablocks=function(){return this.nbDatablocks},AztecDetectorResult.prototype.isCompact=function(){return this.compact},AztecDetectorResult}(common_DetectorResult);const detector_WhiteRectangleDetector=function(){function WhiteRectangleDetector(image,initSize,x,y){this.image=image,this.height=image.getHeight(),this.width=image.getWidth(),null==initSize&&(initSize=WhiteRectangleDetector.INIT_SIZE),null==x&&(x=image.getWidth()/2|0),null==y&&(y=image.getHeight()/2|0);var halfsize=initSize/2|0;if(this.leftInit=x-halfsize,this.rightInit=x+halfsize,this.upInit=y-halfsize,this.downInit=y+halfsize,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new core_NotFoundException}return WhiteRectangleDetector.prototype.detect=function(){for(var left=this.leftInit,right=this.rightInit,up=this.upInit,down=this.downInit,sizeExceeded=!1,aBlackPointFoundOnBorder=!0,atLeastOneBlackPointFoundOnBorder=!1,atLeastOneBlackPointFoundOnRight=!1,atLeastOneBlackPointFoundOnBottom=!1,atLeastOneBlackPointFoundOnLeft=!1,atLeastOneBlackPointFoundOnTop=!1,width=this.width,height=this.height;aBlackPointFoundOnBorder;){aBlackPointFoundOnBorder=!1;for(var rightBorderNotWhite=!0;(rightBorderNotWhite||!atLeastOneBlackPointFoundOnRight)&&right<width;)(rightBorderNotWhite=this.containsBlackPoint(up,down,right,!1))?(right++,aBlackPointFoundOnBorder=!0,atLeastOneBlackPointFoundOnRight=!0):atLeastOneBlackPointFoundOnRight||right++;if(right>=width){sizeExceeded=!0;break}for(var bottomBorderNotWhite=!0;(bottomBorderNotWhite||!atLeastOneBlackPointFoundOnBottom)&&down<height;)(bottomBorderNotWhite=this.containsBlackPoint(left,right,down,!0))?(down++,aBlackPointFoundOnBorder=!0,atLeastOneBlackPointFoundOnBottom=!0):atLeastOneBlackPointFoundOnBottom||down++;if(down>=height){sizeExceeded=!0;break}for(var leftBorderNotWhite=!0;(leftBorderNotWhite||!atLeastOneBlackPointFoundOnLeft)&&left>=0;)(leftBorderNotWhite=this.containsBlackPoint(up,down,left,!1))?(left--,aBlackPointFoundOnBorder=!0,atLeastOneBlackPointFoundOnLeft=!0):atLeastOneBlackPointFoundOnLeft||left--;if(left<0){sizeExceeded=!0;break}for(var topBorderNotWhite=!0;(topBorderNotWhite||!atLeastOneBlackPointFoundOnTop)&&up>=0;)(topBorderNotWhite=this.containsBlackPoint(left,right,up,!0))?(up--,aBlackPointFoundOnBorder=!0,atLeastOneBlackPointFoundOnTop=!0):atLeastOneBlackPointFoundOnTop||up--;if(up<0){sizeExceeded=!0;break}aBlackPointFoundOnBorder&&(atLeastOneBlackPointFoundOnBorder=!0)}if(!sizeExceeded&&atLeastOneBlackPointFoundOnBorder){for(var maxSize=right-left,z=null,i=1;null===z&&i<maxSize;i++)z=this.getBlackPointOnSegment(left,down-i,left+i,down);if(null==z)throw new core_NotFoundException;var t=null;for(i=1;null===t&&i<maxSize;i++)t=this.getBlackPointOnSegment(left,up+i,left+i,up);if(null==t)throw new core_NotFoundException;var x=null;for(i=1;null===x&&i<maxSize;i++)x=this.getBlackPointOnSegment(right,up+i,right-i,up);if(null==x)throw new core_NotFoundException;var y=null;for(i=1;null===y&&i<maxSize;i++)y=this.getBlackPointOnSegment(right,down-i,right-i,down);if(null==y)throw new core_NotFoundException;return this.centerEdges(y,z,x,t)}throw new core_NotFoundException},WhiteRectangleDetector.prototype.getBlackPointOnSegment=function(aX,aY,bX,bY){for(var dist=detector_MathUtils.round(detector_MathUtils.distance(aX,aY,bX,bY)),xStep=(bX-aX)/dist,yStep=(bY-aY)/dist,image=this.image,i=0;i<dist;i++){var x=detector_MathUtils.round(aX+i*xStep),y=detector_MathUtils.round(aY+i*yStep);if(image.get(x,y))return new core_ResultPoint(x,y)}return null},WhiteRectangleDetector.prototype.centerEdges=function(y,z,x,t){var yi=y.getX(),yj=y.getY(),zi=z.getX(),zj=z.getY(),xi=x.getX(),xj=x.getY(),ti=t.getX(),tj=t.getY(),CORR=WhiteRectangleDetector.CORR;return yi<this.width/2?[new core_ResultPoint(ti-CORR,tj+CORR),new core_ResultPoint(zi+CORR,zj+CORR),new core_ResultPoint(xi-CORR,xj-CORR),new core_ResultPoint(yi+CORR,yj-CORR)]:[new core_ResultPoint(ti+CORR,tj+CORR),new core_ResultPoint(zi+CORR,zj-CORR),new core_ResultPoint(xi-CORR,xj+CORR),new core_ResultPoint(yi-CORR,yj-CORR)]},WhiteRectangleDetector.prototype.containsBlackPoint=function(a,b,fixed,horizontal){var image=this.image;if(horizontal){for(var x=a;x<=b;x++)if(image.get(x,fixed))return!0}else for(var y=a;y<=b;y++)if(image.get(fixed,y))return!0;return!1},WhiteRectangleDetector.INIT_SIZE=10,WhiteRectangleDetector.CORR=1,WhiteRectangleDetector}();const common_GridSampler=function(){function GridSampler(){}return GridSampler.checkAndNudgePoints=function(image,points){for(var width=image.getWidth(),height=image.getHeight(),nudged=!0,offset=0;offset<points.length&&nudged;offset+=2){var x=Math.floor(points[offset]),y=Math.floor(points[offset+1]);if(x<-1||x>width||y<-1||y>height)throw new core_NotFoundException;nudged=!1,-1===x?(points[offset]=0,nudged=!0):x===width&&(points[offset]=width-1,nudged=!0),-1===y?(points[offset+1]=0,nudged=!0):y===height&&(points[offset+1]=height-1,nudged=!0)}nudged=!0;for(offset=points.length-2;offset>=0&&nudged;offset-=2){x=Math.floor(points[offset]),y=Math.floor(points[offset+1]);if(x<-1||x>width||y<-1||y>height)throw new core_NotFoundException;nudged=!1,-1===x?(points[offset]=0,nudged=!0):x===width&&(points[offset]=width-1,nudged=!0),-1===y?(points[offset+1]=0,nudged=!0):y===height&&(points[offset+1]=height-1,nudged=!0)}},GridSampler}();const common_PerspectiveTransform=function(){function PerspectiveTransform(a11,a21,a31,a12,a22,a32,a13,a23,a33){this.a11=a11,this.a21=a21,this.a31=a31,this.a12=a12,this.a22=a22,this.a32=a32,this.a13=a13,this.a23=a23,this.a33=a33}return PerspectiveTransform.quadrilateralToQuadrilateral=function(x0,y0,x1,y1,x2,y2,x3,y3,x0p,y0p,x1p,y1p,x2p,y2p,x3p,y3p){var qToS=PerspectiveTransform.quadrilateralToSquare(x0,y0,x1,y1,x2,y2,x3,y3);return PerspectiveTransform.squareToQuadrilateral(x0p,y0p,x1p,y1p,x2p,y2p,x3p,y3p).times(qToS)},PerspectiveTransform.prototype.transformPoints=function(points){for(var max=points.length,a11=this.a11,a12=this.a12,a13=this.a13,a21=this.a21,a22=this.a22,a23=this.a23,a31=this.a31,a32=this.a32,a33=this.a33,i=0;i<max;i+=2){var x=points[i],y=points[i+1],denominator=a13*x+a23*y+a33;points[i]=(a11*x+a21*y+a31)/denominator,points[i+1]=(a12*x+a22*y+a32)/denominator}},PerspectiveTransform.prototype.transformPointsWithValues=function(xValues,yValues){for(var a11=this.a11,a12=this.a12,a13=this.a13,a21=this.a21,a22=this.a22,a23=this.a23,a31=this.a31,a32=this.a32,a33=this.a33,n=xValues.length,i=0;i<n;i++){var x=xValues[i],y=yValues[i],denominator=a13*x+a23*y+a33;xValues[i]=(a11*x+a21*y+a31)/denominator,yValues[i]=(a12*x+a22*y+a32)/denominator}},PerspectiveTransform.squareToQuadrilateral=function(x0,y0,x1,y1,x2,y2,x3,y3){var dx3=x0-x1+x2-x3,dy3=y0-y1+y2-y3;if(0===dx3&&0===dy3)return new PerspectiveTransform(x1-x0,x2-x1,x0,y1-y0,y2-y1,y0,0,0,1);var dx1=x1-x2,dx2=x3-x2,dy1=y1-y2,dy2=y3-y2,denominator=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/denominator,a23=(dx1*dy3-dx3*dy1)/denominator;return new PerspectiveTransform(x1-x0+a13*x1,x3-x0+a23*x3,x0,y1-y0+a13*y1,y3-y0+a23*y3,y0,a13,a23,1)},PerspectiveTransform.quadrilateralToSquare=function(x0,y0,x1,y1,x2,y2,x3,y3){return PerspectiveTransform.squareToQuadrilateral(x0,y0,x1,y1,x2,y2,x3,y3).buildAdjoint()},PerspectiveTransform.prototype.buildAdjoint=function(){return new PerspectiveTransform(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},PerspectiveTransform.prototype.times=function(other){return new PerspectiveTransform(this.a11*other.a11+this.a21*other.a12+this.a31*other.a13,this.a11*other.a21+this.a21*other.a22+this.a31*other.a23,this.a11*other.a31+this.a21*other.a32+this.a31*other.a33,this.a12*other.a11+this.a22*other.a12+this.a32*other.a13,this.a12*other.a21+this.a22*other.a22+this.a32*other.a23,this.a12*other.a31+this.a22*other.a32+this.a32*other.a33,this.a13*other.a11+this.a23*other.a12+this.a33*other.a13,this.a13*other.a21+this.a23*other.a22+this.a33*other.a23,this.a13*other.a31+this.a23*other.a32+this.a33*other.a33)},PerspectiveTransform}();var DefaultGridSampler_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const common_DefaultGridSampler=function(_super){function DefaultGridSampler(){return null!==_super&&_super.apply(this,arguments)||this}return DefaultGridSampler_extends(DefaultGridSampler,_super),DefaultGridSampler.prototype.sampleGrid=function(image,dimensionX,dimensionY,p1ToX,p1ToY,p2ToX,p2ToY,p3ToX,p3ToY,p4ToX,p4ToY,p1FromX,p1FromY,p2FromX,p2FromY,p3FromX,p3FromY,p4FromX,p4FromY){var transform=common_PerspectiveTransform.quadrilateralToQuadrilateral(p1ToX,p1ToY,p2ToX,p2ToY,p3ToX,p3ToY,p4ToX,p4ToY,p1FromX,p1FromY,p2FromX,p2FromY,p3FromX,p3FromY,p4FromX,p4FromY);return this.sampleGridWithTransform(image,dimensionX,dimensionY,transform)},DefaultGridSampler.prototype.sampleGridWithTransform=function(image,dimensionX,dimensionY,transform){if(dimensionX<=0||dimensionY<=0)throw new core_NotFoundException;for(var bits=new common_BitMatrix(dimensionX,dimensionY),points=new Float32Array(2*dimensionX),y=0;y<dimensionY;y++){for(var max=points.length,iValue=y+.5,x=0;x<max;x+=2)points[x]=x/2+.5,points[x+1]=iValue;transform.transformPoints(points),common_GridSampler.checkAndNudgePoints(image,points);try{for(x=0;x<max;x+=2)image.get(Math.floor(points[x]),Math.floor(points[x+1]))&&bits.set(x/2,y)}catch(aioobe){throw new core_NotFoundException}}return bits},DefaultGridSampler}(common_GridSampler);const common_GridSamplerInstance=function(){function GridSamplerInstance(){}return GridSamplerInstance.setGridSampler=function(newGridSampler){GridSamplerInstance.gridSampler=newGridSampler},GridSamplerInstance.getInstance=function(){return GridSamplerInstance.gridSampler},GridSamplerInstance.gridSampler=new common_DefaultGridSampler,GridSamplerInstance}();var Point=function(){function Point(x,y){this.x=x,this.y=y}return Point.prototype.toResultPoint=function(){return new core_ResultPoint(this.getX(),this.getY())},Point.prototype.getX=function(){return this.x},Point.prototype.getY=function(){return this.y},Point}();const detector_Detector=function(){function Detector(image){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=image}return Detector.prototype.detect=function(){return this.detectMirror(!1)},Detector.prototype.detectMirror=function(isMirror){var pCenter=this.getMatrixCenter(),bullsEyeCorners=this.getBullsEyeCorners(pCenter);if(isMirror){var temp=bullsEyeCorners[0];bullsEyeCorners[0]=bullsEyeCorners[2],bullsEyeCorners[2]=temp}this.extractParameters(bullsEyeCorners);var bits=this.sampleGrid(this.image,bullsEyeCorners[this.shift%4],bullsEyeCorners[(this.shift+1)%4],bullsEyeCorners[(this.shift+2)%4],bullsEyeCorners[(this.shift+3)%4]),corners=this.getMatrixCornerPoints(bullsEyeCorners);return new aztec_AztecDetectorResult(bits,corners,this.compact,this.nbDataBlocks,this.nbLayers)},Detector.prototype.extractParameters=function(bullsEyeCorners){if(!(this.isValidPoint(bullsEyeCorners[0])&&this.isValidPoint(bullsEyeCorners[1])&&this.isValidPoint(bullsEyeCorners[2])&&this.isValidPoint(bullsEyeCorners[3])))throw new core_NotFoundException;var length=2*this.nbCenterLayers,sides=new Int32Array([this.sampleLine(bullsEyeCorners[0],bullsEyeCorners[1],length),this.sampleLine(bullsEyeCorners[1],bullsEyeCorners[2],length),this.sampleLine(bullsEyeCorners[2],bullsEyeCorners[3],length),this.sampleLine(bullsEyeCorners[3],bullsEyeCorners[0],length)]);this.shift=this.getRotation(sides,length);for(var parameterData=0,i=0;i<4;i++){var side=sides[(this.shift+i)%4];this.compact?(parameterData<<=7,parameterData+=side>>1&127):(parameterData<<=10,parameterData+=(side>>2&992)+(side>>1&31))}var correctedData=this.getCorrectedParameterData(parameterData,this.compact);this.compact?(this.nbLayers=1+(correctedData>>6),this.nbDataBlocks=1+(63&correctedData)):(this.nbLayers=1+(correctedData>>11),this.nbDataBlocks=1+(2047&correctedData))},Detector.prototype.getRotation=function(sides,length){var cornerBits=0;sides.forEach(function(side,idx,arr){cornerBits=(cornerBits<<3)+((side>>length-2<<1)+(1&side))}),cornerBits=((1&cornerBits)<<11)+(cornerBits>>1);for(var shift=0;shift<4;shift++)if(util_Integer.bitCount(cornerBits^this.EXPECTED_CORNER_BITS[shift])<=2)return shift;throw new core_NotFoundException},Detector.prototype.getCorrectedParameterData=function(parameterData,compact){var numCodewords,numDataCodewords;compact?(numCodewords=7,numDataCodewords=2):(numCodewords=10,numDataCodewords=4);for(var numECCodewords=numCodewords-numDataCodewords,parameterWords=new Int32Array(numCodewords),i=numCodewords-1;i>=0;--i)parameterWords[i]=15&parameterData,parameterData>>=4;try{new reedsolomon_ReedSolomonDecoder(reedsolomon_GenericGF.AZTEC_PARAM).decode(parameterWords,numECCodewords)}catch(ignored){throw new core_NotFoundException}var result=0;for(i=0;i<numDataCodewords;i++)result=(result<<4)+parameterWords[i];return result},Detector.prototype.getBullsEyeCorners=function(pCenter){var pina=pCenter,pinb=pCenter,pinc=pCenter,pind=pCenter,color=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var pouta=this.getFirstDifferent(pina,color,1,-1),poutb=this.getFirstDifferent(pinb,color,1,1),poutc=this.getFirstDifferent(pinc,color,-1,1),poutd=this.getFirstDifferent(pind,color,-1,-1);if(this.nbCenterLayers>2){var q=this.distancePoint(poutd,pouta)*this.nbCenterLayers/(this.distancePoint(pind,pina)*(this.nbCenterLayers+2));if(q<.75||q>1.25||!this.isWhiteOrBlackRectangle(pouta,poutb,poutc,poutd))break}pina=pouta,pinb=poutb,pinc=poutc,pind=poutd,color=!color}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new core_NotFoundException;this.compact=5===this.nbCenterLayers;var pinax=new core_ResultPoint(pina.getX()+.5,pina.getY()-.5),pinbx=new core_ResultPoint(pinb.getX()+.5,pinb.getY()+.5),pincx=new core_ResultPoint(pinc.getX()-.5,pinc.getY()+.5),pindx=new core_ResultPoint(pind.getX()-.5,pind.getY()-.5);return this.expandSquare([pinax,pinbx,pincx,pindx],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},Detector.prototype.getMatrixCenter=function(){var pointA,pointB,pointC,pointD;try{pointA=(cornerPoints=new detector_WhiteRectangleDetector(this.image).detect())[0],pointB=cornerPoints[1],pointC=cornerPoints[2],pointD=cornerPoints[3]}catch(e){var cx_1=this.image.getWidth()/2,cy_1=this.image.getHeight()/2;pointA=this.getFirstDifferent(new Point(cx_1+7,cy_1-7),!1,1,-1).toResultPoint(),pointB=this.getFirstDifferent(new Point(cx_1+7,cy_1+7),!1,1,1).toResultPoint(),pointC=this.getFirstDifferent(new Point(cx_1-7,cy_1+7),!1,-1,1).toResultPoint(),pointD=this.getFirstDifferent(new Point(cx_1-7,cy_1-7),!1,-1,-1).toResultPoint()}var cx=detector_MathUtils.round((pointA.getX()+pointD.getX()+pointB.getX()+pointC.getX())/4),cy=detector_MathUtils.round((pointA.getY()+pointD.getY()+pointB.getY()+pointC.getY())/4);try{var cornerPoints;pointA=(cornerPoints=new detector_WhiteRectangleDetector(this.image,15,cx,cy).detect())[0],pointB=cornerPoints[1],pointC=cornerPoints[2],pointD=cornerPoints[3]}catch(e){pointA=this.getFirstDifferent(new Point(cx+7,cy-7),!1,1,-1).toResultPoint(),pointB=this.getFirstDifferent(new Point(cx+7,cy+7),!1,1,1).toResultPoint(),pointC=this.getFirstDifferent(new Point(cx-7,cy+7),!1,-1,1).toResultPoint(),pointD=this.getFirstDifferent(new Point(cx-7,cy-7),!1,-1,-1).toResultPoint()}return cx=detector_MathUtils.round((pointA.getX()+pointD.getX()+pointB.getX()+pointC.getX())/4),cy=detector_MathUtils.round((pointA.getY()+pointD.getY()+pointB.getY()+pointC.getY())/4),new Point(cx,cy)},Detector.prototype.getMatrixCornerPoints=function(bullsEyeCorners){return this.expandSquare(bullsEyeCorners,2*this.nbCenterLayers,this.getDimension())},Detector.prototype.sampleGrid=function(image,topLeft,topRight,bottomRight,bottomLeft){var sampler=common_GridSamplerInstance.getInstance(),dimension=this.getDimension(),low=dimension/2-this.nbCenterLayers,high=dimension/2+this.nbCenterLayers;return sampler.sampleGrid(image,dimension,dimension,low,low,high,low,high,high,low,high,topLeft.getX(),topLeft.getY(),topRight.getX(),topRight.getY(),bottomRight.getX(),bottomRight.getY(),bottomLeft.getX(),bottomLeft.getY())},Detector.prototype.sampleLine=function(p1,p2,size){for(var result=0,d=this.distanceResultPoint(p1,p2),moduleSize=d/size,px=p1.getX(),py=p1.getY(),dx=moduleSize*(p2.getX()-p1.getX())/d,dy=moduleSize*(p2.getY()-p1.getY())/d,i=0;i<size;i++)this.image.get(detector_MathUtils.round(px+i*dx),detector_MathUtils.round(py+i*dy))&&(result|=1<<size-i-1);return result},Detector.prototype.isWhiteOrBlackRectangle=function(p1,p2,p3,p4){p1=new Point(p1.getX()-3,p1.getY()+3),p2=new Point(p2.getX()-3,p2.getY()-3),p3=new Point(p3.getX()+3,p3.getY()-3),p4=new Point(p4.getX()+3,p4.getY()+3);var cInit=this.getColor(p4,p1);if(0===cInit)return!1;var c=this.getColor(p1,p2);return c===cInit&&((c=this.getColor(p2,p3))===cInit&&(c=this.getColor(p3,p4))===cInit)},Detector.prototype.getColor=function(p1,p2){for(var d=this.distancePoint(p1,p2),dx=(p2.getX()-p1.getX())/d,dy=(p2.getY()-p1.getY())/d,error=0,px=p1.getX(),py=p1.getY(),colorModel=this.image.get(p1.getX(),p1.getY()),iMax=Math.ceil(d),i=0;i<iMax;i++)px+=dx,py+=dy,this.image.get(detector_MathUtils.round(px),detector_MathUtils.round(py))!==colorModel&&error++;var errRatio=error/d;return errRatio>.1&&errRatio<.9?0:errRatio<=.1===colorModel?1:-1},Detector.prototype.getFirstDifferent=function(init,color,dx,dy){for(var x=init.getX()+dx,y=init.getY()+dy;this.isValid(x,y)&&this.image.get(x,y)===color;)x+=dx,y+=dy;for(x-=dx,y-=dy;this.isValid(x,y)&&this.image.get(x,y)===color;)x+=dx;for(x-=dx;this.isValid(x,y)&&this.image.get(x,y)===color;)y+=dy;return new Point(x,y-=dy)},Detector.prototype.expandSquare=function(cornerPoints,oldSide,newSide){var ratio=newSide/(2*oldSide),dx=cornerPoints[0].getX()-cornerPoints[2].getX(),dy=cornerPoints[0].getY()-cornerPoints[2].getY(),centerx=(cornerPoints[0].getX()+cornerPoints[2].getX())/2,centery=(cornerPoints[0].getY()+cornerPoints[2].getY())/2,result0=new core_ResultPoint(centerx+ratio*dx,centery+ratio*dy),result2=new core_ResultPoint(centerx-ratio*dx,centery-ratio*dy);return dx=cornerPoints[1].getX()-cornerPoints[3].getX(),dy=cornerPoints[1].getY()-cornerPoints[3].getY(),centerx=(cornerPoints[1].getX()+cornerPoints[3].getX())/2,centery=(cornerPoints[1].getY()+cornerPoints[3].getY())/2,[result0,new core_ResultPoint(centerx+ratio*dx,centery+ratio*dy),result2,new core_ResultPoint(centerx-ratio*dx,centery-ratio*dy)]},Detector.prototype.isValid=function(x,y){return x>=0&&x<this.image.getWidth()&&y>0&&y<this.image.getHeight()},Detector.prototype.isValidPoint=function(point){var x=detector_MathUtils.round(point.getX()),y=detector_MathUtils.round(point.getY());return this.isValid(x,y)},Detector.prototype.distancePoint=function(a,b){return detector_MathUtils.distance(a.getX(),a.getY(),b.getX(),b.getY())},Detector.prototype.distanceResultPoint=function(a,b){return detector_MathUtils.distance(a.getX(),a.getY(),b.getX(),b.getY())},Detector.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(util_Integer.truncDivision(this.nbLayers-4,8)+1)+15},Detector}();const aztec_AztecReader=function(){function AztecReader(){}return AztecReader.prototype.decode=function(image,hints){void 0===hints&&(hints=null);var exception=null,detector=new detector_Detector(image.getBlackMatrix()),points=null,decoderResult=null;try{points=(detectorResult=detector.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(hints,points),decoderResult=(new decoder_Decoder).decode(detectorResult)}catch(e){exception=e}if(null==decoderResult)try{var detectorResult;points=(detectorResult=detector.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(hints,points),decoderResult=(new decoder_Decoder).decode(detectorResult)}catch(e){if(null!=exception)throw exception;throw e}var result=new core_Result(decoderResult.getText(),decoderResult.getRawBytes(),decoderResult.getNumBits(),points,core_BarcodeFormat.AZTEC,util_System.currentTimeMillis()),byteSegments=decoderResult.getByteSegments();null!=byteSegments&&result.putMetadata(core_ResultMetadataType.BYTE_SEGMENTS,byteSegments);var ecLevel=decoderResult.getECLevel();return null!=ecLevel&&result.putMetadata(core_ResultMetadataType.ERROR_CORRECTION_LEVEL,ecLevel),result},AztecReader.prototype.reportFoundResultPoints=function(hints,points){if(null!=hints){var rpcb_1=hints.get(core_DecodeHintType.NEED_RESULT_POINT_CALLBACK);null!=rpcb_1&&points.forEach(function(point,idx,arr){rpcb_1.foundPossibleResultPoint(point)})}},AztecReader.prototype.reset=function(){},AztecReader}();var BrowserAztecCodeReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(_super){function BrowserAztecCodeReader(timeBetweenScansMillis){return void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500),_super.call(this,new aztec_AztecReader,timeBetweenScansMillis)||this}BrowserAztecCodeReader_extends(BrowserAztecCodeReader,_super)}(BrowserCodeReader);const oned_OneDReader=function(){function OneDReader(){}return OneDReader.prototype.decode=function(image,hints){try{return this.doDecode(image,hints)}catch(nfe){if(hints&&!0===hints.get(core_DecodeHintType.TRY_HARDER)&&image.isRotateSupported()){var rotatedImage=image.rotateCounterClockwise(),result=this.doDecode(rotatedImage,hints),metadata=result.getResultMetadata(),orientation_1=270;null!==metadata&&!0===metadata.get(core_ResultMetadataType.ORIENTATION)&&(orientation_1+=metadata.get(core_ResultMetadataType.ORIENTATION)%360),result.putMetadata(core_ResultMetadataType.ORIENTATION,orientation_1);var points=result.getResultPoints();if(null!==points)for(var height=rotatedImage.getHeight(),i=0;i<points.length;i++)points[i]=new core_ResultPoint(height-points[i].getY()-1,points[i].getX());return result}throw new core_NotFoundException}},OneDReader.prototype.reset=function(){},OneDReader.prototype.doDecode=function(image,hints){var maxLines,width=image.getWidth(),height=image.getHeight(),row=new common_BitArray(width),tryHarder=hints&&!0===hints.get(core_DecodeHintType.TRY_HARDER),rowStep=Math.max(1,height>>(tryHarder?8:5));maxLines=tryHarder?height:15;for(var middle=Math.trunc(height/2),x=0;x<maxLines;x++){var rowStepsAboveOrBelow=Math.trunc((x+1)/2),rowNumber=middle+rowStep*(!(1&x)?rowStepsAboveOrBelow:-rowStepsAboveOrBelow);if(rowNumber<0||rowNumber>=height)break;try{row=image.getBlackRow(rowNumber,row)}catch(ignored){continue}for(var _loop_1=function(attempt){if(1===attempt&&(row.reverse(),hints&&!0===hints.get(core_DecodeHintType.NEED_RESULT_POINT_CALLBACK))){var newHints_1=new Map;hints.forEach(function(hint,key){return newHints_1.set(key,hint)}),newHints_1.delete(core_DecodeHintType.NEED_RESULT_POINT_CALLBACK),hints=newHints_1}try{var result=this_1.decodeRow(rowNumber,row,hints);if(1===attempt){result.putMetadata(core_ResultMetadataType.ORIENTATION,180);var points=result.getResultPoints();null!==points&&(points[0]=new core_ResultPoint(width-points[0].getX()-1,points[0].getY()),points[1]=new core_ResultPoint(width-points[1].getX()-1,points[1].getY()))}return{value:result}}catch(re){}},this_1=this,attempt=0;attempt<2;attempt++){var state_1=_loop_1(attempt);if("object"==typeof state_1)return state_1.value}}throw new core_NotFoundException},OneDReader.recordPattern=function(row,start,counters){for(var numCounters=counters.length,index=0;index<numCounters;index++)counters[index]=0;var end=row.getSize();if(start>=end)throw new core_NotFoundException;for(var isWhite=!row.get(start),counterPosition=0,i=start;i<end;){if(row.get(i)!==isWhite)counters[counterPosition]++;else{if(++counterPosition===numCounters)break;counters[counterPosition]=1,isWhite=!isWhite}i++}if(counterPosition!==numCounters&&(counterPosition!==numCounters-1||i!==end))throw new core_NotFoundException},OneDReader.recordPatternInReverse=function(row,start,counters){for(var numTransitionsLeft=counters.length,last=row.get(start);start>0&&numTransitionsLeft>=0;)row.get(--start)!==last&&(numTransitionsLeft--,last=!last);if(numTransitionsLeft>=0)throw new core_NotFoundException;OneDReader.recordPattern(row,start+1,counters)},OneDReader.patternMatchVariance=function(counters,pattern,maxIndividualVariance){for(var numCounters=counters.length,total=0,patternLength=0,i=0;i<numCounters;i++)total+=counters[i],patternLength+=pattern[i];if(total<patternLength)return Number.POSITIVE_INFINITY;var unitBarWidth=total/patternLength;maxIndividualVariance*=unitBarWidth;for(var totalVariance=0,x=0;x<numCounters;x++){var counter=counters[x],scaledPattern=pattern[x]*unitBarWidth,variance=counter>scaledPattern?counter-scaledPattern:scaledPattern-counter;if(variance>maxIndividualVariance)return Number.POSITIVE_INFINITY;totalVariance+=variance}return totalVariance/total},OneDReader}();var Code128Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const oned_Code128Reader=function(_super){function Code128Reader(){return null!==_super&&_super.apply(this,arguments)||this}return Code128Reader_extends(Code128Reader,_super),Code128Reader.findStartPattern=function(row){for(var width=row.getSize(),rowOffset=row.getNextSet(0),counterPosition=0,counters=Int32Array.from([0,0,0,0,0,0]),patternStart=rowOffset,isWhite=!1,i=rowOffset;i<width;i++)if(row.get(i)!==isWhite)counters[counterPosition]++;else{if(5===counterPosition){for(var bestVariance=Code128Reader.MAX_AVG_VARIANCE,bestMatch=-1,startCode=Code128Reader.CODE_START_A;startCode<=Code128Reader.CODE_START_C;startCode++){var variance=oned_OneDReader.patternMatchVariance(counters,Code128Reader.CODE_PATTERNS[startCode],Code128Reader.MAX_INDIVIDUAL_VARIANCE);variance<bestVariance&&(bestVariance=variance,bestMatch=startCode)}if(bestMatch>=0&&row.isRange(Math.max(0,patternStart-(i-patternStart)/2),patternStart,!1))return Int32Array.from([patternStart,i,bestMatch]);patternStart+=counters[0]+counters[1],(counters=counters.slice(2,counters.length))[counterPosition-1]=0,counters[counterPosition]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},Code128Reader.decodeCode=function(row,counters,rowOffset){oned_OneDReader.recordPattern(row,rowOffset,counters);for(var bestVariance=Code128Reader.MAX_AVG_VARIANCE,bestMatch=-1,d=0;d<Code128Reader.CODE_PATTERNS.length;d++){var pattern=Code128Reader.CODE_PATTERNS[d],variance=this.patternMatchVariance(counters,pattern,Code128Reader.MAX_INDIVIDUAL_VARIANCE);variance<bestVariance&&(bestVariance=variance,bestMatch=d)}if(bestMatch>=0)return bestMatch;throw new core_NotFoundException},Code128Reader.prototype.decodeRow=function(rowNumber,row,hints){var codeSet,convertFNC1=hints&&!0===hints.get(core_DecodeHintType.ASSUME_GS1),startPatternInfo=Code128Reader.findStartPattern(row),startCode=startPatternInfo[2],currentRawCodesIndex=0,rawCodes=new Uint8Array(20);switch(rawCodes[currentRawCodesIndex++]=startCode,startCode){case Code128Reader.CODE_START_A:codeSet=Code128Reader.CODE_CODE_A;break;case Code128Reader.CODE_START_B:codeSet=Code128Reader.CODE_CODE_B;break;case Code128Reader.CODE_START_C:codeSet=Code128Reader.CODE_CODE_C;break;default:throw new core_FormatException}for(var done=!1,isNextShifted=!1,result="",lastStart=startPatternInfo[0],nextStart=startPatternInfo[1],counters=Int32Array.from([0,0,0,0,0,0]),lastCode=0,code=0,checksumTotal=startCode,multiplier=0,lastCharacterWasPrintable=!0,upperMode=!1,shiftUpperMode=!1;!done;){var unshift=isNextShifted;switch(isNextShifted=!1,lastCode=code,code=Code128Reader.decodeCode(row,counters,nextStart),rawCodes[currentRawCodesIndex++]=code,code!==Code128Reader.CODE_STOP&&(lastCharacterWasPrintable=!0),code!==Code128Reader.CODE_STOP&&(checksumTotal+=++multiplier*code),lastStart=nextStart,nextStart+=counters.reduce(function(previous,current){return previous+current},0),code){case Code128Reader.CODE_START_A:case Code128Reader.CODE_START_B:case Code128Reader.CODE_START_C:throw new core_FormatException}switch(codeSet){case Code128Reader.CODE_CODE_A:if(code<64)result+=shiftUpperMode===upperMode?String.fromCharCode(" ".charCodeAt(0)+code):String.fromCharCode(" ".charCodeAt(0)+code+128),shiftUpperMode=!1;else if(code<96)result+=shiftUpperMode===upperMode?String.fromCharCode(code-64):String.fromCharCode(code+64),shiftUpperMode=!1;else switch(code!==Code128Reader.CODE_STOP&&(lastCharacterWasPrintable=!1),code){case Code128Reader.CODE_FNC_1:convertFNC1&&(0===result.length?result+="]C1":result+=String.fromCharCode(29));break;case Code128Reader.CODE_FNC_2:case Code128Reader.CODE_FNC_3:break;case Code128Reader.CODE_FNC_4_A:!upperMode&&shiftUpperMode?(upperMode=!0,shiftUpperMode=!1):upperMode&&shiftUpperMode?(upperMode=!1,shiftUpperMode=!1):shiftUpperMode=!0;break;case Code128Reader.CODE_SHIFT:isNextShifted=!0,codeSet=Code128Reader.CODE_CODE_B;break;case Code128Reader.CODE_CODE_B:codeSet=Code128Reader.CODE_CODE_B;break;case Code128Reader.CODE_CODE_C:codeSet=Code128Reader.CODE_CODE_C;break;case Code128Reader.CODE_STOP:done=!0}break;case Code128Reader.CODE_CODE_B:if(code<96)result+=shiftUpperMode===upperMode?String.fromCharCode(" ".charCodeAt(0)+code):String.fromCharCode(" ".charCodeAt(0)+code+128),shiftUpperMode=!1;else switch(code!==Code128Reader.CODE_STOP&&(lastCharacterWasPrintable=!1),code){case Code128Reader.CODE_FNC_1:convertFNC1&&(0===result.length?result+="]C1":result+=String.fromCharCode(29));break;case Code128Reader.CODE_FNC_2:case Code128Reader.CODE_FNC_3:break;case Code128Reader.CODE_FNC_4_B:!upperMode&&shiftUpperMode?(upperMode=!0,shiftUpperMode=!1):upperMode&&shiftUpperMode?(upperMode=!1,shiftUpperMode=!1):shiftUpperMode=!0;break;case Code128Reader.CODE_SHIFT:isNextShifted=!0,codeSet=Code128Reader.CODE_CODE_A;break;case Code128Reader.CODE_CODE_A:codeSet=Code128Reader.CODE_CODE_A;break;case Code128Reader.CODE_CODE_C:codeSet=Code128Reader.CODE_CODE_C;break;case Code128Reader.CODE_STOP:done=!0}break;case Code128Reader.CODE_CODE_C:if(code<100)code<10&&(result+="0"),result+=code;else switch(code!==Code128Reader.CODE_STOP&&(lastCharacterWasPrintable=!1),code){case Code128Reader.CODE_FNC_1:convertFNC1&&(0===result.length?result+="]C1":result+=String.fromCharCode(29));break;case Code128Reader.CODE_CODE_A:codeSet=Code128Reader.CODE_CODE_A;break;case Code128Reader.CODE_CODE_B:codeSet=Code128Reader.CODE_CODE_B;break;case Code128Reader.CODE_STOP:done=!0}}unshift&&(codeSet=codeSet===Code128Reader.CODE_CODE_A?Code128Reader.CODE_CODE_B:Code128Reader.CODE_CODE_A)}var lastPatternSize=nextStart-lastStart;if(nextStart=row.getNextUnset(nextStart),!row.isRange(nextStart,Math.min(row.getSize(),nextStart+(nextStart-lastStart)/2),!1))throw new core_NotFoundException;if((checksumTotal-=multiplier*lastCode)%103!==lastCode)throw new core_ChecksumException;var resultLength=result.length;if(0===resultLength)throw new core_NotFoundException;resultLength>0&&lastCharacterWasPrintable&&(result=codeSet===Code128Reader.CODE_CODE_C?result.substring(0,resultLength-2):result.substring(0,resultLength-1));for(var left=(startPatternInfo[1]+startPatternInfo[0])/2,right=lastStart+lastPatternSize/2,rawCodesSize=rawCodes.length,rawBytes=new Uint8Array(rawCodesSize),i=0;i<rawCodesSize;i++)rawBytes[i]=rawCodes[i];var points=[new core_ResultPoint(left,rowNumber),new core_ResultPoint(right,rowNumber)];return new core_Result(result,rawBytes,0,points,core_BarcodeFormat.CODE_128,(new Date).getTime())},Code128Reader.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Code128Reader.MAX_AVG_VARIANCE=.25,Code128Reader.MAX_INDIVIDUAL_VARIANCE=.7,Code128Reader.CODE_SHIFT=98,Code128Reader.CODE_CODE_C=99,Code128Reader.CODE_CODE_B=100,Code128Reader.CODE_CODE_A=101,Code128Reader.CODE_FNC_1=102,Code128Reader.CODE_FNC_2=97,Code128Reader.CODE_FNC_3=96,Code128Reader.CODE_FNC_4_A=101,Code128Reader.CODE_FNC_4_B=100,Code128Reader.CODE_START_A=103,Code128Reader.CODE_START_B=104,Code128Reader.CODE_START_C=105,Code128Reader.CODE_STOP=106,Code128Reader}(oned_OneDReader);var Code39Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Code39Reader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Code39Reader=function(_super){function Code39Reader(usingCheckDigit,extendedMode){void 0===usingCheckDigit&&(usingCheckDigit=!1),void 0===extendedMode&&(extendedMode=!1);var _this=_super.call(this)||this;return _this.usingCheckDigit=usingCheckDigit,_this.extendedMode=extendedMode,_this.decodeRowResult="",_this.counters=new Int32Array(9),_this}return Code39Reader_extends(Code39Reader,_super),Code39Reader.prototype.decodeRow=function(rowNumber,row,hints){var e_1,_a,e_2,_b,theCounters=this.counters;theCounters.fill(0),this.decodeRowResult="";var decodedChar,lastStart,start=Code39Reader.findAsteriskPattern(row,theCounters),nextStart=row.getNextSet(start[1]),end=row.getSize();do{Code39Reader.recordPattern(row,nextStart,theCounters);var pattern=Code39Reader.toNarrowWidePattern(theCounters);if(pattern<0)throw new core_NotFoundException;decodedChar=Code39Reader.patternToChar(pattern),this.decodeRowResult+=decodedChar,lastStart=nextStart;try{for(var theCounters_1=(e_1=void 0,Code39Reader_values(theCounters)),theCounters_1_1=theCounters_1.next();!theCounters_1_1.done;theCounters_1_1=theCounters_1.next()){nextStart+=theCounters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{theCounters_1_1&&!theCounters_1_1.done&&(_a=theCounters_1.return)&&_a.call(theCounters_1)}finally{if(e_1)throw e_1.error}}nextStart=row.getNextSet(nextStart)}while("*"!==decodedChar);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var resultString,lastPatternSize=0;try{for(var theCounters_2=Code39Reader_values(theCounters),theCounters_2_1=theCounters_2.next();!theCounters_2_1.done;theCounters_2_1=theCounters_2.next()){lastPatternSize+=theCounters_2_1.value}}catch(e_2_1){e_2={error:e_2_1}}finally{try{theCounters_2_1&&!theCounters_2_1.done&&(_b=theCounters_2.return)&&_b.call(theCounters_2)}finally{if(e_2)throw e_2.error}}if(nextStart!==end&&2*(nextStart-lastStart-lastPatternSize)<lastPatternSize)throw new core_NotFoundException;if(this.usingCheckDigit){for(var max=this.decodeRowResult.length-1,total=0,i=0;i<max;i++)total+=Code39Reader.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(i));if(this.decodeRowResult.charAt(max)!==Code39Reader.ALPHABET_STRING.charAt(total%43))throw new core_ChecksumException;this.decodeRowResult=this.decodeRowResult.substring(0,max)}if(0===this.decodeRowResult.length)throw new core_NotFoundException;resultString=this.extendedMode?Code39Reader.decodeExtended(this.decodeRowResult):this.decodeRowResult;var left=(start[1]+start[0])/2,right=lastStart+lastPatternSize/2;return new core_Result(resultString,null,0,[new core_ResultPoint(left,rowNumber),new core_ResultPoint(right,rowNumber)],core_BarcodeFormat.CODE_39,(new Date).getTime())},Code39Reader.findAsteriskPattern=function(row,counters){for(var width=row.getSize(),rowOffset=row.getNextSet(0),counterPosition=0,patternStart=rowOffset,isWhite=!1,patternLength=counters.length,i=rowOffset;i<width;i++)if(row.get(i)!==isWhite)counters[counterPosition]++;else{if(counterPosition===patternLength-1){if(this.toNarrowWidePattern(counters)===Code39Reader.ASTERISK_ENCODING&&row.isRange(Math.max(0,patternStart-Math.floor((i-patternStart)/2)),patternStart,!1))return[patternStart,i];patternStart+=counters[0]+counters[1],counters.copyWithin(0,2,2+counterPosition-1),counters[counterPosition-1]=0,counters[counterPosition]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},Code39Reader.toNarrowWidePattern=function(counters){var e_3,_a,wideCounters,numCounters=counters.length,maxNarrowCounter=0;do{var minCounter=2147483647;try{for(var counters_1=(e_3=void 0,Code39Reader_values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){(counter=counters_1_1.value)<minCounter&&counter>maxNarrowCounter&&(minCounter=counter)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_3)throw e_3.error}}maxNarrowCounter=minCounter,wideCounters=0;for(var totalWideCountersWidth=0,pattern=0,i=0;i<numCounters;i++){(counter=counters[i])>maxNarrowCounter&&(pattern|=1<<numCounters-1-i,wideCounters++,totalWideCountersWidth+=counter)}if(3===wideCounters){for(i=0;i<numCounters&&wideCounters>0;i++){var counter;if((counter=counters[i])>maxNarrowCounter&&(wideCounters--,2*counter>=totalWideCountersWidth))return-1}return pattern}}while(wideCounters>3);return-1},Code39Reader.patternToChar=function(pattern){for(var i=0;i<Code39Reader.CHARACTER_ENCODINGS.length;i++)if(Code39Reader.CHARACTER_ENCODINGS[i]===pattern)return Code39Reader.ALPHABET_STRING.charAt(i);if(pattern===Code39Reader.ASTERISK_ENCODING)return"*";throw new core_NotFoundException},Code39Reader.decodeExtended=function(encoded){for(var length=encoded.length,decoded="",i=0;i<length;i++){var c=encoded.charAt(i);if("+"===c||"$"===c||"%"===c||"/"===c){var next=encoded.charAt(i+1),decodedChar="\0";switch(c){case"+":if(!(next>="A"&&next<="Z"))throw new core_FormatException;decodedChar=String.fromCharCode(next.charCodeAt(0)+32);break;case"$":if(!(next>="A"&&next<="Z"))throw new core_FormatException;decodedChar=String.fromCharCode(next.charCodeAt(0)-64);break;case"%":if(next>="A"&&next<="E")decodedChar=String.fromCharCode(next.charCodeAt(0)-38);else if(next>="F"&&next<="J")decodedChar=String.fromCharCode(next.charCodeAt(0)-11);else if(next>="K"&&next<="O")decodedChar=String.fromCharCode(next.charCodeAt(0)+16);else if(next>="P"&&next<="T")decodedChar=String.fromCharCode(next.charCodeAt(0)+43);else if("U"===next)decodedChar="\0";else if("V"===next)decodedChar="@";else if("W"===next)decodedChar="`";else{if("X"!==next&&"Y"!==next&&"Z"!==next)throw new core_FormatException;decodedChar=""}break;case"/":if(next>="A"&&next<="O")decodedChar=String.fromCharCode(next.charCodeAt(0)-32);else{if("Z"!==next)throw new core_FormatException;decodedChar=":"}}decoded+=decodedChar,i++}else decoded+=c}return decoded},Code39Reader.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Code39Reader.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Code39Reader.ASTERISK_ENCODING=148,Code39Reader}(oned_OneDReader);const oned_Code39Reader=Code39Reader;var Code93Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Code93Reader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Code93Reader=function(_super){function Code93Reader(){var _this=_super.call(this)||this;return _this.decodeRowResult="",_this.counters=new Int32Array(6),_this}return Code93Reader_extends(Code93Reader,_super),Code93Reader.prototype.decodeRow=function(rowNumber,row,hints){var e_1,_a,e_2,_b,decodedChar,lastStart,start=this.findAsteriskPattern(row),nextStart=row.getNextSet(start[1]),end=row.getSize(),theCounters=this.counters;theCounters.fill(0),this.decodeRowResult="";do{Code93Reader.recordPattern(row,nextStart,theCounters);var pattern=this.toPattern(theCounters);if(pattern<0)throw new core_NotFoundException;decodedChar=this.patternToChar(pattern),this.decodeRowResult+=decodedChar,lastStart=nextStart;try{for(var theCounters_1=(e_1=void 0,Code93Reader_values(theCounters)),theCounters_1_1=theCounters_1.next();!theCounters_1_1.done;theCounters_1_1=theCounters_1.next()){nextStart+=theCounters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{theCounters_1_1&&!theCounters_1_1.done&&(_a=theCounters_1.return)&&_a.call(theCounters_1)}finally{if(e_1)throw e_1.error}}nextStart=row.getNextSet(nextStart)}while("*"!==decodedChar);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var lastPatternSize=0;try{for(var theCounters_2=Code93Reader_values(theCounters),theCounters_2_1=theCounters_2.next();!theCounters_2_1.done;theCounters_2_1=theCounters_2.next()){lastPatternSize+=theCounters_2_1.value}}catch(e_2_1){e_2={error:e_2_1}}finally{try{theCounters_2_1&&!theCounters_2_1.done&&(_b=theCounters_2.return)&&_b.call(theCounters_2)}finally{if(e_2)throw e_2.error}}if(nextStart===end||!row.get(nextStart))throw new core_NotFoundException;if(this.decodeRowResult.length<2)throw new core_NotFoundException;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var resultString=this.decodeExtended(this.decodeRowResult),left=(start[1]+start[0])/2,right=lastStart+lastPatternSize/2;return new core_Result(resultString,null,0,[new core_ResultPoint(left,rowNumber),new core_ResultPoint(right,rowNumber)],core_BarcodeFormat.CODE_93,(new Date).getTime())},Code93Reader.prototype.findAsteriskPattern=function(row){var width=row.getSize(),rowOffset=row.getNextSet(0);this.counters.fill(0);for(var theCounters=this.counters,patternStart=rowOffset,isWhite=!1,patternLength=theCounters.length,counterPosition=0,i=rowOffset;i<width;i++)if(row.get(i)!==isWhite)theCounters[counterPosition]++;else{if(counterPosition===patternLength-1){if(this.toPattern(theCounters)===Code93Reader.ASTERISK_ENCODING)return new Int32Array([patternStart,i]);patternStart+=theCounters[0]+theCounters[1],theCounters.copyWithin(0,2,2+counterPosition-1),theCounters[counterPosition-1]=0,theCounters[counterPosition]=0,counterPosition--}else counterPosition++;theCounters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},Code93Reader.prototype.toPattern=function(counters){var e_3,_a,sum=0;try{for(var counters_1=Code93Reader_values(counters),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){sum+=counters_1_1.value}}catch(e_3_1){e_3={error:e_3_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_3)throw e_3.error}}for(var pattern=0,max=counters.length,i=0;i<max;i++){var scaled=Math.round(9*counters[i]/sum);if(scaled<1||scaled>4)return-1;if(1&i)pattern<<=scaled;else for(var j=0;j<scaled;j++)pattern=pattern<<1|1}return pattern},Code93Reader.prototype.patternToChar=function(pattern){for(var i=0;i<Code93Reader.CHARACTER_ENCODINGS.length;i++)if(Code93Reader.CHARACTER_ENCODINGS[i]===pattern)return Code93Reader.ALPHABET_STRING.charAt(i);throw new core_NotFoundException},Code93Reader.prototype.decodeExtended=function(encoded){for(var length=encoded.length,decoded="",i=0;i<length;i++){var c=encoded.charAt(i);if(c>="a"&&c<="d"){if(i>=length-1)throw new core_FormatException;var next=encoded.charAt(i+1),decodedChar="\0";switch(c){case"d":if(!(next>="A"&&next<="Z"))throw new core_FormatException;decodedChar=String.fromCharCode(next.charCodeAt(0)+32);break;case"a":if(!(next>="A"&&next<="Z"))throw new core_FormatException;decodedChar=String.fromCharCode(next.charCodeAt(0)-64);break;case"b":if(next>="A"&&next<="E")decodedChar=String.fromCharCode(next.charCodeAt(0)-38);else if(next>="F"&&next<="J")decodedChar=String.fromCharCode(next.charCodeAt(0)-11);else if(next>="K"&&next<="O")decodedChar=String.fromCharCode(next.charCodeAt(0)+16);else if(next>="P"&&next<="T")decodedChar=String.fromCharCode(next.charCodeAt(0)+43);else if("U"===next)decodedChar="\0";else if("V"===next)decodedChar="@";else if("W"===next)decodedChar="`";else{if(!(next>="X"&&next<="Z"))throw new core_FormatException;decodedChar=String.fromCharCode(127)}break;case"c":if(next>="A"&&next<="O")decodedChar=String.fromCharCode(next.charCodeAt(0)-32);else{if("Z"!==next)throw new core_FormatException;decodedChar=":"}}decoded+=decodedChar,i++}else decoded+=c}return decoded},Code93Reader.prototype.checkChecksums=function(result){var length=result.length;this.checkOneChecksum(result,length-2,20),this.checkOneChecksum(result,length-1,15)},Code93Reader.prototype.checkOneChecksum=function(result,checkPosition,weightMax){for(var weight=1,total=0,i=checkPosition-1;i>=0;i--)total+=weight*Code93Reader.ALPHABET_STRING.indexOf(result.charAt(i)),++weight>weightMax&&(weight=1);if(result.charAt(checkPosition)!==Code93Reader.ALPHABET_STRING[total%47])throw new core_ChecksumException},Code93Reader.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",Code93Reader.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],Code93Reader.ASTERISK_ENCODING=Code93Reader.CHARACTER_ENCODINGS[47],Code93Reader}(oned_OneDReader);const oned_Code93Reader=Code93Reader;var ITFReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ITFReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ITFReader=function(_super){function ITFReader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.narrowLineWidth=-1,_this}return ITFReader_extends(ITFReader,_super),ITFReader.prototype.decodeRow=function(rowNumber,row,hints){var e_1,_a,startRange=this.decodeStart(row),endRange=this.decodeEnd(row),result=new util_StringBuilder;ITFReader.decodeMiddle(row,startRange[1],endRange[0],result);var resultString=result.toString(),allowedLengths=null;null!=hints&&(allowedLengths=hints.get(core_DecodeHintType.ALLOWED_LENGTHS)),null==allowedLengths&&(allowedLengths=ITFReader.DEFAULT_ALLOWED_LENGTHS);var length=resultString.length,lengthOK=!1,maxAllowedLength=0;try{for(var allowedLengths_1=ITFReader_values(allowedLengths),allowedLengths_1_1=allowedLengths_1.next();!allowedLengths_1_1.done;allowedLengths_1_1=allowedLengths_1.next()){var value=allowedLengths_1_1.value;if(length===value){lengthOK=!0;break}value>maxAllowedLength&&(maxAllowedLength=value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{allowedLengths_1_1&&!allowedLengths_1_1.done&&(_a=allowedLengths_1.return)&&_a.call(allowedLengths_1)}finally{if(e_1)throw e_1.error}}if(!lengthOK&&length>maxAllowedLength&&(lengthOK=!0),!lengthOK)throw new core_FormatException;var points=[new core_ResultPoint(startRange[1],rowNumber),new core_ResultPoint(endRange[0],rowNumber)];return new core_Result(resultString,null,0,points,core_BarcodeFormat.ITF,(new Date).getTime())},ITFReader.decodeMiddle=function(row,payloadStart,payloadEnd,resultString){var counterDigitPair=new Int32Array(10),counterBlack=new Int32Array(5),counterWhite=new Int32Array(5);for(counterDigitPair.fill(0),counterBlack.fill(0),counterWhite.fill(0);payloadStart<payloadEnd;){oned_OneDReader.recordPattern(row,payloadStart,counterDigitPair);for(var k=0;k<5;k++){var twoK=2*k;counterBlack[k]=counterDigitPair[twoK],counterWhite[k]=counterDigitPair[twoK+1]}var bestMatch=ITFReader.decodeDigit(counterBlack);resultString.append(bestMatch.toString()),bestMatch=this.decodeDigit(counterWhite),resultString.append(bestMatch.toString()),counterDigitPair.forEach(function(counterDigit){payloadStart+=counterDigit})}},ITFReader.prototype.decodeStart=function(row){var endStart=ITFReader.skipWhiteSpace(row),startPattern=ITFReader.findGuardPattern(row,endStart,ITFReader.START_PATTERN);return this.narrowLineWidth=(startPattern[1]-startPattern[0])/4,this.validateQuietZone(row,startPattern[0]),startPattern},ITFReader.prototype.validateQuietZone=function(row,startPattern){var quietCount=10*this.narrowLineWidth;quietCount=quietCount<startPattern?quietCount:startPattern;for(var i=startPattern-1;quietCount>0&&i>=0&&!row.get(i);i--)quietCount--;if(0!==quietCount)throw new core_NotFoundException},ITFReader.skipWhiteSpace=function(row){var width=row.getSize(),endStart=row.getNextSet(0);if(endStart===width)throw new core_NotFoundException;return endStart},ITFReader.prototype.decodeEnd=function(row){row.reverse();try{var endStart=ITFReader.skipWhiteSpace(row),endPattern=void 0;try{endPattern=ITFReader.findGuardPattern(row,endStart,ITFReader.END_PATTERN_REVERSED[0])}catch(error){error instanceof core_NotFoundException&&(endPattern=ITFReader.findGuardPattern(row,endStart,ITFReader.END_PATTERN_REVERSED[1]))}this.validateQuietZone(row,endPattern[0]);var temp=endPattern[0];return endPattern[0]=row.getSize()-endPattern[1],endPattern[1]=row.getSize()-temp,endPattern}finally{row.reverse()}},ITFReader.findGuardPattern=function(row,rowOffset,pattern){var patternLength=pattern.length,counters=new Int32Array(patternLength),width=row.getSize(),isWhite=!1,counterPosition=0,patternStart=rowOffset;counters.fill(0);for(var x=rowOffset;x<width;x++)if(row.get(x)!==isWhite)counters[counterPosition]++;else{if(counterPosition===patternLength-1){if(oned_OneDReader.patternMatchVariance(counters,pattern,ITFReader.MAX_INDIVIDUAL_VARIANCE)<ITFReader.MAX_AVG_VARIANCE)return[patternStart,x];patternStart+=counters[0]+counters[1],util_System.arraycopy(counters,2,counters,0,counterPosition-1),counters[counterPosition-1]=0,counters[counterPosition]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},ITFReader.decodeDigit=function(counters){for(var bestVariance=ITFReader.MAX_AVG_VARIANCE,bestMatch=-1,max=ITFReader.PATTERNS.length,i=0;i<max;i++){var pattern=ITFReader.PATTERNS[i],variance=oned_OneDReader.patternMatchVariance(counters,pattern,ITFReader.MAX_INDIVIDUAL_VARIANCE);variance<bestVariance?(bestVariance=variance,bestMatch=i):variance===bestVariance&&(bestMatch=-1)}if(bestMatch>=0)return bestMatch%10;throw new core_NotFoundException},ITFReader.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ITFReader.MAX_AVG_VARIANCE=.38,ITFReader.MAX_INDIVIDUAL_VARIANCE=.5,ITFReader.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ITFReader.START_PATTERN=Int32Array.from([1,1,1,1]),ITFReader.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],ITFReader}(oned_OneDReader);const oned_ITFReader=ITFReader;var AbstractUPCEANReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const oned_AbstractUPCEANReader=function(_super){function AbstractUPCEANReader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.decodeRowStringBuffer="",_this}return AbstractUPCEANReader_extends(AbstractUPCEANReader,_super),AbstractUPCEANReader.findStartGuardPattern=function(row){for(var startRange,foundStart=!1,nextStart=0,counters=Int32Array.from([0,0,0]);!foundStart;){counters=Int32Array.from([0,0,0]);var start=(startRange=AbstractUPCEANReader.findGuardPattern(row,nextStart,!1,this.START_END_PATTERN,counters))[0],quietStart=start-((nextStart=startRange[1])-start);quietStart>=0&&(foundStart=row.isRange(quietStart,start,!1))}return startRange},AbstractUPCEANReader.checkChecksum=function(s){return AbstractUPCEANReader.checkStandardUPCEANChecksum(s)},AbstractUPCEANReader.checkStandardUPCEANChecksum=function(s){var length=s.length;if(0===length)return!1;var check=parseInt(s.charAt(length-1),10);return AbstractUPCEANReader.getStandardUPCEANChecksum(s.substring(0,length-1))===check},AbstractUPCEANReader.getStandardUPCEANChecksum=function(s){for(var length=s.length,sum=0,i=length-1;i>=0;i-=2){if((digit=s.charAt(i).charCodeAt(0)-"0".charCodeAt(0))<0||digit>9)throw new core_FormatException;sum+=digit}sum*=3;for(i=length-2;i>=0;i-=2){var digit;if((digit=s.charAt(i).charCodeAt(0)-"0".charCodeAt(0))<0||digit>9)throw new core_FormatException;sum+=digit}return(1e3-sum)%10},AbstractUPCEANReader.decodeEnd=function(row,endStart){return AbstractUPCEANReader.findGuardPattern(row,endStart,!1,AbstractUPCEANReader.START_END_PATTERN,new Int32Array(AbstractUPCEANReader.START_END_PATTERN.length).fill(0))},AbstractUPCEANReader.findGuardPatternWithoutCounters=function(row,rowOffset,whiteFirst,pattern){return this.findGuardPattern(row,rowOffset,whiteFirst,pattern,new Int32Array(pattern.length))},AbstractUPCEANReader.findGuardPattern=function(row,rowOffset,whiteFirst,pattern,counters){for(var width=row.getSize(),counterPosition=0,patternStart=rowOffset=whiteFirst?row.getNextUnset(rowOffset):row.getNextSet(rowOffset),patternLength=pattern.length,isWhite=whiteFirst,x=rowOffset;x<width;x++)if(row.get(x)!==isWhite)counters[counterPosition]++;else{if(counterPosition===patternLength-1){if(oned_OneDReader.patternMatchVariance(counters,pattern,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE)<AbstractUPCEANReader.MAX_AVG_VARIANCE)return Int32Array.from([patternStart,x]);patternStart+=counters[0]+counters[1];for(var slice=counters.slice(2,counters.length),i=0;i<counterPosition-1;i++)counters[i]=slice[i];counters[counterPosition-1]=0,counters[counterPosition]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},AbstractUPCEANReader.decodeDigit=function(row,counters,rowOffset,patterns){this.recordPattern(row,rowOffset,counters);for(var bestVariance=this.MAX_AVG_VARIANCE,bestMatch=-1,max=patterns.length,i=0;i<max;i++){var pattern=patterns[i],variance=oned_OneDReader.patternMatchVariance(counters,pattern,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE);variance<bestVariance&&(bestVariance=variance,bestMatch=i)}if(bestMatch>=0)return bestMatch;throw new core_NotFoundException},AbstractUPCEANReader.MAX_AVG_VARIANCE=.48,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE=.7,AbstractUPCEANReader.START_END_PATTERN=Int32Array.from([1,1,1]),AbstractUPCEANReader.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),AbstractUPCEANReader.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),AbstractUPCEANReader.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],AbstractUPCEANReader}(oned_OneDReader);var UPCEANExtension5Support_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},UPCEANExtension5Support=function(){function UPCEANExtension5Support(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return UPCEANExtension5Support.prototype.decodeRow=function(rowNumber,row,extensionStartRange){var result=this.decodeRowStringBuffer,end=this.decodeMiddle(row,extensionStartRange,result),resultString=result.toString(),extensionData=UPCEANExtension5Support.parseExtensionString(resultString),resultPoints=[new core_ResultPoint((extensionStartRange[0]+extensionStartRange[1])/2,rowNumber),new core_ResultPoint(end,rowNumber)],extensionResult=new core_Result(resultString,null,0,resultPoints,core_BarcodeFormat.UPC_EAN_EXTENSION,(new Date).getTime());return null!=extensionData&&extensionResult.putAllMetadata(extensionData),extensionResult},UPCEANExtension5Support.prototype.decodeMiddle=function(row,startRange,resultString){var e_1,_a,counters=this.decodeMiddleCounters;counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;for(var end=row.getSize(),rowOffset=startRange[1],lgPatternFound=0,x=0;x<5&&rowOffset<end;x++){var bestMatch=oned_AbstractUPCEANReader.decodeDigit(row,counters,rowOffset,oned_AbstractUPCEANReader.L_AND_G_PATTERNS);resultString+=String.fromCharCode("0".charCodeAt(0)+bestMatch%10);try{for(var counters_1=(e_1=void 0,UPCEANExtension5Support_values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){rowOffset+=counters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_1)throw e_1.error}}bestMatch>=10&&(lgPatternFound|=1<<4-x),4!==x&&(rowOffset=row.getNextSet(rowOffset),rowOffset=row.getNextUnset(rowOffset))}if(5!==resultString.length)throw new core_NotFoundException;var checkDigit=this.determineCheckDigit(lgPatternFound);if(UPCEANExtension5Support.extensionChecksum(resultString.toString())!==checkDigit)throw new core_NotFoundException;return rowOffset},UPCEANExtension5Support.extensionChecksum=function(s){for(var length=s.length,sum=0,i=length-2;i>=0;i-=2)sum+=s.charAt(i).charCodeAt(0)-"0".charCodeAt(0);sum*=3;for(i=length-1;i>=0;i-=2)sum+=s.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return(sum*=3)%10},UPCEANExtension5Support.prototype.determineCheckDigit=function(lgPatternFound){for(var d=0;d<10;d++)if(lgPatternFound===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new core_NotFoundException},UPCEANExtension5Support.parseExtensionString=function(raw){if(5!==raw.length)return null;var value=UPCEANExtension5Support.parseExtension5String(raw);return null==value?null:new Map([[core_ResultMetadataType.SUGGESTED_PRICE,value]])},UPCEANExtension5Support.parseExtension5String=function(raw){var currency;switch(raw.charAt(0)){case"0":currency="£";break;case"5":currency="$";break;case"9":switch(raw){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}currency="";break;default:currency=""}var rawAmount=parseInt(raw.substring(1)),hundredths=rawAmount%100;return currency+(rawAmount/100).toString()+"."+(hundredths<10?"0"+hundredths:hundredths.toString())},UPCEANExtension5Support}();const oned_UPCEANExtension5Support=UPCEANExtension5Support;var UPCEANExtension2Support_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},UPCEANExtension2Support=function(){function UPCEANExtension2Support(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return UPCEANExtension2Support.prototype.decodeRow=function(rowNumber,row,extensionStartRange){var result=this.decodeRowStringBuffer,end=this.decodeMiddle(row,extensionStartRange,result),resultString=result.toString(),extensionData=UPCEANExtension2Support.parseExtensionString(resultString),resultPoints=[new core_ResultPoint((extensionStartRange[0]+extensionStartRange[1])/2,rowNumber),new core_ResultPoint(end,rowNumber)],extensionResult=new core_Result(resultString,null,0,resultPoints,core_BarcodeFormat.UPC_EAN_EXTENSION,(new Date).getTime());return null!=extensionData&&extensionResult.putAllMetadata(extensionData),extensionResult},UPCEANExtension2Support.prototype.decodeMiddle=function(row,startRange,resultString){var e_1,_a,counters=this.decodeMiddleCounters;counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;for(var end=row.getSize(),rowOffset=startRange[1],checkParity=0,x=0;x<2&&rowOffset<end;x++){var bestMatch=oned_AbstractUPCEANReader.decodeDigit(row,counters,rowOffset,oned_AbstractUPCEANReader.L_AND_G_PATTERNS);resultString+=String.fromCharCode("0".charCodeAt(0)+bestMatch%10);try{for(var counters_1=(e_1=void 0,UPCEANExtension2Support_values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){rowOffset+=counters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_1)throw e_1.error}}bestMatch>=10&&(checkParity|=1<<1-x),1!==x&&(rowOffset=row.getNextSet(rowOffset),rowOffset=row.getNextUnset(rowOffset))}if(2!==resultString.length)throw new core_NotFoundException;if(parseInt(resultString.toString())%4!==checkParity)throw new core_NotFoundException;return rowOffset},UPCEANExtension2Support.parseExtensionString=function(raw){return 2!==raw.length?null:new Map([[core_ResultMetadataType.ISSUE_NUMBER,parseInt(raw)]])},UPCEANExtension2Support}();const oned_UPCEANExtension2Support=UPCEANExtension2Support;const oned_UPCEANExtensionSupport=function(){function UPCEANExtensionSupport(){}return UPCEANExtensionSupport.decodeRow=function(rowNumber,row,rowOffset){var extensionStartRange=oned_AbstractUPCEANReader.findGuardPattern(row,rowOffset,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new oned_UPCEANExtension5Support).decodeRow(rowNumber,row,extensionStartRange)}catch(err){return(new oned_UPCEANExtension2Support).decodeRow(rowNumber,row,extensionStartRange)}},UPCEANExtensionSupport.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),UPCEANExtensionSupport}();var UPCEANReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const oned_UPCEANReader=function(_super){function UPCEANReader(){var _this=_super.call(this)||this;_this.decodeRowStringBuffer="",UPCEANReader.L_AND_G_PATTERNS=UPCEANReader.L_PATTERNS.map(function(arr){return Int32Array.from(arr)});for(var i=10;i<20;i++){for(var widths=UPCEANReader.L_PATTERNS[i-10],reversedWidths=new Int32Array(widths.length),j=0;j<widths.length;j++)reversedWidths[j]=widths[widths.length-j-1];UPCEANReader.L_AND_G_PATTERNS[i]=reversedWidths}return _this}return UPCEANReader_extends(UPCEANReader,_super),UPCEANReader.prototype.decodeRow=function(rowNumber,row,hints){var startGuardRange=UPCEANReader.findStartGuardPattern(row),resultPointCallback=null==hints?null:hints.get(core_DecodeHintType.NEED_RESULT_POINT_CALLBACK);if(null!=resultPointCallback){var resultPoint_1=new core_ResultPoint((startGuardRange[0]+startGuardRange[1])/2,rowNumber);resultPointCallback.foundPossibleResultPoint(resultPoint_1)}var budello=this.decodeMiddle(row,startGuardRange,this.decodeRowStringBuffer),endStart=budello.rowOffset,result=budello.resultString;if(null!=resultPointCallback){var resultPoint_2=new core_ResultPoint(endStart,rowNumber);resultPointCallback.foundPossibleResultPoint(resultPoint_2)}var endRange=UPCEANReader.decodeEnd(row,endStart);if(null!=resultPointCallback){var resultPoint_3=new core_ResultPoint((endRange[0]+endRange[1])/2,rowNumber);resultPointCallback.foundPossibleResultPoint(resultPoint_3)}var end=endRange[1],quietEnd=end+(end-endRange[0]);if(quietEnd>=row.getSize()||!row.isRange(end,quietEnd,!1))throw new core_NotFoundException;var resultString=result.toString();if(resultString.length<8)throw new core_FormatException;if(!UPCEANReader.checkChecksum(resultString))throw new core_ChecksumException;var left=(startGuardRange[1]+startGuardRange[0])/2,right=(endRange[1]+endRange[0])/2,format=this.getBarcodeFormat(),resultPoint=[new core_ResultPoint(left,rowNumber),new core_ResultPoint(right,rowNumber)],decodeResult=new core_Result(resultString,null,0,resultPoint,format,(new Date).getTime()),extensionLength=0;try{var extensionResult=oned_UPCEANExtensionSupport.decodeRow(rowNumber,row,endRange[1]);decodeResult.putMetadata(core_ResultMetadataType.UPC_EAN_EXTENSION,extensionResult.getText()),decodeResult.putAllMetadata(extensionResult.getResultMetadata()),decodeResult.addResultPoints(extensionResult.getResultPoints()),extensionLength=extensionResult.getText().length}catch(err){}var allowedExtensions=null==hints?null:hints.get(core_DecodeHintType.ALLOWED_EAN_EXTENSIONS);if(null!=allowedExtensions){var valid=!1;for(var length_1 in allowedExtensions)if(extensionLength.toString()===length_1){valid=!0;break}if(!valid)throw new core_NotFoundException}return format===core_BarcodeFormat.EAN_13||core_BarcodeFormat.UPC_A,decodeResult},UPCEANReader.checkChecksum=function(s){return UPCEANReader.checkStandardUPCEANChecksum(s)},UPCEANReader.checkStandardUPCEANChecksum=function(s){var length=s.length;if(0===length)return!1;var check=parseInt(s.charAt(length-1),10);return UPCEANReader.getStandardUPCEANChecksum(s.substring(0,length-1))===check},UPCEANReader.getStandardUPCEANChecksum=function(s){for(var length=s.length,sum=0,i=length-1;i>=0;i-=2){if((digit=s.charAt(i).charCodeAt(0)-"0".charCodeAt(0))<0||digit>9)throw new core_FormatException;sum+=digit}sum*=3;for(i=length-2;i>=0;i-=2){var digit;if((digit=s.charAt(i).charCodeAt(0)-"0".charCodeAt(0))<0||digit>9)throw new core_FormatException;sum+=digit}return(1e3-sum)%10},UPCEANReader.decodeEnd=function(row,endStart){return UPCEANReader.findGuardPattern(row,endStart,!1,UPCEANReader.START_END_PATTERN,new Int32Array(UPCEANReader.START_END_PATTERN.length).fill(0))},UPCEANReader}(oned_AbstractUPCEANReader);var EAN13Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),EAN13Reader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},EAN13Reader=function(_super){function EAN13Reader(){var _this=_super.call(this)||this;return _this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),_this}return EAN13Reader_extends(EAN13Reader,_super),EAN13Reader.prototype.decodeMiddle=function(row,startRange,resultString){var e_1,_a,e_2,_b,counters=this.decodeMiddleCounters;counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;for(var end=row.getSize(),rowOffset=startRange[1],lgPatternFound=0,x=0;x<6&&rowOffset<end;x++){var bestMatch=oned_UPCEANReader.decodeDigit(row,counters,rowOffset,oned_UPCEANReader.L_AND_G_PATTERNS);resultString+=String.fromCharCode("0".charCodeAt(0)+bestMatch%10);try{for(var counters_1=(e_1=void 0,EAN13Reader_values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){rowOffset+=counters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_1)throw e_1.error}}bestMatch>=10&&(lgPatternFound|=1<<5-x)}resultString=EAN13Reader.determineFirstDigit(resultString,lgPatternFound),rowOffset=oned_UPCEANReader.findGuardPattern(row,rowOffset,!0,oned_UPCEANReader.MIDDLE_PATTERN,new Int32Array(oned_UPCEANReader.MIDDLE_PATTERN.length).fill(0))[1];for(x=0;x<6&&rowOffset<end;x++){bestMatch=oned_UPCEANReader.decodeDigit(row,counters,rowOffset,oned_UPCEANReader.L_PATTERNS);resultString+=String.fromCharCode("0".charCodeAt(0)+bestMatch);try{for(var counters_2=(e_2=void 0,EAN13Reader_values(counters)),counters_2_1=counters_2.next();!counters_2_1.done;counters_2_1=counters_2.next()){rowOffset+=counters_2_1.value}}catch(e_2_1){e_2={error:e_2_1}}finally{try{counters_2_1&&!counters_2_1.done&&(_b=counters_2.return)&&_b.call(counters_2)}finally{if(e_2)throw e_2.error}}}return{rowOffset,resultString}},EAN13Reader.prototype.getBarcodeFormat=function(){return core_BarcodeFormat.EAN_13},EAN13Reader.determineFirstDigit=function(resultString,lgPatternFound){for(var d=0;d<10;d++)if(lgPatternFound===this.FIRST_DIGIT_ENCODINGS[d])return resultString=String.fromCharCode("0".charCodeAt(0)+d)+resultString;throw new core_NotFoundException},EAN13Reader.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],EAN13Reader}(oned_UPCEANReader);const oned_EAN13Reader=EAN13Reader;var EAN8Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),EAN8Reader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},EAN8Reader=function(_super){function EAN8Reader(){var _this=_super.call(this)||this;return _this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),_this}return EAN8Reader_extends(EAN8Reader,_super),EAN8Reader.prototype.decodeMiddle=function(row,startRange,resultString){var e_1,_a,e_2,_b,counters=this.decodeMiddleCounters;counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;for(var end=row.getSize(),rowOffset=startRange[1],x=0;x<4&&rowOffset<end;x++){var bestMatch=oned_UPCEANReader.decodeDigit(row,counters,rowOffset,oned_UPCEANReader.L_PATTERNS);resultString+=String.fromCharCode("0".charCodeAt(0)+bestMatch);try{for(var counters_1=(e_1=void 0,EAN8Reader_values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){rowOffset+=counters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_1)throw e_1.error}}}rowOffset=oned_UPCEANReader.findGuardPattern(row,rowOffset,!0,oned_UPCEANReader.MIDDLE_PATTERN,new Int32Array(oned_UPCEANReader.MIDDLE_PATTERN.length).fill(0))[1];for(x=0;x<4&&rowOffset<end;x++){bestMatch=oned_UPCEANReader.decodeDigit(row,counters,rowOffset,oned_UPCEANReader.L_PATTERNS);resultString+=String.fromCharCode("0".charCodeAt(0)+bestMatch);try{for(var counters_2=(e_2=void 0,EAN8Reader_values(counters)),counters_2_1=counters_2.next();!counters_2_1.done;counters_2_1=counters_2.next()){rowOffset+=counters_2_1.value}}catch(e_2_1){e_2={error:e_2_1}}finally{try{counters_2_1&&!counters_2_1.done&&(_b=counters_2.return)&&_b.call(counters_2)}finally{if(e_2)throw e_2.error}}}return{rowOffset,resultString}},EAN8Reader.prototype.getBarcodeFormat=function(){return core_BarcodeFormat.EAN_8},EAN8Reader}(oned_UPCEANReader);const oned_EAN8Reader=EAN8Reader;var UPCAReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const oned_UPCAReader=function(_super){function UPCAReader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ean13Reader=new oned_EAN13Reader,_this}return UPCAReader_extends(UPCAReader,_super),UPCAReader.prototype.getBarcodeFormat=function(){return core_BarcodeFormat.UPC_A},UPCAReader.prototype.decode=function(image,hints){return this.maybeReturnResult(this.ean13Reader.decode(image))},UPCAReader.prototype.decodeRow=function(rowNumber,row,hints){return this.maybeReturnResult(this.ean13Reader.decodeRow(rowNumber,row,hints))},UPCAReader.prototype.decodeMiddle=function(row,startRange,resultString){return this.ean13Reader.decodeMiddle(row,startRange,resultString)},UPCAReader.prototype.maybeReturnResult=function(result){var text=result.getText();if("0"===text.charAt(0)){var upcaResult=new core_Result(text.substring(1),null,null,result.getResultPoints(),core_BarcodeFormat.UPC_A);return null!=result.getResultMetadata()&&upcaResult.putAllMetadata(result.getResultMetadata()),upcaResult}throw new core_NotFoundException},UPCAReader.prototype.reset=function(){this.ean13Reader.reset()},UPCAReader}(oned_UPCEANReader);var UPCEReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),UPCEReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},UPCEReader=function(_super){function UPCEReader(){var _this=_super.call(this)||this;return _this.decodeMiddleCounters=new Int32Array(4),_this}return UPCEReader_extends(UPCEReader,_super),UPCEReader.prototype.decodeMiddle=function(row,startRange,result){var e_1,_a,counters=this.decodeMiddleCounters.map(function(x){return x});counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;for(var end=row.getSize(),rowOffset=startRange[1],lgPatternFound=0,x=0;x<6&&rowOffset<end;x++){var bestMatch=UPCEReader.decodeDigit(row,counters,rowOffset,UPCEReader.L_AND_G_PATTERNS);result+=String.fromCharCode("0".charCodeAt(0)+bestMatch%10);try{for(var counters_1=(e_1=void 0,UPCEReader_values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){rowOffset+=counters_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_1)throw e_1.error}}bestMatch>=10&&(lgPatternFound|=1<<5-x)}return UPCEReader.determineNumSysAndCheckDigit(new util_StringBuilder(result),lgPatternFound),rowOffset},UPCEReader.prototype.decodeEnd=function(row,endStart){return UPCEReader.findGuardPatternWithoutCounters(row,endStart,!0,UPCEReader.MIDDLE_END_PATTERN)},UPCEReader.prototype.checkChecksum=function(s){return oned_UPCEANReader.checkChecksum(UPCEReader.convertUPCEtoUPCA(s))},UPCEReader.determineNumSysAndCheckDigit=function(resultString,lgPatternFound){for(var numSys=0;numSys<=1;numSys++)for(var d=0;d<10;d++)if(lgPatternFound===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[numSys][d])return resultString.insert(0,"0"+numSys),void resultString.append("0"+d);throw core_NotFoundException.getNotFoundInstance()},UPCEReader.prototype.getBarcodeFormat=function(){return core_BarcodeFormat.UPC_E},UPCEReader.convertUPCEtoUPCA=function(upce){var upceChars=upce.slice(1,7).split("").map(function(x){return x.charCodeAt(0)}),result=new util_StringBuilder;result.append(upce.charAt(0));var lastChar=upceChars[5];switch(lastChar){case 0:case 1:case 2:result.appendChars(upceChars,0,2),result.append(lastChar),result.append("0000"),result.appendChars(upceChars,2,3);break;case 3:result.appendChars(upceChars,0,3),result.append("00000"),result.appendChars(upceChars,3,2);break;case 4:result.appendChars(upceChars,0,4),result.append("00000"),result.append(upceChars[4]);break;default:result.appendChars(upceChars,0,5),result.append("0000"),result.append(lastChar)}return upce.length>=8&&result.append(upce.charAt(7)),result.toString()},UPCEReader.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),UPCEReader.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],UPCEReader}(oned_UPCEANReader);const oned_UPCEReader=UPCEReader;var MultiFormatUPCEANReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MultiFormatUPCEANReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},MultiFormatUPCEANReader=function(_super){function MultiFormatUPCEANReader(hints){var _this=_super.call(this)||this,possibleFormats=null==hints?null:hints.get(core_DecodeHintType.POSSIBLE_FORMATS),readers=[];return null!=possibleFormats&&(possibleFormats.indexOf(core_BarcodeFormat.EAN_13)>-1&&readers.push(new oned_EAN13Reader),possibleFormats.indexOf(core_BarcodeFormat.UPC_A)>-1&&readers.push(new oned_UPCAReader),possibleFormats.indexOf(core_BarcodeFormat.EAN_8)>-1&&readers.push(new oned_EAN8Reader),possibleFormats.indexOf(core_BarcodeFormat.UPC_E)>-1&&readers.push(new oned_UPCEReader)),0===readers.length&&(readers.push(new oned_EAN13Reader),readers.push(new oned_UPCAReader),readers.push(new oned_EAN8Reader),readers.push(new oned_UPCEReader)),_this.readers=readers,_this}return MultiFormatUPCEANReader_extends(MultiFormatUPCEANReader,_super),MultiFormatUPCEANReader.prototype.decodeRow=function(rowNumber,row,hints){var e_1,_a;try{for(var _b=MultiFormatUPCEANReader_values(this.readers),_c=_b.next();!_c.done;_c=_b.next()){var reader=_c.value;try{var result=reader.decodeRow(rowNumber,row,hints),ean13MayBeUPCA=result.getBarcodeFormat()===core_BarcodeFormat.EAN_13&&"0"===result.getText().charAt(0),possibleFormats=null==hints?null:hints.get(core_DecodeHintType.POSSIBLE_FORMATS),canReturnUPCA=null==possibleFormats||possibleFormats.includes(core_BarcodeFormat.UPC_A);if(ean13MayBeUPCA&&canReturnUPCA){var rawBytes=result.getRawBytes(),resultUPCA=new core_Result(result.getText().substring(1),rawBytes,rawBytes?rawBytes.length:null,result.getResultPoints(),core_BarcodeFormat.UPC_A);return resultUPCA.putAllMetadata(result.getResultMetadata()),resultUPCA}return result}catch(err){}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}throw new core_NotFoundException},MultiFormatUPCEANReader.prototype.reset=function(){var e_2,_a;try{for(var _b=MultiFormatUPCEANReader_values(this.readers),_c=_b.next();!_c.done;_c=_b.next()){_c.value.reset()}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}},MultiFormatUPCEANReader}(oned_OneDReader);const oned_MultiFormatUPCEANReader=MultiFormatUPCEANReader;var CodaBarReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const oned_CodaBarReader=function(_super){function CodaBarReader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},_this}return CodaBarReader_extends(CodaBarReader,_super),CodaBarReader.prototype.decodeRow=function(rowNumber,row,hints){var validRowData=this.getValidRowData(row);if(!validRowData)throw new core_NotFoundException;var retStr=this.codaBarDecodeRow(validRowData.row);if(!retStr)throw new core_NotFoundException;return new core_Result(retStr,null,0,[new core_ResultPoint(validRowData.left,rowNumber),new core_ResultPoint(validRowData.right,rowNumber)],core_BarcodeFormat.CODABAR,(new Date).getTime())},CodaBarReader.prototype.getValidRowData=function(row){var booleanArr=row.toArray(),startIndex=booleanArr.indexOf(!0);if(-1===startIndex)return null;var lastIndex=booleanArr.lastIndexOf(!0);if(lastIndex<=startIndex)return null;for(var result=[],lastBit=(booleanArr=booleanArr.slice(startIndex,lastIndex+1))[0],bitLength=1,i=1;i<booleanArr.length;i++)booleanArr[i]===lastBit?bitLength++:(lastBit=booleanArr[i],result.push(bitLength),bitLength=1);return result.push(bitLength),result.length<23&&(result.length+1)%8!=0?null:{row:result,left:startIndex,right:lastIndex}},CodaBarReader.prototype.codaBarDecodeRow=function(row){for(var code=[],barThreshold=Math.ceil(row.reduce(function(pre,item){return(pre+item)/2},0));row.length>0;){var key=row.splice(0,8).splice(0,7).map(function(len){return len<barThreshold?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[key])return null;code.push(this.CODA_BAR_CHAR_SET[key])}var strCode=code.join("");return this.validCodaBarString(strCode)?strCode:null},CodaBarReader.prototype.validCodaBarString=function(src){return/^[A-D].{1,}[A-D]$/.test(src)},CodaBarReader}(oned_OneDReader);var AbstractRSSReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AbstractRSSReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},AbstractRSSReader=function(_super){function AbstractRSSReader(){var _this=_super.call(this)||this;return _this.decodeFinderCounters=new Int32Array(4),_this.dataCharacterCounters=new Int32Array(8),_this.oddRoundingErrors=new Array(4),_this.evenRoundingErrors=new Array(4),_this.oddCounts=new Array(_this.dataCharacterCounters.length/2),_this.evenCounts=new Array(_this.dataCharacterCounters.length/2),_this}return AbstractRSSReader_extends(AbstractRSSReader,_super),AbstractRSSReader.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},AbstractRSSReader.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},AbstractRSSReader.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},AbstractRSSReader.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},AbstractRSSReader.prototype.getOddCounts=function(){return this.oddCounts},AbstractRSSReader.prototype.getEvenCounts=function(){return this.evenCounts},AbstractRSSReader.prototype.parseFinderValue=function(counters,finderPatterns){for(var value=0;value<finderPatterns.length;value++)if(oned_OneDReader.patternMatchVariance(counters,finderPatterns[value],AbstractRSSReader.MAX_INDIVIDUAL_VARIANCE)<AbstractRSSReader.MAX_AVG_VARIANCE)return value;throw new core_NotFoundException},AbstractRSSReader.count=function(array){return detector_MathUtils.sum(new Int32Array(array))},AbstractRSSReader.increment=function(array,errors){for(var index=0,biggestError=errors[0],i=1;i<array.length;i++)errors[i]>biggestError&&(biggestError=errors[i],index=i);array[index]++},AbstractRSSReader.decrement=function(array,errors){for(var index=0,biggestError=errors[0],i=1;i<array.length;i++)errors[i]<biggestError&&(biggestError=errors[i],index=i);array[index]--},AbstractRSSReader.isFinderPattern=function(counters){var e_1,_a,firstTwoSum=counters[0]+counters[1],ratio=firstTwoSum/(firstTwoSum+counters[2]+counters[3]);if(ratio>=AbstractRSSReader.MIN_FINDER_PATTERN_RATIO&&ratio<=AbstractRSSReader.MAX_FINDER_PATTERN_RATIO){var minCounter=Number.MAX_SAFE_INTEGER,maxCounter=Number.MIN_SAFE_INTEGER;try{for(var counters_1=AbstractRSSReader_values(counters),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){var counter=counters_1_1.value;counter>maxCounter&&(maxCounter=counter),counter<minCounter&&(minCounter=counter)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_1)throw e_1.error}}return maxCounter<10*minCounter}return!1},AbstractRSSReader.MAX_AVG_VARIANCE=.2,AbstractRSSReader.MAX_INDIVIDUAL_VARIANCE=.45,AbstractRSSReader.MIN_FINDER_PATTERN_RATIO=9.5/12,AbstractRSSReader.MAX_FINDER_PATTERN_RATIO=12.5/14,AbstractRSSReader}(oned_OneDReader);const rss_AbstractRSSReader=AbstractRSSReader;const rss_DataCharacter=function(){function DataCharacter(value,checksumPortion){this.value=value,this.checksumPortion=checksumPortion}return DataCharacter.prototype.getValue=function(){return this.value},DataCharacter.prototype.getChecksumPortion=function(){return this.checksumPortion},DataCharacter.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},DataCharacter.prototype.equals=function(o){if(!(o instanceof DataCharacter))return!1;var that=o;return this.value===that.value&&this.checksumPortion===that.checksumPortion},DataCharacter.prototype.hashCode=function(){return this.value^this.checksumPortion},DataCharacter}();const rss_FinderPattern=function(){function FinderPattern(value,startEnd,start,end,rowNumber){this.value=value,this.startEnd=startEnd,this.value=value,this.startEnd=startEnd,this.resultPoints=new Array,this.resultPoints.push(new core_ResultPoint(start,rowNumber)),this.resultPoints.push(new core_ResultPoint(end,rowNumber))}return FinderPattern.prototype.getValue=function(){return this.value},FinderPattern.prototype.getStartEnd=function(){return this.startEnd},FinderPattern.prototype.getResultPoints=function(){return this.resultPoints},FinderPattern.prototype.equals=function(o){if(!(o instanceof FinderPattern))return!1;var that=o;return this.value===that.value},FinderPattern.prototype.hashCode=function(){return this.value},FinderPattern}();var RSSUtils_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},RSSUtils=function(){function RSSUtils(){}return RSSUtils.getRSSvalue=function(widths,maxWidth,noNarrow){var e_1,_a,n=0;try{for(var widths_1=RSSUtils_values(widths),widths_1_1=widths_1.next();!widths_1_1.done;widths_1_1=widths_1.next()){n+=widths_1_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{widths_1_1&&!widths_1_1.done&&(_a=widths_1.return)&&_a.call(widths_1)}finally{if(e_1)throw e_1.error}}for(var val=0,narrowMask=0,elements=widths.length,bar=0;bar<elements-1;bar++){var elmWidth=void 0;for(elmWidth=1,narrowMask|=1<<bar;elmWidth<widths[bar];elmWidth++,narrowMask&=~(1<<bar)){var subVal=RSSUtils.combins(n-elmWidth-1,elements-bar-2);if(noNarrow&&0===narrowMask&&n-elmWidth-(elements-bar-1)>=elements-bar-1&&(subVal-=RSSUtils.combins(n-elmWidth-(elements-bar),elements-bar-2)),elements-bar-1>1){for(var lessVal=0,mxwElement=n-elmWidth-(elements-bar-2);mxwElement>maxWidth;mxwElement--)lessVal+=RSSUtils.combins(n-elmWidth-mxwElement-1,elements-bar-3);subVal-=lessVal*(elements-1-bar)}else n-elmWidth>maxWidth&&subVal--;val+=subVal}n-=elmWidth}return val},RSSUtils.combins=function(n,r){var maxDenom,minDenom;n-r>r?(minDenom=r,maxDenom=n-r):(minDenom=n-r,maxDenom=r);for(var val=1,j=1,i=n;i>maxDenom;i--)val*=i,j<=minDenom&&(val/=j,j++);for(;j<=minDenom;)val/=j,j++;return val},RSSUtils}();const rss_RSSUtils=RSSUtils;const expanded_BitArrayBuilder=function(){function BitArrayBuilder(){}return BitArrayBuilder.buildBitArray=function(pairs){var charNumber=2*pairs.length-1;null==pairs[pairs.length-1].getRightChar()&&(charNumber-=1);for(var binary=new common_BitArray(12*charNumber),accPos=0,firstValue=pairs[0].getRightChar().getValue(),i=11;i>=0;--i)firstValue&1<<i&&binary.set(accPos),accPos++;for(i=1;i<pairs.length;++i){for(var currentPair=pairs[i],leftValue=currentPair.getLeftChar().getValue(),j=11;j>=0;--j)leftValue&1<<j&&binary.set(accPos),accPos++;if(null!==currentPair.getRightChar()){var rightValue=currentPair.getRightChar().getValue();for(j=11;j>=0;--j)rightValue&1<<j&&binary.set(accPos),accPos++}}return binary},BitArrayBuilder}();const decoders_BlockParsedResult=function(){function BlockParsedResult(finished,decodedInformation){decodedInformation?this.decodedInformation=null:(this.finished=finished,this.decodedInformation=decodedInformation)}return BlockParsedResult.prototype.getDecodedInformation=function(){return this.decodedInformation},BlockParsedResult.prototype.isFinished=function(){return this.finished},BlockParsedResult}();const decoders_DecodedObject=function(){function DecodedObject(newPosition){this.newPosition=newPosition}return DecodedObject.prototype.getNewPosition=function(){return this.newPosition},DecodedObject}();var DecodedChar_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_DecodedChar=function(_super){function DecodedChar(newPosition,value){var _this=_super.call(this,newPosition)||this;return _this.value=value,_this}return DecodedChar_extends(DecodedChar,_super),DecodedChar.prototype.getValue=function(){return this.value},DecodedChar.prototype.isFNC1=function(){return this.value===DecodedChar.FNC1},DecodedChar.FNC1="$",DecodedChar}(decoders_DecodedObject);var DecodedInformation_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_DecodedInformation=function(_super){function DecodedInformation(newPosition,newString,remainingValue){var _this=_super.call(this,newPosition)||this;return remainingValue?(_this.remaining=!0,_this.remainingValue=_this.remainingValue):(_this.remaining=!1,_this.remainingValue=0),_this.newString=newString,_this}return DecodedInformation_extends(DecodedInformation,_super),DecodedInformation.prototype.getNewString=function(){return this.newString},DecodedInformation.prototype.isRemaining=function(){return this.remaining},DecodedInformation.prototype.getRemainingValue=function(){return this.remainingValue},DecodedInformation}(decoders_DecodedObject);var DecodedNumeric_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_DecodedNumeric=function(_super){function DecodedNumeric(newPosition,firstDigit,secondDigit){var _this=_super.call(this,newPosition)||this;if(firstDigit<0||firstDigit>10||secondDigit<0||secondDigit>10)throw new core_FormatException;return _this.firstDigit=firstDigit,_this.secondDigit=secondDigit,_this}return DecodedNumeric_extends(DecodedNumeric,_super),DecodedNumeric.prototype.getFirstDigit=function(){return this.firstDigit},DecodedNumeric.prototype.getSecondDigit=function(){return this.secondDigit},DecodedNumeric.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},DecodedNumeric.prototype.isFirstDigitFNC1=function(){return this.firstDigit===DecodedNumeric.FNC1},DecodedNumeric.prototype.isSecondDigitFNC1=function(){return this.secondDigit===DecodedNumeric.FNC1},DecodedNumeric.prototype.isAnyFNC1=function(){return this.firstDigit===DecodedNumeric.FNC1||this.secondDigit===DecodedNumeric.FNC1},DecodedNumeric.FNC1=10,DecodedNumeric}(decoders_DecodedObject);var FieldParser_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},FieldParser=function(){function FieldParser(){}return FieldParser.parseFieldsInGeneralPurpose=function(rawInformation){var e_1,_a,e_2,_b,e_3,_c,e_4,_d;if(!rawInformation)return null;if(rawInformation.length<2)throw new core_NotFoundException;var firstTwoDigits=rawInformation.substring(0,2);try{for(var _e=FieldParser_values(FieldParser.TWO_DIGIT_DATA_LENGTH),_f=_e.next();!_f.done;_f=_e.next()){if((dataLength=_f.value)[0]===firstTwoDigits)return dataLength[1]===FieldParser.VARIABLE_LENGTH?FieldParser.processVariableAI(2,dataLength[2],rawInformation):FieldParser.processFixedAI(2,dataLength[1],rawInformation)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_f&&!_f.done&&(_a=_e.return)&&_a.call(_e)}finally{if(e_1)throw e_1.error}}if(rawInformation.length<3)throw new core_NotFoundException;var firstThreeDigits=rawInformation.substring(0,3);try{for(var _g=FieldParser_values(FieldParser.THREE_DIGIT_DATA_LENGTH),_h=_g.next();!_h.done;_h=_g.next()){if((dataLength=_h.value)[0]===firstThreeDigits)return dataLength[1]===FieldParser.VARIABLE_LENGTH?FieldParser.processVariableAI(3,dataLength[2],rawInformation):FieldParser.processFixedAI(3,dataLength[1],rawInformation)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_h&&!_h.done&&(_b=_g.return)&&_b.call(_g)}finally{if(e_2)throw e_2.error}}try{for(var _j=FieldParser_values(FieldParser.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),_k=_j.next();!_k.done;_k=_j.next()){if((dataLength=_k.value)[0]===firstThreeDigits)return dataLength[1]===FieldParser.VARIABLE_LENGTH?FieldParser.processVariableAI(4,dataLength[2],rawInformation):FieldParser.processFixedAI(4,dataLength[1],rawInformation)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_k&&!_k.done&&(_c=_j.return)&&_c.call(_j)}finally{if(e_3)throw e_3.error}}if(rawInformation.length<4)throw new core_NotFoundException;var firstFourDigits=rawInformation.substring(0,4);try{for(var _l=FieldParser_values(FieldParser.FOUR_DIGIT_DATA_LENGTH),_m=_l.next();!_m.done;_m=_l.next()){var dataLength;if((dataLength=_m.value)[0]===firstFourDigits)return dataLength[1]===FieldParser.VARIABLE_LENGTH?FieldParser.processVariableAI(4,dataLength[2],rawInformation):FieldParser.processFixedAI(4,dataLength[1],rawInformation)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_m&&!_m.done&&(_d=_l.return)&&_d.call(_l)}finally{if(e_4)throw e_4.error}}throw new core_NotFoundException},FieldParser.processFixedAI=function(aiSize,fieldSize,rawInformation){if(rawInformation.length<aiSize)throw new core_NotFoundException;var ai=rawInformation.substring(0,aiSize);if(rawInformation.length<aiSize+fieldSize)throw new core_NotFoundException;var field=rawInformation.substring(aiSize,aiSize+fieldSize),remaining=rawInformation.substring(aiSize+fieldSize),result="("+ai+")"+field,parsedAI=FieldParser.parseFieldsInGeneralPurpose(remaining);return null==parsedAI?result:result+parsedAI},FieldParser.processVariableAI=function(aiSize,variableFieldSize,rawInformation){var maxSize,ai=rawInformation.substring(0,aiSize);maxSize=rawInformation.length<aiSize+variableFieldSize?rawInformation.length:aiSize+variableFieldSize;var field=rawInformation.substring(aiSize,maxSize),remaining=rawInformation.substring(maxSize),result="("+ai+")"+field,parsedAI=FieldParser.parseFieldsInGeneralPurpose(remaining);return null==parsedAI?result:result+parsedAI},FieldParser.VARIABLE_LENGTH=[],FieldParser.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",FieldParser.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",FieldParser.VARIABLE_LENGTH,20],["22",FieldParser.VARIABLE_LENGTH,29],["30",FieldParser.VARIABLE_LENGTH,8],["37",FieldParser.VARIABLE_LENGTH,8],["90",FieldParser.VARIABLE_LENGTH,30],["91",FieldParser.VARIABLE_LENGTH,30],["92",FieldParser.VARIABLE_LENGTH,30],["93",FieldParser.VARIABLE_LENGTH,30],["94",FieldParser.VARIABLE_LENGTH,30],["95",FieldParser.VARIABLE_LENGTH,30],["96",FieldParser.VARIABLE_LENGTH,30],["97",FieldParser.VARIABLE_LENGTH,3],["98",FieldParser.VARIABLE_LENGTH,30],["99",FieldParser.VARIABLE_LENGTH,30]],FieldParser.THREE_DIGIT_DATA_LENGTH=[["240",FieldParser.VARIABLE_LENGTH,30],["241",FieldParser.VARIABLE_LENGTH,30],["242",FieldParser.VARIABLE_LENGTH,6],["250",FieldParser.VARIABLE_LENGTH,30],["251",FieldParser.VARIABLE_LENGTH,30],["253",FieldParser.VARIABLE_LENGTH,17],["254",FieldParser.VARIABLE_LENGTH,20],["400",FieldParser.VARIABLE_LENGTH,30],["401",FieldParser.VARIABLE_LENGTH,30],["402",17],["403",FieldParser.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",FieldParser.VARIABLE_LENGTH,20],["421",FieldParser.VARIABLE_LENGTH,15],["422",3],["423",FieldParser.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],FieldParser.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",FieldParser.VARIABLE_LENGTH,15],["391",FieldParser.VARIABLE_LENGTH,18],["392",FieldParser.VARIABLE_LENGTH,15],["393",FieldParser.VARIABLE_LENGTH,18],["703",FieldParser.VARIABLE_LENGTH,30]],FieldParser.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",FieldParser.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",FieldParser.VARIABLE_LENGTH,20],["8003",FieldParser.VARIABLE_LENGTH,30],["8004",FieldParser.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",FieldParser.VARIABLE_LENGTH,30],["8008",FieldParser.VARIABLE_LENGTH,12],["8018",18],["8020",FieldParser.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",FieldParser.VARIABLE_LENGTH,70],["8200",FieldParser.VARIABLE_LENGTH,70]],FieldParser}();const decoders_FieldParser=FieldParser;const decoders_GeneralAppIdDecoder=function(){function GeneralAppIdDecoder(information){this.buffer=new util_StringBuilder,this.information=information}return GeneralAppIdDecoder.prototype.decodeAllCodes=function(buff,initialPosition){for(var currentPosition=initialPosition,remaining=null;;){var info=this.decodeGeneralPurposeField(currentPosition,remaining),parsedFields=decoders_FieldParser.parseFieldsInGeneralPurpose(info.getNewString());if(null!=parsedFields&&buff.append(parsedFields),remaining=info.isRemaining()?""+info.getRemainingValue():null,currentPosition===info.getNewPosition())break;currentPosition=info.getNewPosition()}return buff.toString()},GeneralAppIdDecoder.prototype.isStillNumeric=function(pos){if(pos+7>this.information.getSize())return pos+4<=this.information.getSize();for(var i=pos;i<pos+3;++i)if(this.information.get(i))return!0;return this.information.get(pos+3)},GeneralAppIdDecoder.prototype.decodeNumeric=function(pos){if(pos+7>this.information.getSize()){var numeric_1=this.extractNumericValueFromBitArray(pos,4);return new decoders_DecodedNumeric(this.information.getSize(),0===numeric_1?decoders_DecodedNumeric.FNC1:numeric_1-1,decoders_DecodedNumeric.FNC1)}var numeric=this.extractNumericValueFromBitArray(pos,7);return new decoders_DecodedNumeric(pos+7,(numeric-8)/11,(numeric-8)%11)},GeneralAppIdDecoder.prototype.extractNumericValueFromBitArray=function(pos,bits){return GeneralAppIdDecoder.extractNumericValueFromBitArray(this.information,pos,bits)},GeneralAppIdDecoder.extractNumericValueFromBitArray=function(information,pos,bits){for(var value=0,i=0;i<bits;++i)information.get(pos+i)&&(value|=1<<bits-i-1);return value},GeneralAppIdDecoder.prototype.decodeGeneralPurposeField=function(pos,remaining){this.buffer.setLengthToZero(),null!=remaining&&this.buffer.append(remaining),this.current.setPosition(pos);var lastDecoded=this.parseBlocks();return null!=lastDecoded&&lastDecoded.isRemaining()?new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString(),lastDecoded.getRemainingValue()):new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString())},GeneralAppIdDecoder.prototype.parseBlocks=function(){var isFinished,result;do{var initialPosition=this.current.getPosition();if(isFinished=this.current.isAlpha()?(result=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(result=this.parseIsoIec646Block()).isFinished():(result=this.parseNumericBlock()).isFinished(),!(initialPosition!==this.current.getPosition())&&!isFinished)break}while(!isFinished);return result.getDecodedInformation()},GeneralAppIdDecoder.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var numeric=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(numeric.getNewPosition()),numeric.isFirstDigitFNC1()){var information=void 0;return information=numeric.isSecondDigitFNC1()?new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString()):new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString(),numeric.getSecondDigit()),new decoders_BlockParsedResult(!0,information)}if(this.buffer.append(numeric.getFirstDigit()),numeric.isSecondDigitFNC1()){information=new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString());return new decoders_BlockParsedResult(!0,information)}this.buffer.append(numeric.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new decoders_BlockParsedResult(!1)},GeneralAppIdDecoder.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var iso=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(iso.getNewPosition()),iso.isFNC1()){var information=new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString());return new decoders_BlockParsedResult(!0,information)}this.buffer.append(iso.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new decoders_BlockParsedResult(!1)},GeneralAppIdDecoder.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var alpha=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(alpha.getNewPosition()),alpha.isFNC1()){var information=new decoders_DecodedInformation(this.current.getPosition(),this.buffer.toString());return new decoders_BlockParsedResult(!0,information)}this.buffer.append(alpha.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new decoders_BlockParsedResult(!1)},GeneralAppIdDecoder.prototype.isStillIsoIec646=function(pos){if(pos+5>this.information.getSize())return!1;var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(fiveBitValue>=5&&fiveBitValue<16)return!0;if(pos+7>this.information.getSize())return!1;var sevenBitValue=this.extractNumericValueFromBitArray(pos,7);if(sevenBitValue>=64&&sevenBitValue<116)return!0;if(pos+8>this.information.getSize())return!1;var eightBitValue=this.extractNumericValueFromBitArray(pos,8);return eightBitValue>=232&&eightBitValue<253},GeneralAppIdDecoder.prototype.decodeIsoIec646=function(pos){var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(15===fiveBitValue)return new decoders_DecodedChar(pos+5,decoders_DecodedChar.FNC1);if(fiveBitValue>=5&&fiveBitValue<15)return new decoders_DecodedChar(pos+5,"0"+(fiveBitValue-5));var c,sevenBitValue=this.extractNumericValueFromBitArray(pos,7);if(sevenBitValue>=64&&sevenBitValue<90)return new decoders_DecodedChar(pos+7,""+(sevenBitValue+1));if(sevenBitValue>=90&&sevenBitValue<116)return new decoders_DecodedChar(pos+7,""+(sevenBitValue+7));switch(this.extractNumericValueFromBitArray(pos,8)){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new core_FormatException}return new decoders_DecodedChar(pos+8,c)},GeneralAppIdDecoder.prototype.isStillAlpha=function(pos){if(pos+5>this.information.getSize())return!1;var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(fiveBitValue>=5&&fiveBitValue<16)return!0;if(pos+6>this.information.getSize())return!1;var sixBitValue=this.extractNumericValueFromBitArray(pos,6);return sixBitValue>=16&&sixBitValue<63},GeneralAppIdDecoder.prototype.decodeAlphanumeric=function(pos){var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(15===fiveBitValue)return new decoders_DecodedChar(pos+5,decoders_DecodedChar.FNC1);if(fiveBitValue>=5&&fiveBitValue<15)return new decoders_DecodedChar(pos+5,"0"+(fiveBitValue-5));var c,sixBitValue=this.extractNumericValueFromBitArray(pos,6);if(sixBitValue>=32&&sixBitValue<58)return new decoders_DecodedChar(pos+6,""+(sixBitValue+33));switch(sixBitValue){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new core_IllegalStateException("Decoding invalid alphanumeric value: "+sixBitValue)}return new decoders_DecodedChar(pos+6,c)},GeneralAppIdDecoder.prototype.isAlphaTo646ToAlphaLatch=function(pos){if(pos+1>this.information.getSize())return!1;for(var i=0;i<5&&i+pos<this.information.getSize();++i)if(2===i){if(!this.information.get(pos+2))return!1}else if(this.information.get(pos+i))return!1;return!0},GeneralAppIdDecoder.prototype.isAlphaOr646ToNumericLatch=function(pos){if(pos+3>this.information.getSize())return!1;for(var i=pos;i<pos+3;++i)if(this.information.get(i))return!1;return!0},GeneralAppIdDecoder.prototype.isNumericToAlphaNumericLatch=function(pos){if(pos+1>this.information.getSize())return!1;for(var i=0;i<4&&i+pos<this.information.getSize();++i)if(this.information.get(pos+i))return!1;return!0},GeneralAppIdDecoder}();const decoders_AbstractExpandedDecoder=function(){function AbstractExpandedDecoder(information){this.information=information,this.generalDecoder=new decoders_GeneralAppIdDecoder(information)}return AbstractExpandedDecoder.prototype.getInformation=function(){return this.information},AbstractExpandedDecoder.prototype.getGeneralDecoder=function(){return this.generalDecoder},AbstractExpandedDecoder}();var AI01decoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI01decoder=function(_super){function AI01decoder(information){return _super.call(this,information)||this}return AI01decoder_extends(AI01decoder,_super),AI01decoder.prototype.encodeCompressedGtin=function(buf,currentPos){buf.append("(01)");var initialPosition=buf.length();buf.append("9"),this.encodeCompressedGtinWithoutAI(buf,currentPos,initialPosition)},AI01decoder.prototype.encodeCompressedGtinWithoutAI=function(buf,currentPos,initialBufferPosition){for(var i=0;i<4;++i){var currentBlock=this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos+10*i,10);currentBlock/100==0&&buf.append("0"),currentBlock/10==0&&buf.append("0"),buf.append(currentBlock)}AI01decoder.appendCheckDigit(buf,initialBufferPosition)},AI01decoder.appendCheckDigit=function(buf,currentPos){for(var checkDigit=0,i=0;i<13;i++){var digit=buf.charAt(i+currentPos).charCodeAt(0)-"0".charCodeAt(0);checkDigit+=1&i?digit:3*digit}10===(checkDigit=10-checkDigit%10)&&(checkDigit=0),buf.append(checkDigit)},AI01decoder.GTIN_SIZE=40,AI01decoder}(decoders_AbstractExpandedDecoder);var AI01AndOtherAIs_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI01AndOtherAIs=function(_super){function AI01AndOtherAIs(information){return _super.call(this,information)||this}return AI01AndOtherAIs_extends(AI01AndOtherAIs,_super),AI01AndOtherAIs.prototype.parseInformation=function(){var buff=new util_StringBuilder;buff.append("(01)");var initialGtinPosition=buff.length(),firstGtinDigit=this.getGeneralDecoder().extractNumericValueFromBitArray(AI01AndOtherAIs.HEADER_SIZE,4);return buff.append(firstGtinDigit),this.encodeCompressedGtinWithoutAI(buff,AI01AndOtherAIs.HEADER_SIZE+4,initialGtinPosition),this.getGeneralDecoder().decodeAllCodes(buff,AI01AndOtherAIs.HEADER_SIZE+44)},AI01AndOtherAIs.HEADER_SIZE=4,AI01AndOtherAIs}(decoders_AI01decoder);var AnyAIDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AnyAIDecoder=function(_super){function AnyAIDecoder(information){return _super.call(this,information)||this}return AnyAIDecoder_extends(AnyAIDecoder,_super),AnyAIDecoder.prototype.parseInformation=function(){var buf=new util_StringBuilder;return this.getGeneralDecoder().decodeAllCodes(buf,AnyAIDecoder.HEADER_SIZE)},AnyAIDecoder.HEADER_SIZE=5,AnyAIDecoder}(decoders_AbstractExpandedDecoder);var AI01weightDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI01weightDecoder=function(_super){function AI01weightDecoder(information){return _super.call(this,information)||this}return AI01weightDecoder_extends(AI01weightDecoder,_super),AI01weightDecoder.prototype.encodeCompressedWeight=function(buf,currentPos,weightSize){var originalWeightNumeric=this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos,weightSize);this.addWeightCode(buf,originalWeightNumeric);for(var weightNumeric=this.checkWeight(originalWeightNumeric),currentDivisor=1e5,i=0;i<5;++i)weightNumeric/currentDivisor===0&&buf.append("0"),currentDivisor/=10;buf.append(weightNumeric)},AI01weightDecoder}(decoders_AI01decoder);var AI013x0xDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI013x0xDecoder=function(_super){function AI013x0xDecoder(information){return _super.call(this,information)||this}return AI013x0xDecoder_extends(AI013x0xDecoder,_super),AI013x0xDecoder.prototype.parseInformation=function(){if(this.getInformation().getSize()!==AI013x0xDecoder.HEADER_SIZE+decoders_AI01weightDecoder.GTIN_SIZE+AI013x0xDecoder.WEIGHT_SIZE)throw new core_NotFoundException;var buf=new util_StringBuilder;return this.encodeCompressedGtin(buf,AI013x0xDecoder.HEADER_SIZE),this.encodeCompressedWeight(buf,AI013x0xDecoder.HEADER_SIZE+decoders_AI01weightDecoder.GTIN_SIZE,AI013x0xDecoder.WEIGHT_SIZE),buf.toString()},AI013x0xDecoder.HEADER_SIZE=5,AI013x0xDecoder.WEIGHT_SIZE=15,AI013x0xDecoder}(decoders_AI01weightDecoder);var AI013103decoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI013103decoder=function(_super){function AI013103decoder(information){return _super.call(this,information)||this}return AI013103decoder_extends(AI013103decoder,_super),AI013103decoder.prototype.addWeightCode=function(buf,weight){buf.append("(3103)")},AI013103decoder.prototype.checkWeight=function(weight){return weight},AI013103decoder}(decoders_AI013x0xDecoder);var AI01320xDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI01320xDecoder=function(_super){function AI01320xDecoder(information){return _super.call(this,information)||this}return AI01320xDecoder_extends(AI01320xDecoder,_super),AI01320xDecoder.prototype.addWeightCode=function(buf,weight){weight<1e4?buf.append("(3202)"):buf.append("(3203)")},AI01320xDecoder.prototype.checkWeight=function(weight){return weight<1e4?weight:weight-1e4},AI01320xDecoder}(decoders_AI013x0xDecoder);var AI01392xDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI01392xDecoder=function(_super){function AI01392xDecoder(information){return _super.call(this,information)||this}return AI01392xDecoder_extends(AI01392xDecoder,_super),AI01392xDecoder.prototype.parseInformation=function(){if(this.getInformation().getSize()<AI01392xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE)throw new core_NotFoundException;var buf=new util_StringBuilder;this.encodeCompressedGtin(buf,AI01392xDecoder.HEADER_SIZE);var lastAIdigit=this.getGeneralDecoder().extractNumericValueFromBitArray(AI01392xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE,AI01392xDecoder.LAST_DIGIT_SIZE);buf.append("(392"),buf.append(lastAIdigit),buf.append(")");var decodedInformation=this.getGeneralDecoder().decodeGeneralPurposeField(AI01392xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE+AI01392xDecoder.LAST_DIGIT_SIZE,null);return buf.append(decodedInformation.getNewString()),buf.toString()},AI01392xDecoder.HEADER_SIZE=8,AI01392xDecoder.LAST_DIGIT_SIZE=2,AI01392xDecoder}(decoders_AI01decoder);var AI01393xDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI01393xDecoder=function(_super){function AI01393xDecoder(information){return _super.call(this,information)||this}return AI01393xDecoder_extends(AI01393xDecoder,_super),AI01393xDecoder.prototype.parseInformation=function(){if(this.getInformation().getSize()<AI01393xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE)throw new core_NotFoundException;var buf=new util_StringBuilder;this.encodeCompressedGtin(buf,AI01393xDecoder.HEADER_SIZE);var lastAIdigit=this.getGeneralDecoder().extractNumericValueFromBitArray(AI01393xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE,AI01393xDecoder.LAST_DIGIT_SIZE);buf.append("(393"),buf.append(lastAIdigit),buf.append(")");var firstThreeDigits=this.getGeneralDecoder().extractNumericValueFromBitArray(AI01393xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE+AI01393xDecoder.LAST_DIGIT_SIZE,AI01393xDecoder.FIRST_THREE_DIGITS_SIZE);firstThreeDigits/100==0&&buf.append("0"),firstThreeDigits/10==0&&buf.append("0"),buf.append(firstThreeDigits);var generalInformation=this.getGeneralDecoder().decodeGeneralPurposeField(AI01393xDecoder.HEADER_SIZE+decoders_AI01decoder.GTIN_SIZE+AI01393xDecoder.LAST_DIGIT_SIZE+AI01393xDecoder.FIRST_THREE_DIGITS_SIZE,null);return buf.append(generalInformation.getNewString()),buf.toString()},AI01393xDecoder.HEADER_SIZE=8,AI01393xDecoder.LAST_DIGIT_SIZE=2,AI01393xDecoder.FIRST_THREE_DIGITS_SIZE=10,AI01393xDecoder}(decoders_AI01decoder);var AI013x0x1xDecoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const decoders_AI013x0x1xDecoder=function(_super){function AI013x0x1xDecoder(information,firstAIdigits,dateCode){var _this=_super.call(this,information)||this;return _this.dateCode=dateCode,_this.firstAIdigits=firstAIdigits,_this}return AI013x0x1xDecoder_extends(AI013x0x1xDecoder,_super),AI013x0x1xDecoder.prototype.parseInformation=function(){if(this.getInformation().getSize()!==AI013x0x1xDecoder.HEADER_SIZE+AI013x0x1xDecoder.GTIN_SIZE+AI013x0x1xDecoder.WEIGHT_SIZE+AI013x0x1xDecoder.DATE_SIZE)throw new core_NotFoundException;var buf=new util_StringBuilder;return this.encodeCompressedGtin(buf,AI013x0x1xDecoder.HEADER_SIZE),this.encodeCompressedWeight(buf,AI013x0x1xDecoder.HEADER_SIZE+AI013x0x1xDecoder.GTIN_SIZE,AI013x0x1xDecoder.WEIGHT_SIZE),this.encodeCompressedDate(buf,AI013x0x1xDecoder.HEADER_SIZE+AI013x0x1xDecoder.GTIN_SIZE+AI013x0x1xDecoder.WEIGHT_SIZE),buf.toString()},AI013x0x1xDecoder.prototype.encodeCompressedDate=function(buf,currentPos){var numericDate=this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos,AI013x0x1xDecoder.DATE_SIZE);if(38400!==numericDate){buf.append("("),buf.append(this.dateCode),buf.append(")");var day=numericDate%32,month=(numericDate/=32)%12+1,year=numericDate/=12;year/10==0&&buf.append("0"),buf.append(year),month/10==0&&buf.append("0"),buf.append(month),day/10==0&&buf.append("0"),buf.append(day)}},AI013x0x1xDecoder.prototype.addWeightCode=function(buf,weight){buf.append("("),buf.append(this.firstAIdigits),buf.append(weight/1e5),buf.append(")")},AI013x0x1xDecoder.prototype.checkWeight=function(weight){return weight%1e5},AI013x0x1xDecoder.HEADER_SIZE=8,AI013x0x1xDecoder.WEIGHT_SIZE=20,AI013x0x1xDecoder.DATE_SIZE=16,AI013x0x1xDecoder}(decoders_AI01weightDecoder);const expanded_ExpandedPair=function(){function ExpandedPair(leftChar,rightChar,finderPatter,mayBeLast){this.leftchar=leftChar,this.rightchar=rightChar,this.finderpattern=finderPatter,this.maybeLast=mayBeLast}return ExpandedPair.prototype.mayBeLast=function(){return this.maybeLast},ExpandedPair.prototype.getLeftChar=function(){return this.leftchar},ExpandedPair.prototype.getRightChar=function(){return this.rightchar},ExpandedPair.prototype.getFinderPattern=function(){return this.finderpattern},ExpandedPair.prototype.mustBeLast=function(){return null==this.rightchar},ExpandedPair.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},ExpandedPair.equals=function(o1,o2){return o1 instanceof ExpandedPair&&(ExpandedPair.equalsOrNull(o1.leftchar,o2.leftchar)&&ExpandedPair.equalsOrNull(o1.rightchar,o2.rightchar)&&ExpandedPair.equalsOrNull(o1.finderpattern,o2.finderpattern))},ExpandedPair.equalsOrNull=function(o1,o2){return null===o1?null===o2:ExpandedPair.equals(o1,o2)},ExpandedPair.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},ExpandedPair}();const expanded_ExpandedRow=function(){function ExpandedRow(pairs,rowNumber,wasReversed){this.pairs=pairs,this.rowNumber=rowNumber,this.wasReversed=wasReversed}return ExpandedRow.prototype.getPairs=function(){return this.pairs},ExpandedRow.prototype.getRowNumber=function(){return this.rowNumber},ExpandedRow.prototype.isReversed=function(){return this.wasReversed},ExpandedRow.prototype.isEquivalent=function(otherPairs){return this.checkEqualitity(this,otherPairs)},ExpandedRow.prototype.toString=function(){return"{ "+this.pairs+" }"},ExpandedRow.prototype.equals=function(o1,o2){return o1 instanceof ExpandedRow&&(this.checkEqualitity(o1,o2)&&o1.wasReversed===o2.wasReversed)},ExpandedRow.prototype.checkEqualitity=function(pair1,pair2){var result;if(pair1&&pair2)return pair1.forEach(function(e1,i){pair2.forEach(function(e2){e1.getLeftChar().getValue()===e2.getLeftChar().getValue()&&e1.getRightChar().getValue()===e2.getRightChar().getValue()&&e1.getFinderPatter().getValue()===e2.getFinderPatter().getValue()&&(result=!0)})}),result},ExpandedRow}();var RSSExpandedReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RSSExpandedReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},RSSExpandedReader=function(_super){function RSSExpandedReader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.pairs=new Array(RSSExpandedReader.MAX_PAIRS),_this.rows=new Array,_this.startEnd=[2],_this}return RSSExpandedReader_extends(RSSExpandedReader,_super),RSSExpandedReader.prototype.decodeRow=function(rowNumber,row,hints){this.pairs.length=0,this.startFromEven=!1;try{return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber,row))}catch(e){}return this.pairs.length=0,this.startFromEven=!0,RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber,row))},RSSExpandedReader.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},RSSExpandedReader.prototype.decodeRow2pairs=function(rowNumber,row){for(var tryStackedDecode,done=!1;!done;)try{this.pairs.push(this.retrieveNextPair(row,this.pairs,rowNumber))}catch(error){if(error instanceof core_NotFoundException){if(!this.pairs.length)throw new core_NotFoundException;done=!0}}if(this.checkChecksum())return this.pairs;if(tryStackedDecode=!!this.rows.length,this.storeRow(rowNumber,!1),tryStackedDecode){var ps=this.checkRowsBoolean(!1);if(null!=ps)return ps;if(null!=(ps=this.checkRowsBoolean(!0)))return ps}throw new core_NotFoundException},RSSExpandedReader.prototype.checkRowsBoolean=function(reverse){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,reverse&&(this.rows=this.rows.reverse());var ps=null;try{ps=this.checkRows(new Array,0)}catch(e){console.log(e)}return reverse&&(this.rows=this.rows.reverse()),ps},RSSExpandedReader.prototype.checkRows=function(collectedRows,currentRow){for(var e_1,_a,i=currentRow;i<this.rows.length;i++){var row=this.rows[i];this.pairs.length=0;try{for(var collectedRows_1=(e_1=void 0,RSSExpandedReader_values(collectedRows)),collectedRows_1_1=collectedRows_1.next();!collectedRows_1_1.done;collectedRows_1_1=collectedRows_1.next()){var collectedRow=collectedRows_1_1.value;this.pairs.push(collectedRow.getPairs())}}catch(e_1_1){e_1={error:e_1_1}}finally{try{collectedRows_1_1&&!collectedRows_1_1.done&&(_a=collectedRows_1.return)&&_a.call(collectedRows_1)}finally{if(e_1)throw e_1.error}}if(this.pairs.push(row.getPairs()),RSSExpandedReader.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var rs=new Array(collectedRows);rs.push(row);try{return this.checkRows(rs,i+1)}catch(e){console.log(e)}}}throw new core_NotFoundException},RSSExpandedReader.isValidSequence=function(pairs){var e_2,_a;try{for(var _b=RSSExpandedReader_values(RSSExpandedReader.FINDER_PATTERN_SEQUENCES),_c=_b.next();!_c.done;_c=_b.next()){var sequence=_c.value;if(!(pairs.length>sequence.length)){for(var stop_1=!0,j=0;j<pairs.length;j++)if(pairs[j].getFinderPattern().getValue()!==sequence[j]){stop_1=!1;break}if(stop_1)return!0}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return!1},RSSExpandedReader.prototype.storeRow=function(rowNumber,wasReversed){for(var insertPos=0,prevIsSame=!1,nextIsSame=!1;insertPos<this.rows.length;){var erow=this.rows[insertPos];if(erow.getRowNumber()>rowNumber){nextIsSame=erow.isEquivalent(this.pairs);break}prevIsSame=erow.isEquivalent(this.pairs),insertPos++}nextIsSame||prevIsSame||RSSExpandedReader.isPartialRow(this.pairs,this.rows)||(this.rows.push(insertPos,new expanded_ExpandedRow(this.pairs,rowNumber,wasReversed)),this.removePartialRows(this.pairs,this.rows))},RSSExpandedReader.prototype.removePartialRows=function(pairs,rows){var e_3,_a,e_4,_b,e_5,_c;try{for(var rows_1=RSSExpandedReader_values(rows),rows_1_1=rows_1.next();!rows_1_1.done;rows_1_1=rows_1.next()){var row=rows_1_1.value;if(row.getPairs().length!==pairs.length){try{for(var _d=(e_4=void 0,RSSExpandedReader_values(row.getPairs())),_e=_d.next();!_e.done;_e=_d.next()){var p=_e.value,found=!1;try{for(var pairs_1=(e_5=void 0,RSSExpandedReader_values(pairs)),pairs_1_1=pairs_1.next();!pairs_1_1.done;pairs_1_1=pairs_1.next()){var pp=pairs_1_1.value;if(expanded_ExpandedPair.equals(p,pp)){found=!0;break}}}catch(e_5_1){e_5={error:e_5_1}}finally{try{pairs_1_1&&!pairs_1_1.done&&(_c=pairs_1.return)&&_c.call(pairs_1)}finally{if(e_5)throw e_5.error}}found||!1}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_e&&!_e.done&&(_b=_d.return)&&_b.call(_d)}finally{if(e_4)throw e_4.error}}}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{rows_1_1&&!rows_1_1.done&&(_a=rows_1.return)&&_a.call(rows_1)}finally{if(e_3)throw e_3.error}}},RSSExpandedReader.isPartialRow=function(pairs,rows){var e_6,_a,e_7,_b,e_8,_c;try{for(var rows_2=RSSExpandedReader_values(rows),rows_2_1=rows_2.next();!rows_2_1.done;rows_2_1=rows_2.next()){var r=rows_2_1.value,allFound=!0;try{for(var pairs_2=(e_7=void 0,RSSExpandedReader_values(pairs)),pairs_2_1=pairs_2.next();!pairs_2_1.done;pairs_2_1=pairs_2.next()){var p=pairs_2_1.value,found=!1;try{for(var _d=(e_8=void 0,RSSExpandedReader_values(r.getPairs())),_e=_d.next();!_e.done;_e=_d.next()){var pp=_e.value;if(p.equals(pp)){found=!0;break}}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_e&&!_e.done&&(_c=_d.return)&&_c.call(_d)}finally{if(e_8)throw e_8.error}}if(!found){allFound=!1;break}}}catch(e_7_1){e_7={error:e_7_1}}finally{try{pairs_2_1&&!pairs_2_1.done&&(_b=pairs_2.return)&&_b.call(pairs_2)}finally{if(e_7)throw e_7.error}}if(allFound)return!0}}catch(e_6_1){e_6={error:e_6_1}}finally{try{rows_2_1&&!rows_2_1.done&&(_a=rows_2.return)&&_a.call(rows_2)}finally{if(e_6)throw e_6.error}}return!1},RSSExpandedReader.prototype.getRows=function(){return this.rows},RSSExpandedReader.constructResult=function(pairs){var resultingString=function createDecoder(information){try{if(information.get(1))return new decoders_AI01AndOtherAIs(information);if(!information.get(2))return new decoders_AnyAIDecoder(information);switch(decoders_GeneralAppIdDecoder.extractNumericValueFromBitArray(information,1,4)){case 4:return new decoders_AI013103decoder(information);case 5:return new decoders_AI01320xDecoder(information)}switch(decoders_GeneralAppIdDecoder.extractNumericValueFromBitArray(information,1,5)){case 12:return new decoders_AI01392xDecoder(information);case 13:return new decoders_AI01393xDecoder(information)}switch(decoders_GeneralAppIdDecoder.extractNumericValueFromBitArray(information,1,7)){case 56:return new decoders_AI013x0x1xDecoder(information,"310","11");case 57:return new decoders_AI013x0x1xDecoder(information,"320","11");case 58:return new decoders_AI013x0x1xDecoder(information,"310","13");case 59:return new decoders_AI013x0x1xDecoder(information,"320","13");case 60:return new decoders_AI013x0x1xDecoder(information,"310","15");case 61:return new decoders_AI013x0x1xDecoder(information,"320","15");case 62:return new decoders_AI013x0x1xDecoder(information,"310","17");case 63:return new decoders_AI013x0x1xDecoder(information,"320","17")}}catch(e){throw console.log(e),new core_IllegalStateException("unknown decoder: "+information)}}(expanded_BitArrayBuilder.buildBitArray(pairs)).parseInformation(),firstPoints=pairs[0].getFinderPattern().getResultPoints(),lastPoints=pairs[pairs.length-1].getFinderPattern().getResultPoints(),points=[firstPoints[0],firstPoints[1],lastPoints[0],lastPoints[1]];return new core_Result(resultingString,null,null,points,core_BarcodeFormat.RSS_EXPANDED,null)},RSSExpandedReader.prototype.checkChecksum=function(){var firstPair=this.pairs.get(0),checkCharacter=firstPair.getLeftChar(),firstCharacter=firstPair.getRightChar();if(null===firstCharacter)return!1;for(var checksum=firstCharacter.getChecksumPortion(),s=2,i=1;i<this.pairs.size();++i){var currentPair=this.pairs.get(i);checksum+=currentPair.getLeftChar().getChecksumPortion(),s++;var currentRightChar=currentPair.getRightChar();null!=currentRightChar&&(checksum+=currentRightChar.getChecksumPortion(),s++)}return 211*(s-4)+(checksum%=211)===checkCharacter.getValue()},RSSExpandedReader.getNextSecondBar=function(row,initialPos){var currentPos;return row.get(initialPos)?(currentPos=row.getNextUnset(initialPos),currentPos=row.getNextSet(currentPos)):(currentPos=row.getNextSet(initialPos),currentPos=row.getNextUnset(currentPos)),currentPos},RSSExpandedReader.prototype.retrieveNextPair=function(row,previousPairs,rowNumber){var pattern,isOddPattern=previousPairs.length%2==0;this.startFromEven&&(isOddPattern=!isOddPattern);var keepFinding=!0,forcedOffset=-1;do{this.findNextPair(row,previousPairs,forcedOffset),null===(pattern=this.parseFoundFinderPattern(row,rowNumber,isOddPattern))?forcedOffset=RSSExpandedReader.getNextSecondBar(row,this.startEnd[0]):keepFinding=!1}while(keepFinding);var rightChar,leftChar=this.decodeDataCharacter(row,pattern,isOddPattern,!0);if(!this.isEmptyPair(previousPairs)&&previousPairs[previousPairs.length-1].mustBeLast())throw new core_NotFoundException;try{rightChar=this.decodeDataCharacter(row,pattern,isOddPattern,!1)}catch(e){rightChar=null,console.log(e)}return new expanded_ExpandedPair(leftChar,rightChar,pattern,!0)},RSSExpandedReader.prototype.isEmptyPair=function(pairs){return 0===pairs.length},RSSExpandedReader.prototype.findNextPair=function(row,previousPairs,forcedOffset){var counters=this.getDecodeFinderCounters();counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;var rowOffset,width=row.getSize();if(forcedOffset>=0)rowOffset=forcedOffset;else if(this.isEmptyPair(previousPairs))rowOffset=0;else{rowOffset=previousPairs[previousPairs.length-1].getFinderPattern().getStartEnd()[1]}var searchingEvenPair=previousPairs.length%2!=0;this.startFromEven&&(searchingEvenPair=!searchingEvenPair);for(var isWhite=!1;rowOffset<width&&(isWhite=!row.get(rowOffset));)rowOffset++;for(var counterPosition=0,patternStart=rowOffset,x=rowOffset;x<width;x++)if(row.get(x)!==isWhite)counters[counterPosition]++;else{if(3===counterPosition){if(searchingEvenPair&&RSSExpandedReader.reverseCounters(counters),RSSExpandedReader.isFinderPattern(counters))return this.startEnd[0]=patternStart,void(this.startEnd[1]=x);searchingEvenPair&&RSSExpandedReader.reverseCounters(counters),patternStart+=counters[0]+counters[1],counters[0]=counters[2],counters[1]=counters[3],counters[2]=0,counters[3]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},RSSExpandedReader.reverseCounters=function(counters){for(var length=counters.length,i=0;i<length/2;++i){var tmp=counters[i];counters[i]=counters[length-i-1],counters[length-i-1]=tmp}},RSSExpandedReader.prototype.parseFoundFinderPattern=function(row,rowNumber,oddPattern){var firstCounter,start,end;if(oddPattern){for(var firstElementStart=this.startEnd[0]-1;firstElementStart>=0&&!row.get(firstElementStart);)firstElementStart--;firstElementStart++,firstCounter=this.startEnd[0]-firstElementStart,start=firstElementStart,end=this.startEnd[1]}else start=this.startEnd[0],firstCounter=(end=row.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var value,counters=this.getDecodeFinderCounters();util_System.arraycopy(counters,0,counters,1,counters.length-1),counters[0]=firstCounter;try{value=this.parseFinderValue(counters,RSSExpandedReader.FINDER_PATTERNS)}catch(e){return null}return new rss_FinderPattern(value,[start,end],start,end,rowNumber)},RSSExpandedReader.prototype.decodeDataCharacter=function(row,pattern,isOddPattern,leftChar){for(var counters=this.getDataCharacterCounters(),x=0;x<counters.length;x++)counters[x]=0;if(leftChar)RSSExpandedReader.recordPatternInReverse(row,pattern.getStartEnd()[0],counters);else{RSSExpandedReader.recordPattern(row,pattern.getStartEnd()[1],counters);for(var i=0,j=counters.length-1;i<j;i++,j--){var temp=counters[i];counters[i]=counters[j],counters[j]=temp}}var elementWidth=detector_MathUtils.sum(new Int32Array(counters))/17,expectedElementWidth=(pattern.getStartEnd()[1]-pattern.getStartEnd()[0])/15;if(Math.abs(elementWidth-expectedElementWidth)/expectedElementWidth>.3)throw new core_NotFoundException;var oddCounts=this.getOddCounts(),evenCounts=this.getEvenCounts(),oddRoundingErrors=this.getOddRoundingErrors(),evenRoundingErrors=this.getEvenRoundingErrors();for(i=0;i<counters.length;i++){var value_1=1*counters[i]/elementWidth,count=value_1+.5;if(count<1){if(value_1<.3)throw new core_NotFoundException;count=1}else if(count>8){if(value_1>8.7)throw new core_NotFoundException;count=8}var offset=i/2;1&i?(evenCounts[offset]=count,evenRoundingErrors[offset]=value_1-count):(oddCounts[offset]=count,oddRoundingErrors[offset]=value_1-count)}this.adjustOddEvenCounts(17);var weightRowNumber=4*pattern.getValue()+(isOddPattern?0:2)+(leftChar?0:1)-1,oddSum=0,oddChecksumPortion=0;for(i=oddCounts.length-1;i>=0;i--){if(RSSExpandedReader.isNotA1left(pattern,isOddPattern,leftChar)){var weight=RSSExpandedReader.WEIGHTS[weightRowNumber][2*i];oddChecksumPortion+=oddCounts[i]*weight}oddSum+=oddCounts[i]}var evenChecksumPortion=0;for(i=evenCounts.length-1;i>=0;i--)if(RSSExpandedReader.isNotA1left(pattern,isOddPattern,leftChar)){weight=RSSExpandedReader.WEIGHTS[weightRowNumber][2*i+1];evenChecksumPortion+=evenCounts[i]*weight}var checksumPortion=oddChecksumPortion+evenChecksumPortion;if(1&oddSum||oddSum>13||oddSum<4)throw new core_NotFoundException;var group=(13-oddSum)/2,oddWidest=RSSExpandedReader.SYMBOL_WIDEST[group],evenWidest=9-oddWidest,vOdd=rss_RSSUtils.getRSSvalue(oddCounts,oddWidest,!0),vEven=rss_RSSUtils.getRSSvalue(evenCounts,evenWidest,!1),tEven=RSSExpandedReader.EVEN_TOTAL_SUBSET[group],gSum=RSSExpandedReader.GSUM[group];return new rss_DataCharacter(vOdd*tEven+vEven+gSum,checksumPortion)},RSSExpandedReader.isNotA1left=function(pattern,isOddPattern,leftChar){return!(0===pattern.getValue()&&isOddPattern&&leftChar)},RSSExpandedReader.prototype.adjustOddEvenCounts=function(numModules){var oddSum=detector_MathUtils.sum(new Int32Array(this.getOddCounts())),evenSum=detector_MathUtils.sum(new Int32Array(this.getEvenCounts())),incrementOdd=!1,decrementOdd=!1;oddSum>13?decrementOdd=!0:oddSum<4&&(incrementOdd=!0);var incrementEven=!1,decrementEven=!1;evenSum>13?decrementEven=!0:evenSum<4&&(incrementEven=!0);var mismatch=oddSum+evenSum-numModules,oddParityBad=!(1&~oddSum),evenParityBad=!(1&evenSum);if(1===mismatch)if(oddParityBad){if(evenParityBad)throw new core_NotFoundException;decrementOdd=!0}else{if(!evenParityBad)throw new core_NotFoundException;decrementEven=!0}else if(-1===mismatch)if(oddParityBad){if(evenParityBad)throw new core_NotFoundException;incrementOdd=!0}else{if(!evenParityBad)throw new core_NotFoundException;incrementEven=!0}else{if(0!==mismatch)throw new core_NotFoundException;if(oddParityBad){if(!evenParityBad)throw new core_NotFoundException;oddSum<evenSum?(incrementOdd=!0,decrementEven=!0):(decrementOdd=!0,incrementEven=!0)}else if(evenParityBad)throw new core_NotFoundException}if(incrementOdd){if(decrementOdd)throw new core_NotFoundException;RSSExpandedReader.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(decrementOdd&&RSSExpandedReader.decrement(this.getOddCounts(),this.getOddRoundingErrors()),incrementEven){if(decrementEven)throw new core_NotFoundException;RSSExpandedReader.increment(this.getEvenCounts(),this.getOddRoundingErrors())}decrementEven&&RSSExpandedReader.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},RSSExpandedReader.SYMBOL_WIDEST=[7,5,4,3,1],RSSExpandedReader.EVEN_TOTAL_SUBSET=[4,20,52,104,204],RSSExpandedReader.GSUM=[0,348,1388,2948,3988],RSSExpandedReader.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],RSSExpandedReader.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],RSSExpandedReader.FINDER_PAT_A=0,RSSExpandedReader.FINDER_PAT_B=1,RSSExpandedReader.FINDER_PAT_C=2,RSSExpandedReader.FINDER_PAT_D=3,RSSExpandedReader.FINDER_PAT_E=4,RSSExpandedReader.FINDER_PAT_F=5,RSSExpandedReader.FINDER_PATTERN_SEQUENCES=[[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_A],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_B],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_D],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_C],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_F],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_F,RSSExpandedReader.FINDER_PAT_F],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_D],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_E],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_F,RSSExpandedReader.FINDER_PAT_F],[RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_A,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_B,RSSExpandedReader.FINDER_PAT_C,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_D,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_E,RSSExpandedReader.FINDER_PAT_F,RSSExpandedReader.FINDER_PAT_F]],RSSExpandedReader.MAX_PAIRS=11,RSSExpandedReader}(rss_AbstractRSSReader);const expanded_RSSExpandedReader=RSSExpandedReader;var Pair_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const rss_Pair=function(_super){function Pair(value,checksumPortion,finderPattern){var _this=_super.call(this,value,checksumPortion)||this;return _this.count=0,_this.finderPattern=finderPattern,_this}return Pair_extends(Pair,_super),Pair.prototype.getFinderPattern=function(){return this.finderPattern},Pair.prototype.getCount=function(){return this.count},Pair.prototype.incrementCount=function(){this.count++},Pair}(rss_DataCharacter);var RSS14Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RSS14Reader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},RSS14Reader=function(_super){function RSS14Reader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.possibleLeftPairs=[],_this.possibleRightPairs=[],_this}return RSS14Reader_extends(RSS14Reader,_super),RSS14Reader.prototype.decodeRow=function(rowNumber,row,hints){var e_1,_a,e_2,_b,leftPair=this.decodePair(row,!1,rowNumber,hints);RSS14Reader.addOrTally(this.possibleLeftPairs,leftPair),row.reverse();var rightPair=this.decodePair(row,!0,rowNumber,hints);RSS14Reader.addOrTally(this.possibleRightPairs,rightPair),row.reverse();try{for(var _c=RSS14Reader_values(this.possibleLeftPairs),_d=_c.next();!_d.done;_d=_c.next()){var left=_d.value;if(left.getCount()>1)try{for(var _e=(e_2=void 0,RSS14Reader_values(this.possibleRightPairs)),_f=_e.next();!_f.done;_f=_e.next()){var right=_f.value;if(right.getCount()>1&&RSS14Reader.checkChecksum(left,right))return RSS14Reader.constructResult(left,right)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_2)throw e_2.error}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}throw new core_NotFoundException},RSS14Reader.addOrTally=function(possiblePairs,pair){var e_3,_a;if(null!=pair){var found=!1;try{for(var possiblePairs_1=RSS14Reader_values(possiblePairs),possiblePairs_1_1=possiblePairs_1.next();!possiblePairs_1_1.done;possiblePairs_1_1=possiblePairs_1.next()){var other=possiblePairs_1_1.value;if(other.getValue()===pair.getValue()){other.incrementCount(),found=!0;break}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{possiblePairs_1_1&&!possiblePairs_1_1.done&&(_a=possiblePairs_1.return)&&_a.call(possiblePairs_1)}finally{if(e_3)throw e_3.error}}found||possiblePairs.push(pair)}},RSS14Reader.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},RSS14Reader.constructResult=function(leftPair,rightPair){for(var symbolValue=4537077*leftPair.getValue()+rightPair.getValue(),text=new String(symbolValue).toString(),buffer=new util_StringBuilder,i=13-text.length;i>0;i--)buffer.append("0");buffer.append(text);var checkDigit=0;for(i=0;i<13;i++){var digit=buffer.charAt(i).charCodeAt(0)-"0".charCodeAt(0);checkDigit+=1&i?digit:3*digit}10===(checkDigit=10-checkDigit%10)&&(checkDigit=0),buffer.append(checkDigit.toString());var leftPoints=leftPair.getFinderPattern().getResultPoints(),rightPoints=rightPair.getFinderPattern().getResultPoints();return new core_Result(buffer.toString(),null,0,[leftPoints[0],leftPoints[1],rightPoints[0],rightPoints[1]],core_BarcodeFormat.RSS_14,(new Date).getTime())},RSS14Reader.checkChecksum=function(leftPair,rightPair){var checkValue=(leftPair.getChecksumPortion()+16*rightPair.getChecksumPortion())%79,targetCheckValue=9*leftPair.getFinderPattern().getValue()+rightPair.getFinderPattern().getValue();return targetCheckValue>72&&targetCheckValue--,targetCheckValue>8&&targetCheckValue--,checkValue===targetCheckValue},RSS14Reader.prototype.decodePair=function(row,right,rowNumber,hints){try{var startEnd=this.findFinderPattern(row,right),pattern=this.parseFoundFinderPattern(row,rowNumber,right,startEnd),resultPointCallback=null==hints?null:hints.get(core_DecodeHintType.NEED_RESULT_POINT_CALLBACK);if(null!=resultPointCallback){var center=(startEnd[0]+startEnd[1])/2;right&&(center=row.getSize()-1-center),resultPointCallback.foundPossibleResultPoint(new core_ResultPoint(center,rowNumber))}var outside=this.decodeDataCharacter(row,pattern,!0),inside=this.decodeDataCharacter(row,pattern,!1);return new rss_Pair(1597*outside.getValue()+inside.getValue(),outside.getChecksumPortion()+4*inside.getChecksumPortion(),pattern)}catch(err){return null}},RSS14Reader.prototype.decodeDataCharacter=function(row,pattern,outsideChar){for(var counters=this.getDataCharacterCounters(),x=0;x<counters.length;x++)counters[x]=0;if(outsideChar)oned_OneDReader.recordPatternInReverse(row,pattern.getStartEnd()[0],counters);else{oned_OneDReader.recordPattern(row,pattern.getStartEnd()[1]+1,counters);for(var i=0,j=counters.length-1;i<j;i++,j--){var temp=counters[i];counters[i]=counters[j],counters[j]=temp}}var numModules=outsideChar?16:15,elementWidth=detector_MathUtils.sum(new Int32Array(counters))/numModules,oddCounts=this.getOddCounts(),evenCounts=this.getEvenCounts(),oddRoundingErrors=this.getOddRoundingErrors(),evenRoundingErrors=this.getEvenRoundingErrors();for(i=0;i<counters.length;i++){var value=counters[i]/elementWidth,count=Math.floor(value+.5);count<1?count=1:count>8&&(count=8);var offset=Math.floor(i/2);1&i?(evenCounts[offset]=count,evenRoundingErrors[offset]=value-count):(oddCounts[offset]=count,oddRoundingErrors[offset]=value-count)}this.adjustOddEvenCounts(outsideChar,numModules);var oddSum=0,oddChecksumPortion=0;for(i=oddCounts.length-1;i>=0;i--)oddChecksumPortion*=9,oddChecksumPortion+=oddCounts[i],oddSum+=oddCounts[i];var evenChecksumPortion=0,evenSum=0;for(i=evenCounts.length-1;i>=0;i--)evenChecksumPortion*=9,evenChecksumPortion+=evenCounts[i],evenSum+=evenCounts[i];var checksumPortion=oddChecksumPortion+3*evenChecksumPortion;if(outsideChar){if(1&oddSum||oddSum>12||oddSum<4)throw new core_NotFoundException;var group=(12-oddSum)/2,evenWidest=9-(oddWidest=RSS14Reader.OUTSIDE_ODD_WIDEST[group]),vOdd=rss_RSSUtils.getRSSvalue(oddCounts,oddWidest,!1),vEven=rss_RSSUtils.getRSSvalue(evenCounts,evenWidest,!0),tEven=RSS14Reader.OUTSIDE_EVEN_TOTAL_SUBSET[group],gSum=RSS14Reader.OUTSIDE_GSUM[group];return new rss_DataCharacter(vOdd*tEven+vEven+gSum,checksumPortion)}if(1&evenSum||evenSum>10||evenSum<4)throw new core_NotFoundException;group=(10-evenSum)/2,evenWidest=9-(oddWidest=RSS14Reader.INSIDE_ODD_WIDEST[group]),vOdd=rss_RSSUtils.getRSSvalue(oddCounts,oddWidest,!0),vEven=rss_RSSUtils.getRSSvalue(evenCounts,evenWidest,!1);var oddWidest,tOdd=RSS14Reader.INSIDE_ODD_TOTAL_SUBSET[group];gSum=RSS14Reader.INSIDE_GSUM[group];return new rss_DataCharacter(vEven*tOdd+vOdd+gSum,checksumPortion)},RSS14Reader.prototype.findFinderPattern=function(row,rightFinderPattern){var counters=this.getDecodeFinderCounters();counters[0]=0,counters[1]=0,counters[2]=0,counters[3]=0;for(var width=row.getSize(),isWhite=!1,rowOffset=0;rowOffset<width&&rightFinderPattern!==(isWhite=!row.get(rowOffset));)rowOffset++;for(var counterPosition=0,patternStart=rowOffset,x=rowOffset;x<width;x++)if(row.get(x)!==isWhite)counters[counterPosition]++;else{if(3===counterPosition){if(rss_AbstractRSSReader.isFinderPattern(counters))return[patternStart,x];patternStart+=counters[0]+counters[1],counters[0]=counters[2],counters[1]=counters[3],counters[2]=0,counters[3]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}throw new core_NotFoundException},RSS14Reader.prototype.parseFoundFinderPattern=function(row,rowNumber,right,startEnd){for(var firstIsBlack=row.get(startEnd[0]),firstElementStart=startEnd[0]-1;firstElementStart>=0&&firstIsBlack!==row.get(firstElementStart);)firstElementStart--;firstElementStart++;var firstCounter=startEnd[0]-firstElementStart,counters=this.getDecodeFinderCounters(),copy=new Int32Array(counters.length);util_System.arraycopy(counters,0,copy,1,counters.length-1),copy[0]=firstCounter;var value=this.parseFinderValue(copy,RSS14Reader.FINDER_PATTERNS),start=firstElementStart,end=startEnd[1];return right&&(start=row.getSize()-1-start,end=row.getSize()-1-end),new rss_FinderPattern(value,[firstElementStart,startEnd[1]],start,end,rowNumber)},RSS14Reader.prototype.adjustOddEvenCounts=function(outsideChar,numModules){var oddSum=detector_MathUtils.sum(new Int32Array(this.getOddCounts())),evenSum=detector_MathUtils.sum(new Int32Array(this.getEvenCounts())),incrementOdd=!1,decrementOdd=!1,incrementEven=!1,decrementEven=!1;outsideChar?(oddSum>12?decrementOdd=!0:oddSum<4&&(incrementOdd=!0),evenSum>12?decrementEven=!0:evenSum<4&&(incrementEven=!0)):(oddSum>11?decrementOdd=!0:oddSum<5&&(incrementOdd=!0),evenSum>10?decrementEven=!0:evenSum<4&&(incrementEven=!0));var mismatch=oddSum+evenSum-numModules,oddParityBad=(1&oddSum)==(outsideChar?1:0),evenParityBad=!(1&~evenSum);if(1===mismatch)if(oddParityBad){if(evenParityBad)throw new core_NotFoundException;decrementOdd=!0}else{if(!evenParityBad)throw new core_NotFoundException;decrementEven=!0}else if(-1===mismatch)if(oddParityBad){if(evenParityBad)throw new core_NotFoundException;incrementOdd=!0}else{if(!evenParityBad)throw new core_NotFoundException;incrementEven=!0}else{if(0!==mismatch)throw new core_NotFoundException;if(oddParityBad){if(!evenParityBad)throw new core_NotFoundException;oddSum<evenSum?(incrementOdd=!0,decrementEven=!0):(decrementOdd=!0,incrementEven=!0)}else if(evenParityBad)throw new core_NotFoundException}if(incrementOdd){if(decrementOdd)throw new core_NotFoundException;rss_AbstractRSSReader.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(decrementOdd&&rss_AbstractRSSReader.decrement(this.getOddCounts(),this.getOddRoundingErrors()),incrementEven){if(decrementEven)throw new core_NotFoundException;rss_AbstractRSSReader.increment(this.getEvenCounts(),this.getOddRoundingErrors())}decrementEven&&rss_AbstractRSSReader.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},RSS14Reader.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],RSS14Reader.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],RSS14Reader.OUTSIDE_GSUM=[0,161,961,2015,2715],RSS14Reader.INSIDE_GSUM=[0,336,1036,1516],RSS14Reader.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],RSS14Reader.INSIDE_ODD_WIDEST=[2,4,6,8],RSS14Reader.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],RSS14Reader}(rss_AbstractRSSReader);const rss_RSS14Reader=RSS14Reader;var MultiFormatOneDReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const oned_MultiFormatOneDReader=function(_super){function MultiFormatOneDReader(hints){var _this=_super.call(this)||this;_this.readers=[];var possibleFormats=hints?hints.get(core_DecodeHintType.POSSIBLE_FORMATS):null,useCode39CheckDigit=hints&&void 0!==hints.get(core_DecodeHintType.ASSUME_CODE_39_CHECK_DIGIT),useCode39ExtendedMode=hints&&void 0!==hints.get(core_DecodeHintType.ENABLE_CODE_39_EXTENDED_MODE);return possibleFormats&&((possibleFormats.includes(core_BarcodeFormat.EAN_13)||possibleFormats.includes(core_BarcodeFormat.UPC_A)||possibleFormats.includes(core_BarcodeFormat.EAN_8)||possibleFormats.includes(core_BarcodeFormat.UPC_E))&&_this.readers.push(new oned_MultiFormatUPCEANReader(hints)),possibleFormats.includes(core_BarcodeFormat.CODE_39)&&_this.readers.push(new oned_Code39Reader(useCode39CheckDigit,useCode39ExtendedMode)),possibleFormats.includes(core_BarcodeFormat.CODE_93)&&_this.readers.push(new oned_Code93Reader),possibleFormats.includes(core_BarcodeFormat.CODE_128)&&_this.readers.push(new oned_Code128Reader),possibleFormats.includes(core_BarcodeFormat.ITF)&&_this.readers.push(new oned_ITFReader),possibleFormats.includes(core_BarcodeFormat.CODABAR)&&_this.readers.push(new oned_CodaBarReader),possibleFormats.includes(core_BarcodeFormat.RSS_14)&&_this.readers.push(new rss_RSS14Reader),possibleFormats.includes(core_BarcodeFormat.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),_this.readers.push(new expanded_RSSExpandedReader))),0===_this.readers.length&&(_this.readers.push(new oned_MultiFormatUPCEANReader(hints)),_this.readers.push(new oned_Code39Reader),_this.readers.push(new oned_Code93Reader),_this.readers.push(new oned_MultiFormatUPCEANReader(hints)),_this.readers.push(new oned_Code128Reader),_this.readers.push(new oned_ITFReader),_this.readers.push(new rss_RSS14Reader)),_this}return MultiFormatOneDReader_extends(MultiFormatOneDReader,_super),MultiFormatOneDReader.prototype.decodeRow=function(rowNumber,row,hints){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(rowNumber,row,hints)}catch(re){}throw new core_NotFoundException},MultiFormatOneDReader.prototype.reset=function(){this.readers.forEach(function(reader){return reader.reset()})},MultiFormatOneDReader}(oned_OneDReader);var BrowserBarcodeReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Version_values=(function(_super){function BrowserBarcodeReader(timeBetweenScansMillis,hints){return void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500),_super.call(this,new oned_MultiFormatOneDReader(hints),timeBetweenScansMillis,hints)||this}BrowserBarcodeReader_extends(BrowserBarcodeReader,_super)}(BrowserCodeReader),function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}),ECBlocks=function(){function ECBlocks(ecCodewords,ecBlocks1,ecBlocks2){this.ecCodewords=ecCodewords,this.ecBlocks=[ecBlocks1],ecBlocks2&&this.ecBlocks.push(ecBlocks2)}return ECBlocks.prototype.getECCodewords=function(){return this.ecCodewords},ECBlocks.prototype.getECBlocks=function(){return this.ecBlocks},ECBlocks}(),ECB=function(){function ECB(count,dataCodewords){this.count=count,this.dataCodewords=dataCodewords}return ECB.prototype.getCount=function(){return this.count},ECB.prototype.getDataCodewords=function(){return this.dataCodewords},ECB}(),Version=function(){function Version(versionNumber,symbolSizeRows,symbolSizeColumns,dataRegionSizeRows,dataRegionSizeColumns,ecBlocks){var e_1,_a;this.versionNumber=versionNumber,this.symbolSizeRows=symbolSizeRows,this.symbolSizeColumns=symbolSizeColumns,this.dataRegionSizeRows=dataRegionSizeRows,this.dataRegionSizeColumns=dataRegionSizeColumns,this.ecBlocks=ecBlocks;var total=0,ecCodewords=ecBlocks.getECCodewords(),ecbArray=ecBlocks.getECBlocks();try{for(var ecbArray_1=Version_values(ecbArray),ecbArray_1_1=ecbArray_1.next();!ecbArray_1_1.done;ecbArray_1_1=ecbArray_1.next()){var ecBlock=ecbArray_1_1.value;total+=ecBlock.getCount()*(ecBlock.getDataCodewords()+ecCodewords)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{ecbArray_1_1&&!ecbArray_1_1.done&&(_a=ecbArray_1.return)&&_a.call(ecbArray_1)}finally{if(e_1)throw e_1.error}}this.totalCodewords=total}return Version.prototype.getVersionNumber=function(){return this.versionNumber},Version.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},Version.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},Version.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},Version.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},Version.prototype.getTotalCodewords=function(){return this.totalCodewords},Version.prototype.getECBlocks=function(){return this.ecBlocks},Version.getVersionForDimensions=function(numRows,numColumns){var e_2,_a;if(1&numRows||1&numColumns)throw new core_FormatException;try{for(var _b=Version_values(Version.VERSIONS),_c=_b.next();!_c.done;_c=_b.next()){var version=_c.value;if(version.symbolSizeRows===numRows&&version.symbolSizeColumns===numColumns)return version}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}throw new core_FormatException},Version.prototype.toString=function(){return""+this.versionNumber},Version.buildVersions=function(){return[new Version(1,10,10,8,8,new ECBlocks(5,new ECB(1,3))),new Version(2,12,12,10,10,new ECBlocks(7,new ECB(1,5))),new Version(3,14,14,12,12,new ECBlocks(10,new ECB(1,8))),new Version(4,16,16,14,14,new ECBlocks(12,new ECB(1,12))),new Version(5,18,18,16,16,new ECBlocks(14,new ECB(1,18))),new Version(6,20,20,18,18,new ECBlocks(18,new ECB(1,22))),new Version(7,22,22,20,20,new ECBlocks(20,new ECB(1,30))),new Version(8,24,24,22,22,new ECBlocks(24,new ECB(1,36))),new Version(9,26,26,24,24,new ECBlocks(28,new ECB(1,44))),new Version(10,32,32,14,14,new ECBlocks(36,new ECB(1,62))),new Version(11,36,36,16,16,new ECBlocks(42,new ECB(1,86))),new Version(12,40,40,18,18,new ECBlocks(48,new ECB(1,114))),new Version(13,44,44,20,20,new ECBlocks(56,new ECB(1,144))),new Version(14,48,48,22,22,new ECBlocks(68,new ECB(1,174))),new Version(15,52,52,24,24,new ECBlocks(42,new ECB(2,102))),new Version(16,64,64,14,14,new ECBlocks(56,new ECB(2,140))),new Version(17,72,72,16,16,new ECBlocks(36,new ECB(4,92))),new Version(18,80,80,18,18,new ECBlocks(48,new ECB(4,114))),new Version(19,88,88,20,20,new ECBlocks(56,new ECB(4,144))),new Version(20,96,96,22,22,new ECBlocks(68,new ECB(4,174))),new Version(21,104,104,24,24,new ECBlocks(56,new ECB(6,136))),new Version(22,120,120,18,18,new ECBlocks(68,new ECB(6,175))),new Version(23,132,132,20,20,new ECBlocks(62,new ECB(8,163))),new Version(24,144,144,22,22,new ECBlocks(62,new ECB(8,156),new ECB(2,155))),new Version(25,8,18,6,16,new ECBlocks(7,new ECB(1,5))),new Version(26,8,32,6,14,new ECBlocks(11,new ECB(1,10))),new Version(27,12,26,10,24,new ECBlocks(14,new ECB(1,16))),new Version(28,12,36,10,16,new ECBlocks(18,new ECB(1,22))),new Version(29,16,36,14,16,new ECBlocks(24,new ECB(1,32))),new Version(30,16,48,14,22,new ECBlocks(28,new ECB(1,49)))]},Version.VERSIONS=Version.buildVersions(),Version}();const decoder_Version=Version;const decoder_BitMatrixParser=function(){function BitMatrixParser(bitMatrix){var dimension=bitMatrix.getHeight();if(dimension<8||dimension>144||1&dimension)throw new core_FormatException;this.version=BitMatrixParser.readVersion(bitMatrix),this.mappingBitMatrix=this.extractDataRegion(bitMatrix),this.readMappingMatrix=new common_BitMatrix(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return BitMatrixParser.prototype.getVersion=function(){return this.version},BitMatrixParser.readVersion=function(bitMatrix){var numRows=bitMatrix.getHeight(),numColumns=bitMatrix.getWidth();return decoder_Version.getVersionForDimensions(numRows,numColumns)},BitMatrixParser.prototype.readCodewords=function(){var result=new Int8Array(this.version.getTotalCodewords()),resultOffset=0,row=4,column=0,numRows=this.mappingBitMatrix.getHeight(),numColumns=this.mappingBitMatrix.getWidth(),corner1Read=!1,corner2Read=!1,corner3Read=!1,corner4Read=!1;do{if(row!==numRows||0!==column||corner1Read)if(row===numRows-2&&0===column&&3&numColumns&&!corner2Read)result[resultOffset++]=255&this.readCorner2(numRows,numColumns),row-=2,column+=2,corner2Read=!0;else if(row!==numRows+4||2!==column||7&numColumns||corner3Read)if(row!==numRows-2||0!==column||4!=(7&numColumns)||corner4Read){do{row<numRows&&column>=0&&!this.readMappingMatrix.get(column,row)&&(result[resultOffset++]=255&this.readUtah(row,column,numRows,numColumns)),row-=2,column+=2}while(row>=0&&column<numColumns);row+=1,column+=3;do{row>=0&&column<numColumns&&!this.readMappingMatrix.get(column,row)&&(result[resultOffset++]=255&this.readUtah(row,column,numRows,numColumns)),row+=2,column-=2}while(row<numRows&&column>=0);row+=3,column+=1}else result[resultOffset++]=255&this.readCorner4(numRows,numColumns),row-=2,column+=2,corner4Read=!0;else result[resultOffset++]=255&this.readCorner3(numRows,numColumns),row-=2,column+=2,corner3Read=!0;else result[resultOffset++]=255&this.readCorner1(numRows,numColumns),row-=2,column+=2,corner1Read=!0}while(row<numRows||column<numColumns);if(resultOffset!==this.version.getTotalCodewords())throw new core_FormatException;return result},BitMatrixParser.prototype.readModule=function(row,column,numRows,numColumns){return row<0&&(row+=numRows,column+=4-(numRows+4&7)),column<0&&(column+=numColumns,row+=4-(numColumns+4&7)),this.readMappingMatrix.set(column,row),this.mappingBitMatrix.get(column,row)},BitMatrixParser.prototype.readUtah=function(row,column,numRows,numColumns){var currentByte=0;return this.readModule(row-2,column-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row-2,column-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row-1,column-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row-1,column-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row-1,column,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row,column-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row,column-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(row,column,numRows,numColumns)&&(currentByte|=1),currentByte},BitMatrixParser.prototype.readCorner1=function(numRows,numColumns){var currentByte=0;return this.readModule(numRows-1,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-1,1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-1,2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(1,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(2,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(3,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte},BitMatrixParser.prototype.readCorner2=function(numRows,numColumns){var currentByte=0;return this.readModule(numRows-3,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-2,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-1,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-4,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-3,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(1,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte},BitMatrixParser.prototype.readCorner3=function(numRows,numColumns){var currentByte=0;return this.readModule(numRows-1,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-1,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-3,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(1,numColumns-3,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(1,numColumns-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(1,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte},BitMatrixParser.prototype.readCorner4=function(numRows,numColumns){var currentByte=0;return this.readModule(numRows-3,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-2,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(numRows-1,0,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-2,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(0,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(1,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(2,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte<<=1,this.readModule(3,numColumns-1,numRows,numColumns)&&(currentByte|=1),currentByte},BitMatrixParser.prototype.extractDataRegion=function(bitMatrix){var symbolSizeRows=this.version.getSymbolSizeRows(),symbolSizeColumns=this.version.getSymbolSizeColumns();if(bitMatrix.getHeight()!==symbolSizeRows)throw new core_IllegalArgumentException("Dimension of bitMatrix must match the version size");for(var dataRegionSizeRows=this.version.getDataRegionSizeRows(),dataRegionSizeColumns=this.version.getDataRegionSizeColumns(),numDataRegionsRow=symbolSizeRows/dataRegionSizeRows|0,numDataRegionsColumn=symbolSizeColumns/dataRegionSizeColumns|0,bitMatrixWithoutAlignment=new common_BitMatrix(numDataRegionsColumn*dataRegionSizeColumns,numDataRegionsRow*dataRegionSizeRows),dataRegionRow=0;dataRegionRow<numDataRegionsRow;++dataRegionRow)for(var dataRegionRowOffset=dataRegionRow*dataRegionSizeRows,dataRegionColumn=0;dataRegionColumn<numDataRegionsColumn;++dataRegionColumn)for(var dataRegionColumnOffset=dataRegionColumn*dataRegionSizeColumns,i=0;i<dataRegionSizeRows;++i)for(var readRowOffset=dataRegionRow*(dataRegionSizeRows+2)+1+i,writeRowOffset=dataRegionRowOffset+i,j=0;j<dataRegionSizeColumns;++j){var readColumnOffset=dataRegionColumn*(dataRegionSizeColumns+2)+1+j;if(bitMatrix.get(readColumnOffset,readRowOffset)){var writeColumnOffset=dataRegionColumnOffset+j;bitMatrixWithoutAlignment.set(writeColumnOffset,writeRowOffset)}}return bitMatrixWithoutAlignment},BitMatrixParser}();var DataBlock_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},DataBlock=function(){function DataBlock(numDataCodewords,codewords){this.numDataCodewords=numDataCodewords,this.codewords=codewords}return DataBlock.getDataBlocks=function(rawCodewords,version){var e_1,_a,e_2,_b,ecBlocks=version.getECBlocks(),totalBlocks=0,ecBlockArray=ecBlocks.getECBlocks();try{for(var ecBlockArray_1=DataBlock_values(ecBlockArray),ecBlockArray_1_1=ecBlockArray_1.next();!ecBlockArray_1_1.done;ecBlockArray_1_1=ecBlockArray_1.next()){totalBlocks+=(ecBlock=ecBlockArray_1_1.value).getCount()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{ecBlockArray_1_1&&!ecBlockArray_1_1.done&&(_a=ecBlockArray_1.return)&&_a.call(ecBlockArray_1)}finally{if(e_1)throw e_1.error}}var result=new Array(totalBlocks),numResultBlocks=0;try{for(var ecBlockArray_2=DataBlock_values(ecBlockArray),ecBlockArray_2_1=ecBlockArray_2.next();!ecBlockArray_2_1.done;ecBlockArray_2_1=ecBlockArray_2.next())for(var ecBlock=ecBlockArray_2_1.value,i=0;i<ecBlock.getCount();i++){var numDataCodewords=ecBlock.getDataCodewords(),numBlockCodewords=ecBlocks.getECCodewords()+numDataCodewords;result[numResultBlocks++]=new DataBlock(numDataCodewords,new Uint8Array(numBlockCodewords))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{ecBlockArray_2_1&&!ecBlockArray_2_1.done&&(_b=ecBlockArray_2.return)&&_b.call(ecBlockArray_2)}finally{if(e_2)throw e_2.error}}var longerBlocksNumDataCodewords=result[0].codewords.length-ecBlocks.getECCodewords(),shorterBlocksNumDataCodewords=longerBlocksNumDataCodewords-1,rawCodewordsOffset=0;for(i=0;i<shorterBlocksNumDataCodewords;i++)for(var j=0;j<numResultBlocks;j++)result[j].codewords[i]=rawCodewords[rawCodewordsOffset++];var specialVersion=24===version.getVersionNumber(),numLongerBlocks=specialVersion?8:numResultBlocks;for(j=0;j<numLongerBlocks;j++)result[j].codewords[longerBlocksNumDataCodewords-1]=rawCodewords[rawCodewordsOffset++];var max=result[0].codewords.length;for(i=longerBlocksNumDataCodewords;i<max;i++)for(j=0;j<numResultBlocks;j++){var jOffset=specialVersion?(j+8)%numResultBlocks:j,iOffset=specialVersion&&jOffset>7?i-1:i;result[jOffset].codewords[iOffset]=rawCodewords[rawCodewordsOffset++]}if(rawCodewordsOffset!==rawCodewords.length)throw new core_IllegalArgumentException;return result},DataBlock.prototype.getNumDataCodewords=function(){return this.numDataCodewords},DataBlock.prototype.getCodewords=function(){return this.codewords},DataBlock}();const decoder_DataBlock=DataBlock;const common_BitSource=function(){function BitSource(bytes){this.bytes=bytes,this.byteOffset=0,this.bitOffset=0}return BitSource.prototype.getBitOffset=function(){return this.bitOffset},BitSource.prototype.getByteOffset=function(){return this.byteOffset},BitSource.prototype.readBits=function(numBits){if(numBits<1||numBits>32||numBits>this.available())throw new core_IllegalArgumentException(""+numBits);var result=0,bitOffset=this.bitOffset,byteOffset=this.byteOffset,bytes=this.bytes;if(bitOffset>0){var bitsLeft=8-bitOffset,toRead=numBits<bitsLeft?numBits:bitsLeft,mask=255>>8-toRead<<(bitsToNotRead=bitsLeft-toRead);result=(bytes[byteOffset]&mask)>>bitsToNotRead,numBits-=toRead,8===(bitOffset+=toRead)&&(bitOffset=0,byteOffset++)}if(numBits>0){for(;numBits>=8;)result=result<<8|255&bytes[byteOffset],byteOffset++,numBits-=8;if(numBits>0){var bitsToNotRead;mask=255>>(bitsToNotRead=8-numBits)<<bitsToNotRead;result=result<<numBits|(bytes[byteOffset]&mask)>>bitsToNotRead,bitOffset+=numBits}}return this.bitOffset=bitOffset,this.byteOffset=byteOffset,result},BitSource.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},BitSource}();var Mode;!function(Mode){Mode[Mode.PAD_ENCODE=0]="PAD_ENCODE",Mode[Mode.ASCII_ENCODE=1]="ASCII_ENCODE",Mode[Mode.C40_ENCODE=2]="C40_ENCODE",Mode[Mode.TEXT_ENCODE=3]="TEXT_ENCODE",Mode[Mode.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Mode[Mode.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Mode[Mode.BASE256_ENCODE=6]="BASE256_ENCODE"}(Mode||(Mode={}));const decoder_DecodedBitStreamParser=function(){function DecodedBitStreamParser(){}return DecodedBitStreamParser.decode=function(bytes){var bits=new common_BitSource(bytes),result=new util_StringBuilder,resultTrailer=new util_StringBuilder,byteSegments=new Array,mode=Mode.ASCII_ENCODE;do{if(mode===Mode.ASCII_ENCODE)mode=this.decodeAsciiSegment(bits,result,resultTrailer);else{switch(mode){case Mode.C40_ENCODE:this.decodeC40Segment(bits,result);break;case Mode.TEXT_ENCODE:this.decodeTextSegment(bits,result);break;case Mode.ANSIX12_ENCODE:this.decodeAnsiX12Segment(bits,result);break;case Mode.EDIFACT_ENCODE:this.decodeEdifactSegment(bits,result);break;case Mode.BASE256_ENCODE:this.decodeBase256Segment(bits,result,byteSegments);break;default:throw new core_FormatException}mode=Mode.ASCII_ENCODE}}while(mode!==Mode.PAD_ENCODE&&bits.available()>0);return resultTrailer.length()>0&&result.append(resultTrailer.toString()),new common_DecoderResult(bytes,result.toString(),0===byteSegments.length?null:byteSegments,null)},DecodedBitStreamParser.decodeAsciiSegment=function(bits,result,resultTrailer){var upperShift=!1;do{var oneByte=bits.readBits(8);if(0===oneByte)throw new core_FormatException;if(oneByte<=128)return upperShift&&(oneByte+=128),result.append(String.fromCharCode(oneByte-1)),Mode.ASCII_ENCODE;if(129===oneByte)return Mode.PAD_ENCODE;if(oneByte<=229){var value=oneByte-130;value<10&&result.append("0"),result.append(""+value)}else switch(oneByte){case 230:return Mode.C40_ENCODE;case 231:return Mode.BASE256_ENCODE;case 232:result.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:upperShift=!0;break;case 236:result.append("[)>05"),resultTrailer.insert(0,"");break;case 237:result.append("[)>06"),resultTrailer.insert(0,"");break;case 238:return Mode.ANSIX12_ENCODE;case 239:return Mode.TEXT_ENCODE;case 240:return Mode.EDIFACT_ENCODE;default:if(254!==oneByte||0!==bits.available())throw new core_FormatException}}while(bits.available()>0);return Mode.ASCII_ENCODE},DecodedBitStreamParser.decodeC40Segment=function(bits,result){var upperShift=!1,cValues=[],shift=0;do{if(8===bits.available())return;var firstByte=bits.readBits(8);if(254===firstByte)return;this.parseTwoBytes(firstByte,bits.readBits(8),cValues);for(var i=0;i<3;i++){var cValue=cValues[i];switch(shift){case 0:if(cValue<3)shift=cValue+1;else{if(!(cValue<this.C40_BASIC_SET_CHARS.length))throw new core_FormatException;var c40char=this.C40_BASIC_SET_CHARS[cValue];upperShift?(result.append(String.fromCharCode(c40char.charCodeAt(0)+128)),upperShift=!1):result.append(c40char)}break;case 1:upperShift?(result.append(String.fromCharCode(cValue+128)),upperShift=!1):result.append(String.fromCharCode(cValue)),shift=0;break;case 2:if(cValue<this.C40_SHIFT2_SET_CHARS.length){c40char=this.C40_SHIFT2_SET_CHARS[cValue];upperShift?(result.append(String.fromCharCode(c40char.charCodeAt(0)+128)),upperShift=!1):result.append(c40char)}else switch(cValue){case 27:result.append(String.fromCharCode(29));break;case 30:upperShift=!0;break;default:throw new core_FormatException}shift=0;break;case 3:upperShift?(result.append(String.fromCharCode(cValue+224)),upperShift=!1):result.append(String.fromCharCode(cValue+96)),shift=0;break;default:throw new core_FormatException}}}while(bits.available()>0)},DecodedBitStreamParser.decodeTextSegment=function(bits,result){var upperShift=!1,cValues=[],shift=0;do{if(8===bits.available())return;var firstByte=bits.readBits(8);if(254===firstByte)return;this.parseTwoBytes(firstByte,bits.readBits(8),cValues);for(var i=0;i<3;i++){var cValue=cValues[i];switch(shift){case 0:if(cValue<3)shift=cValue+1;else{if(!(cValue<this.TEXT_BASIC_SET_CHARS.length))throw new core_FormatException;var textChar=this.TEXT_BASIC_SET_CHARS[cValue];upperShift?(result.append(String.fromCharCode(textChar.charCodeAt(0)+128)),upperShift=!1):result.append(textChar)}break;case 1:upperShift?(result.append(String.fromCharCode(cValue+128)),upperShift=!1):result.append(String.fromCharCode(cValue)),shift=0;break;case 2:if(cValue<this.TEXT_SHIFT2_SET_CHARS.length){textChar=this.TEXT_SHIFT2_SET_CHARS[cValue];upperShift?(result.append(String.fromCharCode(textChar.charCodeAt(0)+128)),upperShift=!1):result.append(textChar)}else switch(cValue){case 27:result.append(String.fromCharCode(29));break;case 30:upperShift=!0;break;default:throw new core_FormatException}shift=0;break;case 3:if(!(cValue<this.TEXT_SHIFT3_SET_CHARS.length))throw new core_FormatException;textChar=this.TEXT_SHIFT3_SET_CHARS[cValue];upperShift?(result.append(String.fromCharCode(textChar.charCodeAt(0)+128)),upperShift=!1):result.append(textChar),shift=0;break;default:throw new core_FormatException}}}while(bits.available()>0)},DecodedBitStreamParser.decodeAnsiX12Segment=function(bits,result){var cValues=[];do{if(8===bits.available())return;var firstByte=bits.readBits(8);if(254===firstByte)return;this.parseTwoBytes(firstByte,bits.readBits(8),cValues);for(var i=0;i<3;i++){var cValue=cValues[i];switch(cValue){case 0:result.append("\r");break;case 1:result.append("*");break;case 2:result.append(">");break;case 3:result.append(" ");break;default:if(cValue<14)result.append(String.fromCharCode(cValue+44));else{if(!(cValue<40))throw new core_FormatException;result.append(String.fromCharCode(cValue+51))}}}}while(bits.available()>0)},DecodedBitStreamParser.parseTwoBytes=function(firstByte,secondByte,result){var fullBitValue=(firstByte<<8)+secondByte-1,temp=Math.floor(fullBitValue/1600);result[0]=temp,fullBitValue-=1600*temp,temp=Math.floor(fullBitValue/40),result[1]=temp,result[2]=fullBitValue-40*temp},DecodedBitStreamParser.decodeEdifactSegment=function(bits,result){do{if(bits.available()<=16)return;for(var i=0;i<4;i++){var edifactValue=bits.readBits(6);if(31===edifactValue){var bitsLeft=8-bits.getBitOffset();return void(8!==bitsLeft&&bits.readBits(bitsLeft))}32&edifactValue||(edifactValue|=64),result.append(String.fromCharCode(edifactValue))}}while(bits.available()>0)},DecodedBitStreamParser.decodeBase256Segment=function(bits,result,byteSegments){var count,codewordPosition=1+bits.getByteOffset(),d1=this.unrandomize255State(bits.readBits(8),codewordPosition++);if((count=0===d1?bits.available()/8|0:d1<250?d1:250*(d1-249)+this.unrandomize255State(bits.readBits(8),codewordPosition++))<0)throw new core_FormatException;for(var bytes=new Uint8Array(count),i=0;i<count;i++){if(bits.available()<8)throw new core_FormatException;bytes[i]=this.unrandomize255State(bits.readBits(8),codewordPosition++)}byteSegments.push(bytes);try{result.append(util_StringEncoding.decode(bytes,common_StringUtils.ISO88591))}catch(uee){throw new core_IllegalStateException("Platform does not support required encoding: "+uee.message)}},DecodedBitStreamParser.unrandomize255State=function(randomizedBase256Codeword,base256CodewordPosition){var tempVariable=randomizedBase256Codeword-(149*base256CodewordPosition%255+1);return tempVariable>=0?tempVariable:tempVariable+256},DecodedBitStreamParser.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],DecodedBitStreamParser.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],DecodedBitStreamParser.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],DecodedBitStreamParser.TEXT_SHIFT2_SET_CHARS=DecodedBitStreamParser.C40_SHIFT2_SET_CHARS,DecodedBitStreamParser.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],DecodedBitStreamParser}();var Decoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Decoder_Decoder=function(){function Decoder(){this.rsDecoder=new reedsolomon_ReedSolomonDecoder(reedsolomon_GenericGF.DATA_MATRIX_FIELD_256)}return Decoder.prototype.decode=function(bits){var e_1,_a,parser=new decoder_BitMatrixParser(bits),version=parser.getVersion(),codewords=parser.readCodewords(),dataBlocks=decoder_DataBlock.getDataBlocks(codewords,version),totalBytes=0;try{for(var dataBlocks_1=Decoder_values(dataBlocks),dataBlocks_1_1=dataBlocks_1.next();!dataBlocks_1_1.done;dataBlocks_1_1=dataBlocks_1.next()){totalBytes+=dataBlocks_1_1.value.getNumDataCodewords()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{dataBlocks_1_1&&!dataBlocks_1_1.done&&(_a=dataBlocks_1.return)&&_a.call(dataBlocks_1)}finally{if(e_1)throw e_1.error}}for(var resultBytes=new Uint8Array(totalBytes),dataBlocksCount=dataBlocks.length,j=0;j<dataBlocksCount;j++){var dataBlock=dataBlocks[j],codewordBytes=dataBlock.getCodewords(),numDataCodewords=dataBlock.getNumDataCodewords();this.correctErrors(codewordBytes,numDataCodewords);for(var i=0;i<numDataCodewords;i++)resultBytes[i*dataBlocksCount+j]=codewordBytes[i]}return decoder_DecodedBitStreamParser.decode(resultBytes)},Decoder.prototype.correctErrors=function(codewordBytes,numDataCodewords){var codewordsInts=new Int32Array(codewordBytes);try{this.rsDecoder.decode(codewordsInts,codewordBytes.length-numDataCodewords)}catch(ignored){throw new core_ChecksumException}for(var i=0;i<numDataCodewords;i++)codewordBytes[i]=codewordsInts[i]},Decoder}();const datamatrix_decoder_Decoder=Decoder_Decoder;var Detector_Detector=function(){function Detector(image){this.image=image,this.rectangleDetector=new detector_WhiteRectangleDetector(this.image)}return Detector.prototype.detect=function(){var cornerPoints=this.rectangleDetector.detect(),points=this.detectSolid1(cornerPoints);if((points=this.detectSolid2(points))[3]=this.correctTopRight(points),!points[3])throw new core_NotFoundException;var topLeft=(points=this.shiftToModuleCenter(points))[0],bottomLeft=points[1],bottomRight=points[2],topRight=points[3],dimensionTop=this.transitionsBetween(topLeft,topRight)+1,dimensionRight=this.transitionsBetween(bottomRight,topRight)+1;1&~dimensionTop||(dimensionTop+=1),1&~dimensionRight||(dimensionRight+=1),4*dimensionTop<7*dimensionRight&&4*dimensionRight<7*dimensionTop&&(dimensionTop=dimensionRight=Math.max(dimensionTop,dimensionRight));var bits=Detector.sampleGrid(this.image,topLeft,bottomLeft,bottomRight,topRight,dimensionTop,dimensionRight);return new common_DetectorResult(bits,[topLeft,bottomLeft,bottomRight,topRight])},Detector.shiftPoint=function(point,to,div){var x=(to.getX()-point.getX())/(div+1),y=(to.getY()-point.getY())/(div+1);return new core_ResultPoint(point.getX()+x,point.getY()+y)},Detector.moveAway=function(point,fromX,fromY){var x=point.getX(),y=point.getY();return x<fromX?x-=1:x+=1,y<fromY?y-=1:y+=1,new core_ResultPoint(x,y)},Detector.prototype.detectSolid1=function(cornerPoints){var pointA=cornerPoints[0],pointB=cornerPoints[1],pointC=cornerPoints[3],pointD=cornerPoints[2],trAB=this.transitionsBetween(pointA,pointB),trBC=this.transitionsBetween(pointB,pointC),trCD=this.transitionsBetween(pointC,pointD),trDA=this.transitionsBetween(pointD,pointA),min=trAB,points=[pointD,pointA,pointB,pointC];return min>trBC&&(min=trBC,points[0]=pointA,points[1]=pointB,points[2]=pointC,points[3]=pointD),min>trCD&&(min=trCD,points[0]=pointB,points[1]=pointC,points[2]=pointD,points[3]=pointA),min>trDA&&(points[0]=pointC,points[1]=pointD,points[2]=pointA,points[3]=pointB),points},Detector.prototype.detectSolid2=function(points){var pointA=points[0],pointB=points[1],pointC=points[2],pointD=points[3],tr=this.transitionsBetween(pointA,pointD),pointBs=Detector.shiftPoint(pointB,pointC,4*(tr+1)),pointCs=Detector.shiftPoint(pointC,pointB,4*(tr+1));return this.transitionsBetween(pointBs,pointA)<this.transitionsBetween(pointCs,pointD)?(points[0]=pointA,points[1]=pointB,points[2]=pointC,points[3]=pointD):(points[0]=pointB,points[1]=pointC,points[2]=pointD,points[3]=pointA),points},Detector.prototype.correctTopRight=function(points){var pointA=points[0],pointB=points[1],pointC=points[2],pointD=points[3],trTop=this.transitionsBetween(pointA,pointD),trRight=this.transitionsBetween(pointB,pointD),pointAs=Detector.shiftPoint(pointA,pointB,4*(trRight+1)),pointCs=Detector.shiftPoint(pointC,pointB,4*(trTop+1));trTop=this.transitionsBetween(pointAs,pointD),trRight=this.transitionsBetween(pointCs,pointD);var candidate1=new core_ResultPoint(pointD.getX()+(pointC.getX()-pointB.getX())/(trTop+1),pointD.getY()+(pointC.getY()-pointB.getY())/(trTop+1)),candidate2=new core_ResultPoint(pointD.getX()+(pointA.getX()-pointB.getX())/(trRight+1),pointD.getY()+(pointA.getY()-pointB.getY())/(trRight+1));return this.isValid(candidate1)?this.isValid(candidate2)?this.transitionsBetween(pointAs,candidate1)+this.transitionsBetween(pointCs,candidate1)>this.transitionsBetween(pointAs,candidate2)+this.transitionsBetween(pointCs,candidate2)?candidate1:candidate2:candidate1:this.isValid(candidate2)?candidate2:null},Detector.prototype.shiftToModuleCenter=function(points){var pointA=points[0],pointB=points[1],pointC=points[2],pointD=points[3],dimH=this.transitionsBetween(pointA,pointD)+1,dimV=this.transitionsBetween(pointC,pointD)+1,pointAs=Detector.shiftPoint(pointA,pointB,4*dimV),pointCs=Detector.shiftPoint(pointC,pointB,4*dimH);1&~(dimH=this.transitionsBetween(pointAs,pointD)+1)||(dimH+=1),1&~(dimV=this.transitionsBetween(pointCs,pointD)+1)||(dimV+=1);var pointBs,pointDs,centerX=(pointA.getX()+pointB.getX()+pointC.getX()+pointD.getX())/4,centerY=(pointA.getY()+pointB.getY()+pointC.getY()+pointD.getY())/4;return pointA=Detector.moveAway(pointA,centerX,centerY),pointB=Detector.moveAway(pointB,centerX,centerY),pointC=Detector.moveAway(pointC,centerX,centerY),pointD=Detector.moveAway(pointD,centerX,centerY),pointAs=Detector.shiftPoint(pointA,pointB,4*dimV),pointAs=Detector.shiftPoint(pointAs,pointD,4*dimH),pointBs=Detector.shiftPoint(pointB,pointA,4*dimV),pointBs=Detector.shiftPoint(pointBs,pointC,4*dimH),pointCs=Detector.shiftPoint(pointC,pointD,4*dimV),pointCs=Detector.shiftPoint(pointCs,pointB,4*dimH),pointDs=Detector.shiftPoint(pointD,pointC,4*dimV),[pointAs,pointBs,pointCs,pointDs=Detector.shiftPoint(pointDs,pointA,4*dimH)]},Detector.prototype.isValid=function(p){return p.getX()>=0&&p.getX()<this.image.getWidth()&&p.getY()>0&&p.getY()<this.image.getHeight()},Detector.sampleGrid=function(image,topLeft,bottomLeft,bottomRight,topRight,dimensionX,dimensionY){return common_GridSamplerInstance.getInstance().sampleGrid(image,dimensionX,dimensionY,.5,.5,dimensionX-.5,.5,dimensionX-.5,dimensionY-.5,.5,dimensionY-.5,topLeft.getX(),topLeft.getY(),topRight.getX(),topRight.getY(),bottomRight.getX(),bottomRight.getY(),bottomLeft.getX(),bottomLeft.getY())},Detector.prototype.transitionsBetween=function(from,to){var fromX=Math.trunc(from.getX()),fromY=Math.trunc(from.getY()),toX=Math.trunc(to.getX()),toY=Math.trunc(to.getY()),steep=Math.abs(toY-fromY)>Math.abs(toX-fromX);if(steep){var temp=fromX;fromX=fromY,fromY=temp,temp=toX,toX=toY,toY=temp}for(var dx=Math.abs(toX-fromX),dy=Math.abs(toY-fromY),error=-dx/2,ystep=fromY<toY?1:-1,xstep=fromX<toX?1:-1,transitions=0,inBlack=this.image.get(steep?fromY:fromX,steep?fromX:fromY),x=fromX,y=fromY;x!==toX;x+=xstep){var isBlack=this.image.get(steep?y:x,steep?x:y);if(isBlack!==inBlack&&(transitions++,inBlack=isBlack),(error+=dy)>0){if(y===toY)break;y+=ystep,error-=dx}}return transitions},Detector}();const datamatrix_detector_Detector=Detector_Detector;const datamatrix_DataMatrixReader=function(){function DataMatrixReader(){this.decoder=new datamatrix_decoder_Decoder}return DataMatrixReader.prototype.decode=function(image,hints){var decoderResult,points;if(void 0===hints&&(hints=null),null!=hints&&hints.has(core_DecodeHintType.PURE_BARCODE)){var bits=DataMatrixReader.extractPureBits(image.getBlackMatrix());decoderResult=this.decoder.decode(bits),points=DataMatrixReader.NO_POINTS}else{var detectorResult=new datamatrix_detector_Detector(image.getBlackMatrix()).detect();decoderResult=this.decoder.decode(detectorResult.getBits()),points=detectorResult.getPoints()}var rawBytes=decoderResult.getRawBytes(),result=new core_Result(decoderResult.getText(),rawBytes,8*rawBytes.length,points,core_BarcodeFormat.DATA_MATRIX,util_System.currentTimeMillis()),byteSegments=decoderResult.getByteSegments();null!=byteSegments&&result.putMetadata(core_ResultMetadataType.BYTE_SEGMENTS,byteSegments);var ecLevel=decoderResult.getECLevel();return null!=ecLevel&&result.putMetadata(core_ResultMetadataType.ERROR_CORRECTION_LEVEL,ecLevel),result},DataMatrixReader.prototype.reset=function(){},DataMatrixReader.extractPureBits=function(image){var leftTopBlack=image.getTopLeftOnBit(),rightBottomBlack=image.getBottomRightOnBit();if(null==leftTopBlack||null==rightBottomBlack)throw new core_NotFoundException;var moduleSize=this.moduleSize(leftTopBlack,image),top=leftTopBlack[1],bottom=rightBottomBlack[1],left=leftTopBlack[0],matrixWidth=(rightBottomBlack[0]-left+1)/moduleSize,matrixHeight=(bottom-top+1)/moduleSize;if(matrixWidth<=0||matrixHeight<=0)throw new core_NotFoundException;var nudge=moduleSize/2;top+=nudge,left+=nudge;for(var bits=new common_BitMatrix(matrixWidth,matrixHeight),y=0;y<matrixHeight;y++)for(var iOffset=top+y*moduleSize,x=0;x<matrixWidth;x++)image.get(left+x*moduleSize,iOffset)&&bits.set(x,y);return bits},DataMatrixReader.moduleSize=function(leftTopBlack,image){for(var width=image.getWidth(),x=leftTopBlack[0],y=leftTopBlack[1];x<width&&image.get(x,y);)x++;if(x===width)throw new core_NotFoundException;var moduleSize=x-leftTopBlack[0];if(0===moduleSize)throw new core_NotFoundException;return moduleSize},DataMatrixReader.NO_POINTS=[],DataMatrixReader}();var ErrorCorrectionLevelValues,BrowserDatamatrixCodeReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(_super){function BrowserDatamatrixCodeReader(timeBetweenScansMillis){return void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500),_super.call(this,new datamatrix_DataMatrixReader,timeBetweenScansMillis)||this}BrowserDatamatrixCodeReader_extends(BrowserDatamatrixCodeReader,_super)}(BrowserCodeReader);!function(ErrorCorrectionLevelValues){ErrorCorrectionLevelValues[ErrorCorrectionLevelValues.L=0]="L",ErrorCorrectionLevelValues[ErrorCorrectionLevelValues.M=1]="M",ErrorCorrectionLevelValues[ErrorCorrectionLevelValues.Q=2]="Q",ErrorCorrectionLevelValues[ErrorCorrectionLevelValues.H=3]="H"}(ErrorCorrectionLevelValues||(ErrorCorrectionLevelValues={}));const decoder_ErrorCorrectionLevel=function(){function ErrorCorrectionLevel(value,stringValue,bits){this.value=value,this.stringValue=stringValue,this.bits=bits,ErrorCorrectionLevel.FOR_BITS.set(bits,this),ErrorCorrectionLevel.FOR_VALUE.set(value,this)}return ErrorCorrectionLevel.prototype.getValue=function(){return this.value},ErrorCorrectionLevel.prototype.getBits=function(){return this.bits},ErrorCorrectionLevel.fromString=function(s){switch(s){case"L":return ErrorCorrectionLevel.L;case"M":return ErrorCorrectionLevel.M;case"Q":return ErrorCorrectionLevel.Q;case"H":return ErrorCorrectionLevel.H;default:throw new core_ArgumentException(s+"not available")}},ErrorCorrectionLevel.prototype.toString=function(){return this.stringValue},ErrorCorrectionLevel.prototype.equals=function(o){if(!(o instanceof ErrorCorrectionLevel))return!1;var other=o;return this.value===other.value},ErrorCorrectionLevel.forBits=function(bits){if(bits<0||bits>=ErrorCorrectionLevel.FOR_BITS.size)throw new core_IllegalArgumentException;return ErrorCorrectionLevel.FOR_BITS.get(bits)},ErrorCorrectionLevel.FOR_BITS=new Map,ErrorCorrectionLevel.FOR_VALUE=new Map,ErrorCorrectionLevel.L=new ErrorCorrectionLevel(ErrorCorrectionLevelValues.L,"L",1),ErrorCorrectionLevel.M=new ErrorCorrectionLevel(ErrorCorrectionLevelValues.M,"M",0),ErrorCorrectionLevel.Q=new ErrorCorrectionLevel(ErrorCorrectionLevelValues.Q,"Q",3),ErrorCorrectionLevel.H=new ErrorCorrectionLevel(ErrorCorrectionLevelValues.H,"H",2),ErrorCorrectionLevel}();var FormatInformation_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},FormatInformation=function(){function FormatInformation(formatInfo){this.errorCorrectionLevel=decoder_ErrorCorrectionLevel.forBits(formatInfo>>3&3),this.dataMask=7&formatInfo}return FormatInformation.numBitsDiffering=function(a,b){return util_Integer.bitCount(a^b)},FormatInformation.decodeFormatInformation=function(maskedFormatInfo1,maskedFormatInfo2){var formatInfo=FormatInformation.doDecodeFormatInformation(maskedFormatInfo1,maskedFormatInfo2);return null!==formatInfo?formatInfo:FormatInformation.doDecodeFormatInformation(maskedFormatInfo1^FormatInformation.FORMAT_INFO_MASK_QR,maskedFormatInfo2^FormatInformation.FORMAT_INFO_MASK_QR)},FormatInformation.doDecodeFormatInformation=function(maskedFormatInfo1,maskedFormatInfo2){var e_1,_a,bestDifference=Number.MAX_SAFE_INTEGER,bestFormatInfo=0;try{for(var _b=FormatInformation_values(FormatInformation.FORMAT_INFO_DECODE_LOOKUP),_c=_b.next();!_c.done;_c=_b.next()){var decodeInfo=_c.value,targetInfo=decodeInfo[0];if(targetInfo===maskedFormatInfo1||targetInfo===maskedFormatInfo2)return new FormatInformation(decodeInfo[1]);var bitsDifference=FormatInformation.numBitsDiffering(maskedFormatInfo1,targetInfo);bitsDifference<bestDifference&&(bestFormatInfo=decodeInfo[1],bestDifference=bitsDifference),maskedFormatInfo1!==maskedFormatInfo2&&(bitsDifference=FormatInformation.numBitsDiffering(maskedFormatInfo2,targetInfo))<bestDifference&&(bestFormatInfo=decodeInfo[1],bestDifference=bitsDifference)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return bestDifference<=3?new FormatInformation(bestFormatInfo):null},FormatInformation.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},FormatInformation.prototype.getDataMask=function(){return this.dataMask},FormatInformation.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},FormatInformation.prototype.equals=function(o){if(!(o instanceof FormatInformation))return!1;var other=o;return this.errorCorrectionLevel===other.errorCorrectionLevel&&this.dataMask===other.dataMask},FormatInformation.FORMAT_INFO_MASK_QR=21522,FormatInformation.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],FormatInformation}();const decoder_FormatInformation=FormatInformation;var ECBlocks_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ECBlocks_ECBlocks=function(){function ECBlocks(ecCodewordsPerBlock){for(var ecBlocks=[],_i=1;_i<arguments.length;_i++)ecBlocks[_i-1]=arguments[_i];this.ecCodewordsPerBlock=ecCodewordsPerBlock,this.ecBlocks=ecBlocks}return ECBlocks.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},ECBlocks.prototype.getNumBlocks=function(){var e_1,_a,total=0,ecBlocks=this.ecBlocks;try{for(var ecBlocks_1=ECBlocks_values(ecBlocks),ecBlocks_1_1=ecBlocks_1.next();!ecBlocks_1_1.done;ecBlocks_1_1=ecBlocks_1.next()){total+=ecBlocks_1_1.value.getCount()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{ecBlocks_1_1&&!ecBlocks_1_1.done&&(_a=ecBlocks_1.return)&&_a.call(ecBlocks_1)}finally{if(e_1)throw e_1.error}}return total},ECBlocks.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},ECBlocks.prototype.getECBlocks=function(){return this.ecBlocks},ECBlocks}();const decoder_ECBlocks=ECBlocks_ECBlocks;var ECB_ECB=function(){function ECB(count,dataCodewords){this.count=count,this.dataCodewords=dataCodewords}return ECB.prototype.getCount=function(){return this.count},ECB.prototype.getDataCodewords=function(){return this.dataCodewords},ECB}();const decoder_ECB=ECB_ECB;var decoder_Version_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Version_Version=function(){function Version(versionNumber,alignmentPatternCenters){for(var e_1,_a,ecBlocks=[],_i=2;_i<arguments.length;_i++)ecBlocks[_i-2]=arguments[_i];this.versionNumber=versionNumber,this.alignmentPatternCenters=alignmentPatternCenters,this.ecBlocks=ecBlocks;var total=0,ecCodewords=ecBlocks[0].getECCodewordsPerBlock(),ecbArray=ecBlocks[0].getECBlocks();try{for(var ecbArray_1=decoder_Version_values(ecbArray),ecbArray_1_1=ecbArray_1.next();!ecbArray_1_1.done;ecbArray_1_1=ecbArray_1.next()){var ecBlock=ecbArray_1_1.value;total+=ecBlock.getCount()*(ecBlock.getDataCodewords()+ecCodewords)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{ecbArray_1_1&&!ecbArray_1_1.done&&(_a=ecbArray_1.return)&&_a.call(ecbArray_1)}finally{if(e_1)throw e_1.error}}this.totalCodewords=total}return Version.prototype.getVersionNumber=function(){return this.versionNumber},Version.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},Version.prototype.getTotalCodewords=function(){return this.totalCodewords},Version.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},Version.prototype.getECBlocksForLevel=function(ecLevel){return this.ecBlocks[ecLevel.getValue()]},Version.getProvisionalVersionForDimension=function(dimension){if(dimension%4!=1)throw new core_FormatException;try{return this.getVersionForNumber((dimension-17)/4)}catch(ignored){throw new core_FormatException}},Version.getVersionForNumber=function(versionNumber){if(versionNumber<1||versionNumber>40)throw new core_IllegalArgumentException;return Version.VERSIONS[versionNumber-1]},Version.decodeVersionInformation=function(versionBits){for(var bestDifference=Number.MAX_SAFE_INTEGER,bestVersion=0,i=0;i<Version.VERSION_DECODE_INFO.length;i++){var targetVersion=Version.VERSION_DECODE_INFO[i];if(targetVersion===versionBits)return Version.getVersionForNumber(i+7);var bitsDifference=decoder_FormatInformation.numBitsDiffering(versionBits,targetVersion);bitsDifference<bestDifference&&(bestVersion=i+7,bestDifference=bitsDifference)}return bestDifference<=3?Version.getVersionForNumber(bestVersion):null},Version.prototype.buildFunctionPattern=function(){var dimension=this.getDimensionForVersion(),bitMatrix=new common_BitMatrix(dimension);bitMatrix.setRegion(0,0,9,9),bitMatrix.setRegion(dimension-8,0,8,9),bitMatrix.setRegion(0,dimension-8,9,8);for(var max=this.alignmentPatternCenters.length,x=0;x<max;x++)for(var i=this.alignmentPatternCenters[x]-2,y=0;y<max;y++)0===x&&(0===y||y===max-1)||x===max-1&&0===y||bitMatrix.setRegion(this.alignmentPatternCenters[y]-2,i,5,5);return bitMatrix.setRegion(6,9,1,dimension-17),bitMatrix.setRegion(9,6,dimension-17,1),this.versionNumber>6&&(bitMatrix.setRegion(dimension-11,0,3,6),bitMatrix.setRegion(0,dimension-11,6,3)),bitMatrix},Version.prototype.toString=function(){return""+this.versionNumber},Version.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Version.VERSIONS=[new Version(1,new Int32Array(0),new decoder_ECBlocks(7,new decoder_ECB(1,19)),new decoder_ECBlocks(10,new decoder_ECB(1,16)),new decoder_ECBlocks(13,new decoder_ECB(1,13)),new decoder_ECBlocks(17,new decoder_ECB(1,9))),new Version(2,Int32Array.from([6,18]),new decoder_ECBlocks(10,new decoder_ECB(1,34)),new decoder_ECBlocks(16,new decoder_ECB(1,28)),new decoder_ECBlocks(22,new decoder_ECB(1,22)),new decoder_ECBlocks(28,new decoder_ECB(1,16))),new Version(3,Int32Array.from([6,22]),new decoder_ECBlocks(15,new decoder_ECB(1,55)),new decoder_ECBlocks(26,new decoder_ECB(1,44)),new decoder_ECBlocks(18,new decoder_ECB(2,17)),new decoder_ECBlocks(22,new decoder_ECB(2,13))),new Version(4,Int32Array.from([6,26]),new decoder_ECBlocks(20,new decoder_ECB(1,80)),new decoder_ECBlocks(18,new decoder_ECB(2,32)),new decoder_ECBlocks(26,new decoder_ECB(2,24)),new decoder_ECBlocks(16,new decoder_ECB(4,9))),new Version(5,Int32Array.from([6,30]),new decoder_ECBlocks(26,new decoder_ECB(1,108)),new decoder_ECBlocks(24,new decoder_ECB(2,43)),new decoder_ECBlocks(18,new decoder_ECB(2,15),new decoder_ECB(2,16)),new decoder_ECBlocks(22,new decoder_ECB(2,11),new decoder_ECB(2,12))),new Version(6,Int32Array.from([6,34]),new decoder_ECBlocks(18,new decoder_ECB(2,68)),new decoder_ECBlocks(16,new decoder_ECB(4,27)),new decoder_ECBlocks(24,new decoder_ECB(4,19)),new decoder_ECBlocks(28,new decoder_ECB(4,15))),new Version(7,Int32Array.from([6,22,38]),new decoder_ECBlocks(20,new decoder_ECB(2,78)),new decoder_ECBlocks(18,new decoder_ECB(4,31)),new decoder_ECBlocks(18,new decoder_ECB(2,14),new decoder_ECB(4,15)),new decoder_ECBlocks(26,new decoder_ECB(4,13),new decoder_ECB(1,14))),new Version(8,Int32Array.from([6,24,42]),new decoder_ECBlocks(24,new decoder_ECB(2,97)),new decoder_ECBlocks(22,new decoder_ECB(2,38),new decoder_ECB(2,39)),new decoder_ECBlocks(22,new decoder_ECB(4,18),new decoder_ECB(2,19)),new decoder_ECBlocks(26,new decoder_ECB(4,14),new decoder_ECB(2,15))),new Version(9,Int32Array.from([6,26,46]),new decoder_ECBlocks(30,new decoder_ECB(2,116)),new decoder_ECBlocks(22,new decoder_ECB(3,36),new decoder_ECB(2,37)),new decoder_ECBlocks(20,new decoder_ECB(4,16),new decoder_ECB(4,17)),new decoder_ECBlocks(24,new decoder_ECB(4,12),new decoder_ECB(4,13))),new Version(10,Int32Array.from([6,28,50]),new decoder_ECBlocks(18,new decoder_ECB(2,68),new decoder_ECB(2,69)),new decoder_ECBlocks(26,new decoder_ECB(4,43),new decoder_ECB(1,44)),new decoder_ECBlocks(24,new decoder_ECB(6,19),new decoder_ECB(2,20)),new decoder_ECBlocks(28,new decoder_ECB(6,15),new decoder_ECB(2,16))),new Version(11,Int32Array.from([6,30,54]),new decoder_ECBlocks(20,new decoder_ECB(4,81)),new decoder_ECBlocks(30,new decoder_ECB(1,50),new decoder_ECB(4,51)),new decoder_ECBlocks(28,new decoder_ECB(4,22),new decoder_ECB(4,23)),new decoder_ECBlocks(24,new decoder_ECB(3,12),new decoder_ECB(8,13))),new Version(12,Int32Array.from([6,32,58]),new decoder_ECBlocks(24,new decoder_ECB(2,92),new decoder_ECB(2,93)),new decoder_ECBlocks(22,new decoder_ECB(6,36),new decoder_ECB(2,37)),new decoder_ECBlocks(26,new decoder_ECB(4,20),new decoder_ECB(6,21)),new decoder_ECBlocks(28,new decoder_ECB(7,14),new decoder_ECB(4,15))),new Version(13,Int32Array.from([6,34,62]),new decoder_ECBlocks(26,new decoder_ECB(4,107)),new decoder_ECBlocks(22,new decoder_ECB(8,37),new decoder_ECB(1,38)),new decoder_ECBlocks(24,new decoder_ECB(8,20),new decoder_ECB(4,21)),new decoder_ECBlocks(22,new decoder_ECB(12,11),new decoder_ECB(4,12))),new Version(14,Int32Array.from([6,26,46,66]),new decoder_ECBlocks(30,new decoder_ECB(3,115),new decoder_ECB(1,116)),new decoder_ECBlocks(24,new decoder_ECB(4,40),new decoder_ECB(5,41)),new decoder_ECBlocks(20,new decoder_ECB(11,16),new decoder_ECB(5,17)),new decoder_ECBlocks(24,new decoder_ECB(11,12),new decoder_ECB(5,13))),new Version(15,Int32Array.from([6,26,48,70]),new decoder_ECBlocks(22,new decoder_ECB(5,87),new decoder_ECB(1,88)),new decoder_ECBlocks(24,new decoder_ECB(5,41),new decoder_ECB(5,42)),new decoder_ECBlocks(30,new decoder_ECB(5,24),new decoder_ECB(7,25)),new decoder_ECBlocks(24,new decoder_ECB(11,12),new decoder_ECB(7,13))),new Version(16,Int32Array.from([6,26,50,74]),new decoder_ECBlocks(24,new decoder_ECB(5,98),new decoder_ECB(1,99)),new decoder_ECBlocks(28,new decoder_ECB(7,45),new decoder_ECB(3,46)),new decoder_ECBlocks(24,new decoder_ECB(15,19),new decoder_ECB(2,20)),new decoder_ECBlocks(30,new decoder_ECB(3,15),new decoder_ECB(13,16))),new Version(17,Int32Array.from([6,30,54,78]),new decoder_ECBlocks(28,new decoder_ECB(1,107),new decoder_ECB(5,108)),new decoder_ECBlocks(28,new decoder_ECB(10,46),new decoder_ECB(1,47)),new decoder_ECBlocks(28,new decoder_ECB(1,22),new decoder_ECB(15,23)),new decoder_ECBlocks(28,new decoder_ECB(2,14),new decoder_ECB(17,15))),new Version(18,Int32Array.from([6,30,56,82]),new decoder_ECBlocks(30,new decoder_ECB(5,120),new decoder_ECB(1,121)),new decoder_ECBlocks(26,new decoder_ECB(9,43),new decoder_ECB(4,44)),new decoder_ECBlocks(28,new decoder_ECB(17,22),new decoder_ECB(1,23)),new decoder_ECBlocks(28,new decoder_ECB(2,14),new decoder_ECB(19,15))),new Version(19,Int32Array.from([6,30,58,86]),new decoder_ECBlocks(28,new decoder_ECB(3,113),new decoder_ECB(4,114)),new decoder_ECBlocks(26,new decoder_ECB(3,44),new decoder_ECB(11,45)),new decoder_ECBlocks(26,new decoder_ECB(17,21),new decoder_ECB(4,22)),new decoder_ECBlocks(26,new decoder_ECB(9,13),new decoder_ECB(16,14))),new Version(20,Int32Array.from([6,34,62,90]),new decoder_ECBlocks(28,new decoder_ECB(3,107),new decoder_ECB(5,108)),new decoder_ECBlocks(26,new decoder_ECB(3,41),new decoder_ECB(13,42)),new decoder_ECBlocks(30,new decoder_ECB(15,24),new decoder_ECB(5,25)),new decoder_ECBlocks(28,new decoder_ECB(15,15),new decoder_ECB(10,16))),new Version(21,Int32Array.from([6,28,50,72,94]),new decoder_ECBlocks(28,new decoder_ECB(4,116),new decoder_ECB(4,117)),new decoder_ECBlocks(26,new decoder_ECB(17,42)),new decoder_ECBlocks(28,new decoder_ECB(17,22),new decoder_ECB(6,23)),new decoder_ECBlocks(30,new decoder_ECB(19,16),new decoder_ECB(6,17))),new Version(22,Int32Array.from([6,26,50,74,98]),new decoder_ECBlocks(28,new decoder_ECB(2,111),new decoder_ECB(7,112)),new decoder_ECBlocks(28,new decoder_ECB(17,46)),new decoder_ECBlocks(30,new decoder_ECB(7,24),new decoder_ECB(16,25)),new decoder_ECBlocks(24,new decoder_ECB(34,13))),new Version(23,Int32Array.from([6,30,54,78,102]),new decoder_ECBlocks(30,new decoder_ECB(4,121),new decoder_ECB(5,122)),new decoder_ECBlocks(28,new decoder_ECB(4,47),new decoder_ECB(14,48)),new decoder_ECBlocks(30,new decoder_ECB(11,24),new decoder_ECB(14,25)),new decoder_ECBlocks(30,new decoder_ECB(16,15),new decoder_ECB(14,16))),new Version(24,Int32Array.from([6,28,54,80,106]),new decoder_ECBlocks(30,new decoder_ECB(6,117),new decoder_ECB(4,118)),new decoder_ECBlocks(28,new decoder_ECB(6,45),new decoder_ECB(14,46)),new decoder_ECBlocks(30,new decoder_ECB(11,24),new decoder_ECB(16,25)),new decoder_ECBlocks(30,new decoder_ECB(30,16),new decoder_ECB(2,17))),new Version(25,Int32Array.from([6,32,58,84,110]),new decoder_ECBlocks(26,new decoder_ECB(8,106),new decoder_ECB(4,107)),new decoder_ECBlocks(28,new decoder_ECB(8,47),new decoder_ECB(13,48)),new decoder_ECBlocks(30,new decoder_ECB(7,24),new decoder_ECB(22,25)),new decoder_ECBlocks(30,new decoder_ECB(22,15),new decoder_ECB(13,16))),new Version(26,Int32Array.from([6,30,58,86,114]),new decoder_ECBlocks(28,new decoder_ECB(10,114),new decoder_ECB(2,115)),new decoder_ECBlocks(28,new decoder_ECB(19,46),new decoder_ECB(4,47)),new decoder_ECBlocks(28,new decoder_ECB(28,22),new decoder_ECB(6,23)),new decoder_ECBlocks(30,new decoder_ECB(33,16),new decoder_ECB(4,17))),new Version(27,Int32Array.from([6,34,62,90,118]),new decoder_ECBlocks(30,new decoder_ECB(8,122),new decoder_ECB(4,123)),new decoder_ECBlocks(28,new decoder_ECB(22,45),new decoder_ECB(3,46)),new decoder_ECBlocks(30,new decoder_ECB(8,23),new decoder_ECB(26,24)),new decoder_ECBlocks(30,new decoder_ECB(12,15),new decoder_ECB(28,16))),new Version(28,Int32Array.from([6,26,50,74,98,122]),new decoder_ECBlocks(30,new decoder_ECB(3,117),new decoder_ECB(10,118)),new decoder_ECBlocks(28,new decoder_ECB(3,45),new decoder_ECB(23,46)),new decoder_ECBlocks(30,new decoder_ECB(4,24),new decoder_ECB(31,25)),new decoder_ECBlocks(30,new decoder_ECB(11,15),new decoder_ECB(31,16))),new Version(29,Int32Array.from([6,30,54,78,102,126]),new decoder_ECBlocks(30,new decoder_ECB(7,116),new decoder_ECB(7,117)),new decoder_ECBlocks(28,new decoder_ECB(21,45),new decoder_ECB(7,46)),new decoder_ECBlocks(30,new decoder_ECB(1,23),new decoder_ECB(37,24)),new decoder_ECBlocks(30,new decoder_ECB(19,15),new decoder_ECB(26,16))),new Version(30,Int32Array.from([6,26,52,78,104,130]),new decoder_ECBlocks(30,new decoder_ECB(5,115),new decoder_ECB(10,116)),new decoder_ECBlocks(28,new decoder_ECB(19,47),new decoder_ECB(10,48)),new decoder_ECBlocks(30,new decoder_ECB(15,24),new decoder_ECB(25,25)),new decoder_ECBlocks(30,new decoder_ECB(23,15),new decoder_ECB(25,16))),new Version(31,Int32Array.from([6,30,56,82,108,134]),new decoder_ECBlocks(30,new decoder_ECB(13,115),new decoder_ECB(3,116)),new decoder_ECBlocks(28,new decoder_ECB(2,46),new decoder_ECB(29,47)),new decoder_ECBlocks(30,new decoder_ECB(42,24),new decoder_ECB(1,25)),new decoder_ECBlocks(30,new decoder_ECB(23,15),new decoder_ECB(28,16))),new Version(32,Int32Array.from([6,34,60,86,112,138]),new decoder_ECBlocks(30,new decoder_ECB(17,115)),new decoder_ECBlocks(28,new decoder_ECB(10,46),new decoder_ECB(23,47)),new decoder_ECBlocks(30,new decoder_ECB(10,24),new decoder_ECB(35,25)),new decoder_ECBlocks(30,new decoder_ECB(19,15),new decoder_ECB(35,16))),new Version(33,Int32Array.from([6,30,58,86,114,142]),new decoder_ECBlocks(30,new decoder_ECB(17,115),new decoder_ECB(1,116)),new decoder_ECBlocks(28,new decoder_ECB(14,46),new decoder_ECB(21,47)),new decoder_ECBlocks(30,new decoder_ECB(29,24),new decoder_ECB(19,25)),new decoder_ECBlocks(30,new decoder_ECB(11,15),new decoder_ECB(46,16))),new Version(34,Int32Array.from([6,34,62,90,118,146]),new decoder_ECBlocks(30,new decoder_ECB(13,115),new decoder_ECB(6,116)),new decoder_ECBlocks(28,new decoder_ECB(14,46),new decoder_ECB(23,47)),new decoder_ECBlocks(30,new decoder_ECB(44,24),new decoder_ECB(7,25)),new decoder_ECBlocks(30,new decoder_ECB(59,16),new decoder_ECB(1,17))),new Version(35,Int32Array.from([6,30,54,78,102,126,150]),new decoder_ECBlocks(30,new decoder_ECB(12,121),new decoder_ECB(7,122)),new decoder_ECBlocks(28,new decoder_ECB(12,47),new decoder_ECB(26,48)),new decoder_ECBlocks(30,new decoder_ECB(39,24),new decoder_ECB(14,25)),new decoder_ECBlocks(30,new decoder_ECB(22,15),new decoder_ECB(41,16))),new Version(36,Int32Array.from([6,24,50,76,102,128,154]),new decoder_ECBlocks(30,new decoder_ECB(6,121),new decoder_ECB(14,122)),new decoder_ECBlocks(28,new decoder_ECB(6,47),new decoder_ECB(34,48)),new decoder_ECBlocks(30,new decoder_ECB(46,24),new decoder_ECB(10,25)),new decoder_ECBlocks(30,new decoder_ECB(2,15),new decoder_ECB(64,16))),new Version(37,Int32Array.from([6,28,54,80,106,132,158]),new decoder_ECBlocks(30,new decoder_ECB(17,122),new decoder_ECB(4,123)),new decoder_ECBlocks(28,new decoder_ECB(29,46),new decoder_ECB(14,47)),new decoder_ECBlocks(30,new decoder_ECB(49,24),new decoder_ECB(10,25)),new decoder_ECBlocks(30,new decoder_ECB(24,15),new decoder_ECB(46,16))),new Version(38,Int32Array.from([6,32,58,84,110,136,162]),new decoder_ECBlocks(30,new decoder_ECB(4,122),new decoder_ECB(18,123)),new decoder_ECBlocks(28,new decoder_ECB(13,46),new decoder_ECB(32,47)),new decoder_ECBlocks(30,new decoder_ECB(48,24),new decoder_ECB(14,25)),new decoder_ECBlocks(30,new decoder_ECB(42,15),new decoder_ECB(32,16))),new Version(39,Int32Array.from([6,26,54,82,110,138,166]),new decoder_ECBlocks(30,new decoder_ECB(20,117),new decoder_ECB(4,118)),new decoder_ECBlocks(28,new decoder_ECB(40,47),new decoder_ECB(7,48)),new decoder_ECBlocks(30,new decoder_ECB(43,24),new decoder_ECB(22,25)),new decoder_ECBlocks(30,new decoder_ECB(10,15),new decoder_ECB(67,16))),new Version(40,Int32Array.from([6,30,58,86,114,142,170]),new decoder_ECBlocks(30,new decoder_ECB(19,118),new decoder_ECB(6,119)),new decoder_ECBlocks(28,new decoder_ECB(18,47),new decoder_ECB(31,48)),new decoder_ECBlocks(30,new decoder_ECB(34,24),new decoder_ECB(34,25)),new decoder_ECBlocks(30,new decoder_ECB(20,15),new decoder_ECB(61,16)))],Version}();const qrcode_decoder_Version=Version_Version;var DataMaskValues;!function(DataMaskValues){DataMaskValues[DataMaskValues.DATA_MASK_000=0]="DATA_MASK_000",DataMaskValues[DataMaskValues.DATA_MASK_001=1]="DATA_MASK_001",DataMaskValues[DataMaskValues.DATA_MASK_010=2]="DATA_MASK_010",DataMaskValues[DataMaskValues.DATA_MASK_011=3]="DATA_MASK_011",DataMaskValues[DataMaskValues.DATA_MASK_100=4]="DATA_MASK_100",DataMaskValues[DataMaskValues.DATA_MASK_101=5]="DATA_MASK_101",DataMaskValues[DataMaskValues.DATA_MASK_110=6]="DATA_MASK_110",DataMaskValues[DataMaskValues.DATA_MASK_111=7]="DATA_MASK_111"}(DataMaskValues||(DataMaskValues={}));const decoder_DataMask=function(){function DataMask(value,isMasked){this.value=value,this.isMasked=isMasked}return DataMask.prototype.unmaskBitMatrix=function(bits,dimension){for(var i=0;i<dimension;i++)for(var j=0;j<dimension;j++)this.isMasked(i,j)&&bits.flip(j,i)},DataMask.values=new Map([[DataMaskValues.DATA_MASK_000,new DataMask(DataMaskValues.DATA_MASK_000,function(i,j){return!(i+j&1)})],[DataMaskValues.DATA_MASK_001,new DataMask(DataMaskValues.DATA_MASK_001,function(i,j){return!(1&i)})],[DataMaskValues.DATA_MASK_010,new DataMask(DataMaskValues.DATA_MASK_010,function(i,j){return j%3==0})],[DataMaskValues.DATA_MASK_011,new DataMask(DataMaskValues.DATA_MASK_011,function(i,j){return(i+j)%3==0})],[DataMaskValues.DATA_MASK_100,new DataMask(DataMaskValues.DATA_MASK_100,function(i,j){return!(Math.floor(i/2)+Math.floor(j/3)&1)})],[DataMaskValues.DATA_MASK_101,new DataMask(DataMaskValues.DATA_MASK_101,function(i,j){return i*j%6==0})],[DataMaskValues.DATA_MASK_110,new DataMask(DataMaskValues.DATA_MASK_110,function(i,j){return i*j%6<3})],[DataMaskValues.DATA_MASK_111,new DataMask(DataMaskValues.DATA_MASK_111,function(i,j){return!(i+j+i*j%3&1)})]]),DataMask}();var BitMatrixParser_BitMatrixParser=function(){function BitMatrixParser(bitMatrix){var dimension=bitMatrix.getHeight();if(dimension<21||1!=(3&dimension))throw new core_FormatException;this.bitMatrix=bitMatrix}return BitMatrixParser.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var formatInfoBits1=0,i=0;i<6;i++)formatInfoBits1=this.copyBit(i,8,formatInfoBits1);formatInfoBits1=this.copyBit(7,8,formatInfoBits1),formatInfoBits1=this.copyBit(8,8,formatInfoBits1),formatInfoBits1=this.copyBit(8,7,formatInfoBits1);for(var j=5;j>=0;j--)formatInfoBits1=this.copyBit(8,j,formatInfoBits1);var dimension=this.bitMatrix.getHeight(),formatInfoBits2=0,jMin=dimension-7;for(j=dimension-1;j>=jMin;j--)formatInfoBits2=this.copyBit(8,j,formatInfoBits2);for(i=dimension-8;i<dimension;i++)formatInfoBits2=this.copyBit(i,8,formatInfoBits2);if(this.parsedFormatInfo=decoder_FormatInformation.decodeFormatInformation(formatInfoBits1,formatInfoBits2),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new core_FormatException},BitMatrixParser.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var dimension=this.bitMatrix.getHeight(),provisionalVersion=Math.floor((dimension-17)/4);if(provisionalVersion<=6)return qrcode_decoder_Version.getVersionForNumber(provisionalVersion);for(var versionBits=0,ijMin=dimension-11,j=5;j>=0;j--)for(var i=dimension-9;i>=ijMin;i--)versionBits=this.copyBit(i,j,versionBits);var theParsedVersion=qrcode_decoder_Version.decodeVersionInformation(versionBits);if(null!==theParsedVersion&&theParsedVersion.getDimensionForVersion()===dimension)return this.parsedVersion=theParsedVersion,theParsedVersion;versionBits=0;for(i=5;i>=0;i--)for(j=dimension-9;j>=ijMin;j--)versionBits=this.copyBit(i,j,versionBits);if(null!==(theParsedVersion=qrcode_decoder_Version.decodeVersionInformation(versionBits))&&theParsedVersion.getDimensionForVersion()===dimension)return this.parsedVersion=theParsedVersion,theParsedVersion;throw new core_FormatException},BitMatrixParser.prototype.copyBit=function(i,j,versionBits){return(this.isMirror?this.bitMatrix.get(j,i):this.bitMatrix.get(i,j))?versionBits<<1|1:versionBits<<1},BitMatrixParser.prototype.readCodewords=function(){var formatInfo=this.readFormatInformation(),version=this.readVersion(),dataMask=decoder_DataMask.values.get(formatInfo.getDataMask()),dimension=this.bitMatrix.getHeight();dataMask.unmaskBitMatrix(this.bitMatrix,dimension);for(var functionPattern=version.buildFunctionPattern(),readingUp=!0,result=new Uint8Array(version.getTotalCodewords()),resultOffset=0,currentByte=0,bitsRead=0,j=dimension-1;j>0;j-=2){6===j&&j--;for(var count=0;count<dimension;count++)for(var i=readingUp?dimension-1-count:count,col=0;col<2;col++)functionPattern.get(j-col,i)||(bitsRead++,currentByte<<=1,this.bitMatrix.get(j-col,i)&&(currentByte|=1),8===bitsRead&&(result[resultOffset++]=currentByte,bitsRead=0,currentByte=0));readingUp=!readingUp}if(resultOffset!==version.getTotalCodewords())throw new core_FormatException;return result},BitMatrixParser.prototype.remask=function(){if(null!==this.parsedFormatInfo){var dataMask=decoder_DataMask.values.get(this.parsedFormatInfo.getDataMask()),dimension=this.bitMatrix.getHeight();dataMask.unmaskBitMatrix(this.bitMatrix,dimension)}},BitMatrixParser.prototype.setMirror=function(isMirror){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=isMirror},BitMatrixParser.prototype.mirror=function(){for(var bitMatrix=this.bitMatrix,x=0,width=bitMatrix.getWidth();x<width;x++)for(var y=x+1,height=bitMatrix.getHeight();y<height;y++)bitMatrix.get(x,y)!==bitMatrix.get(y,x)&&(bitMatrix.flip(y,x),bitMatrix.flip(x,y))},BitMatrixParser}();const qrcode_decoder_BitMatrixParser=BitMatrixParser_BitMatrixParser;var decoder_DataBlock_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},DataBlock_DataBlock=function(){function DataBlock(numDataCodewords,codewords){this.numDataCodewords=numDataCodewords,this.codewords=codewords}return DataBlock.getDataBlocks=function(rawCodewords,version,ecLevel){var e_1,_a,e_2,_b;if(rawCodewords.length!==version.getTotalCodewords())throw new core_IllegalArgumentException;var ecBlocks=version.getECBlocksForLevel(ecLevel),totalBlocks=0,ecBlockArray=ecBlocks.getECBlocks();try{for(var ecBlockArray_1=decoder_DataBlock_values(ecBlockArray),ecBlockArray_1_1=ecBlockArray_1.next();!ecBlockArray_1_1.done;ecBlockArray_1_1=ecBlockArray_1.next()){totalBlocks+=(ecBlock=ecBlockArray_1_1.value).getCount()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{ecBlockArray_1_1&&!ecBlockArray_1_1.done&&(_a=ecBlockArray_1.return)&&_a.call(ecBlockArray_1)}finally{if(e_1)throw e_1.error}}var result=new Array(totalBlocks),numResultBlocks=0;try{for(var ecBlockArray_2=decoder_DataBlock_values(ecBlockArray),ecBlockArray_2_1=ecBlockArray_2.next();!ecBlockArray_2_1.done;ecBlockArray_2_1=ecBlockArray_2.next())for(var ecBlock=ecBlockArray_2_1.value,i=0;i<ecBlock.getCount();i++){var numDataCodewords=ecBlock.getDataCodewords(),numBlockCodewords=ecBlocks.getECCodewordsPerBlock()+numDataCodewords;result[numResultBlocks++]=new DataBlock(numDataCodewords,new Uint8Array(numBlockCodewords))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{ecBlockArray_2_1&&!ecBlockArray_2_1.done&&(_b=ecBlockArray_2.return)&&_b.call(ecBlockArray_2)}finally{if(e_2)throw e_2.error}}for(var shorterBlocksTotalCodewords=result[0].codewords.length,longerBlocksStartAt=result.length-1;longerBlocksStartAt>=0;){if(result[longerBlocksStartAt].codewords.length===shorterBlocksTotalCodewords)break;longerBlocksStartAt--}longerBlocksStartAt++;var shorterBlocksNumDataCodewords=shorterBlocksTotalCodewords-ecBlocks.getECCodewordsPerBlock(),rawCodewordsOffset=0;for(i=0;i<shorterBlocksNumDataCodewords;i++)for(var j=0;j<numResultBlocks;j++)result[j].codewords[i]=rawCodewords[rawCodewordsOffset++];for(j=longerBlocksStartAt;j<numResultBlocks;j++)result[j].codewords[shorterBlocksNumDataCodewords]=rawCodewords[rawCodewordsOffset++];var max=result[0].codewords.length;for(i=shorterBlocksNumDataCodewords;i<max;i++)for(j=0;j<numResultBlocks;j++){var iOffset=j<longerBlocksStartAt?i:i+1;result[j].codewords[iOffset]=rawCodewords[rawCodewordsOffset++]}return result},DataBlock.prototype.getNumDataCodewords=function(){return this.numDataCodewords},DataBlock.prototype.getCodewords=function(){return this.codewords},DataBlock}();const qrcode_decoder_DataBlock=DataBlock_DataBlock;var ModeValues;!function(ModeValues){ModeValues[ModeValues.TERMINATOR=0]="TERMINATOR",ModeValues[ModeValues.NUMERIC=1]="NUMERIC",ModeValues[ModeValues.ALPHANUMERIC=2]="ALPHANUMERIC",ModeValues[ModeValues.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ModeValues[ModeValues.BYTE=4]="BYTE",ModeValues[ModeValues.ECI=5]="ECI",ModeValues[ModeValues.KANJI=6]="KANJI",ModeValues[ModeValues.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ModeValues[ModeValues.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ModeValues[ModeValues.HANZI=9]="HANZI"}(ModeValues||(ModeValues={}));var Mode_Mode=function(){function Mode(value,stringValue,characterCountBitsForVersions,bits){this.value=value,this.stringValue=stringValue,this.characterCountBitsForVersions=characterCountBitsForVersions,this.bits=bits,Mode.FOR_BITS.set(bits,this),Mode.FOR_VALUE.set(value,this)}return Mode.forBits=function(bits){var mode=Mode.FOR_BITS.get(bits);if(void 0===mode)throw new core_IllegalArgumentException;return mode},Mode.prototype.getCharacterCountBits=function(version){var offset,versionNumber=version.getVersionNumber();return offset=versionNumber<=9?0:versionNumber<=26?1:2,this.characterCountBitsForVersions[offset]},Mode.prototype.getValue=function(){return this.value},Mode.prototype.getBits=function(){return this.bits},Mode.prototype.equals=function(o){if(!(o instanceof Mode))return!1;var other=o;return this.value===other.value},Mode.prototype.toString=function(){return this.stringValue},Mode.FOR_BITS=new Map,Mode.FOR_VALUE=new Map,Mode.TERMINATOR=new Mode(ModeValues.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Mode.NUMERIC=new Mode(ModeValues.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Mode.ALPHANUMERIC=new Mode(ModeValues.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Mode.STRUCTURED_APPEND=new Mode(ModeValues.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Mode.BYTE=new Mode(ModeValues.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Mode.ECI=new Mode(ModeValues.ECI,"ECI",Int32Array.from([0,0,0]),7),Mode.KANJI=new Mode(ModeValues.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Mode.FNC1_FIRST_POSITION=new Mode(ModeValues.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Mode.FNC1_SECOND_POSITION=new Mode(ModeValues.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Mode.HANZI=new Mode(ModeValues.HANZI,"HANZI",Int32Array.from([8,10,12]),13),Mode}();const decoder_Mode=Mode_Mode;var DecodedBitStreamParser_DecodedBitStreamParser=function(){function DecodedBitStreamParser(){}return DecodedBitStreamParser.decode=function(bytes,version,ecLevel,hints){var bits=new common_BitSource(bytes),result=new util_StringBuilder,byteSegments=new Array,symbolSequence=-1,parityData=-1;try{var currentCharacterSetECI=null,fc1InEffect=!1,mode=void 0;do{if(bits.available()<4)mode=decoder_Mode.TERMINATOR;else{var modeBits=bits.readBits(4);mode=decoder_Mode.forBits(modeBits)}switch(mode){case decoder_Mode.TERMINATOR:break;case decoder_Mode.FNC1_FIRST_POSITION:case decoder_Mode.FNC1_SECOND_POSITION:fc1InEffect=!0;break;case decoder_Mode.STRUCTURED_APPEND:if(bits.available()<16)throw new core_FormatException;symbolSequence=bits.readBits(8),parityData=bits.readBits(8);break;case decoder_Mode.ECI:var value=DecodedBitStreamParser.parseECIValue(bits);if(null===(currentCharacterSetECI=common_CharacterSetECI.getCharacterSetECIByValue(value)))throw new core_FormatException;break;case decoder_Mode.HANZI:var subset=bits.readBits(4),countHanzi=bits.readBits(mode.getCharacterCountBits(version));subset===DecodedBitStreamParser.GB2312_SUBSET&&DecodedBitStreamParser.decodeHanziSegment(bits,result,countHanzi);break;default:var count=bits.readBits(mode.getCharacterCountBits(version));switch(mode){case decoder_Mode.NUMERIC:DecodedBitStreamParser.decodeNumericSegment(bits,result,count);break;case decoder_Mode.ALPHANUMERIC:DecodedBitStreamParser.decodeAlphanumericSegment(bits,result,count,fc1InEffect);break;case decoder_Mode.BYTE:DecodedBitStreamParser.decodeByteSegment(bits,result,count,currentCharacterSetECI,byteSegments,hints);break;case decoder_Mode.KANJI:DecodedBitStreamParser.decodeKanjiSegment(bits,result,count);break;default:throw new core_FormatException}}}while(mode!==decoder_Mode.TERMINATOR)}catch(iae){throw new core_FormatException}return new common_DecoderResult(bytes,result.toString(),0===byteSegments.length?null:byteSegments,null===ecLevel?null:ecLevel.toString(),symbolSequence,parityData)},DecodedBitStreamParser.decodeHanziSegment=function(bits,result,count){if(13*count>bits.available())throw new core_FormatException;for(var buffer=new Uint8Array(2*count),offset=0;count>0;){var twoBytes=bits.readBits(13),assembledTwoBytes=twoBytes/96<<8&4294967295|twoBytes%96;assembledTwoBytes+=assembledTwoBytes<959?41377:42657,buffer[offset]=assembledTwoBytes>>8&255,buffer[offset+1]=255&assembledTwoBytes,offset+=2,count--}try{result.append(util_StringEncoding.decode(buffer,common_StringUtils.GB2312))}catch(ignored){throw new core_FormatException(ignored)}},DecodedBitStreamParser.decodeKanjiSegment=function(bits,result,count){if(13*count>bits.available())throw new core_FormatException;for(var buffer=new Uint8Array(2*count),offset=0;count>0;){var twoBytes=bits.readBits(13),assembledTwoBytes=twoBytes/192<<8&4294967295|twoBytes%192;assembledTwoBytes+=assembledTwoBytes<7936?33088:49472,buffer[offset]=assembledTwoBytes>>8,buffer[offset+1]=assembledTwoBytes,offset+=2,count--}try{result.append(util_StringEncoding.decode(buffer,common_StringUtils.SHIFT_JIS))}catch(ignored){throw new core_FormatException(ignored)}},DecodedBitStreamParser.decodeByteSegment=function(bits,result,count,currentCharacterSetECI,byteSegments,hints){if(8*count>bits.available())throw new core_FormatException;for(var encoding,readBytes=new Uint8Array(count),i=0;i<count;i++)readBytes[i]=bits.readBits(8);encoding=null===currentCharacterSetECI?common_StringUtils.guessEncoding(readBytes,hints):currentCharacterSetECI.getName();try{result.append(util_StringEncoding.decode(readBytes,encoding))}catch(ignored){throw new core_FormatException(ignored)}byteSegments.push(readBytes)},DecodedBitStreamParser.toAlphaNumericChar=function(value){if(value>=DecodedBitStreamParser.ALPHANUMERIC_CHARS.length)throw new core_FormatException;return DecodedBitStreamParser.ALPHANUMERIC_CHARS[value]},DecodedBitStreamParser.decodeAlphanumericSegment=function(bits,result,count,fc1InEffect){for(var start=result.length();count>1;){if(bits.available()<11)throw new core_FormatException;var nextTwoCharsBits=bits.readBits(11);result.append(DecodedBitStreamParser.toAlphaNumericChar(Math.floor(nextTwoCharsBits/45))),result.append(DecodedBitStreamParser.toAlphaNumericChar(nextTwoCharsBits%45)),count-=2}if(1===count){if(bits.available()<6)throw new core_FormatException;result.append(DecodedBitStreamParser.toAlphaNumericChar(bits.readBits(6)))}if(fc1InEffect)for(var i=start;i<result.length();i++)"%"===result.charAt(i)&&(i<result.length()-1&&"%"===result.charAt(i+1)?result.deleteCharAt(i+1):result.setCharAt(i,String.fromCharCode(29)))},DecodedBitStreamParser.decodeNumericSegment=function(bits,result,count){for(;count>=3;){if(bits.available()<10)throw new core_FormatException;var threeDigitsBits=bits.readBits(10);if(threeDigitsBits>=1e3)throw new core_FormatException;result.append(DecodedBitStreamParser.toAlphaNumericChar(Math.floor(threeDigitsBits/100))),result.append(DecodedBitStreamParser.toAlphaNumericChar(Math.floor(threeDigitsBits/10)%10)),result.append(DecodedBitStreamParser.toAlphaNumericChar(threeDigitsBits%10)),count-=3}if(2===count){if(bits.available()<7)throw new core_FormatException;var twoDigitsBits=bits.readBits(7);if(twoDigitsBits>=100)throw new core_FormatException;result.append(DecodedBitStreamParser.toAlphaNumericChar(Math.floor(twoDigitsBits/10))),result.append(DecodedBitStreamParser.toAlphaNumericChar(twoDigitsBits%10))}else if(1===count){if(bits.available()<4)throw new core_FormatException;var digitBits=bits.readBits(4);if(digitBits>=10)throw new core_FormatException;result.append(DecodedBitStreamParser.toAlphaNumericChar(digitBits))}},DecodedBitStreamParser.parseECIValue=function(bits){var firstByte=bits.readBits(8);if(!(128&firstByte))return 127&firstByte;if(128==(192&firstByte))return(63&firstByte)<<8&4294967295|bits.readBits(8);if(192==(224&firstByte))return(31&firstByte)<<16&4294967295|bits.readBits(16);throw new core_FormatException},DecodedBitStreamParser.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",DecodedBitStreamParser.GB2312_SUBSET=1,DecodedBitStreamParser}();const qrcode_decoder_DecodedBitStreamParser=DecodedBitStreamParser_DecodedBitStreamParser;const decoder_QRCodeDecoderMetaData=function(){function QRCodeDecoderMetaData(mirrored){this.mirrored=mirrored}return QRCodeDecoderMetaData.prototype.isMirrored=function(){return this.mirrored},QRCodeDecoderMetaData.prototype.applyMirroredCorrection=function(points){if(this.mirrored&&null!==points&&!(points.length<3)){var bottomLeft=points[0];points[0]=points[2],points[2]=bottomLeft}},QRCodeDecoderMetaData}();var decoder_Decoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},decoder_Decoder_Decoder=function(){function Decoder(){this.rsDecoder=new reedsolomon_ReedSolomonDecoder(reedsolomon_GenericGF.QR_CODE_FIELD_256)}return Decoder.prototype.decodeBooleanArray=function(image,hints){return this.decodeBitMatrix(common_BitMatrix.parseFromBooleanArray(image),hints)},Decoder.prototype.decodeBitMatrix=function(bits,hints){var parser=new qrcode_decoder_BitMatrixParser(bits),ex=null;try{return this.decodeBitMatrixParser(parser,hints)}catch(e){ex=e}try{parser.remask(),parser.setMirror(!0),parser.readVersion(),parser.readFormatInformation(),parser.mirror();var result=this.decodeBitMatrixParser(parser,hints);return result.setOther(new decoder_QRCodeDecoderMetaData(!0)),result}catch(e){if(null!==ex)throw ex;throw e}},Decoder.prototype.decodeBitMatrixParser=function(parser,hints){var e_1,_a,e_2,_b,version=parser.readVersion(),ecLevel=parser.readFormatInformation().getErrorCorrectionLevel(),codewords=parser.readCodewords(),dataBlocks=qrcode_decoder_DataBlock.getDataBlocks(codewords,version,ecLevel),totalBytes=0;try{for(var dataBlocks_1=decoder_Decoder_values(dataBlocks),dataBlocks_1_1=dataBlocks_1.next();!dataBlocks_1_1.done;dataBlocks_1_1=dataBlocks_1.next()){totalBytes+=(dataBlock=dataBlocks_1_1.value).getNumDataCodewords()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{dataBlocks_1_1&&!dataBlocks_1_1.done&&(_a=dataBlocks_1.return)&&_a.call(dataBlocks_1)}finally{if(e_1)throw e_1.error}}var resultBytes=new Uint8Array(totalBytes),resultOffset=0;try{for(var dataBlocks_2=decoder_Decoder_values(dataBlocks),dataBlocks_2_1=dataBlocks_2.next();!dataBlocks_2_1.done;dataBlocks_2_1=dataBlocks_2.next()){var dataBlock,codewordBytes=(dataBlock=dataBlocks_2_1.value).getCodewords(),numDataCodewords=dataBlock.getNumDataCodewords();this.correctErrors(codewordBytes,numDataCodewords);for(var i=0;i<numDataCodewords;i++)resultBytes[resultOffset++]=codewordBytes[i]}}catch(e_2_1){e_2={error:e_2_1}}finally{try{dataBlocks_2_1&&!dataBlocks_2_1.done&&(_b=dataBlocks_2.return)&&_b.call(dataBlocks_2)}finally{if(e_2)throw e_2.error}}return qrcode_decoder_DecodedBitStreamParser.decode(resultBytes,version,ecLevel,hints)},Decoder.prototype.correctErrors=function(codewordBytes,numDataCodewords){var codewordsInts=new Int32Array(codewordBytes);try{this.rsDecoder.decode(codewordsInts,codewordBytes.length-numDataCodewords)}catch(ignored){throw new core_ChecksumException}for(var i=0;i<numDataCodewords;i++)codewordBytes[i]=codewordsInts[i]},Decoder}();const qrcode_decoder_Decoder=decoder_Decoder_Decoder;var AlignmentPattern_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const detector_AlignmentPattern=function(_super){function AlignmentPattern(posX,posY,estimatedModuleSize){var _this=_super.call(this,posX,posY)||this;return _this.estimatedModuleSize=estimatedModuleSize,_this}return AlignmentPattern_extends(AlignmentPattern,_super),AlignmentPattern.prototype.aboutEquals=function(moduleSize,i,j){if(Math.abs(i-this.getY())<=moduleSize&&Math.abs(j-this.getX())<=moduleSize){var moduleSizeDiff=Math.abs(moduleSize-this.estimatedModuleSize);return moduleSizeDiff<=1||moduleSizeDiff<=this.estimatedModuleSize}return!1},AlignmentPattern.prototype.combineEstimate=function(i,j,newModuleSize){return new AlignmentPattern((this.getX()+j)/2,(this.getY()+i)/2,(this.estimatedModuleSize+newModuleSize)/2)},AlignmentPattern}(core_ResultPoint);var AlignmentPatternFinder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},AlignmentPatternFinder=function(){function AlignmentPatternFinder(image,startX,startY,width,height,moduleSize,resultPointCallback){this.image=image,this.startX=startX,this.startY=startY,this.width=width,this.height=height,this.moduleSize=moduleSize,this.resultPointCallback=resultPointCallback,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return AlignmentPatternFinder.prototype.find=function(){for(var startX=this.startX,height=this.height,maxJ=startX+this.width,middleI=this.startY+height/2,stateCount=new Int32Array(3),image=this.image,iGen=0;iGen<height;iGen++){var i=middleI+(1&iGen?-Math.floor((iGen+1)/2):Math.floor((iGen+1)/2));stateCount[0]=0,stateCount[1]=0,stateCount[2]=0;for(var j=startX;j<maxJ&&!image.get(j,i);)j++;for(var currentState=0;j<maxJ;){if(image.get(j,i))if(1===currentState)stateCount[1]++;else if(2===currentState){var confirmed;if(this.foundPatternCross(stateCount))if(null!==(confirmed=this.handlePossibleCenter(stateCount,i,j)))return confirmed;stateCount[0]=stateCount[2],stateCount[1]=1,stateCount[2]=0,currentState=1}else stateCount[++currentState]++;else 1===currentState&&currentState++,stateCount[currentState]++;j++}if(this.foundPatternCross(stateCount))if(null!==(confirmed=this.handlePossibleCenter(stateCount,i,maxJ)))return confirmed}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new core_NotFoundException},AlignmentPatternFinder.centerFromEnd=function(stateCount,end){return end-stateCount[2]-stateCount[1]/2},AlignmentPatternFinder.prototype.foundPatternCross=function(stateCount){for(var moduleSize=this.moduleSize,maxVariance=moduleSize/2,i=0;i<3;i++)if(Math.abs(moduleSize-stateCount[i])>=maxVariance)return!1;return!0},AlignmentPatternFinder.prototype.crossCheckVertical=function(startI,centerJ,maxCount,originalStateCountTotal){var image=this.image,maxI=image.getHeight(),stateCount=this.crossCheckStateCount;stateCount[0]=0,stateCount[1]=0,stateCount[2]=0;for(var i=startI;i>=0&&image.get(centerJ,i)&&stateCount[1]<=maxCount;)stateCount[1]++,i--;if(i<0||stateCount[1]>maxCount)return NaN;for(;i>=0&&!image.get(centerJ,i)&&stateCount[0]<=maxCount;)stateCount[0]++,i--;if(stateCount[0]>maxCount)return NaN;for(i=startI+1;i<maxI&&image.get(centerJ,i)&&stateCount[1]<=maxCount;)stateCount[1]++,i++;if(i===maxI||stateCount[1]>maxCount)return NaN;for(;i<maxI&&!image.get(centerJ,i)&&stateCount[2]<=maxCount;)stateCount[2]++,i++;if(stateCount[2]>maxCount)return NaN;var stateCountTotal=stateCount[0]+stateCount[1]+stateCount[2];return 5*Math.abs(stateCountTotal-originalStateCountTotal)>=2*originalStateCountTotal?NaN:this.foundPatternCross(stateCount)?AlignmentPatternFinder.centerFromEnd(stateCount,i):NaN},AlignmentPatternFinder.prototype.handlePossibleCenter=function(stateCount,i,j){var e_1,_a,stateCountTotal=stateCount[0]+stateCount[1]+stateCount[2],centerJ=AlignmentPatternFinder.centerFromEnd(stateCount,j),centerI=this.crossCheckVertical(i,centerJ,2*stateCount[1],stateCountTotal);if(!isNaN(centerI)){var estimatedModuleSize=(stateCount[0]+stateCount[1]+stateCount[2])/3;try{for(var _b=AlignmentPatternFinder_values(this.possibleCenters),_c=_b.next();!_c.done;_c=_b.next()){var center=_c.value;if(center.aboutEquals(estimatedModuleSize,centerI,centerJ))return center.combineEstimate(centerI,centerJ,estimatedModuleSize)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}var point=new detector_AlignmentPattern(centerJ,centerI,estimatedModuleSize);this.possibleCenters.push(point),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(point)}return null},AlignmentPatternFinder}();const detector_AlignmentPatternFinder=AlignmentPatternFinder;var FinderPattern_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),FinderPattern_FinderPattern=function(_super){function FinderPattern(posX,posY,estimatedModuleSize,count){var _this=_super.call(this,posX,posY)||this;return _this.estimatedModuleSize=estimatedModuleSize,_this.count=count,void 0===count&&(_this.count=1),_this}return FinderPattern_extends(FinderPattern,_super),FinderPattern.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},FinderPattern.prototype.getCount=function(){return this.count},FinderPattern.prototype.aboutEquals=function(moduleSize,i,j){if(Math.abs(i-this.getY())<=moduleSize&&Math.abs(j-this.getX())<=moduleSize){var moduleSizeDiff=Math.abs(moduleSize-this.estimatedModuleSize);return moduleSizeDiff<=1||moduleSizeDiff<=this.estimatedModuleSize}return!1},FinderPattern.prototype.combineEstimate=function(i,j,newModuleSize){var combinedCount=this.count+1;return new FinderPattern((this.count*this.getX()+j)/combinedCount,(this.count*this.getY()+i)/combinedCount,(this.count*this.estimatedModuleSize+newModuleSize)/combinedCount,combinedCount)},FinderPattern}(core_ResultPoint);const detector_FinderPattern=FinderPattern_FinderPattern;const detector_FinderPatternInfo=function(){function FinderPatternInfo(patternCenters){this.bottomLeft=patternCenters[0],this.topLeft=patternCenters[1],this.topRight=patternCenters[2]}return FinderPatternInfo.prototype.getBottomLeft=function(){return this.bottomLeft},FinderPatternInfo.prototype.getTopLeft=function(){return this.topLeft},FinderPatternInfo.prototype.getTopRight=function(){return this.topRight},FinderPatternInfo}();var FinderPatternFinder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},FinderPatternFinder=function(){function FinderPatternFinder(image,resultPointCallback){this.image=image,this.resultPointCallback=resultPointCallback,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=resultPointCallback}return FinderPatternFinder.prototype.getImage=function(){return this.image},FinderPatternFinder.prototype.getPossibleCenters=function(){return this.possibleCenters},FinderPatternFinder.prototype.find=function(hints){var tryHarder=null!=hints&&void 0!==hints.get(core_DecodeHintType.TRY_HARDER),pureBarcode=null!=hints&&void 0!==hints.get(core_DecodeHintType.PURE_BARCODE),image=this.image,maxI=image.getHeight(),maxJ=image.getWidth(),iSkip=Math.floor(3*maxI/(4*FinderPatternFinder.MAX_MODULES));(iSkip<FinderPatternFinder.MIN_SKIP||tryHarder)&&(iSkip=FinderPatternFinder.MIN_SKIP);for(var done=!1,stateCount=new Int32Array(5),i=iSkip-1;i<maxI&&!done;i+=iSkip){stateCount[0]=0,stateCount[1]=0,stateCount[2]=0,stateCount[3]=0,stateCount[4]=0;for(var currentState=0,j=0;j<maxJ;j++)if(image.get(j,i))1&~currentState||currentState++,stateCount[currentState]++;else if(1&currentState)stateCount[currentState]++;else if(4===currentState)if(FinderPatternFinder.foundPatternCross(stateCount)){if(!0!==this.handlePossibleCenter(stateCount,i,j,pureBarcode)){stateCount[0]=stateCount[2],stateCount[1]=stateCount[3],stateCount[2]=stateCount[4],stateCount[3]=1,stateCount[4]=0,currentState=3;continue}if(iSkip=2,!0===this.hasSkipped)done=this.haveMultiplyConfirmedCenters();else{var rowSkip=this.findRowSkip();rowSkip>stateCount[2]&&(i+=rowSkip-stateCount[2]-iSkip,j=maxJ-1)}currentState=0,stateCount[0]=0,stateCount[1]=0,stateCount[2]=0,stateCount[3]=0,stateCount[4]=0}else stateCount[0]=stateCount[2],stateCount[1]=stateCount[3],stateCount[2]=stateCount[4],stateCount[3]=1,stateCount[4]=0,currentState=3;else stateCount[++currentState]++;if(FinderPatternFinder.foundPatternCross(stateCount))!0===this.handlePossibleCenter(stateCount,i,maxJ,pureBarcode)&&(iSkip=stateCount[0],this.hasSkipped&&(done=this.haveMultiplyConfirmedCenters()))}var patternInfo=this.selectBestPatterns();return core_ResultPoint.orderBestPatterns(patternInfo),new detector_FinderPatternInfo(patternInfo)},FinderPatternFinder.centerFromEnd=function(stateCount,end){return end-stateCount[4]-stateCount[3]-stateCount[2]/2},FinderPatternFinder.foundPatternCross=function(stateCount){for(var totalModuleSize=0,i=0;i<5;i++){var count=stateCount[i];if(0===count)return!1;totalModuleSize+=count}if(totalModuleSize<7)return!1;var moduleSize=totalModuleSize/7,maxVariance=moduleSize/2;return Math.abs(moduleSize-stateCount[0])<maxVariance&&Math.abs(moduleSize-stateCount[1])<maxVariance&&Math.abs(3*moduleSize-stateCount[2])<3*maxVariance&&Math.abs(moduleSize-stateCount[3])<maxVariance&&Math.abs(moduleSize-stateCount[4])<maxVariance},FinderPatternFinder.prototype.getCrossCheckStateCount=function(){var crossCheckStateCount=this.crossCheckStateCount;return crossCheckStateCount[0]=0,crossCheckStateCount[1]=0,crossCheckStateCount[2]=0,crossCheckStateCount[3]=0,crossCheckStateCount[4]=0,crossCheckStateCount},FinderPatternFinder.prototype.crossCheckDiagonal=function(startI,centerJ,maxCount,originalStateCountTotal){for(var stateCount=this.getCrossCheckStateCount(),i=0,image=this.image;startI>=i&&centerJ>=i&&image.get(centerJ-i,startI-i);)stateCount[2]++,i++;if(startI<i||centerJ<i)return!1;for(;startI>=i&&centerJ>=i&&!image.get(centerJ-i,startI-i)&&stateCount[1]<=maxCount;)stateCount[1]++,i++;if(startI<i||centerJ<i||stateCount[1]>maxCount)return!1;for(;startI>=i&&centerJ>=i&&image.get(centerJ-i,startI-i)&&stateCount[0]<=maxCount;)stateCount[0]++,i++;if(stateCount[0]>maxCount)return!1;var maxI=image.getHeight(),maxJ=image.getWidth();for(i=1;startI+i<maxI&&centerJ+i<maxJ&&image.get(centerJ+i,startI+i);)stateCount[2]++,i++;if(startI+i>=maxI||centerJ+i>=maxJ)return!1;for(;startI+i<maxI&&centerJ+i<maxJ&&!image.get(centerJ+i,startI+i)&&stateCount[3]<maxCount;)stateCount[3]++,i++;if(startI+i>=maxI||centerJ+i>=maxJ||stateCount[3]>=maxCount)return!1;for(;startI+i<maxI&&centerJ+i<maxJ&&image.get(centerJ+i,startI+i)&&stateCount[4]<maxCount;)stateCount[4]++,i++;if(stateCount[4]>=maxCount)return!1;var stateCountTotal=stateCount[0]+stateCount[1]+stateCount[2]+stateCount[3]+stateCount[4];return Math.abs(stateCountTotal-originalStateCountTotal)<2*originalStateCountTotal&&FinderPatternFinder.foundPatternCross(stateCount)},FinderPatternFinder.prototype.crossCheckVertical=function(startI,centerJ,maxCount,originalStateCountTotal){for(var image=this.image,maxI=image.getHeight(),stateCount=this.getCrossCheckStateCount(),i=startI;i>=0&&image.get(centerJ,i);)stateCount[2]++,i--;if(i<0)return NaN;for(;i>=0&&!image.get(centerJ,i)&&stateCount[1]<=maxCount;)stateCount[1]++,i--;if(i<0||stateCount[1]>maxCount)return NaN;for(;i>=0&&image.get(centerJ,i)&&stateCount[0]<=maxCount;)stateCount[0]++,i--;if(stateCount[0]>maxCount)return NaN;for(i=startI+1;i<maxI&&image.get(centerJ,i);)stateCount[2]++,i++;if(i===maxI)return NaN;for(;i<maxI&&!image.get(centerJ,i)&&stateCount[3]<maxCount;)stateCount[3]++,i++;if(i===maxI||stateCount[3]>=maxCount)return NaN;for(;i<maxI&&image.get(centerJ,i)&&stateCount[4]<maxCount;)stateCount[4]++,i++;if(stateCount[4]>=maxCount)return NaN;var stateCountTotal=stateCount[0]+stateCount[1]+stateCount[2]+stateCount[3]+stateCount[4];return 5*Math.abs(stateCountTotal-originalStateCountTotal)>=2*originalStateCountTotal?NaN:FinderPatternFinder.foundPatternCross(stateCount)?FinderPatternFinder.centerFromEnd(stateCount,i):NaN},FinderPatternFinder.prototype.crossCheckHorizontal=function(startJ,centerI,maxCount,originalStateCountTotal){for(var image=this.image,maxJ=image.getWidth(),stateCount=this.getCrossCheckStateCount(),j=startJ;j>=0&&image.get(j,centerI);)stateCount[2]++,j--;if(j<0)return NaN;for(;j>=0&&!image.get(j,centerI)&&stateCount[1]<=maxCount;)stateCount[1]++,j--;if(j<0||stateCount[1]>maxCount)return NaN;for(;j>=0&&image.get(j,centerI)&&stateCount[0]<=maxCount;)stateCount[0]++,j--;if(stateCount[0]>maxCount)return NaN;for(j=startJ+1;j<maxJ&&image.get(j,centerI);)stateCount[2]++,j++;if(j===maxJ)return NaN;for(;j<maxJ&&!image.get(j,centerI)&&stateCount[3]<maxCount;)stateCount[3]++,j++;if(j===maxJ||stateCount[3]>=maxCount)return NaN;for(;j<maxJ&&image.get(j,centerI)&&stateCount[4]<maxCount;)stateCount[4]++,j++;if(stateCount[4]>=maxCount)return NaN;var stateCountTotal=stateCount[0]+stateCount[1]+stateCount[2]+stateCount[3]+stateCount[4];return 5*Math.abs(stateCountTotal-originalStateCountTotal)>=originalStateCountTotal?NaN:FinderPatternFinder.foundPatternCross(stateCount)?FinderPatternFinder.centerFromEnd(stateCount,j):NaN},FinderPatternFinder.prototype.handlePossibleCenter=function(stateCount,i,j,pureBarcode){var stateCountTotal=stateCount[0]+stateCount[1]+stateCount[2]+stateCount[3]+stateCount[4],centerJ=FinderPatternFinder.centerFromEnd(stateCount,j),centerI=this.crossCheckVertical(i,Math.floor(centerJ),stateCount[2],stateCountTotal);if(!isNaN(centerI)&&(centerJ=this.crossCheckHorizontal(Math.floor(centerJ),Math.floor(centerI),stateCount[2],stateCountTotal),!isNaN(centerJ)&&(!pureBarcode||this.crossCheckDiagonal(Math.floor(centerI),Math.floor(centerJ),stateCount[2],stateCountTotal)))){for(var estimatedModuleSize=stateCountTotal/7,found=!1,possibleCenters=this.possibleCenters,index=0,length_1=possibleCenters.length;index<length_1;index++){var center=possibleCenters[index];if(center.aboutEquals(estimatedModuleSize,centerI,centerJ)){possibleCenters[index]=center.combineEstimate(centerI,centerJ,estimatedModuleSize),found=!0;break}}if(!found){var point=new detector_FinderPattern(centerJ,centerI,estimatedModuleSize);possibleCenters.push(point),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(point)}return!0}return!1},FinderPatternFinder.prototype.findRowSkip=function(){var e_1,_a;if(this.possibleCenters.length<=1)return 0;var firstConfirmedCenter=null;try{for(var _b=FinderPatternFinder_values(this.possibleCenters),_c=_b.next();!_c.done;_c=_b.next()){var center=_c.value;if(center.getCount()>=FinderPatternFinder.CENTER_QUORUM){if(null!=firstConfirmedCenter)return this.hasSkipped=!0,Math.floor((Math.abs(firstConfirmedCenter.getX()-center.getX())-Math.abs(firstConfirmedCenter.getY()-center.getY()))/2);firstConfirmedCenter=center}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return 0},FinderPatternFinder.prototype.haveMultiplyConfirmedCenters=function(){var e_2,_a,e_3,_b,confirmedCount=0,totalModuleSize=0,max=this.possibleCenters.length;try{for(var _c=FinderPatternFinder_values(this.possibleCenters),_d=_c.next();!_d.done;_d=_c.next()){(pattern=_d.value).getCount()>=FinderPatternFinder.CENTER_QUORUM&&(confirmedCount++,totalModuleSize+=pattern.getEstimatedModuleSize())}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_2)throw e_2.error}}if(confirmedCount<3)return!1;var average=totalModuleSize/max,totalDeviation=0;try{for(var _e=FinderPatternFinder_values(this.possibleCenters),_f=_e.next();!_f.done;_f=_e.next()){var pattern=_f.value;totalDeviation+=Math.abs(pattern.getEstimatedModuleSize()-average)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_3)throw e_3.error}}return totalDeviation<=.05*totalModuleSize},FinderPatternFinder.prototype.selectBestPatterns=function(){var e_4,_a,e_5,_b,startSize=this.possibleCenters.length;if(startSize<3)throw new core_NotFoundException;var average,possibleCenters=this.possibleCenters;if(startSize>3){var totalModuleSize=0,square=0;try{for(var _c=FinderPatternFinder_values(this.possibleCenters),_d=_c.next();!_d.done;_d=_c.next()){var size=_d.value.getEstimatedModuleSize();totalModuleSize+=size,square+=size*size}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_4)throw e_4.error}}average=totalModuleSize/startSize;var stdDev=Math.sqrt(square/startSize-average*average);possibleCenters.sort(function(center1,center2){var dA=Math.abs(center2.getEstimatedModuleSize()-average),dB=Math.abs(center1.getEstimatedModuleSize()-average);return dA<dB?-1:dA>dB?1:0});for(var limit=Math.max(.2*average,stdDev),i=0;i<possibleCenters.length&&possibleCenters.length>3;i++){var pattern=possibleCenters[i];Math.abs(pattern.getEstimatedModuleSize()-average)>limit&&(possibleCenters.splice(i,1),i--)}}if(possibleCenters.length>3){totalModuleSize=0;try{for(var possibleCenters_1=FinderPatternFinder_values(possibleCenters),possibleCenters_1_1=possibleCenters_1.next();!possibleCenters_1_1.done;possibleCenters_1_1=possibleCenters_1.next()){totalModuleSize+=possibleCenters_1_1.value.getEstimatedModuleSize()}}catch(e_5_1){e_5={error:e_5_1}}finally{try{possibleCenters_1_1&&!possibleCenters_1_1.done&&(_b=possibleCenters_1.return)&&_b.call(possibleCenters_1)}finally{if(e_5)throw e_5.error}}average=totalModuleSize/possibleCenters.length,possibleCenters.sort(function(center1,center2){if(center2.getCount()===center1.getCount()){var dA=Math.abs(center2.getEstimatedModuleSize()-average),dB=Math.abs(center1.getEstimatedModuleSize()-average);return dA<dB?1:dA>dB?-1:0}return center2.getCount()-center1.getCount()}),possibleCenters.splice(3)}return[possibleCenters[0],possibleCenters[1],possibleCenters[2]]},FinderPatternFinder.CENTER_QUORUM=2,FinderPatternFinder.MIN_SKIP=3,FinderPatternFinder.MAX_MODULES=57,FinderPatternFinder}();const detector_FinderPatternFinder=FinderPatternFinder;var detector_Detector_Detector=function(){function Detector(image){this.image=image}return Detector.prototype.getImage=function(){return this.image},Detector.prototype.getResultPointCallback=function(){return this.resultPointCallback},Detector.prototype.detect=function(hints){this.resultPointCallback=null==hints?null:hints.get(core_DecodeHintType.NEED_RESULT_POINT_CALLBACK);var info=new detector_FinderPatternFinder(this.image,this.resultPointCallback).find(hints);return this.processFinderPatternInfo(info)},Detector.prototype.processFinderPatternInfo=function(info){var topLeft=info.getTopLeft(),topRight=info.getTopRight(),bottomLeft=info.getBottomLeft(),moduleSize=this.calculateModuleSize(topLeft,topRight,bottomLeft);if(moduleSize<1)throw new core_NotFoundException("No pattern found in proccess finder.");var dimension=Detector.computeDimension(topLeft,topRight,bottomLeft,moduleSize),provisionalVersion=qrcode_decoder_Version.getProvisionalVersionForDimension(dimension),modulesBetweenFPCenters=provisionalVersion.getDimensionForVersion()-7,alignmentPattern=null;if(provisionalVersion.getAlignmentPatternCenters().length>0)for(var bottomRightX=topRight.getX()-topLeft.getX()+bottomLeft.getX(),bottomRightY=topRight.getY()-topLeft.getY()+bottomLeft.getY(),correctionToTopLeft=1-3/modulesBetweenFPCenters,estAlignmentX=Math.floor(topLeft.getX()+correctionToTopLeft*(bottomRightX-topLeft.getX())),estAlignmentY=Math.floor(topLeft.getY()+correctionToTopLeft*(bottomRightY-topLeft.getY())),i=4;i<=16;i<<=1)try{alignmentPattern=this.findAlignmentInRegion(moduleSize,estAlignmentX,estAlignmentY,i);break}catch(re){if(!(re instanceof core_NotFoundException))throw re}var transform=Detector.createTransform(topLeft,topRight,bottomLeft,alignmentPattern,dimension),bits=Detector.sampleGrid(this.image,transform,dimension);return new common_DetectorResult(bits,null===alignmentPattern?[bottomLeft,topLeft,topRight]:[bottomLeft,topLeft,topRight,alignmentPattern])},Detector.createTransform=function(topLeft,topRight,bottomLeft,alignmentPattern,dimension){var bottomRightX,bottomRightY,sourceBottomRightX,sourceBottomRightY,dimMinusThree=dimension-3.5;return null!==alignmentPattern?(bottomRightX=alignmentPattern.getX(),bottomRightY=alignmentPattern.getY(),sourceBottomRightY=sourceBottomRightX=dimMinusThree-3):(bottomRightX=topRight.getX()-topLeft.getX()+bottomLeft.getX(),bottomRightY=topRight.getY()-topLeft.getY()+bottomLeft.getY(),sourceBottomRightX=dimMinusThree,sourceBottomRightY=dimMinusThree),common_PerspectiveTransform.quadrilateralToQuadrilateral(3.5,3.5,dimMinusThree,3.5,sourceBottomRightX,sourceBottomRightY,3.5,dimMinusThree,topLeft.getX(),topLeft.getY(),topRight.getX(),topRight.getY(),bottomRightX,bottomRightY,bottomLeft.getX(),bottomLeft.getY())},Detector.sampleGrid=function(image,transform,dimension){return common_GridSamplerInstance.getInstance().sampleGridWithTransform(image,dimension,dimension,transform)},Detector.computeDimension=function(topLeft,topRight,bottomLeft,moduleSize){var tltrCentersDimension=detector_MathUtils.round(core_ResultPoint.distance(topLeft,topRight)/moduleSize),tlblCentersDimension=detector_MathUtils.round(core_ResultPoint.distance(topLeft,bottomLeft)/moduleSize),dimension=Math.floor((tltrCentersDimension+tlblCentersDimension)/2)+7;switch(3&dimension){case 0:dimension++;break;case 2:dimension--;break;case 3:throw new core_NotFoundException("Dimensions could be not found.")}return dimension},Detector.prototype.calculateModuleSize=function(topLeft,topRight,bottomLeft){return(this.calculateModuleSizeOneWay(topLeft,topRight)+this.calculateModuleSizeOneWay(topLeft,bottomLeft))/2},Detector.prototype.calculateModuleSizeOneWay=function(pattern,otherPattern){var moduleSizeEst1=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(pattern.getX()),Math.floor(pattern.getY()),Math.floor(otherPattern.getX()),Math.floor(otherPattern.getY())),moduleSizeEst2=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(otherPattern.getX()),Math.floor(otherPattern.getY()),Math.floor(pattern.getX()),Math.floor(pattern.getY()));return isNaN(moduleSizeEst1)?moduleSizeEst2/7:isNaN(moduleSizeEst2)?moduleSizeEst1/7:(moduleSizeEst1+moduleSizeEst2)/14},Detector.prototype.sizeOfBlackWhiteBlackRunBothWays=function(fromX,fromY,toX,toY){var result=this.sizeOfBlackWhiteBlackRun(fromX,fromY,toX,toY),scale=1,otherToX=fromX-(toX-fromX);otherToX<0?(scale=fromX/(fromX-otherToX),otherToX=0):otherToX>=this.image.getWidth()&&(scale=(this.image.getWidth()-1-fromX)/(otherToX-fromX),otherToX=this.image.getWidth()-1);var otherToY=Math.floor(fromY-(toY-fromY)*scale);return scale=1,otherToY<0?(scale=fromY/(fromY-otherToY),otherToY=0):otherToY>=this.image.getHeight()&&(scale=(this.image.getHeight()-1-fromY)/(otherToY-fromY),otherToY=this.image.getHeight()-1),otherToX=Math.floor(fromX+(otherToX-fromX)*scale),(result+=this.sizeOfBlackWhiteBlackRun(fromX,fromY,otherToX,otherToY))-1},Detector.prototype.sizeOfBlackWhiteBlackRun=function(fromX,fromY,toX,toY){var steep=Math.abs(toY-fromY)>Math.abs(toX-fromX);if(steep){var temp=fromX;fromX=fromY,fromY=temp,temp=toX,toX=toY,toY=temp}for(var dx=Math.abs(toX-fromX),dy=Math.abs(toY-fromY),error=-dx/2,xstep=fromX<toX?1:-1,ystep=fromY<toY?1:-1,state=0,xLimit=toX+xstep,x=fromX,y=fromY;x!==xLimit;x+=xstep){var realX=steep?y:x,realY=steep?x:y;if(1===state===this.image.get(realX,realY)){if(2===state)return detector_MathUtils.distance(x,y,fromX,fromY);state++}if((error+=dy)>0){if(y===toY)break;y+=ystep,error-=dx}}return 2===state?detector_MathUtils.distance(toX+xstep,toY,fromX,fromY):NaN},Detector.prototype.findAlignmentInRegion=function(overallEstModuleSize,estAlignmentX,estAlignmentY,allowanceFactor){var allowance=Math.floor(allowanceFactor*overallEstModuleSize),alignmentAreaLeftX=Math.max(0,estAlignmentX-allowance),alignmentAreaRightX=Math.min(this.image.getWidth()-1,estAlignmentX+allowance);if(alignmentAreaRightX-alignmentAreaLeftX<3*overallEstModuleSize)throw new core_NotFoundException("Alignment top exceeds estimated module size.");var alignmentAreaTopY=Math.max(0,estAlignmentY-allowance),alignmentAreaBottomY=Math.min(this.image.getHeight()-1,estAlignmentY+allowance);if(alignmentAreaBottomY-alignmentAreaTopY<3*overallEstModuleSize)throw new core_NotFoundException("Alignment bottom exceeds estimated module size.");return new detector_AlignmentPatternFinder(this.image,alignmentAreaLeftX,alignmentAreaTopY,alignmentAreaRightX-alignmentAreaLeftX,alignmentAreaBottomY-alignmentAreaTopY,overallEstModuleSize,this.resultPointCallback).find()},Detector}();const qrcode_detector_Detector=detector_Detector_Detector;const qrcode_QRCodeReader=function(){function QRCodeReader(){this.decoder=new qrcode_decoder_Decoder}return QRCodeReader.prototype.getDecoder=function(){return this.decoder},QRCodeReader.prototype.decode=function(image,hints){var decoderResult,points;if(null!=hints&&void 0!==hints.get(core_DecodeHintType.PURE_BARCODE)){var bits=QRCodeReader.extractPureBits(image.getBlackMatrix());decoderResult=this.decoder.decodeBitMatrix(bits,hints),points=QRCodeReader.NO_POINTS}else{var detectorResult=new qrcode_detector_Detector(image.getBlackMatrix()).detect(hints);decoderResult=this.decoder.decodeBitMatrix(detectorResult.getBits(),hints),points=detectorResult.getPoints()}decoderResult.getOther()instanceof decoder_QRCodeDecoderMetaData&&decoderResult.getOther().applyMirroredCorrection(points);var result=new core_Result(decoderResult.getText(),decoderResult.getRawBytes(),void 0,points,core_BarcodeFormat.QR_CODE,void 0),byteSegments=decoderResult.getByteSegments();null!==byteSegments&&result.putMetadata(core_ResultMetadataType.BYTE_SEGMENTS,byteSegments);var ecLevel=decoderResult.getECLevel();return null!==ecLevel&&result.putMetadata(core_ResultMetadataType.ERROR_CORRECTION_LEVEL,ecLevel),decoderResult.hasStructuredAppend()&&(result.putMetadata(core_ResultMetadataType.STRUCTURED_APPEND_SEQUENCE,decoderResult.getStructuredAppendSequenceNumber()),result.putMetadata(core_ResultMetadataType.STRUCTURED_APPEND_PARITY,decoderResult.getStructuredAppendParity())),result},QRCodeReader.prototype.reset=function(){},QRCodeReader.extractPureBits=function(image){var leftTopBlack=image.getTopLeftOnBit(),rightBottomBlack=image.getBottomRightOnBit();if(null===leftTopBlack||null===rightBottomBlack)throw new core_NotFoundException;var moduleSize=this.moduleSize(leftTopBlack,image),top=leftTopBlack[1],bottom=rightBottomBlack[1],left=leftTopBlack[0],right=rightBottomBlack[0];if(left>=right||top>=bottom)throw new core_NotFoundException;if(bottom-top!==right-left&&(right=left+(bottom-top))>=image.getWidth())throw new core_NotFoundException;var matrixWidth=Math.round((right-left+1)/moduleSize),matrixHeight=Math.round((bottom-top+1)/moduleSize);if(matrixWidth<=0||matrixHeight<=0)throw new core_NotFoundException;if(matrixHeight!==matrixWidth)throw new core_NotFoundException;var nudge=Math.floor(moduleSize/2);top+=nudge;var nudgedTooFarRight=(left+=nudge)+Math.floor((matrixWidth-1)*moduleSize)-right;if(nudgedTooFarRight>0){if(nudgedTooFarRight>nudge)throw new core_NotFoundException;left-=nudgedTooFarRight}var nudgedTooFarDown=top+Math.floor((matrixHeight-1)*moduleSize)-bottom;if(nudgedTooFarDown>0){if(nudgedTooFarDown>nudge)throw new core_NotFoundException;top-=nudgedTooFarDown}for(var bits=new common_BitMatrix(matrixWidth,matrixHeight),y=0;y<matrixHeight;y++)for(var iOffset=top+Math.floor(y*moduleSize),x=0;x<matrixWidth;x++)image.get(left+Math.floor(x*moduleSize),iOffset)&&bits.set(x,y);return bits},QRCodeReader.moduleSize=function(leftTopBlack,image){for(var height=image.getHeight(),width=image.getWidth(),x=leftTopBlack[0],y=leftTopBlack[1],inBlack=!0,transitions=0;x<width&&y<height;){if(inBlack!==image.get(x,y)){if(5===++transitions)break;inBlack=!inBlack}x++,y++}if(x===width||y===height)throw new core_NotFoundException;return(x-leftTopBlack[0])/7},QRCodeReader.NO_POINTS=new Array,QRCodeReader}();var PDF417Common_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},PDF417Common=function(){function PDF417Common(){}return PDF417Common.prototype.PDF417Common=function(){},PDF417Common.getBitCountSum=function(moduleBitCount){return detector_MathUtils.sum(moduleBitCount)},PDF417Common.toIntArray=function(list){var e_1,_a;if(null==list||!list.length)return PDF417Common.EMPTY_INT_ARRAY;var result=new Int32Array(list.length),i=0;try{for(var list_1=PDF417Common_values(list),list_1_1=list_1.next();!list_1_1.done;list_1_1=list_1.next()){var integer=list_1_1.value;result[i++]=integer}}catch(e_1_1){e_1={error:e_1_1}}finally{try{list_1_1&&!list_1_1.done&&(_a=list_1.return)&&_a.call(list_1)}finally{if(e_1)throw e_1.error}}return result},PDF417Common.getCodeword=function(symbol){var i=util_Arrays.binarySearch(PDF417Common.SYMBOL_TABLE,262143&symbol);return i<0?-1:(PDF417Common.CODEWORD_TABLE[i]-1)%PDF417Common.NUMBER_OF_CODEWORDS},PDF417Common.NUMBER_OF_CODEWORDS=929,PDF417Common.MAX_CODEWORDS_IN_BARCODE=PDF417Common.NUMBER_OF_CODEWORDS-1,PDF417Common.MIN_ROWS_IN_BARCODE=3,PDF417Common.MAX_ROWS_IN_BARCODE=90,PDF417Common.MODULES_IN_CODEWORD=17,PDF417Common.MODULES_IN_STOP_PATTERN=18,PDF417Common.BARS_IN_MODULE=8,PDF417Common.EMPTY_INT_ARRAY=new Int32Array([]),PDF417Common.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),PDF417Common.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),PDF417Common}();const pdf417_PDF417Common=PDF417Common;const detector_PDF417DetectorResult=function(){function PDF417DetectorResult(bits,points){this.bits=bits,this.points=points}return PDF417DetectorResult.prototype.getBits=function(){return this.bits},PDF417DetectorResult.prototype.getPoints=function(){return this.points},PDF417DetectorResult}();var Detector_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},pdf417_detector_Detector_Detector=function(){function Detector(){}return Detector.detectMultiple=function(image,hints,multiple){var bitMatrix=image.getBlackMatrix(),barcodeCoordinates=Detector.detect(multiple,bitMatrix);return barcodeCoordinates.length||((bitMatrix=bitMatrix.clone()).rotate180(),barcodeCoordinates=Detector.detect(multiple,bitMatrix)),new detector_PDF417DetectorResult(bitMatrix,barcodeCoordinates)},Detector.detect=function(multiple,bitMatrix){for(var e_1,_a,barcodeCoordinates=new Array,row=0,column=0,foundBarcodeInRow=!1;row<bitMatrix.getHeight();){var vertices=Detector.findVertices(bitMatrix,row,column);if(null!=vertices[0]||null!=vertices[3]){if(foundBarcodeInRow=!0,barcodeCoordinates.push(vertices),!multiple)break;null!=vertices[2]?(column=Math.trunc(vertices[2].getX()),row=Math.trunc(vertices[2].getY())):(column=Math.trunc(vertices[4].getX()),row=Math.trunc(vertices[4].getY()))}else{if(!foundBarcodeInRow)break;foundBarcodeInRow=!1,column=0;try{for(var barcodeCoordinates_1=(e_1=void 0,Detector_values(barcodeCoordinates)),barcodeCoordinates_1_1=barcodeCoordinates_1.next();!barcodeCoordinates_1_1.done;barcodeCoordinates_1_1=barcodeCoordinates_1.next()){var barcodeCoordinate=barcodeCoordinates_1_1.value;null!=barcodeCoordinate[1]&&(row=Math.trunc(Math.max(row,barcodeCoordinate[1].getY()))),null!=barcodeCoordinate[3]&&(row=Math.max(row,Math.trunc(barcodeCoordinate[3].getY())))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{barcodeCoordinates_1_1&&!barcodeCoordinates_1_1.done&&(_a=barcodeCoordinates_1.return)&&_a.call(barcodeCoordinates_1)}finally{if(e_1)throw e_1.error}}row+=Detector.ROW_STEP}}return barcodeCoordinates},Detector.findVertices=function(matrix,startRow,startColumn){var height=matrix.getHeight(),width=matrix.getWidth(),result=new Array(8);return Detector.copyToResult(result,Detector.findRowsWithPattern(matrix,height,width,startRow,startColumn,Detector.START_PATTERN),Detector.INDEXES_START_PATTERN),null!=result[4]&&(startColumn=Math.trunc(result[4].getX()),startRow=Math.trunc(result[4].getY())),Detector.copyToResult(result,Detector.findRowsWithPattern(matrix,height,width,startRow,startColumn,Detector.STOP_PATTERN),Detector.INDEXES_STOP_PATTERN),result},Detector.copyToResult=function(result,tmpResult,destinationIndexes){for(var i=0;i<destinationIndexes.length;i++)result[destinationIndexes[i]]=tmpResult[i]},Detector.findRowsWithPattern=function(matrix,height,width,startRow,startColumn,pattern){for(var result=new Array(4),found=!1,counters=new Int32Array(pattern.length);startRow<height;startRow+=Detector.ROW_STEP){if(null!=(loc=Detector.findGuardPattern(matrix,startColumn,startRow,width,!1,pattern,counters))){for(;startRow>0;){if(null==(previousRowLoc=Detector.findGuardPattern(matrix,startColumn,--startRow,width,!1,pattern,counters))){startRow++;break}loc=previousRowLoc}result[0]=new core_ResultPoint(loc[0],startRow),result[1]=new core_ResultPoint(loc[1],startRow),found=!0;break}}var stopRow=startRow+1;if(found){for(var skippedRowCount=0,previousRowLoc=Int32Array.from([Math.trunc(result[0].getX()),Math.trunc(result[1].getX())]);stopRow<height;stopRow++){var loc;if(null!=(loc=Detector.findGuardPattern(matrix,previousRowLoc[0],stopRow,width,!1,pattern,counters))&&Math.abs(previousRowLoc[0]-loc[0])<Detector.MAX_PATTERN_DRIFT&&Math.abs(previousRowLoc[1]-loc[1])<Detector.MAX_PATTERN_DRIFT)previousRowLoc=loc,skippedRowCount=0;else{if(skippedRowCount>Detector.SKIPPED_ROW_COUNT_MAX)break;skippedRowCount++}}stopRow-=skippedRowCount+1,result[2]=new core_ResultPoint(previousRowLoc[0],stopRow),result[3]=new core_ResultPoint(previousRowLoc[1],stopRow)}return stopRow-startRow<Detector.BARCODE_MIN_HEIGHT&&util_Arrays.fill(result,null),result},Detector.findGuardPattern=function(matrix,column,row,width,whiteFirst,pattern,counters){util_Arrays.fillWithin(counters,0,counters.length,0);for(var patternStart=column,pixelDrift=0;matrix.get(patternStart,row)&&patternStart>0&&pixelDrift++<Detector.MAX_PIXEL_DRIFT;)patternStart--;for(var x=patternStart,counterPosition=0,patternLength=pattern.length,isWhite=whiteFirst;x<width;x++){if(matrix.get(x,row)!==isWhite)counters[counterPosition]++;else{if(counterPosition===patternLength-1){if(Detector.patternMatchVariance(counters,pattern,Detector.MAX_INDIVIDUAL_VARIANCE)<Detector.MAX_AVG_VARIANCE)return new Int32Array([patternStart,x]);patternStart+=counters[0]+counters[1],util_System.arraycopy(counters,2,counters,0,counterPosition-1),counters[counterPosition-1]=0,counters[counterPosition]=0,counterPosition--}else counterPosition++;counters[counterPosition]=1,isWhite=!isWhite}}return counterPosition===patternLength-1&&Detector.patternMatchVariance(counters,pattern,Detector.MAX_INDIVIDUAL_VARIANCE)<Detector.MAX_AVG_VARIANCE?new Int32Array([patternStart,x-1]):null},Detector.patternMatchVariance=function(counters,pattern,maxIndividualVariance){for(var numCounters=counters.length,total=0,patternLength=0,i=0;i<numCounters;i++)total+=counters[i],patternLength+=pattern[i];if(total<patternLength)return 1/0;var unitBarWidth=total/patternLength;maxIndividualVariance*=unitBarWidth;for(var totalVariance=0,x=0;x<numCounters;x++){var counter=counters[x],scaledPattern=pattern[x]*unitBarWidth,variance=counter>scaledPattern?counter-scaledPattern:scaledPattern-counter;if(variance>maxIndividualVariance)return 1/0;totalVariance+=variance}return totalVariance/total},Detector.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Detector.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Detector.MAX_AVG_VARIANCE=.42,Detector.MAX_INDIVIDUAL_VARIANCE=.8,Detector.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Detector.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Detector.MAX_PIXEL_DRIFT=3,Detector.MAX_PATTERN_DRIFT=5,Detector.SKIPPED_ROW_COUNT_MAX=25,Detector.ROW_STEP=5,Detector.BARCODE_MIN_HEIGHT=10,Detector}();const pdf417_detector_Detector=pdf417_detector_Detector_Detector;var ModulusPoly_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ModulusPoly=function(){function ModulusPoly(field,coefficients){if(0===coefficients.length)throw new core_IllegalArgumentException;this.field=field;var coefficientsLength=coefficients.length;if(coefficientsLength>1&&0===coefficients[0]){for(var firstNonZero=1;firstNonZero<coefficientsLength&&0===coefficients[firstNonZero];)firstNonZero++;firstNonZero===coefficientsLength?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(coefficientsLength-firstNonZero),util_System.arraycopy(coefficients,firstNonZero,this.coefficients,0,this.coefficients.length))}else this.coefficients=coefficients}return ModulusPoly.prototype.getCoefficients=function(){return this.coefficients},ModulusPoly.prototype.getDegree=function(){return this.coefficients.length-1},ModulusPoly.prototype.isZero=function(){return 0===this.coefficients[0]},ModulusPoly.prototype.getCoefficient=function(degree){return this.coefficients[this.coefficients.length-1-degree]},ModulusPoly.prototype.evaluateAt=function(a){var e_1,_a;if(0===a)return this.getCoefficient(0);if(1===a){var sum=0;try{for(var _b=ModulusPoly_values(this.coefficients),_c=_b.next();!_c.done;_c=_b.next()){var coefficient=_c.value;sum=this.field.add(sum,coefficient)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return sum}for(var result=this.coefficients[0],size=this.coefficients.length,i=1;i<size;i++)result=this.field.add(this.field.multiply(a,result),this.coefficients[i]);return result},ModulusPoly.prototype.add=function(other){if(!this.field.equals(other.field))throw new core_IllegalArgumentException("ModulusPolys do not have same ModulusGF field");if(this.isZero())return other;if(other.isZero())return this;var smallerCoefficients=this.coefficients,largerCoefficients=other.coefficients;if(smallerCoefficients.length>largerCoefficients.length){var temp=smallerCoefficients;smallerCoefficients=largerCoefficients,largerCoefficients=temp}var sumDiff=new Int32Array(largerCoefficients.length),lengthDiff=largerCoefficients.length-smallerCoefficients.length;util_System.arraycopy(largerCoefficients,0,sumDiff,0,lengthDiff);for(var i=lengthDiff;i<largerCoefficients.length;i++)sumDiff[i]=this.field.add(smallerCoefficients[i-lengthDiff],largerCoefficients[i]);return new ModulusPoly(this.field,sumDiff)},ModulusPoly.prototype.subtract=function(other){if(!this.field.equals(other.field))throw new core_IllegalArgumentException("ModulusPolys do not have same ModulusGF field");return other.isZero()?this:this.add(other.negative())},ModulusPoly.prototype.multiply=function(other){return other instanceof ModulusPoly?this.multiplyOther(other):this.multiplyScalar(other)},ModulusPoly.prototype.multiplyOther=function(other){if(!this.field.equals(other.field))throw new core_IllegalArgumentException("ModulusPolys do not have same ModulusGF field");if(this.isZero()||other.isZero())return new ModulusPoly(this.field,new Int32Array([0]));for(var aCoefficients=this.coefficients,aLength=aCoefficients.length,bCoefficients=other.coefficients,bLength=bCoefficients.length,product=new Int32Array(aLength+bLength-1),i=0;i<aLength;i++)for(var aCoeff=aCoefficients[i],j=0;j<bLength;j++)product[i+j]=this.field.add(product[i+j],this.field.multiply(aCoeff,bCoefficients[j]));return new ModulusPoly(this.field,product)},ModulusPoly.prototype.negative=function(){for(var size=this.coefficients.length,negativeCoefficients=new Int32Array(size),i=0;i<size;i++)negativeCoefficients[i]=this.field.subtract(0,this.coefficients[i]);return new ModulusPoly(this.field,negativeCoefficients)},ModulusPoly.prototype.multiplyScalar=function(scalar){if(0===scalar)return new ModulusPoly(this.field,new Int32Array([0]));if(1===scalar)return this;for(var size=this.coefficients.length,product=new Int32Array(size),i=0;i<size;i++)product[i]=this.field.multiply(this.coefficients[i],scalar);return new ModulusPoly(this.field,product)},ModulusPoly.prototype.multiplyByMonomial=function(degree,coefficient){if(degree<0)throw new core_IllegalArgumentException;if(0===coefficient)return new ModulusPoly(this.field,new Int32Array([0]));for(var size=this.coefficients.length,product=new Int32Array(size+degree),i=0;i<size;i++)product[i]=this.field.multiply(this.coefficients[i],coefficient);return new ModulusPoly(this.field,product)},ModulusPoly.prototype.toString=function(){for(var result=new util_StringBuilder,degree=this.getDegree();degree>=0;degree--){var coefficient=this.getCoefficient(degree);0!==coefficient&&(coefficient<0?(result.append(" - "),coefficient=-coefficient):result.length()>0&&result.append(" + "),0!==degree&&1===coefficient||result.append(coefficient),0!==degree&&(1===degree?result.append("x"):(result.append("x^"),result.append(degree))))}return result.toString()},ModulusPoly}();const ec_ModulusPoly=ModulusPoly;const ec_ModulusBase=function(){function ModulusBase(){}return ModulusBase.prototype.add=function(a,b){return(a+b)%this.modulus},ModulusBase.prototype.subtract=function(a,b){return(this.modulus+a-b)%this.modulus},ModulusBase.prototype.exp=function(a){return this.expTable[a]},ModulusBase.prototype.log=function(a){if(0===a)throw new core_IllegalArgumentException;return this.logTable[a]},ModulusBase.prototype.inverse=function(a){if(0===a)throw new core_ArithmeticException;return this.expTable[this.modulus-this.logTable[a]-1]},ModulusBase.prototype.multiply=function(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.modulus-1)]},ModulusBase.prototype.getSize=function(){return this.modulus},ModulusBase.prototype.equals=function(o){return o===this},ModulusBase}();var ModulusGF_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const ec_ModulusGF=function(_super){function ModulusGF(modulus,generator){var _this=_super.call(this)||this;_this.modulus=modulus,_this.expTable=new Int32Array(modulus),_this.logTable=new Int32Array(modulus);for(var x=1,i=0;i<modulus;i++)_this.expTable[i]=x,x=x*generator%modulus;for(i=0;i<modulus-1;i++)_this.logTable[_this.expTable[i]]=i;return _this.zero=new ec_ModulusPoly(_this,new Int32Array([0])),_this.one=new ec_ModulusPoly(_this,new Int32Array([1])),_this}return ModulusGF_extends(ModulusGF,_super),ModulusGF.prototype.getZero=function(){return this.zero},ModulusGF.prototype.getOne=function(){return this.one},ModulusGF.prototype.buildMonomial=function(degree,coefficient){if(degree<0)throw new core_IllegalArgumentException;if(0===coefficient)return this.zero;var coefficients=new Int32Array(degree+1);return coefficients[0]=coefficient,new ec_ModulusPoly(this,coefficients)},ModulusGF.PDF417_GF=new ModulusGF(pdf417_PDF417Common.NUMBER_OF_CODEWORDS,3),ModulusGF}(ec_ModulusBase);var ErrorCorrection_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ErrorCorrection=function(){function ErrorCorrection(){this.field=ec_ModulusGF.PDF417_GF}return ErrorCorrection.prototype.decode=function(received,numECCodewords,erasures){for(var e_1,_a,poly=new ec_ModulusPoly(this.field,received),S=new Int32Array(numECCodewords),error=!1,i=numECCodewords;i>0;i--){var evaluation=poly.evaluateAt(this.field.exp(i));S[numECCodewords-i]=evaluation,0!==evaluation&&(error=!0)}if(!error)return 0;var knownErrors=this.field.getOne();if(null!=erasures)try{for(var erasures_1=ErrorCorrection_values(erasures),erasures_1_1=erasures_1.next();!erasures_1_1.done;erasures_1_1=erasures_1.next()){var erasure=erasures_1_1.value,b=this.field.exp(received.length-1-erasure),term=new ec_ModulusPoly(this.field,new Int32Array([this.field.subtract(0,b),1]));knownErrors=knownErrors.multiply(term)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{erasures_1_1&&!erasures_1_1.done&&(_a=erasures_1.return)&&_a.call(erasures_1)}finally{if(e_1)throw e_1.error}}var syndrome=new ec_ModulusPoly(this.field,S),sigmaOmega=this.runEuclideanAlgorithm(this.field.buildMonomial(numECCodewords,1),syndrome,numECCodewords),sigma=sigmaOmega[0],omega=sigmaOmega[1],errorLocations=this.findErrorLocations(sigma),errorMagnitudes=this.findErrorMagnitudes(omega,sigma,errorLocations);for(i=0;i<errorLocations.length;i++){var position=received.length-1-this.field.log(errorLocations[i]);if(position<0)throw core_ChecksumException.getChecksumInstance();received[position]=this.field.subtract(received[position],errorMagnitudes[i])}return errorLocations.length},ErrorCorrection.prototype.runEuclideanAlgorithm=function(a,b,R){if(a.getDegree()<b.getDegree()){var temp=a;a=b,b=temp}for(var rLast=a,r=b,tLast=this.field.getZero(),t=this.field.getOne();r.getDegree()>=Math.round(R/2);){var rLastLast=rLast,tLastLast=tLast;if(tLast=t,(rLast=r).isZero())throw core_ChecksumException.getChecksumInstance();r=rLastLast;for(var q=this.field.getZero(),denominatorLeadingTerm=rLast.getCoefficient(rLast.getDegree()),dltInverse=this.field.inverse(denominatorLeadingTerm);r.getDegree()>=rLast.getDegree()&&!r.isZero();){var degreeDiff=r.getDegree()-rLast.getDegree(),scale=this.field.multiply(r.getCoefficient(r.getDegree()),dltInverse);q=q.add(this.field.buildMonomial(degreeDiff,scale)),r=r.subtract(rLast.multiplyByMonomial(degreeDiff,scale))}t=q.multiply(tLast).subtract(tLastLast).negative()}var sigmaTildeAtZero=t.getCoefficient(0);if(0===sigmaTildeAtZero)throw core_ChecksumException.getChecksumInstance();var inverse=this.field.inverse(sigmaTildeAtZero);return[t.multiply(inverse),r.multiply(inverse)]},ErrorCorrection.prototype.findErrorLocations=function(errorLocator){for(var numErrors=errorLocator.getDegree(),result=new Int32Array(numErrors),e=0,i=1;i<this.field.getSize()&&e<numErrors;i++)0===errorLocator.evaluateAt(i)&&(result[e]=this.field.inverse(i),e++);if(e!==numErrors)throw core_ChecksumException.getChecksumInstance();return result},ErrorCorrection.prototype.findErrorMagnitudes=function(errorEvaluator,errorLocator,errorLocations){for(var errorLocatorDegree=errorLocator.getDegree(),formalDerivativeCoefficients=new Int32Array(errorLocatorDegree),i=1;i<=errorLocatorDegree;i++)formalDerivativeCoefficients[errorLocatorDegree-i]=this.field.multiply(i,errorLocator.getCoefficient(i));var formalDerivative=new ec_ModulusPoly(this.field,formalDerivativeCoefficients),s=errorLocations.length,result=new Int32Array(s);for(i=0;i<s;i++){var xiInverse=this.field.inverse(errorLocations[i]),numerator=this.field.subtract(0,errorEvaluator.evaluateAt(xiInverse)),denominator=this.field.inverse(formalDerivative.evaluateAt(xiInverse));result[i]=this.field.multiply(numerator,denominator)}return result},ErrorCorrection}();const ec_ErrorCorrection=ErrorCorrection;const decoder_BoundingBox=function(){function BoundingBox(image,topLeft,bottomLeft,topRight,bottomRight){image instanceof BoundingBox?this.constructor_2(image):this.constructor_1(image,topLeft,bottomLeft,topRight,bottomRight)}return BoundingBox.prototype.constructor_1=function(image,topLeft,bottomLeft,topRight,bottomRight){var leftUnspecified=null==topLeft||null==bottomLeft,rightUnspecified=null==topRight||null==bottomRight;if(leftUnspecified&&rightUnspecified)throw new core_NotFoundException;leftUnspecified?(topLeft=new core_ResultPoint(0,topRight.getY()),bottomLeft=new core_ResultPoint(0,bottomRight.getY())):rightUnspecified&&(topRight=new core_ResultPoint(image.getWidth()-1,topLeft.getY()),bottomRight=new core_ResultPoint(image.getWidth()-1,bottomLeft.getY())),this.image=image,this.topLeft=topLeft,this.bottomLeft=bottomLeft,this.topRight=topRight,this.bottomRight=bottomRight,this.minX=Math.trunc(Math.min(topLeft.getX(),bottomLeft.getX())),this.maxX=Math.trunc(Math.max(topRight.getX(),bottomRight.getX())),this.minY=Math.trunc(Math.min(topLeft.getY(),topRight.getY())),this.maxY=Math.trunc(Math.max(bottomLeft.getY(),bottomRight.getY()))},BoundingBox.prototype.constructor_2=function(boundingBox){this.image=boundingBox.image,this.topLeft=boundingBox.getTopLeft(),this.bottomLeft=boundingBox.getBottomLeft(),this.topRight=boundingBox.getTopRight(),this.bottomRight=boundingBox.getBottomRight(),this.minX=boundingBox.getMinX(),this.maxX=boundingBox.getMaxX(),this.minY=boundingBox.getMinY(),this.maxY=boundingBox.getMaxY()},BoundingBox.merge=function(leftBox,rightBox){return null==leftBox?rightBox:null==rightBox?leftBox:new BoundingBox(leftBox.image,leftBox.topLeft,leftBox.bottomLeft,rightBox.topRight,rightBox.bottomRight)},BoundingBox.prototype.addMissingRows=function(missingStartRows,missingEndRows,isLeft){var newTopLeft=this.topLeft,newBottomLeft=this.bottomLeft,newTopRight=this.topRight,newBottomRight=this.bottomRight;if(missingStartRows>0){var top_1=isLeft?this.topLeft:this.topRight,newMinY=Math.trunc(top_1.getY()-missingStartRows);newMinY<0&&(newMinY=0);var newTop=new core_ResultPoint(top_1.getX(),newMinY);isLeft?newTopLeft=newTop:newTopRight=newTop}if(missingEndRows>0){var bottom=isLeft?this.bottomLeft:this.bottomRight,newMaxY=Math.trunc(bottom.getY()+missingEndRows);newMaxY>=this.image.getHeight()&&(newMaxY=this.image.getHeight()-1);var newBottom=new core_ResultPoint(bottom.getX(),newMaxY);isLeft?newBottomLeft=newBottom:newBottomRight=newBottom}return new BoundingBox(this.image,newTopLeft,newBottomLeft,newTopRight,newBottomRight)},BoundingBox.prototype.getMinX=function(){return this.minX},BoundingBox.prototype.getMaxX=function(){return this.maxX},BoundingBox.prototype.getMinY=function(){return this.minY},BoundingBox.prototype.getMaxY=function(){return this.maxY},BoundingBox.prototype.getTopLeft=function(){return this.topLeft},BoundingBox.prototype.getTopRight=function(){return this.topRight},BoundingBox.prototype.getBottomLeft=function(){return this.bottomLeft},BoundingBox.prototype.getBottomRight=function(){return this.bottomRight},BoundingBox}();const decoder_BarcodeMetadata=function(){function BarcodeMetadata(columnCount,rowCountUpperPart,rowCountLowerPart,errorCorrectionLevel){this.columnCount=columnCount,this.errorCorrectionLevel=errorCorrectionLevel,this.rowCountUpperPart=rowCountUpperPart,this.rowCountLowerPart=rowCountLowerPart,this.rowCount=rowCountUpperPart+rowCountLowerPart}return BarcodeMetadata.prototype.getColumnCount=function(){return this.columnCount},BarcodeMetadata.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},BarcodeMetadata.prototype.getRowCount=function(){return this.rowCount},BarcodeMetadata.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},BarcodeMetadata.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},BarcodeMetadata}();const util_Formatter=function(){function Formatter(){this.buffer=""}return Formatter.form=function(str,arr){var i=-1;return str.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function callback(exp,p0,p1,p2,p3,p4){if("%%"===exp)return"%";if(void 0!==arr[++i]){exp=p2?parseInt(p2.substr(1)):void 0;var val,base=p3?parseInt(p3.substr(1)):void 0;switch(p4){case"s":val=arr[i];break;case"c":val=arr[i][0];break;case"f":val=parseFloat(arr[i]).toFixed(exp);break;case"p":val=parseFloat(arr[i]).toPrecision(exp);break;case"e":val=parseFloat(arr[i]).toExponential(exp);break;case"x":val=parseInt(arr[i]).toString(base||16);break;case"d":val=parseFloat(parseInt(arr[i],base||10).toPrecision(exp)).toFixed(0)}val="object"==typeof val?JSON.stringify(val):(+val).toString(base);for(var size=parseInt(p1),ch=p1&&p1[0]+""=="0"?"0":" ";val.length<size;)val=void 0!==p0?val+ch:ch+val;return val}})},Formatter.prototype.format=function(append){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this.buffer+=Formatter.form(append,args)},Formatter.prototype.toString=function(){return this.buffer},Formatter}();var DetectionResultColumn_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},DetectionResultColumn=function(){function DetectionResultColumn(boundingBox){this.boundingBox=new decoder_BoundingBox(boundingBox),this.codewords=new Array(boundingBox.getMaxY()-boundingBox.getMinY()+1)}return DetectionResultColumn.prototype.getCodewordNearby=function(imageRow){var codeword=this.getCodeword(imageRow);if(null!=codeword)return codeword;for(var i=1;i<DetectionResultColumn.MAX_NEARBY_DISTANCE;i++){var nearImageRow=this.imageRowToCodewordIndex(imageRow)-i;if(nearImageRow>=0&&null!=(codeword=this.codewords[nearImageRow]))return codeword;if((nearImageRow=this.imageRowToCodewordIndex(imageRow)+i)<this.codewords.length&&null!=(codeword=this.codewords[nearImageRow]))return codeword}return null},DetectionResultColumn.prototype.imageRowToCodewordIndex=function(imageRow){return imageRow-this.boundingBox.getMinY()},DetectionResultColumn.prototype.setCodeword=function(imageRow,codeword){this.codewords[this.imageRowToCodewordIndex(imageRow)]=codeword},DetectionResultColumn.prototype.getCodeword=function(imageRow){return this.codewords[this.imageRowToCodewordIndex(imageRow)]},DetectionResultColumn.prototype.getBoundingBox=function(){return this.boundingBox},DetectionResultColumn.prototype.getCodewords=function(){return this.codewords},DetectionResultColumn.prototype.toString=function(){var e_1,_a,formatter=new util_Formatter,row=0;try{for(var _b=DetectionResultColumn_values(this.codewords),_c=_b.next();!_c.done;_c=_b.next()){var codeword=_c.value;null!=codeword?formatter.format("%3d: %3d|%3d%n",row++,codeword.getRowNumber(),codeword.getValue()):formatter.format("%3d:    |   %n",row++)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return formatter.toString()},DetectionResultColumn.MAX_NEARBY_DISTANCE=5,DetectionResultColumn}();const decoder_DetectionResultColumn=DetectionResultColumn;var BarcodeValue_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},BarcodeValue=function(){function BarcodeValue(){this.values=new Map}return BarcodeValue.prototype.setValue=function(value){value=Math.trunc(value);var confidence=this.values.get(value);null==confidence&&(confidence=0),confidence++,this.values.set(value,confidence)},BarcodeValue.prototype.getValue=function(){var e_1,_a,maxConfidence=-1,result=new Array,_loop_1=function(key,value){var entry_getKey=function(){return key},entry_getValue=function(){return value};entry_getValue()>maxConfidence?(maxConfidence=entry_getValue(),(result=[]).push(entry_getKey())):entry_getValue()===maxConfidence&&result.push(entry_getKey())};try{for(var _b=BarcodeValue_values(this.values.entries()),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2);_loop_1(_d[0],_d[1])}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return pdf417_PDF417Common.toIntArray(result)},BarcodeValue.prototype.getConfidence=function(value){return this.values.get(value)},BarcodeValue}();const decoder_BarcodeValue=BarcodeValue;var DetectionResultRowIndicatorColumn_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DetectionResultRowIndicatorColumn_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},DetectionResultRowIndicatorColumn=function(_super){function DetectionResultRowIndicatorColumn(boundingBox,isLeft){var _this=_super.call(this,boundingBox)||this;return _this._isLeft=isLeft,_this}return DetectionResultRowIndicatorColumn_extends(DetectionResultRowIndicatorColumn,_super),DetectionResultRowIndicatorColumn.prototype.setRowNumbers=function(){var e_1,_a;try{for(var _b=DetectionResultRowIndicatorColumn_values(this.getCodewords()),_c=_b.next();!_c.done;_c=_b.next()){var codeword=_c.value;null!=codeword&&codeword.setRowNumberAsRowIndicatorColumn()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},DetectionResultRowIndicatorColumn.prototype.adjustCompleteIndicatorColumnRowNumbers=function(barcodeMetadata){var codewords=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(codewords,barcodeMetadata);for(var boundingBox=this.getBoundingBox(),top=this._isLeft?boundingBox.getTopLeft():boundingBox.getTopRight(),bottom=this._isLeft?boundingBox.getBottomLeft():boundingBox.getBottomRight(),firstRow=this.imageRowToCodewordIndex(Math.trunc(top.getY())),lastRow=this.imageRowToCodewordIndex(Math.trunc(bottom.getY())),barcodeRow=-1,maxRowHeight=1,currentRowHeight=0,codewordsRow=firstRow;codewordsRow<lastRow;codewordsRow++)if(null!=codewords[codewordsRow]){var codeword=codewords[codewordsRow],rowDifference=codeword.getRowNumber()-barcodeRow;if(0===rowDifference)currentRowHeight++;else if(1===rowDifference)maxRowHeight=Math.max(maxRowHeight,currentRowHeight),currentRowHeight=1,barcodeRow=codeword.getRowNumber();else if(rowDifference<0||codeword.getRowNumber()>=barcodeMetadata.getRowCount()||rowDifference>codewordsRow)codewords[codewordsRow]=null;else{for(var checkedRows=void 0,closePreviousCodewordFound=(checkedRows=maxRowHeight>2?(maxRowHeight-2)*rowDifference:rowDifference)>=codewordsRow,i=1;i<=checkedRows&&!closePreviousCodewordFound;i++)closePreviousCodewordFound=null!=codewords[codewordsRow-i];closePreviousCodewordFound?codewords[codewordsRow]=null:(barcodeRow=codeword.getRowNumber(),currentRowHeight=1)}}},DetectionResultRowIndicatorColumn.prototype.getRowHeights=function(){var e_2,_a,barcodeMetadata=this.getBarcodeMetadata();if(null==barcodeMetadata)return null;this.adjustIncompleteIndicatorColumnRowNumbers(barcodeMetadata);var result=new Int32Array(barcodeMetadata.getRowCount());try{for(var _b=DetectionResultRowIndicatorColumn_values(this.getCodewords()),_c=_b.next();!_c.done;_c=_b.next()){var codeword=_c.value;if(null!=codeword){var rowNumber=codeword.getRowNumber();if(rowNumber>=result.length)continue;result[rowNumber]++}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return result},DetectionResultRowIndicatorColumn.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(barcodeMetadata){for(var boundingBox=this.getBoundingBox(),top=this._isLeft?boundingBox.getTopLeft():boundingBox.getTopRight(),bottom=this._isLeft?boundingBox.getBottomLeft():boundingBox.getBottomRight(),firstRow=this.imageRowToCodewordIndex(Math.trunc(top.getY())),lastRow=this.imageRowToCodewordIndex(Math.trunc(bottom.getY())),codewords=this.getCodewords(),barcodeRow=-1,maxRowHeight=1,currentRowHeight=0,codewordsRow=firstRow;codewordsRow<lastRow;codewordsRow++)if(null!=codewords[codewordsRow]){var codeword=codewords[codewordsRow];codeword.setRowNumberAsRowIndicatorColumn();var rowDifference=codeword.getRowNumber()-barcodeRow;0===rowDifference?currentRowHeight++:1===rowDifference?(maxRowHeight=Math.max(maxRowHeight,currentRowHeight),currentRowHeight=1,barcodeRow=codeword.getRowNumber()):codeword.getRowNumber()>=barcodeMetadata.getRowCount()?codewords[codewordsRow]=null:(barcodeRow=codeword.getRowNumber(),currentRowHeight=1)}},DetectionResultRowIndicatorColumn.prototype.getBarcodeMetadata=function(){var e_3,_a,codewords=this.getCodewords(),barcodeColumnCount=new decoder_BarcodeValue,barcodeRowCountUpperPart=new decoder_BarcodeValue,barcodeRowCountLowerPart=new decoder_BarcodeValue,barcodeECLevel=new decoder_BarcodeValue;try{for(var codewords_1=DetectionResultRowIndicatorColumn_values(codewords),codewords_1_1=codewords_1.next();!codewords_1_1.done;codewords_1_1=codewords_1.next()){var codeword=codewords_1_1.value;if(null!=codeword){codeword.setRowNumberAsRowIndicatorColumn();var rowIndicatorValue=codeword.getValue()%30,codewordRowNumber=codeword.getRowNumber();switch(this._isLeft||(codewordRowNumber+=2),codewordRowNumber%3){case 0:barcodeRowCountUpperPart.setValue(3*rowIndicatorValue+1);break;case 1:barcodeECLevel.setValue(rowIndicatorValue/3),barcodeRowCountLowerPart.setValue(rowIndicatorValue%3);break;case 2:barcodeColumnCount.setValue(rowIndicatorValue+1)}}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{codewords_1_1&&!codewords_1_1.done&&(_a=codewords_1.return)&&_a.call(codewords_1)}finally{if(e_3)throw e_3.error}}if(0===barcodeColumnCount.getValue().length||0===barcodeRowCountUpperPart.getValue().length||0===barcodeRowCountLowerPart.getValue().length||0===barcodeECLevel.getValue().length||barcodeColumnCount.getValue()[0]<1||barcodeRowCountUpperPart.getValue()[0]+barcodeRowCountLowerPart.getValue()[0]<pdf417_PDF417Common.MIN_ROWS_IN_BARCODE||barcodeRowCountUpperPart.getValue()[0]+barcodeRowCountLowerPart.getValue()[0]>pdf417_PDF417Common.MAX_ROWS_IN_BARCODE)return null;var barcodeMetadata=new decoder_BarcodeMetadata(barcodeColumnCount.getValue()[0],barcodeRowCountUpperPart.getValue()[0],barcodeRowCountLowerPart.getValue()[0],barcodeECLevel.getValue()[0]);return this.removeIncorrectCodewords(codewords,barcodeMetadata),barcodeMetadata},DetectionResultRowIndicatorColumn.prototype.removeIncorrectCodewords=function(codewords,barcodeMetadata){for(var codewordRow=0;codewordRow<codewords.length;codewordRow++){var codeword=codewords[codewordRow];if(null!=codewords[codewordRow]){var rowIndicatorValue=codeword.getValue()%30,codewordRowNumber=codeword.getRowNumber();if(codewordRowNumber>barcodeMetadata.getRowCount())codewords[codewordRow]=null;else switch(this._isLeft||(codewordRowNumber+=2),codewordRowNumber%3){case 0:3*rowIndicatorValue+1!==barcodeMetadata.getRowCountUpperPart()&&(codewords[codewordRow]=null);break;case 1:Math.trunc(rowIndicatorValue/3)===barcodeMetadata.getErrorCorrectionLevel()&&rowIndicatorValue%3===barcodeMetadata.getRowCountLowerPart()||(codewords[codewordRow]=null);break;case 2:rowIndicatorValue+1!==barcodeMetadata.getColumnCount()&&(codewords[codewordRow]=null)}}}},DetectionResultRowIndicatorColumn.prototype.isLeft=function(){return this._isLeft},DetectionResultRowIndicatorColumn.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+_super.prototype.toString.call(this)},DetectionResultRowIndicatorColumn}(decoder_DetectionResultColumn);const decoder_DetectionResultRowIndicatorColumn=DetectionResultRowIndicatorColumn;var DetectionResult_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},DetectionResult=function(){function DetectionResult(barcodeMetadata,boundingBox){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=barcodeMetadata,this.barcodeColumnCount=barcodeMetadata.getColumnCount(),this.boundingBox=boundingBox,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return DetectionResult.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var previousUnadjustedCount,unadjustedCodewordCount=pdf417_PDF417Common.MAX_CODEWORDS_IN_BARCODE;do{previousUnadjustedCount=unadjustedCodewordCount,unadjustedCodewordCount=this.adjustRowNumbersAndGetCount()}while(unadjustedCodewordCount>0&&unadjustedCodewordCount<previousUnadjustedCount);return this.detectionResultColumns},DetectionResult.prototype.adjustIndicatorColumnRowNumbers=function(detectionResultColumn){null!=detectionResultColumn&&detectionResultColumn.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},DetectionResult.prototype.adjustRowNumbersAndGetCount=function(){var unadjustedCount=this.adjustRowNumbersByRow();if(0===unadjustedCount)return 0;for(var barcodeColumn=1;barcodeColumn<this.barcodeColumnCount+1;barcodeColumn++)for(var codewords=this.detectionResultColumns[barcodeColumn].getCodewords(),codewordsRow=0;codewordsRow<codewords.length;codewordsRow++)null!=codewords[codewordsRow]&&(codewords[codewordsRow].hasValidRowNumber()||this.adjustRowNumbers(barcodeColumn,codewordsRow,codewords));return unadjustedCount},DetectionResult.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},DetectionResult.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var LRIcodewords=this.detectionResultColumns[0].getCodewords(),RRIcodewords=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),codewordsRow=0;codewordsRow<LRIcodewords.length;codewordsRow++)if(null!=LRIcodewords[codewordsRow]&&null!=RRIcodewords[codewordsRow]&&LRIcodewords[codewordsRow].getRowNumber()===RRIcodewords[codewordsRow].getRowNumber())for(var barcodeColumn=1;barcodeColumn<=this.barcodeColumnCount;barcodeColumn++){var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null!=codeword&&(codeword.setRowNumber(LRIcodewords[codewordsRow].getRowNumber()),codeword.hasValidRowNumber()||(this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow]=null))}},DetectionResult.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var unadjustedCount=0,codewords=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),codewordsRow=0;codewordsRow<codewords.length;codewordsRow++)if(null!=codewords[codewordsRow])for(var rowIndicatorRowNumber=codewords[codewordsRow].getRowNumber(),invalidRowCounts=0,barcodeColumn=this.barcodeColumnCount+1;barcodeColumn>0&&invalidRowCounts<this.ADJUST_ROW_NUMBER_SKIP;barcodeColumn--){var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null!=codeword&&(invalidRowCounts=DetectionResult.adjustRowNumberIfValid(rowIndicatorRowNumber,invalidRowCounts,codeword),codeword.hasValidRowNumber()||unadjustedCount++)}return unadjustedCount},DetectionResult.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var unadjustedCount=0,codewords=this.detectionResultColumns[0].getCodewords(),codewordsRow=0;codewordsRow<codewords.length;codewordsRow++)if(null!=codewords[codewordsRow])for(var rowIndicatorRowNumber=codewords[codewordsRow].getRowNumber(),invalidRowCounts=0,barcodeColumn=1;barcodeColumn<this.barcodeColumnCount+1&&invalidRowCounts<this.ADJUST_ROW_NUMBER_SKIP;barcodeColumn++){var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null!=codeword&&(invalidRowCounts=DetectionResult.adjustRowNumberIfValid(rowIndicatorRowNumber,invalidRowCounts,codeword),codeword.hasValidRowNumber()||unadjustedCount++)}return unadjustedCount},DetectionResult.adjustRowNumberIfValid=function(rowIndicatorRowNumber,invalidRowCounts,codeword){return null==codeword||codeword.hasValidRowNumber()||(codeword.isValidRowNumber(rowIndicatorRowNumber)?(codeword.setRowNumber(rowIndicatorRowNumber),invalidRowCounts=0):++invalidRowCounts),invalidRowCounts},DetectionResult.prototype.adjustRowNumbers=function(barcodeColumn,codewordsRow,codewords){var e_1,_a;if(null!=this.detectionResultColumns[barcodeColumn-1]){var codeword=codewords[codewordsRow],previousColumnCodewords=this.detectionResultColumns[barcodeColumn-1].getCodewords(),nextColumnCodewords=previousColumnCodewords;null!=this.detectionResultColumns[barcodeColumn+1]&&(nextColumnCodewords=this.detectionResultColumns[barcodeColumn+1].getCodewords());var otherCodewords=new Array(14);otherCodewords[2]=previousColumnCodewords[codewordsRow],otherCodewords[3]=nextColumnCodewords[codewordsRow],codewordsRow>0&&(otherCodewords[0]=codewords[codewordsRow-1],otherCodewords[4]=previousColumnCodewords[codewordsRow-1],otherCodewords[5]=nextColumnCodewords[codewordsRow-1]),codewordsRow>1&&(otherCodewords[8]=codewords[codewordsRow-2],otherCodewords[10]=previousColumnCodewords[codewordsRow-2],otherCodewords[11]=nextColumnCodewords[codewordsRow-2]),codewordsRow<codewords.length-1&&(otherCodewords[1]=codewords[codewordsRow+1],otherCodewords[6]=previousColumnCodewords[codewordsRow+1],otherCodewords[7]=nextColumnCodewords[codewordsRow+1]),codewordsRow<codewords.length-2&&(otherCodewords[9]=codewords[codewordsRow+2],otherCodewords[12]=previousColumnCodewords[codewordsRow+2],otherCodewords[13]=nextColumnCodewords[codewordsRow+2]);try{for(var otherCodewords_1=DetectionResult_values(otherCodewords),otherCodewords_1_1=otherCodewords_1.next();!otherCodewords_1_1.done;otherCodewords_1_1=otherCodewords_1.next()){var otherCodeword=otherCodewords_1_1.value;if(DetectionResult.adjustRowNumber(codeword,otherCodeword))return}}catch(e_1_1){e_1={error:e_1_1}}finally{try{otherCodewords_1_1&&!otherCodewords_1_1.done&&(_a=otherCodewords_1.return)&&_a.call(otherCodewords_1)}finally{if(e_1)throw e_1.error}}}},DetectionResult.adjustRowNumber=function(codeword,otherCodeword){return null!=otherCodeword&&(!(!otherCodeword.hasValidRowNumber()||otherCodeword.getBucket()!==codeword.getBucket())&&(codeword.setRowNumber(otherCodeword.getRowNumber()),!0))},DetectionResult.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},DetectionResult.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},DetectionResult.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},DetectionResult.prototype.setBoundingBox=function(boundingBox){this.boundingBox=boundingBox},DetectionResult.prototype.getBoundingBox=function(){return this.boundingBox},DetectionResult.prototype.setDetectionResultColumn=function(barcodeColumn,detectionResultColumn){this.detectionResultColumns[barcodeColumn]=detectionResultColumn},DetectionResult.prototype.getDetectionResultColumn=function(barcodeColumn){return this.detectionResultColumns[barcodeColumn]},DetectionResult.prototype.toString=function(){var rowIndicatorColumn=this.detectionResultColumns[0];null==rowIndicatorColumn&&(rowIndicatorColumn=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var formatter=new util_Formatter,codewordsRow=0;codewordsRow<rowIndicatorColumn.getCodewords().length;codewordsRow++){formatter.format("CW %3d:",codewordsRow);for(var barcodeColumn=0;barcodeColumn<this.barcodeColumnCount+2;barcodeColumn++)if(null!=this.detectionResultColumns[barcodeColumn]){var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null!=codeword?formatter.format(" %3d|%3d",codeword.getRowNumber(),codeword.getValue()):formatter.format("    |   ")}else formatter.format("    |   ");formatter.format("%n")}return formatter.toString()},DetectionResult}();const decoder_DetectionResult=DetectionResult;const decoder_Codeword=function(){function Codeword(startX,endX,bucket,value){this.rowNumber=Codeword.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(startX),this.endX=Math.trunc(endX),this.bucket=Math.trunc(bucket),this.value=Math.trunc(value)}return Codeword.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},Codeword.prototype.isValidRowNumber=function(rowNumber){return rowNumber!==Codeword.BARCODE_ROW_UNKNOWN&&this.bucket===rowNumber%3*3},Codeword.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},Codeword.prototype.getWidth=function(){return this.endX-this.startX},Codeword.prototype.getStartX=function(){return this.startX},Codeword.prototype.getEndX=function(){return this.endX},Codeword.prototype.getBucket=function(){return this.bucket},Codeword.prototype.getValue=function(){return this.value},Codeword.prototype.getRowNumber=function(){return this.rowNumber},Codeword.prototype.setRowNumber=function(rowNumber){this.rowNumber=rowNumber},Codeword.prototype.toString=function(){return this.rowNumber+"|"+this.value},Codeword.BARCODE_ROW_UNKNOWN=-1,Codeword}();const decoder_PDF417CodewordDecoder=function(){function PDF417CodewordDecoder(){}return PDF417CodewordDecoder.initialize=function(){for(var i=0;i<pdf417_PDF417Common.SYMBOL_TABLE.length;i++)for(var currentSymbol=pdf417_PDF417Common.SYMBOL_TABLE[i],currentBit=1&currentSymbol,j=0;j<pdf417_PDF417Common.BARS_IN_MODULE;j++){for(var size=0;(1&currentSymbol)===currentBit;)size+=1,currentSymbol>>=1;currentBit=1&currentSymbol,PDF417CodewordDecoder.RATIOS_TABLE[i]||(PDF417CodewordDecoder.RATIOS_TABLE[i]=new Array(pdf417_PDF417Common.BARS_IN_MODULE)),PDF417CodewordDecoder.RATIOS_TABLE[i][pdf417_PDF417Common.BARS_IN_MODULE-j-1]=Math.fround(size/pdf417_PDF417Common.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},PDF417CodewordDecoder.getDecodedValue=function(moduleBitCount){var decodedValue=PDF417CodewordDecoder.getDecodedCodewordValue(PDF417CodewordDecoder.sampleBitCounts(moduleBitCount));return-1!==decodedValue?decodedValue:PDF417CodewordDecoder.getClosestDecodedValue(moduleBitCount)},PDF417CodewordDecoder.sampleBitCounts=function(moduleBitCount){for(var bitCountSum=detector_MathUtils.sum(moduleBitCount),result=new Int32Array(pdf417_PDF417Common.BARS_IN_MODULE),bitCountIndex=0,sumPreviousBits=0,i=0;i<pdf417_PDF417Common.MODULES_IN_CODEWORD;i++){var sampleIndex=bitCountSum/(2*pdf417_PDF417Common.MODULES_IN_CODEWORD)+i*bitCountSum/pdf417_PDF417Common.MODULES_IN_CODEWORD;sumPreviousBits+moduleBitCount[bitCountIndex]<=sampleIndex&&(sumPreviousBits+=moduleBitCount[bitCountIndex],bitCountIndex++),result[bitCountIndex]++}return result},PDF417CodewordDecoder.getDecodedCodewordValue=function(moduleBitCount){var decodedValue=PDF417CodewordDecoder.getBitValue(moduleBitCount);return-1===pdf417_PDF417Common.getCodeword(decodedValue)?-1:decodedValue},PDF417CodewordDecoder.getBitValue=function(moduleBitCount){for(var result=0,i=0;i<moduleBitCount.length;i++)for(var bit=0;bit<moduleBitCount[i];bit++)result=result<<1|(i%2==0?1:0);return Math.trunc(result)},PDF417CodewordDecoder.getClosestDecodedValue=function(moduleBitCount){var bitCountSum=detector_MathUtils.sum(moduleBitCount),bitCountRatios=new Array(pdf417_PDF417Common.BARS_IN_MODULE);if(bitCountSum>1)for(var i=0;i<bitCountRatios.length;i++)bitCountRatios[i]=Math.fround(moduleBitCount[i]/bitCountSum);var bestMatchError=util_Float.MAX_VALUE,bestMatch=-1;this.bSymbolTableReady||PDF417CodewordDecoder.initialize();for(var j=0;j<PDF417CodewordDecoder.RATIOS_TABLE.length;j++){for(var error=0,ratioTableRow=PDF417CodewordDecoder.RATIOS_TABLE[j],k=0;k<pdf417_PDF417Common.BARS_IN_MODULE;k++){var diff=Math.fround(ratioTableRow[k]-bitCountRatios[k]);if((error+=Math.fround(diff*diff))>=bestMatchError)break}error<bestMatchError&&(bestMatchError=error,bestMatch=pdf417_PDF417Common.SYMBOL_TABLE[j])}return bestMatch},PDF417CodewordDecoder.bSymbolTableReady=!1,PDF417CodewordDecoder.RATIOS_TABLE=new Array(pdf417_PDF417Common.SYMBOL_TABLE.length).map(function(x){return new Array(pdf417_PDF417Common.BARS_IN_MODULE)}),PDF417CodewordDecoder}();const pdf417_PDF417ResultMetadata=function(){function PDF417ResultMetadata(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return PDF417ResultMetadata.prototype.getSegmentIndex=function(){return this.segmentIndex},PDF417ResultMetadata.prototype.setSegmentIndex=function(segmentIndex){this.segmentIndex=segmentIndex},PDF417ResultMetadata.prototype.getFileId=function(){return this.fileId},PDF417ResultMetadata.prototype.setFileId=function(fileId){this.fileId=fileId},PDF417ResultMetadata.prototype.getOptionalData=function(){return this.optionalData},PDF417ResultMetadata.prototype.setOptionalData=function(optionalData){this.optionalData=optionalData},PDF417ResultMetadata.prototype.isLastSegment=function(){return this.lastSegment},PDF417ResultMetadata.prototype.setLastSegment=function(lastSegment){this.lastSegment=lastSegment},PDF417ResultMetadata.prototype.getSegmentCount=function(){return this.segmentCount},PDF417ResultMetadata.prototype.setSegmentCount=function(segmentCount){this.segmentCount=segmentCount},PDF417ResultMetadata.prototype.getSender=function(){return this.sender||null},PDF417ResultMetadata.prototype.setSender=function(sender){this.sender=sender},PDF417ResultMetadata.prototype.getAddressee=function(){return this.addressee||null},PDF417ResultMetadata.prototype.setAddressee=function(addressee){this.addressee=addressee},PDF417ResultMetadata.prototype.getFileName=function(){return this.fileName},PDF417ResultMetadata.prototype.setFileName=function(fileName){this.fileName=fileName},PDF417ResultMetadata.prototype.getFileSize=function(){return this.fileSize},PDF417ResultMetadata.prototype.setFileSize=function(fileSize){this.fileSize=fileSize},PDF417ResultMetadata.prototype.getChecksum=function(){return this.checksum},PDF417ResultMetadata.prototype.setChecksum=function(checksum){this.checksum=checksum},PDF417ResultMetadata.prototype.getTimestamp=function(){return this.timestamp},PDF417ResultMetadata.prototype.setTimestamp=function(timestamp){this.timestamp=timestamp},PDF417ResultMetadata}();const util_Long=function(){function Long(){}return Long.parseLong=function(num,radix){return void 0===radix&&(radix=void 0),parseInt(num,radix)},Long}();var NullPointerException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_NullPointerException=function(_super){function NullPointerException(){return null!==_super&&_super.apply(this,arguments)||this}return NullPointerException_extends(NullPointerException,_super),NullPointerException.kind="NullPointerException",NullPointerException}(core_Exception);const util_OutputStream=function(){function OutputStream(){}return OutputStream.prototype.writeBytes=function(b){this.writeBytesOffset(b,0,b.length)},OutputStream.prototype.writeBytesOffset=function(b,off,len){if(null==b)throw new core_NullPointerException;if(off<0||off>b.length||len<0||off+len>b.length||off+len<0)throw new core_IndexOutOfBoundsException;if(0!==len)for(var i=0;i<len;i++)this.write(b[off+i])},OutputStream.prototype.flush=function(){},OutputStream.prototype.close=function(){},OutputStream}();var OutOfMemoryError_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_OutOfMemoryError=function(_super){function OutOfMemoryError(){return null!==_super&&_super.apply(this,arguments)||this}return OutOfMemoryError_extends(OutOfMemoryError,_super),OutOfMemoryError}(core_Exception);var ByteArrayOutputStream_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const util_ByteArrayOutputStream=function(_super){function ByteArrayOutputStream(size){void 0===size&&(size=32);var _this=_super.call(this)||this;if(_this.count=0,size<0)throw new core_IllegalArgumentException("Negative initial size: "+size);return _this.buf=new Uint8Array(size),_this}return ByteArrayOutputStream_extends(ByteArrayOutputStream,_super),ByteArrayOutputStream.prototype.ensureCapacity=function(minCapacity){minCapacity-this.buf.length>0&&this.grow(minCapacity)},ByteArrayOutputStream.prototype.grow=function(minCapacity){var newCapacity=this.buf.length<<1;if(newCapacity-minCapacity<0&&(newCapacity=minCapacity),newCapacity<0){if(minCapacity<0)throw new core_OutOfMemoryError;newCapacity=util_Integer.MAX_VALUE}this.buf=util_Arrays.copyOfUint8Array(this.buf,newCapacity)},ByteArrayOutputStream.prototype.write=function(b){this.ensureCapacity(this.count+1),this.buf[this.count]=b,this.count+=1},ByteArrayOutputStream.prototype.writeBytesOffset=function(b,off,len){if(off<0||off>b.length||len<0||off+len-b.length>0)throw new core_IndexOutOfBoundsException;this.ensureCapacity(this.count+len),util_System.arraycopy(b,off,this.buf,this.count,len),this.count+=len},ByteArrayOutputStream.prototype.writeTo=function(out){out.writeBytesOffset(this.buf,0,this.count)},ByteArrayOutputStream.prototype.reset=function(){this.count=0},ByteArrayOutputStream.prototype.toByteArray=function(){return util_Arrays.copyOfUint8Array(this.buf,this.count)},ByteArrayOutputStream.prototype.size=function(){return this.count},ByteArrayOutputStream.prototype.toString=function(param){return param?"string"==typeof param?this.toString_string(param):this.toString_number(param):this.toString_void()},ByteArrayOutputStream.prototype.toString_void=function(){return new String(this.buf).toString()},ByteArrayOutputStream.prototype.toString_string=function(charsetName){return new String(this.buf).toString()},ByteArrayOutputStream.prototype.toString_number=function(hibyte){return new String(this.buf).toString()},ByteArrayOutputStream.prototype.close=function(){},ByteArrayOutputStream}(util_OutputStream);var DecodedBitStreamParser_Mode,BigInteger;function getBigIntConstructor(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==__webpack_require__.g)return __webpack_require__.g.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function createBigInt(num){if(void 0===BigInteger&&(BigInteger=getBigIntConstructor()),null===BigInteger)throw new Error("BigInt is not supported!");return BigInteger(num)}!function(Mode){Mode[Mode.ALPHA=0]="ALPHA",Mode[Mode.LOWER=1]="LOWER",Mode[Mode.MIXED=2]="MIXED",Mode[Mode.PUNCT=3]="PUNCT",Mode[Mode.ALPHA_SHIFT=4]="ALPHA_SHIFT",Mode[Mode.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(DecodedBitStreamParser_Mode||(DecodedBitStreamParser_Mode={}));var decoder_DecodedBitStreamParser_DecodedBitStreamParser=function(){function DecodedBitStreamParser(){}return DecodedBitStreamParser.decode=function(codewords,ecLevel){var result=new util_StringBuilder(""),encoding=common_CharacterSetECI.ISO8859_1;result.enableDecoding(encoding);for(var codeIndex=1,code=codewords[codeIndex++],resultMetadata=new pdf417_PDF417ResultMetadata;codeIndex<codewords[0];){switch(code){case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:codeIndex=DecodedBitStreamParser.textCompaction(codewords,codeIndex,result);break;case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6:codeIndex=DecodedBitStreamParser.byteCompaction(code,codewords,encoding,codeIndex,result);break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:result.append(codewords[codeIndex++]);break;case DecodedBitStreamParser.NUMERIC_COMPACTION_MODE_LATCH:codeIndex=DecodedBitStreamParser.numericCompaction(codewords,codeIndex,result);break;case DecodedBitStreamParser.ECI_CHARSET:common_CharacterSetECI.getCharacterSetECIByValue(codewords[codeIndex++]);break;case DecodedBitStreamParser.ECI_GENERAL_PURPOSE:codeIndex+=2;break;case DecodedBitStreamParser.ECI_USER_DEFINED:codeIndex++;break;case DecodedBitStreamParser.BEGIN_MACRO_PDF417_CONTROL_BLOCK:codeIndex=DecodedBitStreamParser.decodeMacroBlock(codewords,codeIndex,resultMetadata);break;case DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case DecodedBitStreamParser.MACRO_PDF417_TERMINATOR:throw new core_FormatException;default:codeIndex--,codeIndex=DecodedBitStreamParser.textCompaction(codewords,codeIndex,result)}if(!(codeIndex<codewords.length))throw core_FormatException.getFormatInstance();code=codewords[codeIndex++]}if(0===result.length())throw core_FormatException.getFormatInstance();var decoderResult=new common_DecoderResult(null,result.toString(),null,ecLevel);return decoderResult.setOther(resultMetadata),decoderResult},DecodedBitStreamParser.decodeMacroBlock=function(codewords,codeIndex,resultMetadata){if(codeIndex+DecodedBitStreamParser.NUMBER_OF_SEQUENCE_CODEWORDS>codewords[0])throw core_FormatException.getFormatInstance();for(var segmentIndexArray=new Int32Array(DecodedBitStreamParser.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<DecodedBitStreamParser.NUMBER_OF_SEQUENCE_CODEWORDS;i++,codeIndex++)segmentIndexArray[i]=codewords[codeIndex];resultMetadata.setSegmentIndex(util_Integer.parseInt(DecodedBitStreamParser.decodeBase900toBase10(segmentIndexArray,DecodedBitStreamParser.NUMBER_OF_SEQUENCE_CODEWORDS)));var fileId=new util_StringBuilder;codeIndex=DecodedBitStreamParser.textCompaction(codewords,codeIndex,fileId),resultMetadata.setFileId(fileId.toString());var optionalFieldsStart=-1;for(codewords[codeIndex]===DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(optionalFieldsStart=codeIndex+1);codeIndex<codewords[0];)switch(codewords[codeIndex]){case DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(codewords[++codeIndex]){case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var fileName=new util_StringBuilder;codeIndex=DecodedBitStreamParser.textCompaction(codewords,codeIndex+1,fileName),resultMetadata.setFileName(fileName.toString());break;case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var sender=new util_StringBuilder;codeIndex=DecodedBitStreamParser.textCompaction(codewords,codeIndex+1,sender),resultMetadata.setSender(sender.toString());break;case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var addressee=new util_StringBuilder;codeIndex=DecodedBitStreamParser.textCompaction(codewords,codeIndex+1,addressee),resultMetadata.setAddressee(addressee.toString());break;case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var segmentCount=new util_StringBuilder;codeIndex=DecodedBitStreamParser.numericCompaction(codewords,codeIndex+1,segmentCount),resultMetadata.setSegmentCount(util_Integer.parseInt(segmentCount.toString()));break;case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var timestamp=new util_StringBuilder;codeIndex=DecodedBitStreamParser.numericCompaction(codewords,codeIndex+1,timestamp),resultMetadata.setTimestamp(util_Long.parseLong(timestamp.toString()));break;case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var checksum=new util_StringBuilder;codeIndex=DecodedBitStreamParser.numericCompaction(codewords,codeIndex+1,checksum),resultMetadata.setChecksum(util_Integer.parseInt(checksum.toString()));break;case DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var fileSize=new util_StringBuilder;codeIndex=DecodedBitStreamParser.numericCompaction(codewords,codeIndex+1,fileSize),resultMetadata.setFileSize(util_Long.parseLong(fileSize.toString()));break;default:throw core_FormatException.getFormatInstance()}break;case DecodedBitStreamParser.MACRO_PDF417_TERMINATOR:codeIndex++,resultMetadata.setLastSegment(!0);break;default:throw core_FormatException.getFormatInstance()}if(-1!==optionalFieldsStart){var optionalFieldsLength=codeIndex-optionalFieldsStart;resultMetadata.isLastSegment()&&optionalFieldsLength--,resultMetadata.setOptionalData(util_Arrays.copyOfRange(codewords,optionalFieldsStart,optionalFieldsStart+optionalFieldsLength))}return codeIndex},DecodedBitStreamParser.textCompaction=function(codewords,codeIndex,result){for(var textCompactionData=new Int32Array(2*(codewords[0]-codeIndex)),byteCompactionData=new Int32Array(2*(codewords[0]-codeIndex)),index=0,end=!1;codeIndex<codewords[0]&&!end;){var code=codewords[codeIndex++];if(code<DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH)textCompactionData[index]=code/30,textCompactionData[index+1]=code%30,index+=2;else switch(code){case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:textCompactionData[index++]=DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH;break;case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6:case DecodedBitStreamParser.NUMERIC_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case DecodedBitStreamParser.MACRO_PDF417_TERMINATOR:codeIndex--,end=!0;break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:textCompactionData[index]=DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,code=codewords[codeIndex++],byteCompactionData[index]=code,index++}}return DecodedBitStreamParser.decodeTextCompaction(textCompactionData,byteCompactionData,index,result),codeIndex},DecodedBitStreamParser.decodeTextCompaction=function(textCompactionData,byteCompactionData,length,result){for(var subMode=DecodedBitStreamParser_Mode.ALPHA,priorToShiftMode=DecodedBitStreamParser_Mode.ALPHA,i=0;i<length;){var subModeCh=textCompactionData[i],ch="";switch(subMode){case DecodedBitStreamParser_Mode.ALPHA:if(subModeCh<26)ch=String.fromCharCode(65+subModeCh);else switch(subModeCh){case 26:ch=" ";break;case DecodedBitStreamParser.LL:subMode=DecodedBitStreamParser_Mode.LOWER;break;case DecodedBitStreamParser.ML:subMode=DecodedBitStreamParser_Mode.MIXED;break;case DecodedBitStreamParser.PS:priorToShiftMode=subMode,subMode=DecodedBitStreamParser_Mode.PUNCT_SHIFT;break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:result.append(byteCompactionData[i]);break;case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:subMode=DecodedBitStreamParser_Mode.ALPHA}break;case DecodedBitStreamParser_Mode.LOWER:if(subModeCh<26)ch=String.fromCharCode(97+subModeCh);else switch(subModeCh){case 26:ch=" ";break;case DecodedBitStreamParser.AS:priorToShiftMode=subMode,subMode=DecodedBitStreamParser_Mode.ALPHA_SHIFT;break;case DecodedBitStreamParser.ML:subMode=DecodedBitStreamParser_Mode.MIXED;break;case DecodedBitStreamParser.PS:priorToShiftMode=subMode,subMode=DecodedBitStreamParser_Mode.PUNCT_SHIFT;break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:result.append(byteCompactionData[i]);break;case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:subMode=DecodedBitStreamParser_Mode.ALPHA}break;case DecodedBitStreamParser_Mode.MIXED:if(subModeCh<DecodedBitStreamParser.PL)ch=DecodedBitStreamParser.MIXED_CHARS[subModeCh];else switch(subModeCh){case DecodedBitStreamParser.PL:subMode=DecodedBitStreamParser_Mode.PUNCT;break;case 26:ch=" ";break;case DecodedBitStreamParser.LL:subMode=DecodedBitStreamParser_Mode.LOWER;break;case DecodedBitStreamParser.AL:subMode=DecodedBitStreamParser_Mode.ALPHA;break;case DecodedBitStreamParser.PS:priorToShiftMode=subMode,subMode=DecodedBitStreamParser_Mode.PUNCT_SHIFT;break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:result.append(byteCompactionData[i]);break;case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:subMode=DecodedBitStreamParser_Mode.ALPHA}break;case DecodedBitStreamParser_Mode.PUNCT:if(subModeCh<DecodedBitStreamParser.PAL)ch=DecodedBitStreamParser.PUNCT_CHARS[subModeCh];else switch(subModeCh){case DecodedBitStreamParser.PAL:subMode=DecodedBitStreamParser_Mode.ALPHA;break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:result.append(byteCompactionData[i]);break;case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:subMode=DecodedBitStreamParser_Mode.ALPHA}break;case DecodedBitStreamParser_Mode.ALPHA_SHIFT:if(subMode=priorToShiftMode,subModeCh<26)ch=String.fromCharCode(65+subModeCh);else switch(subModeCh){case 26:ch=" ";break;case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:subMode=DecodedBitStreamParser_Mode.ALPHA}break;case DecodedBitStreamParser_Mode.PUNCT_SHIFT:if(subMode=priorToShiftMode,subModeCh<DecodedBitStreamParser.PAL)ch=DecodedBitStreamParser.PUNCT_CHARS[subModeCh];else switch(subModeCh){case DecodedBitStreamParser.PAL:subMode=DecodedBitStreamParser_Mode.ALPHA;break;case DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:result.append(byteCompactionData[i]);break;case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:subMode=DecodedBitStreamParser_Mode.ALPHA}}""!==ch&&result.append(ch),i++}},DecodedBitStreamParser.byteCompaction=function(mode,codewords,encoding,codeIndex,result){var decodedBytes=new util_ByteArrayOutputStream,count=0,value=0,end=!1;switch(mode){case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH:for(var byteCompactedCodewords=new Int32Array(6),nextCode=codewords[codeIndex++];codeIndex<codewords[0]&&!end;)switch(byteCompactedCodewords[count++]=nextCode,value=900*value+nextCode,nextCode=codewords[codeIndex++]){case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.NUMERIC_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case DecodedBitStreamParser.MACRO_PDF417_TERMINATOR:codeIndex--,end=!0;break;default:if(count%5==0&&count>0){for(var j=0;j<6;++j)decodedBytes.write(Number(createBigInt(value)>>createBigInt(8*(5-j))));value=0,count=0}}codeIndex===codewords[0]&&nextCode<DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH&&(byteCompactedCodewords[count++]=nextCode);for(var i=0;i<count;i++)decodedBytes.write(byteCompactedCodewords[i]);break;case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6:for(;codeIndex<codewords[0]&&!end;){var code=codewords[codeIndex++];if(code<DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH)count++,value=900*value+code;else switch(code){case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.NUMERIC_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case DecodedBitStreamParser.MACRO_PDF417_TERMINATOR:codeIndex--,end=!0}if(count%5==0&&count>0){for(j=0;j<6;++j)decodedBytes.write(Number(createBigInt(value)>>createBigInt(8*(5-j))));value=0,count=0}}}return result.append(util_StringEncoding.decode(decodedBytes.toByteArray(),encoding)),codeIndex},DecodedBitStreamParser.numericCompaction=function(codewords,codeIndex,result){for(var count=0,end=!1,numericCodewords=new Int32Array(DecodedBitStreamParser.MAX_NUMERIC_CODEWORDS);codeIndex<codewords[0]&&!end;){var code=codewords[codeIndex++];if(codeIndex===codewords[0]&&(end=!0),code<DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH)numericCodewords[count]=code,count++;else switch(code){case DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH:case DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case DecodedBitStreamParser.MACRO_PDF417_TERMINATOR:codeIndex--,end=!0}(count%DecodedBitStreamParser.MAX_NUMERIC_CODEWORDS===0||code===DecodedBitStreamParser.NUMERIC_COMPACTION_MODE_LATCH||end)&&count>0&&(result.append(DecodedBitStreamParser.decodeBase900toBase10(numericCodewords,count)),count=0)}return codeIndex},DecodedBitStreamParser.decodeBase900toBase10=function(codewords,count){for(var result=createBigInt(0),i=0;i<count;i++)result+=DecodedBitStreamParser.EXP900[count-i-1]*createBigInt(codewords[i]);var resultString=result.toString();if("1"!==resultString.charAt(0))throw new core_FormatException;return resultString.substring(1)},DecodedBitStreamParser.TEXT_COMPACTION_MODE_LATCH=900,DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH=901,DecodedBitStreamParser.NUMERIC_COMPACTION_MODE_LATCH=902,DecodedBitStreamParser.BYTE_COMPACTION_MODE_LATCH_6=924,DecodedBitStreamParser.ECI_USER_DEFINED=925,DecodedBitStreamParser.ECI_GENERAL_PURPOSE=926,DecodedBitStreamParser.ECI_CHARSET=927,DecodedBitStreamParser.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,DecodedBitStreamParser.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,DecodedBitStreamParser.MACRO_PDF417_TERMINATOR=922,DecodedBitStreamParser.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,DecodedBitStreamParser.MAX_NUMERIC_CODEWORDS=15,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,DecodedBitStreamParser.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,DecodedBitStreamParser.PL=25,DecodedBitStreamParser.LL=27,DecodedBitStreamParser.AS=27,DecodedBitStreamParser.ML=28,DecodedBitStreamParser.AL=28,DecodedBitStreamParser.PS=29,DecodedBitStreamParser.PAL=29,DecodedBitStreamParser.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",DecodedBitStreamParser.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",DecodedBitStreamParser.EXP900=getBigIntConstructor()?function getEXP900(){var EXP900=[];EXP900[0]=createBigInt(1);var nineHundred=createBigInt(900);EXP900[1]=nineHundred;for(var i=2;i<16;i++)EXP900[i]=EXP900[i-1]*nineHundred;return EXP900}():[],DecodedBitStreamParser.NUMBER_OF_SEQUENCE_CODEWORDS=2,DecodedBitStreamParser}();const pdf417_decoder_DecodedBitStreamParser=decoder_DecodedBitStreamParser_DecodedBitStreamParser;var PDF417ScanningDecoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},PDF417ScanningDecoder=function(){function PDF417ScanningDecoder(){}return PDF417ScanningDecoder.decode=function(image,imageTopLeft,imageBottomLeft,imageTopRight,imageBottomRight,minCodewordWidth,maxCodewordWidth){for(var detectionResult,boundingBox=new decoder_BoundingBox(image,imageTopLeft,imageBottomLeft,imageTopRight,imageBottomRight),leftRowIndicatorColumn=null,rightRowIndicatorColumn=null,firstPass=!0;;firstPass=!1){if(null!=imageTopLeft&&(leftRowIndicatorColumn=PDF417ScanningDecoder.getRowIndicatorColumn(image,boundingBox,imageTopLeft,!0,minCodewordWidth,maxCodewordWidth)),null!=imageTopRight&&(rightRowIndicatorColumn=PDF417ScanningDecoder.getRowIndicatorColumn(image,boundingBox,imageTopRight,!1,minCodewordWidth,maxCodewordWidth)),null==(detectionResult=PDF417ScanningDecoder.merge(leftRowIndicatorColumn,rightRowIndicatorColumn)))throw core_NotFoundException.getNotFoundInstance();var resultBox=detectionResult.getBoundingBox();if(!firstPass||null==resultBox||!(resultBox.getMinY()<boundingBox.getMinY()||resultBox.getMaxY()>boundingBox.getMaxY()))break;boundingBox=resultBox}detectionResult.setBoundingBox(boundingBox);var maxBarcodeColumn=detectionResult.getBarcodeColumnCount()+1;detectionResult.setDetectionResultColumn(0,leftRowIndicatorColumn),detectionResult.setDetectionResultColumn(maxBarcodeColumn,rightRowIndicatorColumn);for(var leftToRight=null!=leftRowIndicatorColumn,barcodeColumnCount=1;barcodeColumnCount<=maxBarcodeColumn;barcodeColumnCount++){var barcodeColumn=leftToRight?barcodeColumnCount:maxBarcodeColumn-barcodeColumnCount;if(void 0===detectionResult.getDetectionResultColumn(barcodeColumn)){var detectionResultColumn=void 0;detectionResultColumn=0===barcodeColumn||barcodeColumn===maxBarcodeColumn?new decoder_DetectionResultRowIndicatorColumn(boundingBox,0===barcodeColumn):new decoder_DetectionResultColumn(boundingBox),detectionResult.setDetectionResultColumn(barcodeColumn,detectionResultColumn);for(var startColumn=-1,previousStartColumn=startColumn,imageRow=boundingBox.getMinY();imageRow<=boundingBox.getMaxY();imageRow++){if((startColumn=PDF417ScanningDecoder.getStartColumn(detectionResult,barcodeColumn,imageRow,leftToRight))<0||startColumn>boundingBox.getMaxX()){if(-1===previousStartColumn)continue;startColumn=previousStartColumn}var codeword=PDF417ScanningDecoder.detectCodeword(image,boundingBox.getMinX(),boundingBox.getMaxX(),leftToRight,startColumn,imageRow,minCodewordWidth,maxCodewordWidth);null!=codeword&&(detectionResultColumn.setCodeword(imageRow,codeword),previousStartColumn=startColumn,minCodewordWidth=Math.min(minCodewordWidth,codeword.getWidth()),maxCodewordWidth=Math.max(maxCodewordWidth,codeword.getWidth()))}}}return PDF417ScanningDecoder.createDecoderResult(detectionResult)},PDF417ScanningDecoder.merge=function(leftRowIndicatorColumn,rightRowIndicatorColumn){if(null==leftRowIndicatorColumn&&null==rightRowIndicatorColumn)return null;var barcodeMetadata=PDF417ScanningDecoder.getBarcodeMetadata(leftRowIndicatorColumn,rightRowIndicatorColumn);if(null==barcodeMetadata)return null;var boundingBox=decoder_BoundingBox.merge(PDF417ScanningDecoder.adjustBoundingBox(leftRowIndicatorColumn),PDF417ScanningDecoder.adjustBoundingBox(rightRowIndicatorColumn));return new decoder_DetectionResult(barcodeMetadata,boundingBox)},PDF417ScanningDecoder.adjustBoundingBox=function(rowIndicatorColumn){var e_1,_a;if(null==rowIndicatorColumn)return null;var rowHeights=rowIndicatorColumn.getRowHeights();if(null==rowHeights)return null;var maxRowHeight=PDF417ScanningDecoder.getMax(rowHeights),missingStartRows=0;try{for(var rowHeights_1=PDF417ScanningDecoder_values(rowHeights),rowHeights_1_1=rowHeights_1.next();!rowHeights_1_1.done;rowHeights_1_1=rowHeights_1.next()){var rowHeight=rowHeights_1_1.value;if(missingStartRows+=maxRowHeight-rowHeight,rowHeight>0)break}}catch(e_1_1){e_1={error:e_1_1}}finally{try{rowHeights_1_1&&!rowHeights_1_1.done&&(_a=rowHeights_1.return)&&_a.call(rowHeights_1)}finally{if(e_1)throw e_1.error}}for(var codewords=rowIndicatorColumn.getCodewords(),row=0;missingStartRows>0&&null==codewords[row];row++)missingStartRows--;var missingEndRows=0;for(row=rowHeights.length-1;row>=0&&(missingEndRows+=maxRowHeight-rowHeights[row],!(rowHeights[row]>0));row--);for(row=codewords.length-1;missingEndRows>0&&null==codewords[row];row--)missingEndRows--;return rowIndicatorColumn.getBoundingBox().addMissingRows(missingStartRows,missingEndRows,rowIndicatorColumn.isLeft())},PDF417ScanningDecoder.getMax=function(values){var e_2,_a,maxValue=-1;try{for(var values_1=PDF417ScanningDecoder_values(values),values_1_1=values_1.next();!values_1_1.done;values_1_1=values_1.next()){var value=values_1_1.value;maxValue=Math.max(maxValue,value)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{values_1_1&&!values_1_1.done&&(_a=values_1.return)&&_a.call(values_1)}finally{if(e_2)throw e_2.error}}return maxValue},PDF417ScanningDecoder.getBarcodeMetadata=function(leftRowIndicatorColumn,rightRowIndicatorColumn){var leftBarcodeMetadata,rightBarcodeMetadata;return null==leftRowIndicatorColumn||null==(leftBarcodeMetadata=leftRowIndicatorColumn.getBarcodeMetadata())?null==rightRowIndicatorColumn?null:rightRowIndicatorColumn.getBarcodeMetadata():null==rightRowIndicatorColumn||null==(rightBarcodeMetadata=rightRowIndicatorColumn.getBarcodeMetadata())?leftBarcodeMetadata:leftBarcodeMetadata.getColumnCount()!==rightBarcodeMetadata.getColumnCount()&&leftBarcodeMetadata.getErrorCorrectionLevel()!==rightBarcodeMetadata.getErrorCorrectionLevel()&&leftBarcodeMetadata.getRowCount()!==rightBarcodeMetadata.getRowCount()?null:leftBarcodeMetadata},PDF417ScanningDecoder.getRowIndicatorColumn=function(image,boundingBox,startPoint,leftToRight,minCodewordWidth,maxCodewordWidth){for(var rowIndicatorColumn=new decoder_DetectionResultRowIndicatorColumn(boundingBox,leftToRight),i=0;i<2;i++)for(var increment=0===i?1:-1,startColumn=Math.trunc(Math.trunc(startPoint.getX())),imageRow=Math.trunc(Math.trunc(startPoint.getY()));imageRow<=boundingBox.getMaxY()&&imageRow>=boundingBox.getMinY();imageRow+=increment){var codeword=PDF417ScanningDecoder.detectCodeword(image,0,image.getWidth(),leftToRight,startColumn,imageRow,minCodewordWidth,maxCodewordWidth);null!=codeword&&(rowIndicatorColumn.setCodeword(imageRow,codeword),startColumn=leftToRight?codeword.getStartX():codeword.getEndX())}return rowIndicatorColumn},PDF417ScanningDecoder.adjustCodewordCount=function(detectionResult,barcodeMatrix){var barcodeMatrix01=barcodeMatrix[0][1],numberOfCodewords=barcodeMatrix01.getValue(),calculatedNumberOfCodewords=detectionResult.getBarcodeColumnCount()*detectionResult.getBarcodeRowCount()-PDF417ScanningDecoder.getNumberOfECCodeWords(detectionResult.getBarcodeECLevel());if(0===numberOfCodewords.length){if(calculatedNumberOfCodewords<1||calculatedNumberOfCodewords>pdf417_PDF417Common.MAX_CODEWORDS_IN_BARCODE)throw core_NotFoundException.getNotFoundInstance();barcodeMatrix01.setValue(calculatedNumberOfCodewords)}else numberOfCodewords[0]!==calculatedNumberOfCodewords&&barcodeMatrix01.setValue(calculatedNumberOfCodewords)},PDF417ScanningDecoder.createDecoderResult=function(detectionResult){var barcodeMatrix=PDF417ScanningDecoder.createBarcodeMatrix(detectionResult);PDF417ScanningDecoder.adjustCodewordCount(detectionResult,barcodeMatrix);for(var erasures=new Array,codewords=new Int32Array(detectionResult.getBarcodeRowCount()*detectionResult.getBarcodeColumnCount()),ambiguousIndexValuesList=[],ambiguousIndexesList=new Array,row=0;row<detectionResult.getBarcodeRowCount();row++)for(var column=0;column<detectionResult.getBarcodeColumnCount();column++){var values=barcodeMatrix[row][column+1].getValue(),codewordIndex=row*detectionResult.getBarcodeColumnCount()+column;0===values.length?erasures.push(codewordIndex):1===values.length?codewords[codewordIndex]=values[0]:(ambiguousIndexesList.push(codewordIndex),ambiguousIndexValuesList.push(values))}for(var ambiguousIndexValues=new Array(ambiguousIndexValuesList.length),i=0;i<ambiguousIndexValues.length;i++)ambiguousIndexValues[i]=ambiguousIndexValuesList[i];return PDF417ScanningDecoder.createDecoderResultFromAmbiguousValues(detectionResult.getBarcodeECLevel(),codewords,pdf417_PDF417Common.toIntArray(erasures),pdf417_PDF417Common.toIntArray(ambiguousIndexesList),ambiguousIndexValues)},PDF417ScanningDecoder.createDecoderResultFromAmbiguousValues=function(ecLevel,codewords,erasureArray,ambiguousIndexes,ambiguousIndexValues){for(var ambiguousIndexCount=new Int32Array(ambiguousIndexes.length),tries=100;tries-- >0;){for(var i=0;i<ambiguousIndexCount.length;i++)codewords[ambiguousIndexes[i]]=ambiguousIndexValues[i][ambiguousIndexCount[i]];try{return PDF417ScanningDecoder.decodeCodewords(codewords,ecLevel,erasureArray)}catch(err){if(!(err instanceof core_ChecksumException))throw err}if(0===ambiguousIndexCount.length)throw core_ChecksumException.getChecksumInstance();for(i=0;i<ambiguousIndexCount.length;i++){if(ambiguousIndexCount[i]<ambiguousIndexValues[i].length-1){ambiguousIndexCount[i]++;break}if(ambiguousIndexCount[i]=0,i===ambiguousIndexCount.length-1)throw core_ChecksumException.getChecksumInstance()}}throw core_ChecksumException.getChecksumInstance()},PDF417ScanningDecoder.createBarcodeMatrix=function(detectionResult){for(var e_3,_a,e_4,_b,barcodeMatrix=Array.from({length:detectionResult.getBarcodeRowCount()},function(){return new Array(detectionResult.getBarcodeColumnCount()+2)}),row=0;row<barcodeMatrix.length;row++)for(var column_1=0;column_1<barcodeMatrix[row].length;column_1++)barcodeMatrix[row][column_1]=new decoder_BarcodeValue;var column=0;try{for(var _c=PDF417ScanningDecoder_values(detectionResult.getDetectionResultColumns()),_d=_c.next();!_d.done;_d=_c.next()){var detectionResultColumn=_d.value;if(null!=detectionResultColumn)try{for(var _e=(e_4=void 0,PDF417ScanningDecoder_values(detectionResultColumn.getCodewords())),_f=_e.next();!_f.done;_f=_e.next()){var codeword=_f.value;if(null!=codeword){var rowNumber=codeword.getRowNumber();if(rowNumber>=0){if(rowNumber>=barcodeMatrix.length)continue;barcodeMatrix[rowNumber][column].setValue(codeword.getValue())}}}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_4)throw e_4.error}}column++}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_3)throw e_3.error}}return barcodeMatrix},PDF417ScanningDecoder.isValidBarcodeColumn=function(detectionResult,barcodeColumn){return barcodeColumn>=0&&barcodeColumn<=detectionResult.getBarcodeColumnCount()+1},PDF417ScanningDecoder.getStartColumn=function(detectionResult,barcodeColumn,imageRow,leftToRight){var e_5,_a,offset=leftToRight?1:-1,codeword=null;if(PDF417ScanningDecoder.isValidBarcodeColumn(detectionResult,barcodeColumn-offset)&&(codeword=detectionResult.getDetectionResultColumn(barcodeColumn-offset).getCodeword(imageRow)),null!=codeword)return leftToRight?codeword.getEndX():codeword.getStartX();if(null!=(codeword=detectionResult.getDetectionResultColumn(barcodeColumn).getCodewordNearby(imageRow)))return leftToRight?codeword.getStartX():codeword.getEndX();if(PDF417ScanningDecoder.isValidBarcodeColumn(detectionResult,barcodeColumn-offset)&&(codeword=detectionResult.getDetectionResultColumn(barcodeColumn-offset).getCodewordNearby(imageRow)),null!=codeword)return leftToRight?codeword.getEndX():codeword.getStartX();for(var skippedColumns=0;PDF417ScanningDecoder.isValidBarcodeColumn(detectionResult,barcodeColumn-offset);){barcodeColumn-=offset;try{for(var _b=(e_5=void 0,PDF417ScanningDecoder_values(detectionResult.getDetectionResultColumn(barcodeColumn).getCodewords())),_c=_b.next();!_c.done;_c=_b.next()){var previousRowCodeword=_c.value;if(null!=previousRowCodeword)return(leftToRight?previousRowCodeword.getEndX():previousRowCodeword.getStartX())+offset*skippedColumns*(previousRowCodeword.getEndX()-previousRowCodeword.getStartX())}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}skippedColumns++}return leftToRight?detectionResult.getBoundingBox().getMinX():detectionResult.getBoundingBox().getMaxX()},PDF417ScanningDecoder.detectCodeword=function(image,minColumn,maxColumn,leftToRight,startColumn,imageRow,minCodewordWidth,maxCodewordWidth){startColumn=PDF417ScanningDecoder.adjustCodewordStartColumn(image,minColumn,maxColumn,leftToRight,startColumn,imageRow);var endColumn,moduleBitCount=PDF417ScanningDecoder.getModuleBitCount(image,minColumn,maxColumn,leftToRight,startColumn,imageRow);if(null==moduleBitCount)return null;var codewordBitCount=detector_MathUtils.sum(moduleBitCount);if(leftToRight)endColumn=startColumn+codewordBitCount;else{for(var i=0;i<moduleBitCount.length/2;i++){var tmpCount=moduleBitCount[i];moduleBitCount[i]=moduleBitCount[moduleBitCount.length-1-i],moduleBitCount[moduleBitCount.length-1-i]=tmpCount}startColumn=(endColumn=startColumn)-codewordBitCount}if(!PDF417ScanningDecoder.checkCodewordSkew(codewordBitCount,minCodewordWidth,maxCodewordWidth))return null;var decodedValue=decoder_PDF417CodewordDecoder.getDecodedValue(moduleBitCount),codeword=pdf417_PDF417Common.getCodeword(decodedValue);return-1===codeword?null:new decoder_Codeword(startColumn,endColumn,PDF417ScanningDecoder.getCodewordBucketNumber(decodedValue),codeword)},PDF417ScanningDecoder.getModuleBitCount=function(image,minColumn,maxColumn,leftToRight,startColumn,imageRow){for(var imageColumn=startColumn,moduleBitCount=new Int32Array(8),moduleNumber=0,increment=leftToRight?1:-1,previousPixelValue=leftToRight;(leftToRight?imageColumn<maxColumn:imageColumn>=minColumn)&&moduleNumber<moduleBitCount.length;)image.get(imageColumn,imageRow)===previousPixelValue?(moduleBitCount[moduleNumber]++,imageColumn+=increment):(moduleNumber++,previousPixelValue=!previousPixelValue);return moduleNumber===moduleBitCount.length||imageColumn===(leftToRight?maxColumn:minColumn)&&moduleNumber===moduleBitCount.length-1?moduleBitCount:null},PDF417ScanningDecoder.getNumberOfECCodeWords=function(barcodeECLevel){return 2<<barcodeECLevel},PDF417ScanningDecoder.adjustCodewordStartColumn=function(image,minColumn,maxColumn,leftToRight,codewordStartColumn,imageRow){for(var correctedStartColumn=codewordStartColumn,increment=leftToRight?-1:1,i=0;i<2;i++){for(;(leftToRight?correctedStartColumn>=minColumn:correctedStartColumn<maxColumn)&&leftToRight===image.get(correctedStartColumn,imageRow);){if(Math.abs(codewordStartColumn-correctedStartColumn)>PDF417ScanningDecoder.CODEWORD_SKEW_SIZE)return codewordStartColumn;correctedStartColumn+=increment}increment=-increment,leftToRight=!leftToRight}return correctedStartColumn},PDF417ScanningDecoder.checkCodewordSkew=function(codewordSize,minCodewordWidth,maxCodewordWidth){return minCodewordWidth-PDF417ScanningDecoder.CODEWORD_SKEW_SIZE<=codewordSize&&codewordSize<=maxCodewordWidth+PDF417ScanningDecoder.CODEWORD_SKEW_SIZE},PDF417ScanningDecoder.decodeCodewords=function(codewords,ecLevel,erasures){if(0===codewords.length)throw core_FormatException.getFormatInstance();var numECCodewords=1<<ecLevel+1,correctedErrorsCount=PDF417ScanningDecoder.correctErrors(codewords,erasures,numECCodewords);PDF417ScanningDecoder.verifyCodewordCount(codewords,numECCodewords);var decoderResult=pdf417_decoder_DecodedBitStreamParser.decode(codewords,""+ecLevel);return decoderResult.setErrorsCorrected(correctedErrorsCount),decoderResult.setErasures(erasures.length),decoderResult},PDF417ScanningDecoder.correctErrors=function(codewords,erasures,numECCodewords){if(null!=erasures&&erasures.length>numECCodewords/2+PDF417ScanningDecoder.MAX_ERRORS||numECCodewords<0||numECCodewords>PDF417ScanningDecoder.MAX_EC_CODEWORDS)throw core_ChecksumException.getChecksumInstance();return PDF417ScanningDecoder.errorCorrection.decode(codewords,numECCodewords,erasures)},PDF417ScanningDecoder.verifyCodewordCount=function(codewords,numECCodewords){if(codewords.length<4)throw core_FormatException.getFormatInstance();var numberOfCodewords=codewords[0];if(numberOfCodewords>codewords.length)throw core_FormatException.getFormatInstance();if(0===numberOfCodewords){if(!(numECCodewords<codewords.length))throw core_FormatException.getFormatInstance();codewords[0]=codewords.length-numECCodewords}},PDF417ScanningDecoder.getBitCountForCodeword=function(codeword){for(var result=new Int32Array(8),previousValue=0,i=result.length-1;!((1&codeword)!==previousValue&&(previousValue=1&codeword,--i<0));)result[i]++,codeword>>=1;return result},PDF417ScanningDecoder.getCodewordBucketNumber=function(codeword){return codeword instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(codeword):this.getCodewordBucketNumber_number(codeword)},PDF417ScanningDecoder.getCodewordBucketNumber_number=function(codeword){return PDF417ScanningDecoder.getCodewordBucketNumber(PDF417ScanningDecoder.getBitCountForCodeword(codeword))},PDF417ScanningDecoder.getCodewordBucketNumber_Int32Array=function(moduleBitCount){return(moduleBitCount[0]-moduleBitCount[2]+moduleBitCount[4]-moduleBitCount[6]+9)%9},PDF417ScanningDecoder.toString=function(barcodeMatrix){for(var formatter=new util_Formatter,row=0;row<barcodeMatrix.length;row++){formatter.format("Row %2d: ",row);for(var column=0;column<barcodeMatrix[row].length;column++){var barcodeValue=barcodeMatrix[row][column];0===barcodeValue.getValue().length?formatter.format("        ",null):formatter.format("%4d(%2d)",barcodeValue.getValue()[0],barcodeValue.getConfidence(barcodeValue.getValue()[0]))}formatter.format("%n")}return formatter.toString()},PDF417ScanningDecoder.CODEWORD_SKEW_SIZE=2,PDF417ScanningDecoder.MAX_ERRORS=3,PDF417ScanningDecoder.MAX_EC_CODEWORDS=512,PDF417ScanningDecoder.errorCorrection=new ec_ErrorCorrection,PDF417ScanningDecoder}();const decoder_PDF417ScanningDecoder=PDF417ScanningDecoder;var PDF417Reader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},PDF417Reader=function(){function PDF417Reader(){}return PDF417Reader.prototype.decode=function(image,hints){void 0===hints&&(hints=null);var result=PDF417Reader.decode(image,hints,!1);if(null==result||0===result.length||null==result[0])throw core_NotFoundException.getNotFoundInstance();return result[0]},PDF417Reader.prototype.decodeMultiple=function(image,hints){void 0===hints&&(hints=null);try{return PDF417Reader.decode(image,hints,!0)}catch(ignored){if(ignored instanceof core_FormatException||ignored instanceof core_ChecksumException)throw core_NotFoundException.getNotFoundInstance();throw ignored}},PDF417Reader.decode=function(image,hints,multiple){var e_1,_a,results=new Array,detectorResult=pdf417_detector_Detector.detectMultiple(image,hints,multiple);try{for(var _b=PDF417Reader_values(detectorResult.getPoints()),_c=_b.next();!_c.done;_c=_b.next()){var points=_c.value,decoderResult=decoder_PDF417ScanningDecoder.decode(detectorResult.getBits(),points[4],points[5],points[6],points[7],PDF417Reader.getMinCodewordWidth(points),PDF417Reader.getMaxCodewordWidth(points)),result=new core_Result(decoderResult.getText(),decoderResult.getRawBytes(),void 0,points,core_BarcodeFormat.PDF_417);result.putMetadata(core_ResultMetadataType.ERROR_CORRECTION_LEVEL,decoderResult.getECLevel());var pdf417ResultMetadata=decoderResult.getOther();null!=pdf417ResultMetadata&&result.putMetadata(core_ResultMetadataType.PDF417_EXTRA_METADATA,pdf417ResultMetadata),results.push(result)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return results.map(function(x){return x})},PDF417Reader.getMaxWidth=function(p1,p2){return null==p1||null==p2?0:Math.trunc(Math.abs(p1.getX()-p2.getX()))},PDF417Reader.getMinWidth=function(p1,p2){return null==p1||null==p2?util_Integer.MAX_VALUE:Math.trunc(Math.abs(p1.getX()-p2.getX()))},PDF417Reader.getMaxCodewordWidth=function(p){return Math.floor(Math.max(Math.max(PDF417Reader.getMaxWidth(p[0],p[4]),PDF417Reader.getMaxWidth(p[6],p[2])*pdf417_PDF417Common.MODULES_IN_CODEWORD/pdf417_PDF417Common.MODULES_IN_STOP_PATTERN),Math.max(PDF417Reader.getMaxWidth(p[1],p[5]),PDF417Reader.getMaxWidth(p[7],p[3])*pdf417_PDF417Common.MODULES_IN_CODEWORD/pdf417_PDF417Common.MODULES_IN_STOP_PATTERN)))},PDF417Reader.getMinCodewordWidth=function(p){return Math.floor(Math.min(Math.min(PDF417Reader.getMinWidth(p[0],p[4]),PDF417Reader.getMinWidth(p[6],p[2])*pdf417_PDF417Common.MODULES_IN_CODEWORD/pdf417_PDF417Common.MODULES_IN_STOP_PATTERN),Math.min(PDF417Reader.getMinWidth(p[1],p[5]),PDF417Reader.getMinWidth(p[7],p[3])*pdf417_PDF417Common.MODULES_IN_CODEWORD/pdf417_PDF417Common.MODULES_IN_STOP_PATTERN)))},PDF417Reader.prototype.reset=function(){},PDF417Reader}();const pdf417_PDF417Reader=PDF417Reader;var ReaderException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_ReaderException=function(_super){function ReaderException(){return null!==_super&&_super.apply(this,arguments)||this}return ReaderException_extends(ReaderException,_super),ReaderException.kind="ReaderException",ReaderException}(core_Exception);var MultiFormatReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},MultiFormatReader=function(){function MultiFormatReader(){}return MultiFormatReader.prototype.decode=function(image,hints){return this.setHints(hints),this.decodeInternal(image)},MultiFormatReader.prototype.decodeWithState=function(image){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(image)},MultiFormatReader.prototype.setHints=function(hints){this.hints=hints;var tryHarder=null!=hints&&void 0!==hints.get(core_DecodeHintType.TRY_HARDER),formats=null==hints?null:hints.get(core_DecodeHintType.POSSIBLE_FORMATS),readers=new Array;if(null!=formats){var addOneDReader=formats.some(function(f){return f===core_BarcodeFormat.UPC_A||f===core_BarcodeFormat.UPC_E||f===core_BarcodeFormat.EAN_13||f===core_BarcodeFormat.EAN_8||f===core_BarcodeFormat.CODABAR||f===core_BarcodeFormat.CODE_39||f===core_BarcodeFormat.CODE_93||f===core_BarcodeFormat.CODE_128||f===core_BarcodeFormat.ITF||f===core_BarcodeFormat.RSS_14||f===core_BarcodeFormat.RSS_EXPANDED});addOneDReader&&!tryHarder&&readers.push(new oned_MultiFormatOneDReader(hints)),formats.includes(core_BarcodeFormat.QR_CODE)&&readers.push(new qrcode_QRCodeReader),formats.includes(core_BarcodeFormat.DATA_MATRIX)&&readers.push(new datamatrix_DataMatrixReader),formats.includes(core_BarcodeFormat.AZTEC)&&readers.push(new aztec_AztecReader),formats.includes(core_BarcodeFormat.PDF_417)&&readers.push(new pdf417_PDF417Reader),addOneDReader&&tryHarder&&readers.push(new oned_MultiFormatOneDReader(hints))}0===readers.length&&(tryHarder||readers.push(new oned_MultiFormatOneDReader(hints)),readers.push(new qrcode_QRCodeReader),readers.push(new datamatrix_DataMatrixReader),readers.push(new aztec_AztecReader),readers.push(new pdf417_PDF417Reader),tryHarder&&readers.push(new oned_MultiFormatOneDReader(hints))),this.readers=readers},MultiFormatReader.prototype.reset=function(){var e_1,_a;if(null!==this.readers)try{for(var _b=MultiFormatReader_values(this.readers),_c=_b.next();!_c.done;_c=_b.next()){_c.value.reset()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},MultiFormatReader.prototype.decodeInternal=function(image){var e_2,_a;if(null===this.readers)throw new core_ReaderException("No readers where selected, nothing can be read.");try{for(var _b=MultiFormatReader_values(this.readers),_c=_b.next();!_c.done;_c=_b.next()){var reader=_c.value;try{return reader.decode(image,this.hints)}catch(ex){if(ex instanceof core_ReaderException)continue}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}throw new core_NotFoundException("No MultiFormat Readers were able to detect the code.")},MultiFormatReader}();const core_MultiFormatReader=MultiFormatReader;var EncodeHintType,BrowserMultiFormatReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),BrowserPDF417Reader_extends=(function(_super){function BrowserMultiFormatReader(hints,timeBetweenScansMillis){void 0===hints&&(hints=null),void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500);var reader=new core_MultiFormatReader;return reader.setHints(hints),_super.call(this,reader,timeBetweenScansMillis)||this}BrowserMultiFormatReader_extends(BrowserMultiFormatReader,_super),BrowserMultiFormatReader.prototype.decodeBitmap=function(binaryBitmap){return this.reader.decodeWithState(binaryBitmap)}}(BrowserCodeReader),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),BrowserQRCodeReader_extends=(function(_super){function BrowserPDF417Reader(timeBetweenScansMillis){return void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500),_super.call(this,new pdf417_PDF417Reader,timeBetweenScansMillis)||this}BrowserPDF417Reader_extends(BrowserPDF417Reader,_super)}(BrowserCodeReader),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}());!function(_super){function BrowserQRCodeReader(timeBetweenScansMillis){return void 0===timeBetweenScansMillis&&(timeBetweenScansMillis=500),_super.call(this,new qrcode_QRCodeReader,timeBetweenScansMillis)||this}BrowserQRCodeReader_extends(BrowserQRCodeReader,_super)}(BrowserCodeReader);!function(EncodeHintType){EncodeHintType[EncodeHintType.ERROR_CORRECTION=0]="ERROR_CORRECTION",EncodeHintType[EncodeHintType.CHARACTER_SET=1]="CHARACTER_SET",EncodeHintType[EncodeHintType.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",EncodeHintType[EncodeHintType.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",EncodeHintType[EncodeHintType.MIN_SIZE=4]="MIN_SIZE",EncodeHintType[EncodeHintType.MAX_SIZE=5]="MAX_SIZE",EncodeHintType[EncodeHintType.MARGIN=6]="MARGIN",EncodeHintType[EncodeHintType.PDF417_COMPACT=7]="PDF417_COMPACT",EncodeHintType[EncodeHintType.PDF417_COMPACTION=8]="PDF417_COMPACTION",EncodeHintType[EncodeHintType.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",EncodeHintType[EncodeHintType.AZTEC_LAYERS=10]="AZTEC_LAYERS",EncodeHintType[EncodeHintType.QR_VERSION=11]="QR_VERSION",EncodeHintType[EncodeHintType.GS1_FORMAT=12]="GS1_FORMAT",EncodeHintType[EncodeHintType.FORCE_C40=13]="FORCE_C40"}(EncodeHintType||(EncodeHintType={}));const core_EncodeHintType=EncodeHintType;const reedsolomon_ReedSolomonEncoder=function(){function ReedSolomonEncoder(field){this.field=field,this.cachedGenerators=[],this.cachedGenerators.push(new reedsolomon_GenericGFPoly(field,Int32Array.from([1])))}return ReedSolomonEncoder.prototype.buildGenerator=function(degree){var cachedGenerators=this.cachedGenerators;if(degree>=cachedGenerators.length)for(var lastGenerator=cachedGenerators[cachedGenerators.length-1],field=this.field,d=cachedGenerators.length;d<=degree;d++){var nextGenerator=lastGenerator.multiply(new reedsolomon_GenericGFPoly(field,Int32Array.from([1,field.exp(d-1+field.getGeneratorBase())])));cachedGenerators.push(nextGenerator),lastGenerator=nextGenerator}return cachedGenerators[degree]},ReedSolomonEncoder.prototype.encode=function(toEncode,ecBytes){if(0===ecBytes)throw new core_IllegalArgumentException("No error correction bytes");var dataBytes=toEncode.length-ecBytes;if(dataBytes<=0)throw new core_IllegalArgumentException("No data bytes provided");var generator=this.buildGenerator(ecBytes),infoCoefficients=new Int32Array(dataBytes);util_System.arraycopy(toEncode,0,infoCoefficients,0,dataBytes);for(var info=new reedsolomon_GenericGFPoly(this.field,infoCoefficients),coefficients=(info=info.multiplyByMonomial(ecBytes,1)).divide(generator)[1].getCoefficients(),numZeroCoefficients=ecBytes-coefficients.length,i=0;i<numZeroCoefficients;i++)toEncode[dataBytes+i]=0;util_System.arraycopy(coefficients,0,toEncode,dataBytes+numZeroCoefficients,coefficients.length)},ReedSolomonEncoder}();const encoder_MaskUtil=function(){function MaskUtil(){}return MaskUtil.applyMaskPenaltyRule1=function(matrix){return MaskUtil.applyMaskPenaltyRule1Internal(matrix,!0)+MaskUtil.applyMaskPenaltyRule1Internal(matrix,!1)},MaskUtil.applyMaskPenaltyRule2=function(matrix){for(var penalty=0,array=matrix.getArray(),width=matrix.getWidth(),height=matrix.getHeight(),y=0;y<height-1;y++)for(var arrayY=array[y],x=0;x<width-1;x++){var value=arrayY[x];value===arrayY[x+1]&&value===array[y+1][x]&&value===array[y+1][x+1]&&penalty++}return MaskUtil.N2*penalty},MaskUtil.applyMaskPenaltyRule3=function(matrix){for(var numPenalties=0,array=matrix.getArray(),width=matrix.getWidth(),height=matrix.getHeight(),y=0;y<height;y++)for(var x=0;x<width;x++){var arrayY=array[y];x+6<width&&1===arrayY[x]&&0===arrayY[x+1]&&1===arrayY[x+2]&&1===arrayY[x+3]&&1===arrayY[x+4]&&0===arrayY[x+5]&&1===arrayY[x+6]&&(MaskUtil.isWhiteHorizontal(arrayY,x-4,x)||MaskUtil.isWhiteHorizontal(arrayY,x+7,x+11))&&numPenalties++,y+6<height&&1===array[y][x]&&0===array[y+1][x]&&1===array[y+2][x]&&1===array[y+3][x]&&1===array[y+4][x]&&0===array[y+5][x]&&1===array[y+6][x]&&(MaskUtil.isWhiteVertical(array,x,y-4,y)||MaskUtil.isWhiteVertical(array,x,y+7,y+11))&&numPenalties++}return numPenalties*MaskUtil.N3},MaskUtil.isWhiteHorizontal=function(rowArray,from,to){from=Math.max(from,0),to=Math.min(to,rowArray.length);for(var i=from;i<to;i++)if(1===rowArray[i])return!1;return!0},MaskUtil.isWhiteVertical=function(array,col,from,to){from=Math.max(from,0),to=Math.min(to,array.length);for(var i=from;i<to;i++)if(1===array[i][col])return!1;return!0},MaskUtil.applyMaskPenaltyRule4=function(matrix){for(var numDarkCells=0,array=matrix.getArray(),width=matrix.getWidth(),height=matrix.getHeight(),y=0;y<height;y++)for(var arrayY=array[y],x=0;x<width;x++)1===arrayY[x]&&numDarkCells++;var numTotalCells=matrix.getHeight()*matrix.getWidth();return Math.floor(10*Math.abs(2*numDarkCells-numTotalCells)/numTotalCells)*MaskUtil.N4},MaskUtil.getDataMaskBit=function(maskPattern,x,y){var intermediate,temp;switch(maskPattern){case 0:intermediate=y+x&1;break;case 1:intermediate=1&y;break;case 2:intermediate=x%3;break;case 3:intermediate=(y+x)%3;break;case 4:intermediate=Math.floor(y/2)+Math.floor(x/3)&1;break;case 5:intermediate=(1&(temp=y*x))+temp%3;break;case 6:intermediate=(1&(temp=y*x))+temp%3&1;break;case 7:intermediate=(temp=y*x)%3+(y+x&1)&1;break;default:throw new core_IllegalArgumentException("Invalid mask pattern: "+maskPattern)}return 0===intermediate},MaskUtil.applyMaskPenaltyRule1Internal=function(matrix,isHorizontal){for(var penalty=0,iLimit=isHorizontal?matrix.getHeight():matrix.getWidth(),jLimit=isHorizontal?matrix.getWidth():matrix.getHeight(),array=matrix.getArray(),i=0;i<iLimit;i++){for(var numSameBitCells=0,prevBit=-1,j=0;j<jLimit;j++){var bit=isHorizontal?array[i][j]:array[j][i];bit===prevBit?numSameBitCells++:(numSameBitCells>=5&&(penalty+=MaskUtil.N1+(numSameBitCells-5)),numSameBitCells=1,prevBit=bit)}numSameBitCells>=5&&(penalty+=MaskUtil.N1+(numSameBitCells-5))}return penalty},MaskUtil.N1=3,MaskUtil.N2=3,MaskUtil.N3=40,MaskUtil.N4=10,MaskUtil}();var ByteMatrix_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ByteMatrix=function(){function ByteMatrix(width,height){this.width=width,this.height=height;for(var bytes=new Array(height),i=0;i!==height;i++)bytes[i]=new Uint8Array(width);this.bytes=bytes}return ByteMatrix.prototype.getHeight=function(){return this.height},ByteMatrix.prototype.getWidth=function(){return this.width},ByteMatrix.prototype.get=function(x,y){return this.bytes[y][x]},ByteMatrix.prototype.getArray=function(){return this.bytes},ByteMatrix.prototype.setNumber=function(x,y,value){this.bytes[y][x]=value},ByteMatrix.prototype.setBoolean=function(x,y,value){this.bytes[y][x]=value?1:0},ByteMatrix.prototype.clear=function(value){var e_1,_a;try{for(var _b=ByteMatrix_values(this.bytes),_c=_b.next();!_c.done;_c=_b.next()){var aByte=_c.value;util_Arrays.fill(aByte,value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},ByteMatrix.prototype.equals=function(o){if(!(o instanceof ByteMatrix))return!1;var other=o;if(this.width!==other.width)return!1;if(this.height!==other.height)return!1;for(var y=0,height=this.height;y<height;++y)for(var bytesY=this.bytes[y],otherBytesY=other.bytes[y],x=0,width=this.width;x<width;++x)if(bytesY[x]!==otherBytesY[x])return!1;return!0},ByteMatrix.prototype.toString=function(){for(var result=new util_StringBuilder,y=0,height=this.height;y<height;++y){for(var bytesY=this.bytes[y],x=0,width=this.width;x<width;++x)switch(bytesY[x]){case 0:result.append(" 0");break;case 1:result.append(" 1");break;default:result.append("  ")}result.append("\n")}return result.toString()},ByteMatrix}();const encoder_ByteMatrix=ByteMatrix;const encoder_QRCode=function(){function QRCode(){this.maskPattern=-1}return QRCode.prototype.getMode=function(){return this.mode},QRCode.prototype.getECLevel=function(){return this.ecLevel},QRCode.prototype.getVersion=function(){return this.version},QRCode.prototype.getMaskPattern=function(){return this.maskPattern},QRCode.prototype.getMatrix=function(){return this.matrix},QRCode.prototype.toString=function(){var result=new util_StringBuilder;return result.append("<<\n"),result.append(" mode: "),result.append(this.mode?this.mode.toString():"null"),result.append("\n ecLevel: "),result.append(this.ecLevel?this.ecLevel.toString():"null"),result.append("\n version: "),result.append(this.version?this.version.toString():"null"),result.append("\n maskPattern: "),result.append(this.maskPattern.toString()),this.matrix?(result.append("\n matrix:\n"),result.append(this.matrix.toString())):result.append("\n matrix: null\n"),result.append(">>\n"),result.toString()},QRCode.prototype.setMode=function(value){this.mode=value},QRCode.prototype.setECLevel=function(value){this.ecLevel=value},QRCode.prototype.setVersion=function(version){this.version=version},QRCode.prototype.setMaskPattern=function(value){this.maskPattern=value},QRCode.prototype.setMatrix=function(value){this.matrix=value},QRCode.isValidMaskPattern=function(maskPattern){return maskPattern>=0&&maskPattern<QRCode.NUM_MASK_PATTERNS},QRCode.NUM_MASK_PATTERNS=8,QRCode}();var WriterException_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const core_WriterException=function(_super){function WriterException(){return null!==_super&&_super.apply(this,arguments)||this}return WriterException_extends(WriterException,_super),WriterException.kind="WriterException",WriterException}(core_Exception);const encoder_MatrixUtil=function(){function MatrixUtil(){}return MatrixUtil.clearMatrix=function(matrix){matrix.clear(255)},MatrixUtil.buildMatrix=function(dataBits,ecLevel,version,maskPattern,matrix){MatrixUtil.clearMatrix(matrix),MatrixUtil.embedBasicPatterns(version,matrix),MatrixUtil.embedTypeInfo(ecLevel,maskPattern,matrix),MatrixUtil.maybeEmbedVersionInfo(version,matrix),MatrixUtil.embedDataBits(dataBits,maskPattern,matrix)},MatrixUtil.embedBasicPatterns=function(version,matrix){MatrixUtil.embedPositionDetectionPatternsAndSeparators(matrix),MatrixUtil.embedDarkDotAtLeftBottomCorner(matrix),MatrixUtil.maybeEmbedPositionAdjustmentPatterns(version,matrix),MatrixUtil.embedTimingPatterns(matrix)},MatrixUtil.embedTypeInfo=function(ecLevel,maskPattern,matrix){var typeInfoBits=new common_BitArray;MatrixUtil.makeTypeInfoBits(ecLevel,maskPattern,typeInfoBits);for(var i=0,size=typeInfoBits.getSize();i<size;++i){var bit=typeInfoBits.get(typeInfoBits.getSize()-1-i),coordinates=MatrixUtil.TYPE_INFO_COORDINATES[i],x1=coordinates[0],y1=coordinates[1];if(matrix.setBoolean(x1,y1,bit),i<8){var x2=matrix.getWidth()-i-1,y2=8;matrix.setBoolean(x2,y2,bit)}else{x2=8,y2=matrix.getHeight()-7+(i-8);matrix.setBoolean(x2,y2,bit)}}},MatrixUtil.maybeEmbedVersionInfo=function(version,matrix){if(!(version.getVersionNumber()<7)){var versionInfoBits=new common_BitArray;MatrixUtil.makeVersionInfoBits(version,versionInfoBits);for(var bitIndex=17,i=0;i<6;++i)for(var j=0;j<3;++j){var bit=versionInfoBits.get(bitIndex);bitIndex--,matrix.setBoolean(i,matrix.getHeight()-11+j,bit),matrix.setBoolean(matrix.getHeight()-11+j,i,bit)}}},MatrixUtil.embedDataBits=function(dataBits,maskPattern,matrix){for(var bitIndex=0,direction=-1,x=matrix.getWidth()-1,y=matrix.getHeight()-1;x>0;){for(6===x&&(x-=1);y>=0&&y<matrix.getHeight();){for(var i=0;i<2;++i){var xx=x-i;if(MatrixUtil.isEmpty(matrix.get(xx,y))){var bit=void 0;bitIndex<dataBits.getSize()?(bit=dataBits.get(bitIndex),++bitIndex):bit=!1,255!==maskPattern&&encoder_MaskUtil.getDataMaskBit(maskPattern,xx,y)&&(bit=!bit),matrix.setBoolean(xx,y,bit)}}y+=direction}y+=direction=-direction,x-=2}if(bitIndex!==dataBits.getSize())throw new core_WriterException("Not all bits consumed: "+bitIndex+"/"+dataBits.getSize())},MatrixUtil.findMSBSet=function(value){return 32-util_Integer.numberOfLeadingZeros(value)},MatrixUtil.calculateBCHCode=function(value,poly){if(0===poly)throw new core_IllegalArgumentException("0 polynomial");var msbSetInPoly=MatrixUtil.findMSBSet(poly);for(value<<=msbSetInPoly-1;MatrixUtil.findMSBSet(value)>=msbSetInPoly;)value^=poly<<MatrixUtil.findMSBSet(value)-msbSetInPoly;return value},MatrixUtil.makeTypeInfoBits=function(ecLevel,maskPattern,bits){if(!encoder_QRCode.isValidMaskPattern(maskPattern))throw new core_WriterException("Invalid mask pattern");var typeInfo=ecLevel.getBits()<<3|maskPattern;bits.appendBits(typeInfo,5);var bchCode=MatrixUtil.calculateBCHCode(typeInfo,MatrixUtil.TYPE_INFO_POLY);bits.appendBits(bchCode,10);var maskBits=new common_BitArray;if(maskBits.appendBits(MatrixUtil.TYPE_INFO_MASK_PATTERN,15),bits.xor(maskBits),15!==bits.getSize())throw new core_WriterException("should not happen but we got: "+bits.getSize())},MatrixUtil.makeVersionInfoBits=function(version,bits){bits.appendBits(version.getVersionNumber(),6);var bchCode=MatrixUtil.calculateBCHCode(version.getVersionNumber(),MatrixUtil.VERSION_INFO_POLY);if(bits.appendBits(bchCode,12),18!==bits.getSize())throw new core_WriterException("should not happen but we got: "+bits.getSize())},MatrixUtil.isEmpty=function(value){return 255===value},MatrixUtil.embedTimingPatterns=function(matrix){for(var i=8;i<matrix.getWidth()-8;++i){var bit=(i+1)%2;MatrixUtil.isEmpty(matrix.get(i,6))&&matrix.setNumber(i,6,bit),MatrixUtil.isEmpty(matrix.get(6,i))&&matrix.setNumber(6,i,bit)}},MatrixUtil.embedDarkDotAtLeftBottomCorner=function(matrix){if(0===matrix.get(8,matrix.getHeight()-8))throw new core_WriterException;matrix.setNumber(8,matrix.getHeight()-8,1)},MatrixUtil.embedHorizontalSeparationPattern=function(xStart,yStart,matrix){for(var x=0;x<8;++x){if(!MatrixUtil.isEmpty(matrix.get(xStart+x,yStart)))throw new core_WriterException;matrix.setNumber(xStart+x,yStart,0)}},MatrixUtil.embedVerticalSeparationPattern=function(xStart,yStart,matrix){for(var y=0;y<7;++y){if(!MatrixUtil.isEmpty(matrix.get(xStart,yStart+y)))throw new core_WriterException;matrix.setNumber(xStart,yStart+y,0)}},MatrixUtil.embedPositionAdjustmentPattern=function(xStart,yStart,matrix){for(var y=0;y<5;++y)for(var patternY=MatrixUtil.POSITION_ADJUSTMENT_PATTERN[y],x=0;x<5;++x)matrix.setNumber(xStart+x,yStart+y,patternY[x])},MatrixUtil.embedPositionDetectionPattern=function(xStart,yStart,matrix){for(var y=0;y<7;++y)for(var patternY=MatrixUtil.POSITION_DETECTION_PATTERN[y],x=0;x<7;++x)matrix.setNumber(xStart+x,yStart+y,patternY[x])},MatrixUtil.embedPositionDetectionPatternsAndSeparators=function(matrix){var pdpWidth=MatrixUtil.POSITION_DETECTION_PATTERN[0].length;MatrixUtil.embedPositionDetectionPattern(0,0,matrix),MatrixUtil.embedPositionDetectionPattern(matrix.getWidth()-pdpWidth,0,matrix),MatrixUtil.embedPositionDetectionPattern(0,matrix.getWidth()-pdpWidth,matrix);MatrixUtil.embedHorizontalSeparationPattern(0,7,matrix),MatrixUtil.embedHorizontalSeparationPattern(matrix.getWidth()-8,7,matrix),MatrixUtil.embedHorizontalSeparationPattern(0,matrix.getWidth()-8,matrix);MatrixUtil.embedVerticalSeparationPattern(7,0,matrix),MatrixUtil.embedVerticalSeparationPattern(matrix.getHeight()-7-1,0,matrix),MatrixUtil.embedVerticalSeparationPattern(7,matrix.getHeight()-7,matrix)},MatrixUtil.maybeEmbedPositionAdjustmentPatterns=function(version,matrix){if(!(version.getVersionNumber()<2))for(var index=version.getVersionNumber()-1,coordinates=MatrixUtil.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[index],i=0,length_1=coordinates.length;i!==length_1;i++){var y=coordinates[i];if(y>=0)for(var j=0;j!==length_1;j++){var x=coordinates[j];x>=0&&MatrixUtil.isEmpty(matrix.get(x,y))&&MatrixUtil.embedPositionAdjustmentPattern(x-2,y-2,matrix)}}},MatrixUtil.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),MatrixUtil.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),MatrixUtil.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),MatrixUtil.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),MatrixUtil.VERSION_INFO_POLY=7973,MatrixUtil.TYPE_INFO_POLY=1335,MatrixUtil.TYPE_INFO_MASK_PATTERN=21522,MatrixUtil}();const encoder_BlockPair=function(){function BlockPair(dataBytes,errorCorrectionBytes){this.dataBytes=dataBytes,this.errorCorrectionBytes=errorCorrectionBytes}return BlockPair.prototype.getDataBytes=function(){return this.dataBytes},BlockPair.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},BlockPair}();var Encoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Encoder=function(){function Encoder(){}return Encoder.calculateMaskPenalty=function(matrix){return encoder_MaskUtil.applyMaskPenaltyRule1(matrix)+encoder_MaskUtil.applyMaskPenaltyRule2(matrix)+encoder_MaskUtil.applyMaskPenaltyRule3(matrix)+encoder_MaskUtil.applyMaskPenaltyRule4(matrix)},Encoder.encode=function(content,ecLevel,hints){void 0===hints&&(hints=null);var encoding=Encoder.DEFAULT_BYTE_MODE_ENCODING,hasEncodingHint=null!==hints&&void 0!==hints.get(core_EncodeHintType.CHARACTER_SET);hasEncodingHint&&(encoding=hints.get(core_EncodeHintType.CHARACTER_SET).toString());var mode=this.chooseMode(content,encoding),headerBits=new common_BitArray;if(mode===decoder_Mode.BYTE&&(hasEncodingHint||Encoder.DEFAULT_BYTE_MODE_ENCODING!==encoding)){var eci=common_CharacterSetECI.getCharacterSetECIByName(encoding);void 0!==eci&&this.appendECI(eci,headerBits)}this.appendModeInfo(mode,headerBits);var version,dataBits=new common_BitArray;if(this.appendBytes(content,mode,dataBits,encoding),null!==hints&&void 0!==hints.get(core_EncodeHintType.QR_VERSION)){var versionNumber=Number.parseInt(hints.get(core_EncodeHintType.QR_VERSION).toString(),10);version=qrcode_decoder_Version.getVersionForNumber(versionNumber);var bitsNeeded=this.calculateBitsNeeded(mode,headerBits,dataBits,version);if(!this.willFit(bitsNeeded,version,ecLevel))throw new core_WriterException("Data too big for requested version")}else version=this.recommendVersion(ecLevel,mode,headerBits,dataBits);var headerAndDataBits=new common_BitArray;headerAndDataBits.appendBitArray(headerBits);var numLetters=mode===decoder_Mode.BYTE?dataBits.getSizeInBytes():content.length;this.appendLengthInfo(numLetters,version,mode,headerAndDataBits),headerAndDataBits.appendBitArray(dataBits);var ecBlocks=version.getECBlocksForLevel(ecLevel),numDataBytes=version.getTotalCodewords()-ecBlocks.getTotalECCodewords();this.terminateBits(numDataBytes,headerAndDataBits);var finalBits=this.interleaveWithECBytes(headerAndDataBits,version.getTotalCodewords(),numDataBytes,ecBlocks.getNumBlocks()),qrCode=new encoder_QRCode;qrCode.setECLevel(ecLevel),qrCode.setMode(mode),qrCode.setVersion(version);var dimension=version.getDimensionForVersion(),matrix=new encoder_ByteMatrix(dimension,dimension),maskPattern=this.chooseMaskPattern(finalBits,ecLevel,version,matrix);return qrCode.setMaskPattern(maskPattern),encoder_MatrixUtil.buildMatrix(finalBits,ecLevel,version,maskPattern,matrix),qrCode.setMatrix(matrix),qrCode},Encoder.recommendVersion=function(ecLevel,mode,headerBits,dataBits){var provisionalBitsNeeded=this.calculateBitsNeeded(mode,headerBits,dataBits,qrcode_decoder_Version.getVersionForNumber(1)),provisionalVersion=this.chooseVersion(provisionalBitsNeeded,ecLevel),bitsNeeded=this.calculateBitsNeeded(mode,headerBits,dataBits,provisionalVersion);return this.chooseVersion(bitsNeeded,ecLevel)},Encoder.calculateBitsNeeded=function(mode,headerBits,dataBits,version){return headerBits.getSize()+mode.getCharacterCountBits(version)+dataBits.getSize()},Encoder.getAlphanumericCode=function(code){return code<Encoder.ALPHANUMERIC_TABLE.length?Encoder.ALPHANUMERIC_TABLE[code]:-1},Encoder.chooseMode=function(content,encoding){if(void 0===encoding&&(encoding=null),common_CharacterSetECI.SJIS.getName()===encoding&&this.isOnlyDoubleByteKanji(content))return decoder_Mode.KANJI;for(var hasNumeric=!1,hasAlphanumeric=!1,i=0,length_1=content.length;i<length_1;++i){var c=content.charAt(i);if(Encoder.isDigit(c))hasNumeric=!0;else{if(-1===this.getAlphanumericCode(c.charCodeAt(0)))return decoder_Mode.BYTE;hasAlphanumeric=!0}}return hasAlphanumeric?decoder_Mode.ALPHANUMERIC:hasNumeric?decoder_Mode.NUMERIC:decoder_Mode.BYTE},Encoder.isOnlyDoubleByteKanji=function(content){var bytes;try{bytes=util_StringEncoding.encode(content,common_CharacterSetECI.SJIS)}catch(ignored){return!1}var length=bytes.length;if(length%2!=0)return!1;for(var i=0;i<length;i+=2){var byte1=255&bytes[i];if((byte1<129||byte1>159)&&(byte1<224||byte1>235))return!1}return!0},Encoder.chooseMaskPattern=function(bits,ecLevel,version,matrix){for(var minPenalty=Number.MAX_SAFE_INTEGER,bestMaskPattern=-1,maskPattern=0;maskPattern<encoder_QRCode.NUM_MASK_PATTERNS;maskPattern++){encoder_MatrixUtil.buildMatrix(bits,ecLevel,version,maskPattern,matrix);var penalty=this.calculateMaskPenalty(matrix);penalty<minPenalty&&(minPenalty=penalty,bestMaskPattern=maskPattern)}return bestMaskPattern},Encoder.chooseVersion=function(numInputBits,ecLevel){for(var versionNum=1;versionNum<=40;versionNum++){var version=qrcode_decoder_Version.getVersionForNumber(versionNum);if(Encoder.willFit(numInputBits,version,ecLevel))return version}throw new core_WriterException("Data too big")},Encoder.willFit=function(numInputBits,version,ecLevel){return version.getTotalCodewords()-version.getECBlocksForLevel(ecLevel).getTotalECCodewords()>=(numInputBits+7)/8},Encoder.terminateBits=function(numDataBytes,bits){var capacity=8*numDataBytes;if(bits.getSize()>capacity)throw new core_WriterException("data bits cannot fit in the QR Code"+bits.getSize()+" > "+capacity);for(var i=0;i<4&&bits.getSize()<capacity;++i)bits.appendBit(!1);var numBitsInLastByte=7&bits.getSize();if(numBitsInLastByte>0)for(i=numBitsInLastByte;i<8;i++)bits.appendBit(!1);var numPaddingBytes=numDataBytes-bits.getSizeInBytes();for(i=0;i<numPaddingBytes;++i)bits.appendBits(1&i?17:236,8);if(bits.getSize()!==capacity)throw new core_WriterException("Bits size does not equal capacity")},Encoder.getNumDataBytesAndNumECBytesForBlockID=function(numTotalBytes,numDataBytes,numRSBlocks,blockID,numDataBytesInBlock,numECBytesInBlock){if(blockID>=numRSBlocks)throw new core_WriterException("Block ID too large");var numRsBlocksInGroup2=numTotalBytes%numRSBlocks,numRsBlocksInGroup1=numRSBlocks-numRsBlocksInGroup2,numTotalBytesInGroup1=Math.floor(numTotalBytes/numRSBlocks),numTotalBytesInGroup2=numTotalBytesInGroup1+1,numDataBytesInGroup1=Math.floor(numDataBytes/numRSBlocks),numDataBytesInGroup2=numDataBytesInGroup1+1,numEcBytesInGroup1=numTotalBytesInGroup1-numDataBytesInGroup1,numEcBytesInGroup2=numTotalBytesInGroup2-numDataBytesInGroup2;if(numEcBytesInGroup1!==numEcBytesInGroup2)throw new core_WriterException("EC bytes mismatch");if(numRSBlocks!==numRsBlocksInGroup1+numRsBlocksInGroup2)throw new core_WriterException("RS blocks mismatch");if(numTotalBytes!==(numDataBytesInGroup1+numEcBytesInGroup1)*numRsBlocksInGroup1+(numDataBytesInGroup2+numEcBytesInGroup2)*numRsBlocksInGroup2)throw new core_WriterException("Total bytes mismatch");blockID<numRsBlocksInGroup1?(numDataBytesInBlock[0]=numDataBytesInGroup1,numECBytesInBlock[0]=numEcBytesInGroup1):(numDataBytesInBlock[0]=numDataBytesInGroup2,numECBytesInBlock[0]=numEcBytesInGroup2)},Encoder.interleaveWithECBytes=function(bits,numTotalBytes,numDataBytes,numRSBlocks){var e_1,_a,e_2,_b;if(bits.getSizeInBytes()!==numDataBytes)throw new core_WriterException("Number of bits and data bytes does not match");for(var dataBytesOffset=0,maxNumDataBytes=0,maxNumEcBytes=0,blocks=new Array,i=0;i<numRSBlocks;++i){var numDataBytesInBlock=new Int32Array(1),numEcBytesInBlock=new Int32Array(1);Encoder.getNumDataBytesAndNumECBytesForBlockID(numTotalBytes,numDataBytes,numRSBlocks,i,numDataBytesInBlock,numEcBytesInBlock);var size=numDataBytesInBlock[0],dataBytes=new Uint8Array(size);bits.toBytes(8*dataBytesOffset,dataBytes,0,size);var ecBytes=Encoder.generateECBytes(dataBytes,numEcBytesInBlock[0]);blocks.push(new encoder_BlockPair(dataBytes,ecBytes)),maxNumDataBytes=Math.max(maxNumDataBytes,size),maxNumEcBytes=Math.max(maxNumEcBytes,ecBytes.length),dataBytesOffset+=numDataBytesInBlock[0]}if(numDataBytes!==dataBytesOffset)throw new core_WriterException("Data bytes does not match offset");var result=new common_BitArray;for(i=0;i<maxNumDataBytes;++i)try{for(var blocks_1=(e_1=void 0,Encoder_values(blocks)),blocks_1_1=blocks_1.next();!blocks_1_1.done;blocks_1_1=blocks_1.next()){i<(dataBytes=blocks_1_1.value.getDataBytes()).length&&result.appendBits(dataBytes[i],8)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{blocks_1_1&&!blocks_1_1.done&&(_a=blocks_1.return)&&_a.call(blocks_1)}finally{if(e_1)throw e_1.error}}for(i=0;i<maxNumEcBytes;++i)try{for(var blocks_2=(e_2=void 0,Encoder_values(blocks)),blocks_2_1=blocks_2.next();!blocks_2_1.done;blocks_2_1=blocks_2.next()){i<(ecBytes=blocks_2_1.value.getErrorCorrectionBytes()).length&&result.appendBits(ecBytes[i],8)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{blocks_2_1&&!blocks_2_1.done&&(_b=blocks_2.return)&&_b.call(blocks_2)}finally{if(e_2)throw e_2.error}}if(numTotalBytes!==result.getSizeInBytes())throw new core_WriterException("Interleaving error: "+numTotalBytes+" and "+result.getSizeInBytes()+" differ.");return result},Encoder.generateECBytes=function(dataBytes,numEcBytesInBlock){for(var numDataBytes=dataBytes.length,toEncode=new Int32Array(numDataBytes+numEcBytesInBlock),i=0;i<numDataBytes;i++)toEncode[i]=255&dataBytes[i];new reedsolomon_ReedSolomonEncoder(reedsolomon_GenericGF.QR_CODE_FIELD_256).encode(toEncode,numEcBytesInBlock);var ecBytes=new Uint8Array(numEcBytesInBlock);for(i=0;i<numEcBytesInBlock;i++)ecBytes[i]=toEncode[numDataBytes+i];return ecBytes},Encoder.appendModeInfo=function(mode,bits){bits.appendBits(mode.getBits(),4)},Encoder.appendLengthInfo=function(numLetters,version,mode,bits){var numBits=mode.getCharacterCountBits(version);if(numLetters>=1<<numBits)throw new core_WriterException(numLetters+" is bigger than "+((1<<numBits)-1));bits.appendBits(numLetters,numBits)},Encoder.appendBytes=function(content,mode,bits,encoding){switch(mode){case decoder_Mode.NUMERIC:Encoder.appendNumericBytes(content,bits);break;case decoder_Mode.ALPHANUMERIC:Encoder.appendAlphanumericBytes(content,bits);break;case decoder_Mode.BYTE:Encoder.append8BitBytes(content,bits,encoding);break;case decoder_Mode.KANJI:Encoder.appendKanjiBytes(content,bits);break;default:throw new core_WriterException("Invalid mode: "+mode)}},Encoder.getDigit=function(singleCharacter){return singleCharacter.charCodeAt(0)-48},Encoder.isDigit=function(singleCharacter){var cn=Encoder.getDigit(singleCharacter);return cn>=0&&cn<=9},Encoder.appendNumericBytes=function(content,bits){for(var length=content.length,i=0;i<length;){var num1=Encoder.getDigit(content.charAt(i));if(i+2<length){var num2=Encoder.getDigit(content.charAt(i+1)),num3=Encoder.getDigit(content.charAt(i+2));bits.appendBits(100*num1+10*num2+num3,10),i+=3}else if(i+1<length){num2=Encoder.getDigit(content.charAt(i+1));bits.appendBits(10*num1+num2,7),i+=2}else bits.appendBits(num1,4),i++}},Encoder.appendAlphanumericBytes=function(content,bits){for(var length=content.length,i=0;i<length;){var code1=Encoder.getAlphanumericCode(content.charCodeAt(i));if(-1===code1)throw new core_WriterException;if(i+1<length){var code2=Encoder.getAlphanumericCode(content.charCodeAt(i+1));if(-1===code2)throw new core_WriterException;bits.appendBits(45*code1+code2,11),i+=2}else bits.appendBits(code1,6),i++}},Encoder.append8BitBytes=function(content,bits,encoding){var bytes;try{bytes=util_StringEncoding.encode(content,encoding)}catch(uee){throw new core_WriterException(uee)}for(var i=0,length_2=bytes.length;i!==length_2;i++){var b=bytes[i];bits.appendBits(b,8)}},Encoder.appendKanjiBytes=function(content,bits){var bytes;try{bytes=util_StringEncoding.encode(content,common_CharacterSetECI.SJIS)}catch(uee){throw new core_WriterException(uee)}for(var length=bytes.length,i=0;i<length;i+=2){var code=(255&bytes[i])<<8&4294967295|255&bytes[i+1],subtracted=-1;if(code>=33088&&code<=40956?subtracted=code-33088:code>=57408&&code<=60351&&(subtracted=code-49472),-1===subtracted)throw new core_WriterException("Invalid byte sequence");var encoded=192*(subtracted>>8)+(255&subtracted);bits.appendBits(encoded,13)}},Encoder.appendECI=function(eci,bits){bits.appendBits(decoder_Mode.ECI.getBits(),4),bits.appendBits(eci.getValue(),8)},Encoder.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Encoder.DEFAULT_BYTE_MODE_ENCODING=common_CharacterSetECI.UTF8.getName(),Encoder}();const encoder_Encoder=Encoder;!function(){function BrowserQRCodeSvgWriter(){}BrowserQRCodeSvgWriter.prototype.write=function(contents,width,height,hints){if(void 0===hints&&(hints=null),0===contents.length)throw new core_IllegalArgumentException("Found empty contents");if(width<0||height<0)throw new core_IllegalArgumentException("Requested dimensions are too small: "+width+"x"+height);var errorCorrectionLevel=decoder_ErrorCorrectionLevel.L,quietZone=BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;null!==hints&&(void 0!==hints.get(core_EncodeHintType.ERROR_CORRECTION)&&(errorCorrectionLevel=decoder_ErrorCorrectionLevel.fromString(hints.get(core_EncodeHintType.ERROR_CORRECTION).toString())),void 0!==hints.get(core_EncodeHintType.MARGIN)&&(quietZone=Number.parseInt(hints.get(core_EncodeHintType.MARGIN).toString(),10)));var code=encoder_Encoder.encode(contents,errorCorrectionLevel,hints);return this.renderResult(code,width,height,quietZone)},BrowserQRCodeSvgWriter.prototype.writeToDom=function(containerElement,contents,width,height,hints){void 0===hints&&(hints=null),"string"==typeof containerElement&&(containerElement=document.querySelector(containerElement));var svgElement=this.write(contents,width,height,hints);containerElement&&containerElement.appendChild(svgElement)},BrowserQRCodeSvgWriter.prototype.renderResult=function(code,width,height,quietZone){var input=code.getMatrix();if(null===input)throw new core_IllegalStateException;for(var inputWidth=input.getWidth(),inputHeight=input.getHeight(),qrWidth=inputWidth+2*quietZone,qrHeight=inputHeight+2*quietZone,outputWidth=Math.max(width,qrWidth),outputHeight=Math.max(height,qrHeight),multiple=Math.min(Math.floor(outputWidth/qrWidth),Math.floor(outputHeight/qrHeight)),leftPadding=Math.floor((outputWidth-inputWidth*multiple)/2),topPadding=Math.floor((outputHeight-inputHeight*multiple)/2),svgElement=this.createSVGElement(outputWidth,outputHeight),inputY=0,outputY=topPadding;inputY<inputHeight;inputY++,outputY+=multiple)for(var inputX=0,outputX=leftPadding;inputX<inputWidth;inputX++,outputX+=multiple)if(1===input.get(inputX,inputY)){var svgRectElement=this.createSvgRectElement(outputX,outputY,multiple,multiple);svgElement.appendChild(svgRectElement)}return svgElement},BrowserQRCodeSvgWriter.prototype.createSVGElement=function(w,h){var svgElement=document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS,"svg");return svgElement.setAttributeNS(null,"height",w.toString()),svgElement.setAttributeNS(null,"width",h.toString()),svgElement},BrowserQRCodeSvgWriter.prototype.createSvgRectElement=function(x,y,w,h){var rect=document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS,"rect");return rect.setAttributeNS(null,"x",x.toString()),rect.setAttributeNS(null,"y",y.toString()),rect.setAttributeNS(null,"height",w.toString()),rect.setAttributeNS(null,"width",h.toString()),rect.setAttributeNS(null,"fill","#000000"),rect},BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE=4,BrowserQRCodeSvgWriter.SVG_NS="http://www.w3.org/2000/svg"}();const qrcode_QRCodeWriter=function(){function QRCodeWriter(){}return QRCodeWriter.prototype.encode=function(contents,format,width,height,hints){if(0===contents.length)throw new core_IllegalArgumentException("Found empty contents");if(format!==core_BarcodeFormat.QR_CODE)throw new core_IllegalArgumentException("Can only encode QR_CODE, but got "+format);if(width<0||height<0)throw new core_IllegalArgumentException("Requested dimensions are too small: "+width+"x"+height);var errorCorrectionLevel=decoder_ErrorCorrectionLevel.L,quietZone=QRCodeWriter.QUIET_ZONE_SIZE;null!==hints&&(void 0!==hints.get(core_EncodeHintType.ERROR_CORRECTION)&&(errorCorrectionLevel=decoder_ErrorCorrectionLevel.fromString(hints.get(core_EncodeHintType.ERROR_CORRECTION).toString())),void 0!==hints.get(core_EncodeHintType.MARGIN)&&(quietZone=Number.parseInt(hints.get(core_EncodeHintType.MARGIN).toString(),10)));var code=encoder_Encoder.encode(contents,errorCorrectionLevel,hints);return QRCodeWriter.renderResult(code,width,height,quietZone)},QRCodeWriter.renderResult=function(code,width,height,quietZone){var input=code.getMatrix();if(null===input)throw new core_IllegalStateException;for(var inputWidth=input.getWidth(),inputHeight=input.getHeight(),qrWidth=inputWidth+2*quietZone,qrHeight=inputHeight+2*quietZone,outputWidth=Math.max(width,qrWidth),outputHeight=Math.max(height,qrHeight),multiple=Math.min(Math.floor(outputWidth/qrWidth),Math.floor(outputHeight/qrHeight)),leftPadding=Math.floor((outputWidth-inputWidth*multiple)/2),topPadding=Math.floor((outputHeight-inputHeight*multiple)/2),output=new common_BitMatrix(outputWidth,outputHeight),inputY=0,outputY=topPadding;inputY<inputHeight;inputY++,outputY+=multiple)for(var inputX=0,outputX=leftPadding;inputX<inputWidth;inputX++,outputX+=multiple)1===input.get(inputX,inputY)&&output.setRegion(outputX,outputY,multiple,multiple);return output},QRCodeWriter.QUIET_ZONE_SIZE=4,QRCodeWriter}();!function(){function MultiFormatWriter(){}MultiFormatWriter.prototype.encode=function(contents,format,width,height,hints){if(format!==core_BarcodeFormat.QR_CODE)throw new core_IllegalArgumentException("No encoder available for format "+format);return(new qrcode_QRCodeWriter).encode(contents,format,width,height,hints)}}();var PlanarYUVLuminanceSource_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(_super){function PlanarYUVLuminanceSource(yuvData,dataWidth,dataHeight,left,top,width,height,reverseHorizontal){var _this=_super.call(this,width,height)||this;if(_this.yuvData=yuvData,_this.dataWidth=dataWidth,_this.dataHeight=dataHeight,_this.left=left,_this.top=top,left+width>dataWidth||top+height>dataHeight)throw new core_IllegalArgumentException("Crop rectangle does not fit within image data.");return reverseHorizontal&&_this.reverseHorizontal(width,height),_this}PlanarYUVLuminanceSource_extends(PlanarYUVLuminanceSource,_super),PlanarYUVLuminanceSource.prototype.getRow=function(y,row){if(y<0||y>=this.getHeight())throw new core_IllegalArgumentException("Requested row is outside the image: "+y);var width=this.getWidth();(null==row||row.length<width)&&(row=new Uint8ClampedArray(width));var offset=(y+this.top)*this.dataWidth+this.left;return util_System.arraycopy(this.yuvData,offset,row,0,width),row},PlanarYUVLuminanceSource.prototype.getMatrix=function(){var width=this.getWidth(),height=this.getHeight();if(width===this.dataWidth&&height===this.dataHeight)return this.yuvData;var area=width*height,matrix=new Uint8ClampedArray(area),inputOffset=this.top*this.dataWidth+this.left;if(width===this.dataWidth)return util_System.arraycopy(this.yuvData,inputOffset,matrix,0,area),matrix;for(var y=0;y<height;y++){var outputOffset=y*width;util_System.arraycopy(this.yuvData,inputOffset,matrix,outputOffset,width),inputOffset+=this.dataWidth}return matrix},PlanarYUVLuminanceSource.prototype.isCropSupported=function(){return!0},PlanarYUVLuminanceSource.prototype.crop=function(left,top,width,height){return new PlanarYUVLuminanceSource(this.yuvData,this.dataWidth,this.dataHeight,this.left+left,this.top+top,width,height,!1)},PlanarYUVLuminanceSource.prototype.renderThumbnail=function(){for(var width=this.getWidth()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR,height=this.getHeight()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR,pixels=new Int32Array(width*height),yuv=this.yuvData,inputOffset=this.top*this.dataWidth+this.left,y=0;y<height;y++){for(var outputOffset=y*width,x=0;x<width;x++){var grey=255&yuv[inputOffset+x*PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR];pixels[outputOffset+x]=4278190080|65793*grey}inputOffset+=this.dataWidth*PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR}return pixels},PlanarYUVLuminanceSource.prototype.getThumbnailWidth=function(){return this.getWidth()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR},PlanarYUVLuminanceSource.prototype.getThumbnailHeight=function(){return this.getHeight()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR},PlanarYUVLuminanceSource.prototype.reverseHorizontal=function(width,height){for(var yuvData=this.yuvData,y=0,rowStart=this.top*this.dataWidth+this.left;y<height;y++,rowStart+=this.dataWidth)for(var middle=rowStart+width/2,x1=rowStart,x2=rowStart+width-1;x1<middle;x1++,x2--){var temp=yuvData[x1];yuvData[x1]=yuvData[x2],yuvData[x2]=temp}},PlanarYUVLuminanceSource.prototype.invert=function(){return new core_InvertedLuminanceSource(this)},PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR=2}(core_LuminanceSource);var RGBLuminanceSource_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(_super){function RGBLuminanceSource(luminances,width,height,dataWidth,dataHeight,left,top){var _this=_super.call(this,width,height)||this;if(_this.dataWidth=dataWidth,_this.dataHeight=dataHeight,_this.left=left,_this.top=top,4===luminances.BYTES_PER_ELEMENT){for(var size=width*height,luminancesUint8Array=new Uint8ClampedArray(size),offset=0;offset<size;offset++){var pixel=luminances[offset],r=pixel>>16&255,g2=pixel>>7&510,b=255&pixel;luminancesUint8Array[offset]=(r+g2+b)/4&255}_this.luminances=luminancesUint8Array}else _this.luminances=luminances;if(void 0===dataWidth&&(_this.dataWidth=width),void 0===dataHeight&&(_this.dataHeight=height),void 0===left&&(_this.left=0),void 0===top&&(_this.top=0),_this.left+width>_this.dataWidth||_this.top+height>_this.dataHeight)throw new core_IllegalArgumentException("Crop rectangle does not fit within image data.");return _this}RGBLuminanceSource_extends(RGBLuminanceSource,_super),RGBLuminanceSource.prototype.getRow=function(y,row){if(y<0||y>=this.getHeight())throw new core_IllegalArgumentException("Requested row is outside the image: "+y);var width=this.getWidth();(null==row||row.length<width)&&(row=new Uint8ClampedArray(width));var offset=(y+this.top)*this.dataWidth+this.left;return util_System.arraycopy(this.luminances,offset,row,0,width),row},RGBLuminanceSource.prototype.getMatrix=function(){var width=this.getWidth(),height=this.getHeight();if(width===this.dataWidth&&height===this.dataHeight)return this.luminances;var area=width*height,matrix=new Uint8ClampedArray(area),inputOffset=this.top*this.dataWidth+this.left;if(width===this.dataWidth)return util_System.arraycopy(this.luminances,inputOffset,matrix,0,area),matrix;for(var y=0;y<height;y++){var outputOffset=y*width;util_System.arraycopy(this.luminances,inputOffset,matrix,outputOffset,width),inputOffset+=this.dataWidth}return matrix},RGBLuminanceSource.prototype.isCropSupported=function(){return!0},RGBLuminanceSource.prototype.crop=function(left,top,width,height){return new RGBLuminanceSource(this.luminances,width,height,this.dataWidth,this.dataHeight,this.left+left,this.top+top)},RGBLuminanceSource.prototype.invert=function(){return new core_InvertedLuminanceSource(this)}}(core_LuminanceSource);var Charset_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const util_Charset=function(_super){function Charset(){return null!==_super&&_super.apply(this,arguments)||this}return Charset_extends(Charset,_super),Charset.forName=function(name){return this.getCharacterSetECIByName(name)},Charset}(common_CharacterSetECI);const util_StandardCharsets=function(){function StandardCharsets(){}return StandardCharsets.ISO_8859_1=common_CharacterSetECI.ISO8859_1,StandardCharsets}();const encoder_DefaultPlacement=function(){function DefaultPlacement(codewords,numcols,numrows){this.codewords=codewords,this.numcols=numcols,this.numrows=numrows,this.bits=new Uint8Array(numcols*numrows),util_Arrays.fill(this.bits,2)}return DefaultPlacement.prototype.getNumrows=function(){return this.numrows},DefaultPlacement.prototype.getNumcols=function(){return this.numcols},DefaultPlacement.prototype.getBits=function(){return this.bits},DefaultPlacement.prototype.getBit=function(col,row){return 1===this.bits[row*this.numcols+col]},DefaultPlacement.prototype.setBit=function(col,row,bit){this.bits[row*this.numcols+col]=bit?1:0},DefaultPlacement.prototype.noBit=function(col,row){return 2===this.bits[row*this.numcols+col]},DefaultPlacement.prototype.place=function(){var pos=0,row=4,col=0;do{row===this.numrows&&0===col&&this.corner1(pos++),row===this.numrows-2&&0===col&&this.numcols%4!=0&&this.corner2(pos++),row===this.numrows-2&&0===col&&this.numcols%8==4&&this.corner3(pos++),row===this.numrows+4&&2===col&&this.numcols%8==0&&this.corner4(pos++);do{row<this.numrows&&col>=0&&this.noBit(col,row)&&this.utah(row,col,pos++),row-=2,col+=2}while(row>=0&&col<this.numcols);row++,col+=3;do{row>=0&&col<this.numcols&&this.noBit(col,row)&&this.utah(row,col,pos++),row+=2,col-=2}while(row<this.numrows&&col>=0);row+=3,col++}while(row<this.numrows||col<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},DefaultPlacement.prototype.module=function(row,col,pos,bit){row<0&&(row+=this.numrows,col+=4-(this.numrows+4)%8),col<0&&(col+=this.numcols,row+=4-(this.numcols+4)%8);var v=this.codewords.charCodeAt(pos);v&=1<<8-bit,this.setBit(col,row,0!==v)},DefaultPlacement.prototype.utah=function(row,col,pos){this.module(row-2,col-2,pos,1),this.module(row-2,col-1,pos,2),this.module(row-1,col-2,pos,3),this.module(row-1,col-1,pos,4),this.module(row-1,col,pos,5),this.module(row,col-2,pos,6),this.module(row,col-1,pos,7),this.module(row,col,pos,8)},DefaultPlacement.prototype.corner1=function(pos){this.module(this.numrows-1,0,pos,1),this.module(this.numrows-1,1,pos,2),this.module(this.numrows-1,2,pos,3),this.module(0,this.numcols-2,pos,4),this.module(0,this.numcols-1,pos,5),this.module(1,this.numcols-1,pos,6),this.module(2,this.numcols-1,pos,7),this.module(3,this.numcols-1,pos,8)},DefaultPlacement.prototype.corner2=function(pos){this.module(this.numrows-3,0,pos,1),this.module(this.numrows-2,0,pos,2),this.module(this.numrows-1,0,pos,3),this.module(0,this.numcols-4,pos,4),this.module(0,this.numcols-3,pos,5),this.module(0,this.numcols-2,pos,6),this.module(0,this.numcols-1,pos,7),this.module(1,this.numcols-1,pos,8)},DefaultPlacement.prototype.corner3=function(pos){this.module(this.numrows-3,0,pos,1),this.module(this.numrows-2,0,pos,2),this.module(this.numrows-1,0,pos,3),this.module(0,this.numcols-2,pos,4),this.module(0,this.numcols-1,pos,5),this.module(1,this.numcols-1,pos,6),this.module(2,this.numcols-1,pos,7),this.module(3,this.numcols-1,pos,8)},DefaultPlacement.prototype.corner4=function(pos){this.module(this.numrows-1,0,pos,1),this.module(this.numrows-1,this.numcols-1,pos,2),this.module(0,this.numcols-3,pos,3),this.module(0,this.numcols-2,pos,4),this.module(0,this.numcols-1,pos,5),this.module(1,this.numcols-3,pos,6),this.module(1,this.numcols-2,pos,7),this.module(1,this.numcols-1,pos,8)},DefaultPlacement}();var _a,SymbolShapeHint,FACTOR_SETS=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],FACTORS=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],LOG=(_a=function(LOG,ALOG){for(var p=1,i=0;i<255;i++)ALOG[i]=p,LOG[p]=i,(p*=2)>=256&&(p^=301);return{LOG,ALOG}}([],[]),_a.LOG),ALOG=_a.ALOG;!function(SymbolShapeHint){SymbolShapeHint[SymbolShapeHint.FORCE_NONE=0]="FORCE_NONE",SymbolShapeHint[SymbolShapeHint.FORCE_SQUARE=1]="FORCE_SQUARE",SymbolShapeHint[SymbolShapeHint.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(SymbolShapeHint||(SymbolShapeHint={}));var ErrorCorrection_ErrorCorrection=function(){function ErrorCorrection(){}return ErrorCorrection.encodeECC200=function(codewords,symbolInfo){if(codewords.length!==symbolInfo.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var sb=new util_StringBuilder;sb.append(codewords);var blockCount=symbolInfo.getInterleavedBlockCount();if(1===blockCount){var ecc=this.createECCBlock(codewords,symbolInfo.getErrorCodewords());sb.append(ecc)}else{for(var dataSizes=[],errorSizes=[],i=0;i<blockCount;i++)dataSizes[i]=symbolInfo.getDataLengthForInterleavedBlock(i+1),errorSizes[i]=symbolInfo.getErrorLengthForInterleavedBlock(i+1);for(var block=0;block<blockCount;block++){for(var temp=new util_StringBuilder,d=block;d<symbolInfo.getDataCapacity();d+=blockCount)temp.append(codewords.charAt(d));ecc=this.createECCBlock(temp.toString(),errorSizes[block]);for(var pos=0,e=block;e<errorSizes[block]*blockCount;e+=blockCount)sb.setCharAt(symbolInfo.getDataCapacity()+e,ecc.charAt(pos++))}}return sb.toString()},ErrorCorrection.createECCBlock=function(codewords,numECWords){for(var table=-1,i=0;i<FACTOR_SETS.length;i++)if(FACTOR_SETS[i]===numECWords){table=i;break}if(table<0)throw new Error("Illegal number of error correction codewords specified: "+numECWords);var poly=FACTORS[table],ecc=[];for(i=0;i<numECWords;i++)ecc[i]=0;for(i=0;i<codewords.length;i++){for(var m=ecc[numECWords-1]^codewords.charAt(i).charCodeAt(0),k=numECWords-1;k>0;k--)0!==m&&0!==poly[k]?ecc[k]=ecc[k-1]^ALOG[(LOG[m]+LOG[poly[k]])%255]:ecc[k]=ecc[k-1];0!==m&&0!==poly[0]?ecc[0]=ALOG[(LOG[m]+LOG[poly[0]])%255]:ecc[0]=0}var eccReversed=[];for(i=0;i<numECWords;i++)eccReversed[i]=ecc[numECWords-i-1];return eccReversed.map(function(c){return String.fromCharCode(c)}).join("")},ErrorCorrection}();const encoder_ErrorCorrection=ErrorCorrection_ErrorCorrection;var ASCIIEncoder=function(){function ASCIIEncoder(){}return ASCIIEncoder.prototype.getEncodingMode=function(){return 0},ASCIIEncoder.prototype.encode=function(context){if(encoder_HighLevelEncoder.determineConsecutiveDigitCount(context.getMessage(),context.pos)>=2)context.writeCodeword(this.encodeASCIIDigits(context.getMessage().charCodeAt(context.pos),context.getMessage().charCodeAt(context.pos+1))),context.pos+=2;else{var c=context.getCurrentChar(),newMode=encoder_HighLevelEncoder.lookAheadTest(context.getMessage(),context.pos,this.getEncodingMode());if(newMode!==this.getEncodingMode())switch(newMode){case 5:return context.writeCodeword(231),void context.signalEncoderChange(5);case 1:return context.writeCodeword(230),void context.signalEncoderChange(1);case 3:context.writeCodeword(238),context.signalEncoderChange(3);break;case 2:context.writeCodeword(239),context.signalEncoderChange(2);break;case 4:context.writeCodeword(240),context.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+newMode)}else encoder_HighLevelEncoder.isExtendedASCII(c)?(context.writeCodeword(235),context.writeCodeword(c-128+1),context.pos++):(context.writeCodeword(c+1),context.pos++)}},ASCIIEncoder.prototype.encodeASCIIDigits=function(digit1,digit2){if(encoder_HighLevelEncoder.isDigit(digit1)&&encoder_HighLevelEncoder.isDigit(digit2))return 10*(digit1-48)+(digit2-48)+130;throw new Error("not digits: "+digit1+digit2)},ASCIIEncoder}(),Base256Encoder=function(){function Base256Encoder(){}return Base256Encoder.prototype.getEncodingMode=function(){return 5},Base256Encoder.prototype.encode=function(context){var buffer=new util_StringBuilder;for(buffer.append(0);context.hasMoreCharacters();){var c=context.getCurrentChar();if(buffer.append(c),context.pos++,encoder_HighLevelEncoder.lookAheadTest(context.getMessage(),context.pos,this.getEncodingMode())!==this.getEncodingMode()){context.signalEncoderChange(0);break}}var dataCount=buffer.length()-1,currentSize=context.getCodewordCount()+dataCount+1;context.updateSymbolInfo(currentSize);var mustPad=context.getSymbolInfo().getDataCapacity()-currentSize>0;if(context.hasMoreCharacters()||mustPad)if(dataCount<=249)buffer.setCharAt(0,common_StringUtils.getCharAt(dataCount));else{if(!(dataCount<=1555))throw new Error("Message length not in valid ranges: "+dataCount);buffer.setCharAt(0,common_StringUtils.getCharAt(Math.floor(dataCount/250)+249)),buffer.insert(1,common_StringUtils.getCharAt(dataCount%250))}var i=0;for(c=buffer.length();i<c;i++)context.writeCodeword(this.randomize255State(buffer.charAt(i).charCodeAt(0),context.getCodewordCount()+1))},Base256Encoder.prototype.randomize255State=function(ch,codewordPosition){var tempVariable=ch+(149*codewordPosition%255+1);return tempVariable<=255?tempVariable:tempVariable-256},Base256Encoder}(),C40Encoder=function(){function C40Encoder(){}return C40Encoder.prototype.getEncodingMode=function(){return 1},C40Encoder.prototype.encodeMaximal=function(context){for(var buffer=new util_StringBuilder,lastCharSize=0,backtrackStartPosition=context.pos,backtrackBufferLength=0;context.hasMoreCharacters();){var c=context.getCurrentChar();context.pos++,lastCharSize=this.encodeChar(c,buffer),buffer.length()%3==0&&(backtrackStartPosition=context.pos,backtrackBufferLength=buffer.length())}if(backtrackBufferLength!==buffer.length()){var unwritten=Math.floor(buffer.length()/3*2),curCodewordCount=Math.floor(context.getCodewordCount()+unwritten+1);context.updateSymbolInfo(curCodewordCount);var available=context.getSymbolInfo().getDataCapacity()-curCodewordCount,rest=Math.floor(buffer.length()%3);(2===rest&&2!==available||1===rest&&(lastCharSize>3||1!==available))&&(context.pos=backtrackStartPosition)}buffer.length()>0&&context.writeCodeword(230),this.handleEOD(context,buffer)},C40Encoder.prototype.encode=function(context){for(var buffer=new util_StringBuilder;context.hasMoreCharacters();){var c=context.getCurrentChar();context.pos++;var lastCharSize=this.encodeChar(c,buffer),unwritten=2*Math.floor(buffer.length()/3),curCodewordCount=context.getCodewordCount()+unwritten;context.updateSymbolInfo(curCodewordCount);var available=context.getSymbolInfo().getDataCapacity()-curCodewordCount;if(!context.hasMoreCharacters()){var removed=new util_StringBuilder;for(buffer.length()%3==2&&2!==available&&(lastCharSize=this.backtrackOneCharacter(context,buffer,removed,lastCharSize));buffer.length()%3==1&&(lastCharSize>3||1!==available);)lastCharSize=this.backtrackOneCharacter(context,buffer,removed,lastCharSize);break}if(buffer.length()%3==0)if(encoder_HighLevelEncoder.lookAheadTest(context.getMessage(),context.pos,this.getEncodingMode())!==this.getEncodingMode()){context.signalEncoderChange(0);break}}this.handleEOD(context,buffer)},C40Encoder.prototype.backtrackOneCharacter=function(context,buffer,removed,lastCharSize){var count=buffer.length(),test=buffer.toString().substring(0,count-lastCharSize);buffer.setLengthToZero(),buffer.append(test),context.pos--;var c=context.getCurrentChar();return lastCharSize=this.encodeChar(c,removed),context.resetSymbolInfo(),lastCharSize},C40Encoder.prototype.writeNextTriplet=function(context,buffer){context.writeCodewords(this.encodeToCodewords(buffer.toString()));var test=buffer.toString().substring(3);buffer.setLengthToZero(),buffer.append(test)},C40Encoder.prototype.handleEOD=function(context,buffer){var unwritten=Math.floor(buffer.length()/3*2),rest=buffer.length()%3,curCodewordCount=context.getCodewordCount()+unwritten;context.updateSymbolInfo(curCodewordCount);var available=context.getSymbolInfo().getDataCapacity()-curCodewordCount;if(2===rest){for(buffer.append("\0");buffer.length()>=3;)this.writeNextTriplet(context,buffer);context.hasMoreCharacters()&&context.writeCodeword(254)}else if(1===available&&1===rest){for(;buffer.length()>=3;)this.writeNextTriplet(context,buffer);context.hasMoreCharacters()&&context.writeCodeword(254),context.pos--}else{if(0!==rest)throw new Error("Unexpected case. Please report!");for(;buffer.length()>=3;)this.writeNextTriplet(context,buffer);(available>0||context.hasMoreCharacters())&&context.writeCodeword(254)}context.signalEncoderChange(0)},C40Encoder.prototype.encodeChar=function(c,sb){if(c===" ".charCodeAt(0))return sb.append(3),1;if(c>="0".charCodeAt(0)&&c<="9".charCodeAt(0))return sb.append(c-48+4),1;if(c>="A".charCodeAt(0)&&c<="Z".charCodeAt(0))return sb.append(c-65+14),1;if(c<" ".charCodeAt(0))return sb.append(0),sb.append(c),2;if(c<="/".charCodeAt(0))return sb.append(1),sb.append(c-33),2;if(c<="@".charCodeAt(0))return sb.append(1),sb.append(c-58+15),2;if(c<="_".charCodeAt(0))return sb.append(1),sb.append(c-91+22),2;if(c<=127)return sb.append(2),sb.append(c-96),2;sb.append("1");var len=2;return len+=this.encodeChar(c-128,sb)},C40Encoder.prototype.encodeToCodewords=function(sb){var v=1600*sb.charCodeAt(0)+40*sb.charCodeAt(1)+sb.charCodeAt(2)+1,cw1=v/256,cw2=v%256,result=new util_StringBuilder;return result.append(cw1),result.append(cw2),result.toString()},C40Encoder}(),EdifactEncoder=function(){function EdifactEncoder(){}return EdifactEncoder.prototype.getEncodingMode=function(){return 4},EdifactEncoder.prototype.encode=function(context){for(var buffer=new util_StringBuilder;context.hasMoreCharacters();){var c=context.getCurrentChar();if(this.encodeChar(c,buffer),context.pos++,buffer.length()>=4){context.writeCodewords(this.encodeToCodewords(buffer.toString()));var test_1=buffer.toString().substring(4);if(buffer.setLengthToZero(),buffer.append(test_1),encoder_HighLevelEncoder.lookAheadTest(context.getMessage(),context.pos,this.getEncodingMode())!==this.getEncodingMode()){context.signalEncoderChange(0);break}}}buffer.append(common_StringUtils.getCharAt(31)),this.handleEOD(context,buffer)},EdifactEncoder.prototype.handleEOD=function(context,buffer){try{var count=buffer.length();if(0===count)return;if(1===count){context.updateSymbolInfo();var available=context.getSymbolInfo().getDataCapacity()-context.getCodewordCount(),remaining=context.getRemainingCharacters();if(remaining>available&&(context.updateSymbolInfo(context.getCodewordCount()+1),available=context.getSymbolInfo().getDataCapacity()-context.getCodewordCount()),remaining<=available&&available<=2)return}if(count>4)throw new Error("Count must not exceed 4");var restChars=count-1,encoded=this.encodeToCodewords(buffer.toString()),restInAscii=!context.hasMoreCharacters()&&restChars<=2;if(restChars<=2)context.updateSymbolInfo(context.getCodewordCount()+restChars),(available=context.getSymbolInfo().getDataCapacity()-context.getCodewordCount())>=3&&(restInAscii=!1,context.updateSymbolInfo(context.getCodewordCount()+encoded.length));restInAscii?(context.resetSymbolInfo(),context.pos-=restChars):context.writeCodewords(encoded)}finally{context.signalEncoderChange(0)}},EdifactEncoder.prototype.encodeChar=function(c,sb){c>=" ".charCodeAt(0)&&c<="?".charCodeAt(0)?sb.append(c):c>="@".charCodeAt(0)&&c<="^".charCodeAt(0)?sb.append(common_StringUtils.getCharAt(c-64)):encoder_HighLevelEncoder.illegalCharacter(common_StringUtils.getCharAt(c))},EdifactEncoder.prototype.encodeToCodewords=function(sb){var len=sb.length;if(0===len)throw new Error("StringBuilder must not be empty");var v=(sb.charAt(0).charCodeAt(0)<<18)+((len>=2?sb.charAt(1).charCodeAt(0):0)<<12)+((len>=3?sb.charAt(2).charCodeAt(0):0)<<6)+(len>=4?sb.charAt(3).charCodeAt(0):0),cw1=v>>16&255,cw2=v>>8&255,cw3=255&v,res=new util_StringBuilder;return res.append(cw1),len>=2&&res.append(cw2),len>=3&&res.append(cw3),res.toString()},EdifactEncoder}(),SymbolInfo_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SymbolInfo_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},SymbolInfo=function(){function SymbolInfo(rectangular,dataCapacity,errorCodewords,matrixWidth,matrixHeight,dataRegions,rsBlockData,rsBlockError){void 0===rsBlockData&&(rsBlockData=0),void 0===rsBlockError&&(rsBlockError=0),this.rectangular=rectangular,this.dataCapacity=dataCapacity,this.errorCodewords=errorCodewords,this.matrixWidth=matrixWidth,this.matrixHeight=matrixHeight,this.dataRegions=dataRegions,this.rsBlockData=rsBlockData,this.rsBlockError=rsBlockError}return SymbolInfo.lookup=function(dataCodewords,shape,minSize,maxSize,fail){var e_1,_a;void 0===shape&&(shape=0),void 0===minSize&&(minSize=null),void 0===maxSize&&(maxSize=null),void 0===fail&&(fail=!0);try{for(var PROD_SYMBOLS_1=SymbolInfo_values(PROD_SYMBOLS),PROD_SYMBOLS_1_1=PROD_SYMBOLS_1.next();!PROD_SYMBOLS_1_1.done;PROD_SYMBOLS_1_1=PROD_SYMBOLS_1.next()){var symbol=PROD_SYMBOLS_1_1.value;if((1!==shape||!symbol.rectangular)&&((2!==shape||symbol.rectangular)&&(null==minSize||!(symbol.getSymbolWidth()<minSize.getWidth()||symbol.getSymbolHeight()<minSize.getHeight()))&&(null==maxSize||!(symbol.getSymbolWidth()>maxSize.getWidth()||symbol.getSymbolHeight()>maxSize.getHeight()))&&dataCodewords<=symbol.dataCapacity))return symbol}}catch(e_1_1){e_1={error:e_1_1}}finally{try{PROD_SYMBOLS_1_1&&!PROD_SYMBOLS_1_1.done&&(_a=PROD_SYMBOLS_1.return)&&_a.call(PROD_SYMBOLS_1)}finally{if(e_1)throw e_1.error}}if(fail)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+dataCodewords);return null},SymbolInfo.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},SymbolInfo.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},SymbolInfo.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},SymbolInfo.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},SymbolInfo.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},SymbolInfo.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},SymbolInfo.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},SymbolInfo.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},SymbolInfo.prototype.getDataCapacity=function(){return this.dataCapacity},SymbolInfo.prototype.getErrorCodewords=function(){return this.errorCodewords},SymbolInfo.prototype.getDataLengthForInterleavedBlock=function(index){return this.rsBlockData},SymbolInfo.prototype.getErrorLengthForInterleavedBlock=function(index){return this.rsBlockError},SymbolInfo}();const encoder_SymbolInfo=SymbolInfo;var DataMatrixSymbolInfo144=function(_super){function DataMatrixSymbolInfo144(){return _super.call(this,!1,1558,620,22,22,36,-1,62)||this}return SymbolInfo_extends(DataMatrixSymbolInfo144,_super),DataMatrixSymbolInfo144.prototype.getInterleavedBlockCount=function(){return 10},DataMatrixSymbolInfo144.prototype.getDataLengthForInterleavedBlock=function(index){return index<=8?156:155},DataMatrixSymbolInfo144}(SymbolInfo),PROD_SYMBOLS=[new SymbolInfo(!1,3,5,8,8,1),new SymbolInfo(!1,5,7,10,10,1),new SymbolInfo(!0,5,7,16,6,1),new SymbolInfo(!1,8,10,12,12,1),new SymbolInfo(!0,10,11,14,6,2),new SymbolInfo(!1,12,12,14,14,1),new SymbolInfo(!0,16,14,24,10,1),new SymbolInfo(!1,18,14,16,16,1),new SymbolInfo(!1,22,18,18,18,1),new SymbolInfo(!0,22,18,16,10,2),new SymbolInfo(!1,30,20,20,20,1),new SymbolInfo(!0,32,24,16,14,2),new SymbolInfo(!1,36,24,22,22,1),new SymbolInfo(!1,44,28,24,24,1),new SymbolInfo(!0,49,28,22,14,2),new SymbolInfo(!1,62,36,14,14,4),new SymbolInfo(!1,86,42,16,16,4),new SymbolInfo(!1,114,48,18,18,4),new SymbolInfo(!1,144,56,20,20,4),new SymbolInfo(!1,174,68,22,22,4),new SymbolInfo(!1,204,84,24,24,4,102,42),new SymbolInfo(!1,280,112,14,14,16,140,56),new SymbolInfo(!1,368,144,16,16,16,92,36),new SymbolInfo(!1,456,192,18,18,16,114,48),new SymbolInfo(!1,576,224,20,20,16,144,56),new SymbolInfo(!1,696,272,22,22,16,174,68),new SymbolInfo(!1,816,336,24,24,16,136,56),new SymbolInfo(!1,1050,408,18,18,36,175,68),new SymbolInfo(!1,1304,496,20,20,36,163,62),new DataMatrixSymbolInfo144],EncoderContext=function(){function EncoderContext(msg){this.msg=msg,this.pos=0,this.skipAtEnd=0;for(var msgBinary=msg.split("").map(function(c){return c.charCodeAt(0)}),sb=new util_StringBuilder,i=0,c=msgBinary.length;i<c;i++){var ch=String.fromCharCode(255&msgBinary[i]);if("?"===ch&&"?"!==msg.charAt(i))throw new Error("Message contains characters outside ISO-8859-1 encoding.");sb.append(ch)}this.msg=sb.toString(),this.shape=0,this.codewords=new util_StringBuilder,this.newEncoding=-1}return EncoderContext.prototype.setSymbolShape=function(shape){this.shape=shape},EncoderContext.prototype.setSizeConstraints=function(minSize,maxSize){this.minSize=minSize,this.maxSize=maxSize},EncoderContext.prototype.getMessage=function(){return this.msg},EncoderContext.prototype.setSkipAtEnd=function(count){this.skipAtEnd=count},EncoderContext.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},EncoderContext.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},EncoderContext.prototype.getCodewords=function(){return this.codewords},EncoderContext.prototype.writeCodewords=function(codewords){this.codewords.append(codewords)},EncoderContext.prototype.writeCodeword=function(codeword){this.codewords.append(codeword)},EncoderContext.prototype.getCodewordCount=function(){return this.codewords.length()},EncoderContext.prototype.getNewEncoding=function(){return this.newEncoding},EncoderContext.prototype.signalEncoderChange=function(encoding){this.newEncoding=encoding},EncoderContext.prototype.resetEncoderSignal=function(){this.newEncoding=-1},EncoderContext.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},EncoderContext.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},EncoderContext.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},EncoderContext.prototype.getSymbolInfo=function(){return this.symbolInfo},EncoderContext.prototype.updateSymbolInfo=function(len){void 0===len&&(len=this.getCodewordCount()),(null==this.symbolInfo||len>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=encoder_SymbolInfo.lookup(len,this.shape,this.minSize,this.maxSize,!0))},EncoderContext.prototype.resetSymbolInfo=function(){this.symbolInfo=null},EncoderContext}(),X12Encoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),X12Encoder=function(_super){function X12Encoder(){return null!==_super&&_super.apply(this,arguments)||this}return X12Encoder_extends(X12Encoder,_super),X12Encoder.prototype.getEncodingMode=function(){return 3},X12Encoder.prototype.encode=function(context){for(var buffer=new util_StringBuilder;context.hasMoreCharacters();){var c=context.getCurrentChar();if(context.pos++,this.encodeChar(c,buffer),buffer.length()%3==0)if(this.writeNextTriplet(context,buffer),encoder_HighLevelEncoder.lookAheadTest(context.getMessage(),context.pos,this.getEncodingMode())!==this.getEncodingMode()){context.signalEncoderChange(0);break}}this.handleEOD(context,buffer)},X12Encoder.prototype.encodeChar=function(c,sb){switch(c){case 13:sb.append(0);break;case"*".charCodeAt(0):sb.append(1);break;case">".charCodeAt(0):sb.append(2);break;case" ".charCodeAt(0):sb.append(3);break;default:c>="0".charCodeAt(0)&&c<="9".charCodeAt(0)?sb.append(c-48+4):c>="A".charCodeAt(0)&&c<="Z".charCodeAt(0)?sb.append(c-65+14):encoder_HighLevelEncoder.illegalCharacter(common_StringUtils.getCharAt(c))}return 1},X12Encoder.prototype.handleEOD=function(context,buffer){context.updateSymbolInfo();var available=context.getSymbolInfo().getDataCapacity()-context.getCodewordCount(),count=buffer.length();context.pos-=count,(context.getRemainingCharacters()>1||available>1||context.getRemainingCharacters()!==available)&&context.writeCodeword(254),context.getNewEncoding()<0&&context.signalEncoderChange(0)},X12Encoder}(C40Encoder),TextEncoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextEncoder_TextEncoder=function(_super){function TextEncoder(){return null!==_super&&_super.apply(this,arguments)||this}return TextEncoder_extends(TextEncoder,_super),TextEncoder.prototype.getEncodingMode=function(){return 2},TextEncoder.prototype.encodeChar=function(c,sb){if(c===" ".charCodeAt(0))return sb.append(3),1;if(c>="0".charCodeAt(0)&&c<="9".charCodeAt(0))return sb.append(c-48+4),1;if(c>="a".charCodeAt(0)&&c<="z".charCodeAt(0))return sb.append(c-97+14),1;if(c<" ".charCodeAt(0))return sb.append(0),sb.append(c),2;if(c<="/".charCodeAt(0))return sb.append(1),sb.append(c-33),2;if(c<="@".charCodeAt(0))return sb.append(1),sb.append(c-58+15),2;if(c>="[".charCodeAt(0)&&c<="_".charCodeAt(0))return sb.append(1),sb.append(c-91+22),2;if(c==="`".charCodeAt(0))return sb.append(2),sb.append(0),2;if(c<="Z".charCodeAt(0))return sb.append(2),sb.append(c-65+1),2;if(c<=127)return sb.append(2),sb.append(c-123+27),2;sb.append("1");var len=2;return len+=this.encodeChar(c-128,sb)},TextEncoder}(C40Encoder);const encoder_HighLevelEncoder=function(){function HighLevelEncoder(){}return HighLevelEncoder.randomize253State=function(codewordPosition){var tempVariable=129+(149*codewordPosition%253+1);return tempVariable<=254?tempVariable:tempVariable-254},HighLevelEncoder.encodeHighLevel=function(msg,shape,minSize,maxSize,forceC40){void 0===shape&&(shape=0),void 0===minSize&&(minSize=null),void 0===maxSize&&(maxSize=null),void 0===forceC40&&(forceC40=!1);var c40Encoder=new C40Encoder,encoders=[new ASCIIEncoder,c40Encoder,new TextEncoder_TextEncoder,new X12Encoder,new EdifactEncoder,new Base256Encoder],context=new EncoderContext(msg);context.setSymbolShape(shape),context.setSizeConstraints(minSize,maxSize),msg.startsWith("[)>05")&&msg.endsWith("")?(context.writeCodeword(236),context.setSkipAtEnd(2),context.pos+=7):msg.startsWith("[)>06")&&msg.endsWith("")&&(context.writeCodeword(237),context.setSkipAtEnd(2),context.pos+=7);var encodingMode=0;for(forceC40&&(c40Encoder.encodeMaximal(context),encodingMode=context.getNewEncoding(),context.resetEncoderSignal());context.hasMoreCharacters();)encoders[encodingMode].encode(context),context.getNewEncoding()>=0&&(encodingMode=context.getNewEncoding(),context.resetEncoderSignal());var len=context.getCodewordCount();context.updateSymbolInfo();var capacity=context.getSymbolInfo().getDataCapacity();len<capacity&&0!==encodingMode&&5!==encodingMode&&4!==encodingMode&&context.writeCodeword("þ");var codewords=context.getCodewords();for(codewords.length()<capacity&&codewords.append(129);codewords.length()<capacity;)codewords.append(this.randomize253State(codewords.length()+1));return context.getCodewords().toString()},HighLevelEncoder.lookAheadTest=function(msg,startpos,currentMode){var newMode=this.lookAheadTestIntern(msg,startpos,currentMode);if(3===currentMode&&3===newMode){for(var endpos=Math.min(startpos+3,msg.length),i=startpos;i<endpos;i++)if(!this.isNativeX12(msg.charCodeAt(i)))return 0}else if(4===currentMode&&4===newMode)for(endpos=Math.min(startpos+4,msg.length),i=startpos;i<endpos;i++)if(!this.isNativeEDIFACT(msg.charCodeAt(i)))return 0;return newMode},HighLevelEncoder.lookAheadTestIntern=function(msg,startpos,currentMode){if(startpos>=msg.length)return currentMode;var charCounts;0===currentMode?charCounts=[0,1,1,1,1,1.25]:(charCounts=[1,2,2,2,2,2.25])[currentMode]=0;for(var charsProcessed=0,mins=new Uint8Array(6),intCharCounts=[];;){if(startpos+charsProcessed===msg.length){util_Arrays.fill(mins,0),util_Arrays.fill(intCharCounts,0);var min=this.findMinimums(charCounts,intCharCounts,util_Integer.MAX_VALUE,mins),minCount=this.getMinimumCount(mins);if(intCharCounts[0]===min)return 0;if(1===minCount){if(mins[5]>0)return 5;if(mins[4]>0)return 4;if(mins[2]>0)return 2;if(mins[3]>0)return 3}return 1}var c=msg.charCodeAt(startpos+charsProcessed);if(charsProcessed++,this.isDigit(c)?charCounts[0]+=.5:this.isExtendedASCII(c)?(charCounts[0]=Math.ceil(charCounts[0]),charCounts[0]+=2):(charCounts[0]=Math.ceil(charCounts[0]),charCounts[0]++),this.isNativeC40(c)?charCounts[1]+=2/3:this.isExtendedASCII(c)?charCounts[1]+=8/3:charCounts[1]+=4/3,this.isNativeText(c)?charCounts[2]+=2/3:this.isExtendedASCII(c)?charCounts[2]+=8/3:charCounts[2]+=4/3,this.isNativeX12(c)?charCounts[3]+=2/3:this.isExtendedASCII(c)?charCounts[3]+=13/3:charCounts[3]+=10/3,this.isNativeEDIFACT(c)?charCounts[4]+=3/4:this.isExtendedASCII(c)?charCounts[4]+=4.25:charCounts[4]+=3.25,this.isSpecialB256(c)?charCounts[5]+=4:charCounts[5]++,charsProcessed>=4){if(util_Arrays.fill(mins,0),util_Arrays.fill(intCharCounts,0),this.findMinimums(charCounts,intCharCounts,util_Integer.MAX_VALUE,mins),intCharCounts[0]<this.min(intCharCounts[5],intCharCounts[1],intCharCounts[2],intCharCounts[3],intCharCounts[4]))return 0;if(intCharCounts[5]<intCharCounts[0]||intCharCounts[5]+1<this.min(intCharCounts[1],intCharCounts[2],intCharCounts[3],intCharCounts[4]))return 5;if(intCharCounts[4]+1<this.min(intCharCounts[5],intCharCounts[1],intCharCounts[2],intCharCounts[3],intCharCounts[0]))return 4;if(intCharCounts[2]+1<this.min(intCharCounts[5],intCharCounts[1],intCharCounts[4],intCharCounts[3],intCharCounts[0]))return 2;if(intCharCounts[3]+1<this.min(intCharCounts[5],intCharCounts[1],intCharCounts[4],intCharCounts[2],intCharCounts[0]))return 3;if(intCharCounts[1]+1<this.min(intCharCounts[0],intCharCounts[5],intCharCounts[4],intCharCounts[2])){if(intCharCounts[1]<intCharCounts[3])return 1;if(intCharCounts[1]===intCharCounts[3]){for(var p=startpos+charsProcessed+1;p<msg.length;){var tc=msg.charCodeAt(p);if(this.isX12TermSep(tc))return 3;if(!this.isNativeX12(tc))break;p++}return 1}}}}},HighLevelEncoder.min=function(f1,f2,f3,f4,f5){var val=Math.min(f1,Math.min(f2,Math.min(f3,f4)));return void 0===f5?val:Math.min(val,f5)},HighLevelEncoder.findMinimums=function(charCounts,intCharCounts,min,mins){for(var i=0;i<6;i++){var current=intCharCounts[i]=Math.ceil(charCounts[i]);min>current&&(min=current,util_Arrays.fill(mins,0)),min===current&&(mins[i]=mins[i]+1)}return min},HighLevelEncoder.getMinimumCount=function(mins){for(var minCount=0,i=0;i<6;i++)minCount+=mins[i];return minCount||0},HighLevelEncoder.isDigit=function(ch){return ch>="0".charCodeAt(0)&&ch<="9".charCodeAt(0)},HighLevelEncoder.isExtendedASCII=function(ch){return ch>=128&&ch<=255},HighLevelEncoder.isNativeC40=function(ch){return ch===" ".charCodeAt(0)||ch>="0".charCodeAt(0)&&ch<="9".charCodeAt(0)||ch>="A".charCodeAt(0)&&ch<="Z".charCodeAt(0)},HighLevelEncoder.isNativeText=function(ch){return ch===" ".charCodeAt(0)||ch>="0".charCodeAt(0)&&ch<="9".charCodeAt(0)||ch>="a".charCodeAt(0)&&ch<="z".charCodeAt(0)},HighLevelEncoder.isNativeX12=function(ch){return this.isX12TermSep(ch)||ch===" ".charCodeAt(0)||ch>="0".charCodeAt(0)&&ch<="9".charCodeAt(0)||ch>="A".charCodeAt(0)&&ch<="Z".charCodeAt(0)},HighLevelEncoder.isX12TermSep=function(ch){return 13===ch||ch==="*".charCodeAt(0)||ch===">".charCodeAt(0)},HighLevelEncoder.isNativeEDIFACT=function(ch){return ch>=" ".charCodeAt(0)&&ch<="^".charCodeAt(0)},HighLevelEncoder.isSpecialB256=function(ch){return!1},HighLevelEncoder.determineConsecutiveDigitCount=function(msg,startpos){void 0===startpos&&(startpos=0);for(var len=msg.length,idx=startpos;idx<len&&this.isDigit(msg.charCodeAt(idx));)idx++;return idx-startpos},HighLevelEncoder.illegalCharacter=function(singleCharacter){var hex=util_Integer.toHexString(singleCharacter.charCodeAt(0));throw hex="0000".substring(0,4-hex.length)+hex,new Error("Illegal character: "+singleCharacter+" (0x"+hex+")")},HighLevelEncoder}();var MinimalEncoder_Mode,ECIEncoderSet_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},CharsetEncoder=function(){function CharsetEncoder(charset){this.charset=charset,this.name=charset.name}return CharsetEncoder.prototype.canEncode=function(c){try{return null!=util_StringEncoding.encode(c,this.charset)}catch(ex){return!1}},CharsetEncoder}(),ECIEncoderSet=function(){function ECIEncoderSet(stringToEncode,priorityCharset,fnc1){var e_1,_a,e_2,_b,e_3,_c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(name){return new CharsetEncoder(util_Charset.forName(name))}),this.encoders=[];var neededEncoders=[];neededEncoders.push(new CharsetEncoder(util_StandardCharsets.ISO_8859_1));for(var needUnicodeEncoder=null!=priorityCharset&&priorityCharset.name.startsWith("UTF"),i=0;i<stringToEncode.length;i++){var canEncode=!1;try{for(var neededEncoders_1=(e_1=void 0,ECIEncoderSet_values(neededEncoders)),neededEncoders_1_1=neededEncoders_1.next();!neededEncoders_1_1.done;neededEncoders_1_1=neededEncoders_1.next()){var encoder=neededEncoders_1_1.value,singleCharacter=stringToEncode.charAt(i);if(singleCharacter.charCodeAt(0)===fnc1||encoder.canEncode(singleCharacter)){canEncode=!0;break}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{neededEncoders_1_1&&!neededEncoders_1_1.done&&(_a=neededEncoders_1.return)&&_a.call(neededEncoders_1)}finally{if(e_1)throw e_1.error}}if(!canEncode)try{for(var _d=(e_2=void 0,ECIEncoderSet_values(this.ENCODERS)),_e=_d.next();!_e.done;_e=_d.next()){if((encoder=_e.value).canEncode(stringToEncode.charAt(i))){neededEncoders.push(encoder),canEncode=!0;break}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_e&&!_e.done&&(_b=_d.return)&&_b.call(_d)}finally{if(e_2)throw e_2.error}}canEncode||(needUnicodeEncoder=!0)}if(1!==neededEncoders.length||needUnicodeEncoder){this.encoders=[];var index=0;try{for(var neededEncoders_2=ECIEncoderSet_values(neededEncoders),neededEncoders_2_1=neededEncoders_2.next();!neededEncoders_2_1.done;neededEncoders_2_1=neededEncoders_2.next()){encoder=neededEncoders_2_1.value;this.encoders[index++]=encoder}}catch(e_3_1){e_3={error:e_3_1}}finally{try{neededEncoders_2_1&&!neededEncoders_2_1.done&&(_c=neededEncoders_2.return)&&_c.call(neededEncoders_2)}finally{if(e_3)throw e_3.error}}}else this.encoders=[neededEncoders[0]];var priorityEncoderIndexValue=-1;if(null!=priorityCharset)for(i=0;i<this.encoders.length;i++)if(null!=this.encoders[i]&&priorityCharset.name===this.encoders[i].name){priorityEncoderIndexValue=i;break}this.priorityEncoderIndex=priorityEncoderIndexValue}return ECIEncoderSet.prototype.length=function(){return this.encoders.length},ECIEncoderSet.prototype.getCharsetName=function(index){if(!(index<this.length()))throw new Error("index must be less than length");return this.encoders[index].name},ECIEncoderSet.prototype.getCharset=function(index){if(!(index<this.length()))throw new Error("index must be less than length");return this.encoders[index].charset},ECIEncoderSet.prototype.getECIValue=function(encoderIndex){return this.encoders[encoderIndex].charset.getValueIdentifier()},ECIEncoderSet.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},ECIEncoderSet.prototype.canEncode=function(c,encoderIndex){if(!(encoderIndex<this.length()))throw new Error("index must be less than length");return!0},ECIEncoderSet.prototype.encode=function(c,encoderIndex){if(!(encoderIndex<this.length()))throw new Error("index must be less than length");return util_StringEncoding.encode(common_StringUtils.getCharAt(c),this.encoders[encoderIndex].name)},ECIEncoderSet}(),MinimalECIInput=function(){function MinimalECIInput(stringToEncode,priorityCharset,fnc1){this.fnc1=fnc1;var encoderSet=new ECIEncoderSet(stringToEncode,priorityCharset,fnc1);if(1===encoderSet.length())for(var i=0;i<this.bytes.length;i++){var c=stringToEncode.charAt(i).charCodeAt(0);this.bytes[i]=c===fnc1?1e3:c}else this.bytes=this.encodeMinimally(stringToEncode,encoderSet,fnc1)}return MinimalECIInput.prototype.getFNC1Character=function(){return this.fnc1},MinimalECIInput.prototype.length=function(){return this.bytes.length},MinimalECIInput.prototype.haveNCharacters=function(index,n){if(index+n-1>=this.bytes.length)return!1;for(var i=0;i<n;i++)if(this.isECI(index+i))return!1;return!0},MinimalECIInput.prototype.charAt=function(index){if(index<0||index>=this.length())throw new Error(""+index);if(this.isECI(index))throw new Error("value at "+index+" is not a character but an ECI");return this.isFNC1(index)?this.fnc1:this.bytes[index]},MinimalECIInput.prototype.subSequence=function(start,end){if(start<0||start>end||end>this.length())throw new Error(""+start);for(var result=new util_StringBuilder,i=start;i<end;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");result.append(this.charAt(i))}return result.toString()},MinimalECIInput.prototype.isECI=function(index){if(index<0||index>=this.length())throw new Error(""+index);return this.bytes[index]>255&&this.bytes[index]<=999},MinimalECIInput.prototype.isFNC1=function(index){if(index<0||index>=this.length())throw new Error(""+index);return 1e3===this.bytes[index]},MinimalECIInput.prototype.getECIValue=function(index){if(index<0||index>=this.length())throw new Error(""+index);if(!this.isECI(index))throw new Error("value at "+index+" is not an ECI but a character");return this.bytes[index]-256},MinimalECIInput.prototype.addEdge=function(edges,to,edge){(null==edges[to][edge.encoderIndex]||edges[to][edge.encoderIndex].cachedTotalSize>edge.cachedTotalSize)&&(edges[to][edge.encoderIndex]=edge)},MinimalECIInput.prototype.addEdges=function(stringToEncode,encoderSet,edges,from,previous,fnc1){var ch=stringToEncode.charAt(from).charCodeAt(0),start=0,end=encoderSet.length();encoderSet.getPriorityEncoderIndex()>=0&&(ch===fnc1||encoderSet.canEncode(ch,encoderSet.getPriorityEncoderIndex()))&&(end=(start=encoderSet.getPriorityEncoderIndex())+1);for(var i=start;i<end;i++)(ch===fnc1||encoderSet.canEncode(ch,i))&&this.addEdge(edges,from+1,new InputEdge(ch,encoderSet,i,previous,fnc1))},MinimalECIInput.prototype.encodeMinimally=function(stringToEncode,encoderSet,fnc1){var inputLength=stringToEncode.length,edges=new(InputEdge[inputLength+1][encoderSet.length()]);this.addEdges(stringToEncode,encoderSet,edges,0,null,fnc1);for(var i=1;i<=inputLength;i++){for(var j=0;j<encoderSet.length();j++)null!=edges[i][j]&&i<inputLength&&this.addEdges(stringToEncode,encoderSet,edges,i,edges[i][j],fnc1);for(j=0;j<encoderSet.length();j++)edges[i-1][j]=null}var minimalJ=-1,minimalSize=util_Integer.MAX_VALUE;for(j=0;j<encoderSet.length();j++)if(null!=edges[inputLength][j]){var edge=edges[inputLength][j];edge.cachedTotalSize<minimalSize&&(minimalSize=edge.cachedTotalSize,minimalJ=j)}if(minimalJ<0)throw new Error('Failed to encode "'+stringToEncode+'"');for(var intsAL=[],current=edges[inputLength][minimalJ];null!=current;){if(current.isFNC1())intsAL.unshift(1e3);else{var bytes=encoderSet.encode(current.c,current.encoderIndex);for(i=bytes.length-1;i>=0;i--)intsAL.unshift(255&bytes[i])}(null===current.previous?0:current.previous.encoderIndex)!==current.encoderIndex&&intsAL.unshift(256+encoderSet.getECIValue(current.encoderIndex)),current=current.previous}var ints=[];for(i=0;i<ints.length;i++)ints[i]=intsAL[i];return ints},MinimalECIInput}(),InputEdge=function(){function InputEdge(c,encoderSet,encoderIndex,previous,fnc1){this.c=c,this.encoderSet=encoderSet,this.encoderIndex=encoderIndex,this.previous=previous,this.fnc1=fnc1,this.c=c===fnc1?1e3:c;var size=this.isFNC1()?1:encoderSet.encode(c,encoderIndex).length;(null===previous?0:previous.encoderIndex)!==encoderIndex&&(size+=3),null!=previous&&(size+=previous.cachedTotalSize),this.cachedTotalSize=size}return InputEdge.prototype.isFNC1=function(){return 1e3===this.c},InputEdge}(),MinimalEncoder_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MinimalEncoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},MinimalEncoder_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(MinimalEncoder_read(arguments[i]));return ar};!function(Mode){Mode[Mode.ASCII=0]="ASCII",Mode[Mode.C40=1]="C40",Mode[Mode.TEXT=2]="TEXT",Mode[Mode.X12=3]="X12",Mode[Mode.EDF=4]="EDF",Mode[Mode.B256=5]="B256"}(MinimalEncoder_Mode||(MinimalEncoder_Mode={}));var C40_SHIFT2_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],MinimalEncoder=function(){function MinimalEncoder(){}return MinimalEncoder.isExtendedASCII=function(ch,fnc1){return ch!==fnc1&&ch>=128&&ch<=255},MinimalEncoder.isInC40Shift1Set=function(ch){return ch<=31},MinimalEncoder.isInC40Shift2Set=function(ch,fnc1){var e_1,_a;try{for(var C40_SHIFT2_CHARS_1=MinimalEncoder_values(C40_SHIFT2_CHARS),C40_SHIFT2_CHARS_1_1=C40_SHIFT2_CHARS_1.next();!C40_SHIFT2_CHARS_1_1.done;C40_SHIFT2_CHARS_1_1=C40_SHIFT2_CHARS_1.next()){if(C40_SHIFT2_CHARS_1_1.value.charCodeAt(0)===ch)return!0}}catch(e_1_1){e_1={error:e_1_1}}finally{try{C40_SHIFT2_CHARS_1_1&&!C40_SHIFT2_CHARS_1_1.done&&(_a=C40_SHIFT2_CHARS_1.return)&&_a.call(C40_SHIFT2_CHARS_1)}finally{if(e_1)throw e_1.error}}return ch===fnc1},MinimalEncoder.isInTextShift1Set=function(ch){return this.isInC40Shift1Set(ch)},MinimalEncoder.isInTextShift2Set=function(ch,fnc1){return this.isInC40Shift2Set(ch,fnc1)},MinimalEncoder.encodeHighLevel=function(msg,priorityCharset,fnc1,shape){void 0===priorityCharset&&(priorityCharset=null),void 0===fnc1&&(fnc1=-1),void 0===shape&&(shape=0);var macroId=0;return msg.startsWith("[)>05")&&msg.endsWith("")?(macroId=5,msg=msg.substring(7,msg.length-2)):msg.startsWith("[)>06")&&msg.endsWith("")&&(macroId=6,msg=msg.substring(7,msg.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,__spread(this.encode(msg,priorityCharset,fnc1,shape,macroId)))))},MinimalEncoder.encode=function(input,priorityCharset,fnc1,shape,macroId){return this.encodeMinimally(new Input(input,priorityCharset,fnc1,shape,macroId)).getBytes()},MinimalEncoder.addEdge=function(edges,edge){var vertexIndex=edge.fromPosition+edge.characterLength;(null===edges[vertexIndex][edge.getEndMode()]||edges[vertexIndex][edge.getEndMode()].cachedTotalSize>edge.cachedTotalSize)&&(edges[vertexIndex][edge.getEndMode()]=edge)},MinimalEncoder.getNumberOfC40Words=function(input,from,c40,characterLength){for(var thirdsCount=0,i=from;i<input.length();i++){if(input.isECI(i))return characterLength[0]=0,0;var ci=input.charAt(i);if(c40&&encoder_HighLevelEncoder.isNativeC40(ci)||!c40&&encoder_HighLevelEncoder.isNativeText(ci))thirdsCount++;else if(MinimalEncoder.isExtendedASCII(ci,input.getFNC1Character())){var asciiValue=255&ci;asciiValue>=128&&(c40&&encoder_HighLevelEncoder.isNativeC40(asciiValue-128)||!c40&&encoder_HighLevelEncoder.isNativeText(asciiValue-128))?thirdsCount+=3:thirdsCount+=4}else thirdsCount+=2;if(thirdsCount%3==0||(thirdsCount-2)%3==0&&i+1===input.length())return characterLength[0]=i-from+1,Math.ceil(thirdsCount/3)}return characterLength[0]=0,0},MinimalEncoder.addEdges=function(input,edges,from,previous){var e_2,_a;if(input.isECI(from))this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.ASCII,from,1,previous));else{var i,ch=input.charAt(from);if(null===previous||previous.getEndMode()!==MinimalEncoder_Mode.EDF){encoder_HighLevelEncoder.isDigit(ch)&&input.haveNCharacters(from,2)&&encoder_HighLevelEncoder.isDigit(input.charAt(from+1))?this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.ASCII,from,2,previous)):this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.ASCII,from,1,previous));var modes=[MinimalEncoder_Mode.C40,MinimalEncoder_Mode.TEXT];try{for(var modes_1=MinimalEncoder_values(modes),modes_1_1=modes_1.next();!modes_1_1.done;modes_1_1=modes_1.next()){var mode=modes_1_1.value,characterLength=[];MinimalEncoder.getNumberOfC40Words(input,from,mode===MinimalEncoder_Mode.C40,characterLength)>0&&this.addEdge(edges,new Edge(input,mode,from,characterLength[0],previous))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{modes_1_1&&!modes_1_1.done&&(_a=modes_1.return)&&_a.call(modes_1)}finally{if(e_2)throw e_2.error}}input.haveNCharacters(from,3)&&encoder_HighLevelEncoder.isNativeX12(input.charAt(from))&&encoder_HighLevelEncoder.isNativeX12(input.charAt(from+1))&&encoder_HighLevelEncoder.isNativeX12(input.charAt(from+2))&&this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.X12,from,3,previous)),this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.B256,from,1,previous))}for(i=0;i<3;i++){var pos=from+i;if(!input.haveNCharacters(pos,1)||!encoder_HighLevelEncoder.isNativeEDIFACT(input.charAt(pos)))break;this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.EDF,from,i+1,previous))}3===i&&input.haveNCharacters(from,4)&&encoder_HighLevelEncoder.isNativeEDIFACT(input.charAt(from+3))&&this.addEdge(edges,new Edge(input,MinimalEncoder_Mode.EDF,from,4,previous))}},MinimalEncoder.encodeMinimally=function(input){var inputLength=input.length(),edges=Array(inputLength+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(input,edges,0,null);for(var i=1;i<=inputLength;i++){for(var j=0;j<6;j++)null!==edges[i][j]&&i<inputLength&&this.addEdges(input,edges,i,edges[i][j]);for(j=0;j<6;j++)edges[i-1][j]=null}var minimalJ=-1,minimalSize=util_Integer.MAX_VALUE;for(j=0;j<6;j++)if(null!==edges[inputLength][j]){var edge=edges[inputLength][j],size=j>=1&&j<=3?edge.cachedTotalSize+1:edge.cachedTotalSize;size<minimalSize&&(minimalSize=size,minimalJ=j)}if(minimalJ<0)throw new Error('Failed to encode "'+input+'"');return new MinimalEncoder_Result(edges[inputLength][minimalJ])},MinimalEncoder}(),MinimalEncoder_Result=function(){function Result(solution){var input=solution.input,size=0,bytesAL=[],randomizePostfixLength=[],randomizeLengths=[];solution.mode!==MinimalEncoder_Mode.C40&&solution.mode!==MinimalEncoder_Mode.TEXT&&solution.mode!==MinimalEncoder_Mode.X12||solution.getEndMode()===MinimalEncoder_Mode.ASCII||(size+=this.prepend(Edge.getBytes(254),bytesAL));for(var current=solution;null!==current;)size+=this.prepend(current.getDataBytes(),bytesAL),null!==current.previous&&current.getPreviousStartMode()===current.getMode()||(current.getMode()===MinimalEncoder_Mode.B256&&(size<=249?(bytesAL.unshift(size),size++):(bytesAL.unshift(size%250),bytesAL.unshift(size/250+249),size+=2),randomizePostfixLength.push(bytesAL.length),randomizeLengths.push(size)),this.prepend(current.getLatchBytes(),bytesAL),size=0),current=current.previous;5===input.getMacroId()?size+=this.prepend(Edge.getBytes(236),bytesAL):6===input.getMacroId()&&(size+=this.prepend(Edge.getBytes(237),bytesAL)),input.getFNC1Character()>0&&(size+=this.prepend(Edge.getBytes(232),bytesAL));for(var i=0;i<randomizePostfixLength.length;i++)this.applyRandomPattern(bytesAL,bytesAL.length-randomizePostfixLength[i],randomizeLengths[i]);var capacity=solution.getMinSymbolSize(bytesAL.length);for(bytesAL.length<capacity&&bytesAL.push(129);bytesAL.length<capacity;)bytesAL.push(this.randomize253State(bytesAL.length+1));this.bytes=new Uint8Array(bytesAL.length);for(i=0;i<this.bytes.length;i++)this.bytes[i]=bytesAL[i]}return Result.prototype.prepend=function(bytes,into){for(var i=bytes.length-1;i>=0;i--)into.unshift(bytes[i]);return bytes.length},Result.prototype.randomize253State=function(codewordPosition){var tempVariable=129+(149*codewordPosition%253+1);return tempVariable<=254?tempVariable:tempVariable-254},Result.prototype.applyRandomPattern=function(bytesAL,startPosition,length){for(var i=0;i<length;i++){var Pad_codeword_position=startPosition+i,temp_variable=(255&bytesAL[Pad_codeword_position])+(149*(Pad_codeword_position+1)%255+1);bytesAL[Pad_codeword_position]=temp_variable<=255?temp_variable:temp_variable-256}},Result.prototype.getBytes=function(){return this.bytes},Result}(),Edge=function(){function Edge(input,mode,fromPosition,characterLength,previous){if(this.input=input,this.mode=mode,this.fromPosition=fromPosition,this.characterLength=characterLength,this.previous=previous,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(fromPosition+characterLength<=input.length()))throw new Error("Invalid edge");var size=null!==previous?previous.cachedTotalSize:0,previousMode=this.getPreviousMode();switch(mode){case MinimalEncoder_Mode.ASCII:size++,(input.isECI(fromPosition)||MinimalEncoder.isExtendedASCII(input.charAt(fromPosition),input.getFNC1Character()))&&size++,previousMode!==MinimalEncoder_Mode.C40&&previousMode!==MinimalEncoder_Mode.TEXT&&previousMode!==MinimalEncoder_Mode.X12||size++;break;case MinimalEncoder_Mode.B256:size++,(previousMode!==MinimalEncoder_Mode.B256||250===this.getB256Size())&&size++,previousMode===MinimalEncoder_Mode.ASCII?size++:previousMode!==MinimalEncoder_Mode.C40&&previousMode!==MinimalEncoder_Mode.TEXT&&previousMode!==MinimalEncoder_Mode.X12||(size+=2);break;case MinimalEncoder_Mode.C40:case MinimalEncoder_Mode.TEXT:case MinimalEncoder_Mode.X12:if(mode===MinimalEncoder_Mode.X12)size+=2;else{size+=2*MinimalEncoder.getNumberOfC40Words(input,fromPosition,mode===MinimalEncoder_Mode.C40,[])}previousMode===MinimalEncoder_Mode.ASCII||previousMode===MinimalEncoder_Mode.B256?size++:previousMode===mode||previousMode!==MinimalEncoder_Mode.C40&&previousMode!==MinimalEncoder_Mode.TEXT&&previousMode!==MinimalEncoder_Mode.X12||(size+=2);break;case MinimalEncoder_Mode.EDF:size+=3,previousMode===MinimalEncoder_Mode.ASCII||previousMode===MinimalEncoder_Mode.B256?size++:previousMode!==MinimalEncoder_Mode.C40&&previousMode!==MinimalEncoder_Mode.TEXT&&previousMode!==MinimalEncoder_Mode.X12||(size+=2)}this.cachedTotalSize=size}return Edge.prototype.getB256Size=function(){for(var cnt=0,current=this;null!==current&&current.mode===MinimalEncoder_Mode.B256&&cnt<=250;)cnt++,current=current.previous;return cnt},Edge.prototype.getPreviousStartMode=function(){return null===this.previous?MinimalEncoder_Mode.ASCII:this.previous.mode},Edge.prototype.getPreviousMode=function(){return null===this.previous?MinimalEncoder_Mode.ASCII:this.previous.getEndMode()},Edge.prototype.getEndMode=function(){if(this.mode===MinimalEncoder_Mode.EDF){if(this.characterLength<4)return MinimalEncoder_Mode.ASCII;if((lastASCII=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+lastASCII)<=2-lastASCII)return MinimalEncoder_Mode.ASCII}if(this.mode===MinimalEncoder_Mode.C40||this.mode===MinimalEncoder_Mode.TEXT||this.mode===MinimalEncoder_Mode.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return MinimalEncoder_Mode.ASCII;var lastASCII;if(1===(lastASCII=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return MinimalEncoder_Mode.ASCII}return this.mode},Edge.prototype.getMode=function(){return this.mode},Edge.prototype.getLastASCII=function(){var length=this.input.length(),from=this.fromPosition+this.characterLength;return length-from>4||from>=length?0:length-from===1?MinimalEncoder.isExtendedASCII(this.input.charAt(from),this.input.getFNC1Character())?0:1:length-from===2?MinimalEncoder.isExtendedASCII(this.input.charAt(from),this.input.getFNC1Character())||MinimalEncoder.isExtendedASCII(this.input.charAt(from+1),this.input.getFNC1Character())?0:encoder_HighLevelEncoder.isDigit(this.input.charAt(from))&&encoder_HighLevelEncoder.isDigit(this.input.charAt(from+1))?1:2:length-from===3?encoder_HighLevelEncoder.isDigit(this.input.charAt(from))&&encoder_HighLevelEncoder.isDigit(this.input.charAt(from+1))&&!MinimalEncoder.isExtendedASCII(this.input.charAt(from+2),this.input.getFNC1Character())||encoder_HighLevelEncoder.isDigit(this.input.charAt(from+1))&&encoder_HighLevelEncoder.isDigit(this.input.charAt(from+2))&&!MinimalEncoder.isExtendedASCII(this.input.charAt(from),this.input.getFNC1Character())?2:0:encoder_HighLevelEncoder.isDigit(this.input.charAt(from))&&encoder_HighLevelEncoder.isDigit(this.input.charAt(from+1))&&encoder_HighLevelEncoder.isDigit(this.input.charAt(from+2))&&encoder_HighLevelEncoder.isDigit(this.input.charAt(from+3))?2:0},Edge.prototype.getMinSymbolSize=function(minimum){var e_3,_a,e_4,_b,e_5,_c;switch(this.input.getShapeHint()){case 1:try{for(var _d=MinimalEncoder_values(this.squareCodewordCapacities),_e=_d.next();!_e.done;_e=_d.next()){if((capacity=_e.value)>=minimum)return capacity}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_e&&!_e.done&&(_a=_d.return)&&_a.call(_d)}finally{if(e_3)throw e_3.error}}break;case 2:try{for(var _f=MinimalEncoder_values(this.rectangularCodewordCapacities),_g=_f.next();!_g.done;_g=_f.next()){if((capacity=_g.value)>=minimum)return capacity}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_g&&!_g.done&&(_b=_f.return)&&_b.call(_f)}finally{if(e_4)throw e_4.error}}}try{for(var _h=MinimalEncoder_values(this.allCodewordCapacities),_j=_h.next();!_j.done;_j=_h.next()){var capacity;if((capacity=_j.value)>=minimum)return capacity}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_j&&!_j.done&&(_c=_h.return)&&_c.call(_h)}finally{if(e_5)throw e_5.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},Edge.prototype.getCodewordsRemaining=function(minimum){return this.getMinSymbolSize(minimum)-minimum},Edge.getBytes=function(c1,c2){var result=new Uint8Array(c2?2:1);return result[0]=c1,c2&&(result[1]=c2),result},Edge.prototype.setC40Word=function(bytes,offset,c1,c2,c3){var val16=1600*(255&c1)+40*(255&c2)+(255&c3)+1;bytes[offset]=val16/256,bytes[offset+1]=val16%256},Edge.prototype.getX12Value=function(c){return 13===c?0:42===c?1:62===c?2:32===c?3:c>=48&&c<=57?c-44:c>=65&&c<=90?c-51:c},Edge.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw new Error("X12 words must be a multiple of 3");for(var result=new Uint8Array(this.characterLength/3*2),i=0;i<result.length;i+=2)this.setC40Word(result,i,this.getX12Value(this.input.charAt(this.fromPosition+i/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+i/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+i/2*3+2)));return result},Edge.prototype.getShiftValue=function(c,c40,fnc1){return c40&&MinimalEncoder.isInC40Shift1Set(c)||!c40&&MinimalEncoder.isInTextShift1Set(c)?0:c40&&MinimalEncoder.isInC40Shift2Set(c,fnc1)||!c40&&MinimalEncoder.isInTextShift2Set(c,fnc1)?1:2},Edge.prototype.getC40Value=function(c40,setIndex,c,fnc1){if(c===fnc1){if(2!==setIndex)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return c40?c<=31?c:32===c?3:c<=47?c-33:c<=57?c-44:c<=64?c-43:c<=90?c-51:c<=95?c-69:c<=127?c-96:c:0===c?0:0===setIndex&&c<=3?c-1:1===setIndex&&c<=31?c:32===c?3:c>=33&&c<=47?c-33:c>=48&&c<=57?c-44:c>=58&&c<=64?c-43:c>=65&&c<=90?c-64:c>=91&&c<=95?c-69:96===c?0:c>=97&&c<=122?c-83:c>=123&&c<=127?c-96:c},Edge.prototype.getC40Words=function(c40,fnc1){for(var c40Values=[],i=0;i<this.characterLength;i++){var ci=this.input.charAt(this.fromPosition+i);if(c40&&encoder_HighLevelEncoder.isNativeC40(ci)||!c40&&encoder_HighLevelEncoder.isNativeText(ci))c40Values.push(this.getC40Value(c40,0,ci,fnc1));else if(MinimalEncoder.isExtendedASCII(ci,fnc1)){var asciiValue=(255&ci)-128;if(c40&&encoder_HighLevelEncoder.isNativeC40(asciiValue)||!c40&&encoder_HighLevelEncoder.isNativeText(asciiValue))c40Values.push(1),c40Values.push(30),c40Values.push(this.getC40Value(c40,0,asciiValue,fnc1));else{c40Values.push(1),c40Values.push(30);shiftValue=this.getShiftValue(asciiValue,c40,fnc1);c40Values.push(shiftValue),c40Values.push(this.getC40Value(c40,shiftValue,asciiValue,fnc1))}}else{var shiftValue=this.getShiftValue(ci,c40,fnc1);c40Values.push(shiftValue),c40Values.push(this.getC40Value(c40,shiftValue,ci,fnc1))}}if(c40Values.length%3!=0){if((c40Values.length-2)%3!=0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");c40Values.push(0)}var result=new Uint8Array(c40Values.length/3*2),byteIndex=0;for(i=0;i<c40Values.length;i+=3)this.setC40Word(result,byteIndex,255&c40Values[i],255&c40Values[i+1],255&c40Values[i+2]),byteIndex+=2;return result},Edge.prototype.getEDFBytes=function(){for(var numberOfThirds=Math.ceil(this.characterLength/4),result=new Uint8Array(3*numberOfThirds),pos=this.fromPosition,endPos=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),i=0;i<numberOfThirds;i+=3){for(var edfValues=[],j=0;j<4;j++)edfValues[j]=pos<=endPos?63&this.input.charAt(pos++):pos===endPos+1?31:0;var val24=edfValues[0]<<18;val24|=edfValues[1]<<12,val24|=edfValues[2]<<6,val24|=edfValues[3],result[i]=val24>>16&255,result[i+1]=val24>>8&255,result[i+2]=255&val24}return result},Edge.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case MinimalEncoder_Mode.ASCII:case MinimalEncoder_Mode.B256:switch(this.mode){case MinimalEncoder_Mode.B256:return Edge.getBytes(231);case MinimalEncoder_Mode.C40:return Edge.getBytes(230);case MinimalEncoder_Mode.TEXT:return Edge.getBytes(239);case MinimalEncoder_Mode.X12:return Edge.getBytes(238);case MinimalEncoder_Mode.EDF:return Edge.getBytes(240)}break;case MinimalEncoder_Mode.C40:case MinimalEncoder_Mode.TEXT:case MinimalEncoder_Mode.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case MinimalEncoder_Mode.ASCII:return Edge.getBytes(254);case MinimalEncoder_Mode.B256:return Edge.getBytes(254,231);case MinimalEncoder_Mode.C40:return Edge.getBytes(254,230);case MinimalEncoder_Mode.TEXT:return Edge.getBytes(254,239);case MinimalEncoder_Mode.X12:return Edge.getBytes(254,238);case MinimalEncoder_Mode.EDF:return Edge.getBytes(254,240)}break;case MinimalEncoder_Mode.EDF:if(this.mode!==MinimalEncoder_Mode.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},Edge.prototype.getDataBytes=function(){switch(this.mode){case MinimalEncoder_Mode.ASCII:return this.input.isECI(this.fromPosition)?Edge.getBytes(241,this.input.getECIValue(this.fromPosition)+1):MinimalEncoder.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?Edge.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?Edge.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?Edge.getBytes(232):Edge.getBytes(this.input.charAt(this.fromPosition)+1);case MinimalEncoder_Mode.B256:return Edge.getBytes(this.input.charAt(this.fromPosition));case MinimalEncoder_Mode.C40:return this.getC40Words(!0,this.input.getFNC1Character());case MinimalEncoder_Mode.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case MinimalEncoder_Mode.X12:return this.getX12Words();case MinimalEncoder_Mode.EDF:return this.getEDFBytes()}},Edge}(),Input=function(_super){function Input(stringToEncode,priorityCharset,fnc1,shape,macroId){var _this=_super.call(this,stringToEncode,priorityCharset,fnc1)||this;return _this.shape=shape,_this.macroId=macroId,_this}return MinimalEncoder_extends(Input,_super),Input.prototype.getMacroId=function(){return this.macroId},Input.prototype.getShapeHint=function(){return this.shape},Input}(MinimalECIInput);!function(){function DataMatrixWriter(){}DataMatrixWriter.prototype.encode=function(contents,format,width,height,hints){if(void 0===hints&&(hints=null),""===contents.trim())throw new Error("Found empty contents");if(format!==core_BarcodeFormat.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+format);if(width<0||height<0)throw new Error("Requested dimensions can't be negative: "+width+"x"+height);var encoded,shape=0,minSize=null,maxSize=null;if(null!=hints){var requestedShape=hints.get(core_EncodeHintType.DATA_MATRIX_SHAPE);null!=requestedShape&&(shape=requestedShape);var requestedMinSize=hints.get(core_EncodeHintType.MIN_SIZE);null!=requestedMinSize&&(minSize=requestedMinSize);var requestedMaxSize=hints.get(core_EncodeHintType.MAX_SIZE);null!=requestedMaxSize&&(maxSize=requestedMaxSize)}if(null!=hints&&hints.has(core_EncodeHintType.DATA_MATRIX_COMPACT)&&Boolean(hints.get(core_EncodeHintType.DATA_MATRIX_COMPACT).toString())){var hasGS1FormatHint=hints.has(core_EncodeHintType.GS1_FORMAT)&&Boolean(hints.get(core_EncodeHintType.GS1_FORMAT).toString()),charset=null;hints.has(core_EncodeHintType.CHARACTER_SET)&&(charset=util_Charset.forName(hints.get(core_EncodeHintType.CHARACTER_SET).toString())),encoded=MinimalEncoder.encodeHighLevel(contents,charset,hasGS1FormatHint?29:-1,shape)}else{var hasForceC40Hint=null!=hints&&hints.has(core_EncodeHintType.FORCE_C40)&&Boolean(hints.get(core_EncodeHintType.FORCE_C40).toString());encoded=encoder_HighLevelEncoder.encodeHighLevel(contents,shape,minSize,maxSize,hasForceC40Hint)}var symbolInfo=encoder_SymbolInfo.lookup(encoded.length,shape,minSize,maxSize,!0),codewords=encoder_ErrorCorrection.encodeECC200(encoded,symbolInfo),placement=new encoder_DefaultPlacement(codewords,symbolInfo.getSymbolDataWidth(),symbolInfo.getSymbolDataHeight());return placement.place(),this.encodeLowLevel(placement,symbolInfo,width,height)},DataMatrixWriter.prototype.encodeLowLevel=function(placement,symbolInfo,width,height){for(var symbolWidth=symbolInfo.getSymbolDataWidth(),symbolHeight=symbolInfo.getSymbolDataHeight(),matrix=new encoder_ByteMatrix(symbolInfo.getSymbolWidth(),symbolInfo.getSymbolHeight()),matrixY=0,y=0;y<symbolHeight;y++){var matrixX=void 0;if(y%symbolInfo.matrixHeight===0){matrixX=0;for(var x=0;x<symbolInfo.getSymbolWidth();x++)matrix.setBoolean(matrixX,matrixY,x%2==0),matrixX++;matrixY++}matrixX=0;for(x=0;x<symbolWidth;x++)x%symbolInfo.matrixWidth===0&&(matrix.setBoolean(matrixX,matrixY,!0),matrixX++),matrix.setBoolean(matrixX,matrixY,placement.getBit(x,y)),matrixX++,x%symbolInfo.matrixWidth===symbolInfo.matrixWidth-1&&(matrix.setBoolean(matrixX,matrixY,y%2==0),matrixX++);if(matrixY++,y%symbolInfo.matrixHeight===symbolInfo.matrixHeight-1){matrixX=0;for(x=0;x<symbolInfo.getSymbolWidth();x++)matrix.setBoolean(matrixX,matrixY,!0),matrixX++;matrixY++}}return this.convertByteMatrixToBitMatrix(matrix,width,height)},DataMatrixWriter.prototype.convertByteMatrixToBitMatrix=function(matrix,reqWidth,reqHeight){var output,matrixWidth=matrix.getWidth(),matrixHeight=matrix.getHeight(),outputWidth=Math.max(reqWidth,matrixWidth),outputHeight=Math.max(reqHeight,matrixHeight),multiple=Math.min(outputWidth/matrixWidth,outputHeight/matrixHeight),leftPadding=(outputWidth-matrixWidth*multiple)/2,topPadding=(outputHeight-matrixHeight*multiple)/2;reqHeight<matrixHeight||reqWidth<matrixWidth?(leftPadding=0,topPadding=0,output=new common_BitMatrix(matrixWidth,matrixHeight)):output=new common_BitMatrix(reqWidth,reqHeight),output.clear();for(var inputY=0,outputY=topPadding;inputY<matrixHeight;inputY++,outputY+=multiple)for(var inputX=0,outputX=leftPadding;inputX<matrixWidth;inputX++,outputX+=multiple)1===matrix.get(inputX,inputY)&&output.setRegion(outputX,outputY,multiple,multiple);return output}}();const encoder_AztecCode=function(){function AztecCode(){}return AztecCode.prototype.isCompact=function(){return this.compact},AztecCode.prototype.setCompact=function(compact){this.compact=compact},AztecCode.prototype.getSize=function(){return this.size},AztecCode.prototype.setSize=function(size){this.size=size},AztecCode.prototype.getLayers=function(){return this.layers},AztecCode.prototype.setLayers=function(layers){this.layers=layers},AztecCode.prototype.getCodeWords=function(){return this.codeWords},AztecCode.prototype.setCodeWords=function(codeWords){this.codeWords=codeWords},AztecCode.prototype.getMatrix=function(){return this.matrix},AztecCode.prototype.setMatrix=function(matrix){this.matrix=matrix},AztecCode}();const util_Collections=function(){function Collections(){}return Collections.singletonList=function(item){return[item]},Collections.min=function(collection,comparator){return collection.sort(comparator)[0]},Collections}();const encoder_Token=function(){function Token(previous){this.previous=previous}return Token.prototype.getPrevious=function(){return this.previous},Token}();var SimpleToken_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const encoder_SimpleToken=function(_super){function SimpleToken(previous,value,bitCount){var _this=_super.call(this,previous)||this;return _this.value=value,_this.bitCount=bitCount,_this}return SimpleToken_extends(SimpleToken,_super),SimpleToken.prototype.appendTo=function(bitArray,text){bitArray.appendBits(this.value,this.bitCount)},SimpleToken.prototype.add=function(value,bitCount){return new SimpleToken(this,value,bitCount)},SimpleToken.prototype.addBinaryShift=function(start,byteCount){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new SimpleToken(this,start,byteCount)},SimpleToken.prototype.toString=function(){var value=this.value&(1<<this.bitCount)-1;return value|=1<<this.bitCount,"<"+util_Integer.toBinaryString(value|1<<this.bitCount).substring(1)+">"},SimpleToken}(encoder_Token);var BinaryShiftToken_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();const encoder_BinaryShiftToken=function(_super){function BinaryShiftToken(previous,binaryShiftStart,binaryShiftByteCount){var _this=_super.call(this,previous,0,0)||this;return _this.binaryShiftStart=binaryShiftStart,_this.binaryShiftByteCount=binaryShiftByteCount,_this}return BinaryShiftToken_extends(BinaryShiftToken,_super),BinaryShiftToken.prototype.appendTo=function(bitArray,text){for(var i=0;i<this.binaryShiftByteCount;i++)(0===i||31===i&&this.binaryShiftByteCount<=62)&&(bitArray.appendBits(31,5),this.binaryShiftByteCount>62?bitArray.appendBits(this.binaryShiftByteCount-31,16):0===i?bitArray.appendBits(Math.min(this.binaryShiftByteCount,31),5):bitArray.appendBits(this.binaryShiftByteCount-31,5)),bitArray.appendBits(text[this.binaryShiftStart+i],8)},BinaryShiftToken.prototype.addBinaryShift=function(start,byteCount){return new BinaryShiftToken(this,start,byteCount)},BinaryShiftToken.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},BinaryShiftToken}(encoder_SimpleToken);function add(token,value,bitCount){return new encoder_SimpleToken(token,value,bitCount)}var MODE_NAMES=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],EMPTY_TOKEN=new encoder_SimpleToken(null,0,0),LATCH_TABLE=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],ShiftTable_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};var SHIFT_TABLE=function static_SHIFT_TABLE(SHIFT_TABLE){var e_1,_a;try{for(var SHIFT_TABLE_1=ShiftTable_values(SHIFT_TABLE),SHIFT_TABLE_1_1=SHIFT_TABLE_1.next();!SHIFT_TABLE_1_1.done;SHIFT_TABLE_1_1=SHIFT_TABLE_1.next()){var table=SHIFT_TABLE_1_1.value;util_Arrays.fill(table,-1)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{SHIFT_TABLE_1_1&&!SHIFT_TABLE_1_1.done&&(_a=SHIFT_TABLE_1.return)&&_a.call(SHIFT_TABLE_1)}finally{if(e_1)throw e_1.error}}return SHIFT_TABLE[0][4]=0,SHIFT_TABLE[1][4]=0,SHIFT_TABLE[1][0]=28,SHIFT_TABLE[3][4]=0,SHIFT_TABLE[2][4]=0,SHIFT_TABLE[2][0]=15,SHIFT_TABLE}(util_Arrays.createInt32Array(6,6)),State_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},State=function(){function State(token,mode,binaryBytes,bitCount){this.token=token,this.mode=mode,this.binaryShiftByteCount=binaryBytes,this.bitCount=bitCount}return State.prototype.getMode=function(){return this.mode},State.prototype.getToken=function(){return this.token},State.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},State.prototype.getBitCount=function(){return this.bitCount},State.prototype.latchAndAppend=function(mode,value){var bitCount=this.bitCount,token=this.token;if(mode!==this.mode){var latch=LATCH_TABLE[this.mode][mode];token=add(token,65535&latch,latch>>16),bitCount+=latch>>16}var latchModeBitCount=2===mode?4:5;return new State(token=add(token,value,latchModeBitCount),mode,0,bitCount+latchModeBitCount)},State.prototype.shiftAndAppend=function(mode,value){var token=this.token,thisModeBitCount=2===this.mode?4:5;return token=add(token,SHIFT_TABLE[this.mode][mode],thisModeBitCount),new State(token=add(token,value,5),this.mode,0,this.bitCount+thisModeBitCount+5)},State.prototype.addBinaryShiftChar=function(index){var token=this.token,mode=this.mode,bitCount=this.bitCount;if(4===this.mode||2===this.mode){var latch=LATCH_TABLE[mode][0];token=add(token,65535&latch,latch>>16),bitCount+=latch>>16,mode=0}var deltaBitCount=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,result=new State(token,mode,this.binaryShiftByteCount+1,bitCount+deltaBitCount);return 2078===result.binaryShiftByteCount&&(result=result.endBinaryShift(index+1)),result},State.prototype.endBinaryShift=function(index){if(0===this.binaryShiftByteCount)return this;var token=this.token;return new State(token=function addBinaryShift(token,start,byteCount){return new encoder_BinaryShiftToken(token,start,byteCount)}(token,index-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},State.prototype.isBetterThanOrEqualTo=function(other){var newModeBitCount=this.bitCount+(LATCH_TABLE[this.mode][other.mode]>>16);return this.binaryShiftByteCount<other.binaryShiftByteCount?newModeBitCount+=State.calculateBinaryShiftCost(other)-State.calculateBinaryShiftCost(this):this.binaryShiftByteCount>other.binaryShiftByteCount&&other.binaryShiftByteCount>0&&(newModeBitCount+=10),newModeBitCount<=other.bitCount},State.prototype.toBitArray=function(text){for(var e_1,_a,symbols=[],token=this.endBinaryShift(text.length).token;null!==token;token=token.getPrevious())symbols.unshift(token);var bitArray=new common_BitArray;try{for(var symbols_1=State_values(symbols),symbols_1_1=symbols_1.next();!symbols_1_1.done;symbols_1_1=symbols_1.next()){symbols_1_1.value.appendTo(bitArray,text)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{symbols_1_1&&!symbols_1_1.done&&(_a=symbols_1.return)&&_a.call(symbols_1)}finally{if(e_1)throw e_1.error}}return bitArray},State.prototype.toString=function(){return common_StringUtils.format("%s bits=%d bytes=%d",MODE_NAMES[this.mode],this.bitCount,this.binaryShiftByteCount)},State.calculateBinaryShiftCost=function(state){return state.binaryShiftByteCount>62?21:state.binaryShiftByteCount>31?20:state.binaryShiftByteCount>0?10:0},State.INITIAL_STATE=new State(EMPTY_TOKEN,0,0,0),State}();const encoder_State=State;var CHAR_MAP=function static_CHAR_MAP(CHAR_MAP){var spaceCharCode=common_StringUtils.getCharCode(" "),pointCharCode=common_StringUtils.getCharCode("."),commaCharCode=common_StringUtils.getCharCode(",");CHAR_MAP[0][spaceCharCode]=1;for(var zUpperCharCode=common_StringUtils.getCharCode("Z"),aUpperCharCode=common_StringUtils.getCharCode("A"),c=aUpperCharCode;c<=zUpperCharCode;c++)CHAR_MAP[0][c]=c-aUpperCharCode+2;CHAR_MAP[1][spaceCharCode]=1;var zLowerCharCode=common_StringUtils.getCharCode("z"),aLowerCharCode=common_StringUtils.getCharCode("a");for(c=aLowerCharCode;c<=zLowerCharCode;c++)CHAR_MAP[1][c]=c-aLowerCharCode+2;CHAR_MAP[2][spaceCharCode]=1;var nineCharCode=common_StringUtils.getCharCode("9"),zeroCharCode=common_StringUtils.getCharCode("0");for(c=zeroCharCode;c<=nineCharCode;c++)CHAR_MAP[2][c]=c-zeroCharCode+2;CHAR_MAP[2][commaCharCode]=12,CHAR_MAP[2][pointCharCode]=13;for(var mixedTable=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""],i=0;i<mixedTable.length;i++)CHAR_MAP[3][common_StringUtils.getCharCode(mixedTable[i])]=i;var punctTable=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(i=0;i<punctTable.length;i++)common_StringUtils.getCharCode(punctTable[i])>0&&(CHAR_MAP[4][common_StringUtils.getCharCode(punctTable[i])]=i);return CHAR_MAP}(util_Arrays.createInt32Array(5,256)),HighLevelEncoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},HighLevelEncoder_HighLevelEncoder=function(){function HighLevelEncoder(text){this.text=text}return HighLevelEncoder.prototype.encode=function(){for(var spaceCharCode=common_StringUtils.getCharCode(" "),lineBreakCharCode=common_StringUtils.getCharCode("\n"),states=util_Collections.singletonList(encoder_State.INITIAL_STATE),index=0;index<this.text.length;index++){var pairCode=void 0,nextChar=index+1<this.text.length?this.text[index+1]:0;switch(this.text[index]){case common_StringUtils.getCharCode("\r"):pairCode=nextChar===lineBreakCharCode?2:0;break;case common_StringUtils.getCharCode("."):pairCode=nextChar===spaceCharCode?3:0;break;case common_StringUtils.getCharCode(","):pairCode=nextChar===spaceCharCode?4:0;break;case common_StringUtils.getCharCode(":"):pairCode=nextChar===spaceCharCode?5:0;break;default:pairCode=0}pairCode>0?(states=HighLevelEncoder.updateStateListForPair(states,index,pairCode),index++):states=this.updateStateListForChar(states,index)}return util_Collections.min(states,function(a,b){return a.getBitCount()-b.getBitCount()}).toBitArray(this.text)},HighLevelEncoder.prototype.updateStateListForChar=function(states,index){var e_1,_a,result=[];try{for(var states_1=HighLevelEncoder_values(states),states_1_1=states_1.next();!states_1_1.done;states_1_1=states_1.next()){var state=states_1_1.value;this.updateStateForChar(state,index,result)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{states_1_1&&!states_1_1.done&&(_a=states_1.return)&&_a.call(states_1)}finally{if(e_1)throw e_1.error}}return HighLevelEncoder.simplifyStates(result)},HighLevelEncoder.prototype.updateStateForChar=function(state,index,result){for(var ch=255&this.text[index],charInCurrentTable=CHAR_MAP[state.getMode()][ch]>0,stateNoBinary=null,mode=0;mode<=4;mode++){var charInMode=CHAR_MAP[mode][ch];if(charInMode>0){if(null==stateNoBinary&&(stateNoBinary=state.endBinaryShift(index)),!charInCurrentTable||mode===state.getMode()||2===mode){var latchState=stateNoBinary.latchAndAppend(mode,charInMode);result.push(latchState)}if(!charInCurrentTable&&SHIFT_TABLE[state.getMode()][mode]>=0){var shiftState=stateNoBinary.shiftAndAppend(mode,charInMode);result.push(shiftState)}}}if(state.getBinaryShiftByteCount()>0||0===CHAR_MAP[state.getMode()][ch]){var binaryState=state.addBinaryShiftChar(index);result.push(binaryState)}},HighLevelEncoder.updateStateListForPair=function(states,index,pairCode){var e_2,_a,result=[];try{for(var states_2=HighLevelEncoder_values(states),states_2_1=states_2.next();!states_2_1.done;states_2_1=states_2.next()){var state=states_2_1.value;this.updateStateForPair(state,index,pairCode,result)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{states_2_1&&!states_2_1.done&&(_a=states_2.return)&&_a.call(states_2)}finally{if(e_2)throw e_2.error}}return this.simplifyStates(result)},HighLevelEncoder.updateStateForPair=function(state,index,pairCode,result){var stateNoBinary=state.endBinaryShift(index);if(result.push(stateNoBinary.latchAndAppend(4,pairCode)),4!==state.getMode()&&result.push(stateNoBinary.shiftAndAppend(4,pairCode)),3===pairCode||4===pairCode){var digitState=stateNoBinary.latchAndAppend(2,16-pairCode).latchAndAppend(2,1);result.push(digitState)}if(state.getBinaryShiftByteCount()>0){var binaryState=state.addBinaryShiftChar(index).addBinaryShiftChar(index+1);result.push(binaryState)}},HighLevelEncoder.simplifyStates=function(states){var e_3,_a,e_4,_b,result=[];try{for(var states_3=HighLevelEncoder_values(states),states_3_1=states_3.next();!states_3_1.done;states_3_1=states_3.next()){var newState=states_3_1.value,add=!0,_loop_1=function(oldState){if(oldState.isBetterThanOrEqualTo(newState))return add=!1,"break";newState.isBetterThanOrEqualTo(oldState)&&(result=result.filter(function(x){return x!==oldState}))};try{for(var result_1=(e_4=void 0,HighLevelEncoder_values(result)),result_1_1=result_1.next();!result_1_1.done;result_1_1=result_1.next()){if("break"===_loop_1(result_1_1.value))break}}catch(e_4_1){e_4={error:e_4_1}}finally{try{result_1_1&&!result_1_1.done&&(_b=result_1.return)&&_b.call(result_1)}finally{if(e_4)throw e_4.error}}add&&result.push(newState)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{states_3_1&&!states_3_1.done&&(_a=states_3.return)&&_a.call(states_3)}finally{if(e_3)throw e_3.error}}return result},HighLevelEncoder}();const aztec_encoder_HighLevelEncoder=HighLevelEncoder_HighLevelEncoder;var encoder_Encoder_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Encoder_Encoder=function(){function Encoder(){}return Encoder.encodeBytes=function(data){return Encoder.encode(data,Encoder.DEFAULT_EC_PERCENT,Encoder.DEFAULT_AZTEC_LAYERS)},Encoder.encode=function(data,minECCPercent,userSpecifiedLayers){var compact,layers,totalBitsInLayer,wordSize,stuffedBits,bits=new aztec_encoder_HighLevelEncoder(data).encode(),eccBits=util_Integer.truncDivision(bits.getSize()*minECCPercent,100)+11,totalSizeBits=bits.getSize()+eccBits;if(userSpecifiedLayers!==Encoder.DEFAULT_AZTEC_LAYERS){if(compact=userSpecifiedLayers<0,(layers=Math.abs(userSpecifiedLayers))>(compact?Encoder.MAX_NB_BITS_COMPACT:Encoder.MAX_NB_BITS))throw new core_IllegalArgumentException(common_StringUtils.format("Illegal value %s for layers",userSpecifiedLayers));var usableBitsInLayers=(totalBitsInLayer=Encoder.totalBitsInLayer(layers,compact))-totalBitsInLayer%(wordSize=Encoder.WORD_SIZE[layers]);if((stuffedBits=Encoder.stuffBits(bits,wordSize)).getSize()+eccBits>usableBitsInLayers)throw new core_IllegalArgumentException("Data to large for user specified layer");if(compact&&stuffedBits.getSize()>64*wordSize)throw new core_IllegalArgumentException("Data to large for user specified layer")}else{wordSize=0,stuffedBits=null;for(var i=0;;i++){if(i>Encoder.MAX_NB_BITS)throw new core_IllegalArgumentException("Data too large for an Aztec code");if(layers=(compact=i<=3)?i+1:i,!(totalSizeBits>(totalBitsInLayer=Encoder.totalBitsInLayer(layers,compact)))){null!=stuffedBits&&wordSize===Encoder.WORD_SIZE[layers]||(wordSize=Encoder.WORD_SIZE[layers],stuffedBits=Encoder.stuffBits(bits,wordSize));usableBitsInLayers=totalBitsInLayer-totalBitsInLayer%wordSize;if(!(compact&&stuffedBits.getSize()>64*wordSize)&&stuffedBits.getSize()+eccBits<=usableBitsInLayers)break}}}var matrixSize,messageBits=Encoder.generateCheckWords(stuffedBits,totalBitsInLayer,wordSize),messageSizeInWords=stuffedBits.getSize()/wordSize,modeMessage=Encoder.generateModeMessage(compact,layers,messageSizeInWords),baseMatrixSize=(compact?11:14)+4*layers,alignmentMap=new Int32Array(baseMatrixSize);if(compact){matrixSize=baseMatrixSize;for(i=0;i<alignmentMap.length;i++)alignmentMap[i]=i}else{matrixSize=baseMatrixSize+1+2*util_Integer.truncDivision(util_Integer.truncDivision(baseMatrixSize,2)-1,15);var origCenter=util_Integer.truncDivision(baseMatrixSize,2),center=util_Integer.truncDivision(matrixSize,2);for(i=0;i<origCenter;i++){var newOffset=i+util_Integer.truncDivision(i,15);alignmentMap[origCenter-i-1]=center-newOffset-1,alignmentMap[origCenter+i]=center+newOffset+1}}for(var matrix=new common_BitMatrix(matrixSize),rowOffset=(i=0,0);i<layers;i++){for(var rowSize=4*(layers-i)+(compact?9:12),j=0;j<rowSize;j++)for(var columnOffset=2*j,k=0;k<2;k++)messageBits.get(rowOffset+columnOffset+k)&&matrix.set(alignmentMap[2*i+k],alignmentMap[2*i+j]),messageBits.get(rowOffset+2*rowSize+columnOffset+k)&&matrix.set(alignmentMap[2*i+j],alignmentMap[baseMatrixSize-1-2*i-k]),messageBits.get(rowOffset+4*rowSize+columnOffset+k)&&matrix.set(alignmentMap[baseMatrixSize-1-2*i-k],alignmentMap[baseMatrixSize-1-2*i-j]),messageBits.get(rowOffset+6*rowSize+columnOffset+k)&&matrix.set(alignmentMap[baseMatrixSize-1-2*i-j],alignmentMap[2*i+k]);rowOffset+=8*rowSize}if(Encoder.drawModeMessage(matrix,compact,matrixSize,modeMessage),compact)Encoder.drawBullsEye(matrix,util_Integer.truncDivision(matrixSize,2),5);else{Encoder.drawBullsEye(matrix,util_Integer.truncDivision(matrixSize,2),7);for(i=0,j=0;i<util_Integer.truncDivision(baseMatrixSize,2)-1;i+=15,j+=16)for(k=1&util_Integer.truncDivision(matrixSize,2);k<matrixSize;k+=2)matrix.set(util_Integer.truncDivision(matrixSize,2)-j,k),matrix.set(util_Integer.truncDivision(matrixSize,2)+j,k),matrix.set(k,util_Integer.truncDivision(matrixSize,2)-j),matrix.set(k,util_Integer.truncDivision(matrixSize,2)+j)}var aztec=new encoder_AztecCode;return aztec.setCompact(compact),aztec.setSize(matrixSize),aztec.setLayers(layers),aztec.setCodeWords(messageSizeInWords),aztec.setMatrix(matrix),aztec},Encoder.drawBullsEye=function(matrix,center,size){for(var i=0;i<size;i+=2)for(var j=center-i;j<=center+i;j++)matrix.set(j,center-i),matrix.set(j,center+i),matrix.set(center-i,j),matrix.set(center+i,j);matrix.set(center-size,center-size),matrix.set(center-size+1,center-size),matrix.set(center-size,center-size+1),matrix.set(center+size,center-size),matrix.set(center+size,center-size+1),matrix.set(center+size,center+size-1)},Encoder.generateModeMessage=function(compact,layers,messageSizeInWords){var modeMessage=new common_BitArray;return compact?(modeMessage.appendBits(layers-1,2),modeMessage.appendBits(messageSizeInWords-1,6),modeMessage=Encoder.generateCheckWords(modeMessage,28,4)):(modeMessage.appendBits(layers-1,5),modeMessage.appendBits(messageSizeInWords-1,11),modeMessage=Encoder.generateCheckWords(modeMessage,40,4)),modeMessage},Encoder.drawModeMessage=function(matrix,compact,matrixSize,modeMessage){var center=util_Integer.truncDivision(matrixSize,2);if(compact)for(var i=0;i<7;i++){var offset=center-3+i;modeMessage.get(i)&&matrix.set(offset,center-5),modeMessage.get(i+7)&&matrix.set(center+5,offset),modeMessage.get(20-i)&&matrix.set(offset,center+5),modeMessage.get(27-i)&&matrix.set(center-5,offset)}else for(i=0;i<10;i++){offset=center-5+i+util_Integer.truncDivision(i,5);modeMessage.get(i)&&matrix.set(offset,center-7),modeMessage.get(i+10)&&matrix.set(center+7,offset),modeMessage.get(29-i)&&matrix.set(offset,center+7),modeMessage.get(39-i)&&matrix.set(center-7,offset)}},Encoder.generateCheckWords=function(bitArray,totalBits,wordSize){var e_1,_a,messageSizeInWords=bitArray.getSize()/wordSize,rs=new reedsolomon_ReedSolomonEncoder(Encoder.getGF(wordSize)),totalWords=util_Integer.truncDivision(totalBits,wordSize),messageWords=Encoder.bitsToWords(bitArray,wordSize,totalWords);rs.encode(messageWords,totalWords-messageSizeInWords);var startPad=totalBits%wordSize,messageBits=new common_BitArray;messageBits.appendBits(0,startPad);try{for(var _b=encoder_Encoder_values(Array.from(messageWords)),_c=_b.next();!_c.done;_c=_b.next()){var messageWord=_c.value;messageBits.appendBits(messageWord,wordSize)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return messageBits},Encoder.bitsToWords=function(stuffedBits,wordSize,totalWords){var i,n,message=new Int32Array(totalWords);for(i=0,n=stuffedBits.getSize()/wordSize;i<n;i++){for(var value=0,j=0;j<wordSize;j++)value|=stuffedBits.get(i*wordSize+j)?1<<wordSize-j-1:0;message[i]=value}return message},Encoder.getGF=function(wordSize){switch(wordSize){case 4:return reedsolomon_GenericGF.AZTEC_PARAM;case 6:return reedsolomon_GenericGF.AZTEC_DATA_6;case 8:return reedsolomon_GenericGF.AZTEC_DATA_8;case 10:return reedsolomon_GenericGF.AZTEC_DATA_10;case 12:return reedsolomon_GenericGF.AZTEC_DATA_12;default:throw new core_IllegalArgumentException("Unsupported word size "+wordSize)}},Encoder.stuffBits=function(bits,wordSize){for(var out=new common_BitArray,n=bits.getSize(),mask=(1<<wordSize)-2,i=0;i<n;i+=wordSize){for(var word=0,j=0;j<wordSize;j++)(i+j>=n||bits.get(i+j))&&(word|=1<<wordSize-1-j);(word&mask)===mask?(out.appendBits(word&mask,wordSize),i--):0===(word&mask)?(out.appendBits(1|word,wordSize),i--):out.appendBits(word,wordSize)}return out},Encoder.totalBitsInLayer=function(layers,compact){return((compact?88:112)+16*layers)*layers},Encoder.DEFAULT_EC_PERCENT=33,Encoder.DEFAULT_AZTEC_LAYERS=0,Encoder.MAX_NB_BITS=32,Encoder.MAX_NB_BITS_COMPACT=4,Encoder.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),Encoder}();const aztec_encoder_Encoder=Encoder_Encoder;!function(){function AztecWriter(){}AztecWriter.prototype.encode=function(contents,format,width,height){return this.encodeWithHints(contents,format,width,height,null)},AztecWriter.prototype.encodeWithHints=function(contents,format,width,height,hints){var charset=util_StandardCharsets.ISO_8859_1,eccPercent=aztec_encoder_Encoder.DEFAULT_EC_PERCENT,layers=aztec_encoder_Encoder.DEFAULT_AZTEC_LAYERS;return null!=hints&&(hints.has(core_EncodeHintType.CHARACTER_SET)&&(charset=util_Charset.forName(hints.get(core_EncodeHintType.CHARACTER_SET).toString())),hints.has(core_EncodeHintType.ERROR_CORRECTION)&&(eccPercent=util_Integer.parseInt(hints.get(core_EncodeHintType.ERROR_CORRECTION).toString())),hints.has(core_EncodeHintType.AZTEC_LAYERS)&&(layers=util_Integer.parseInt(hints.get(core_EncodeHintType.AZTEC_LAYERS).toString()))),AztecWriter.encodeLayers(contents,format,width,height,charset,eccPercent,layers)},AztecWriter.encodeLayers=function(contents,format,width,height,charset,eccPercent,layers){if(format!==core_BarcodeFormat.AZTEC)throw new core_IllegalArgumentException("Can only encode AZTEC, but got "+format);var aztec=aztec_encoder_Encoder.encode(common_StringUtils.getBytes(contents,charset),eccPercent,layers);return AztecWriter.renderResult(aztec,width,height)},AztecWriter.renderResult=function(code,width,height){var input=code.getMatrix();if(null==input)throw new core_IllegalStateException;for(var inputWidth=input.getWidth(),inputHeight=input.getHeight(),outputWidth=Math.max(width,inputWidth),outputHeight=Math.max(height,inputHeight),multiple=Math.min(outputWidth/inputWidth,outputHeight/inputHeight),leftPadding=(outputWidth-inputWidth*multiple)/2,topPadding=(outputHeight-inputHeight*multiple)/2,output=new common_BitMatrix(outputWidth,outputHeight),inputY=0,outputY=topPadding;inputY<inputHeight;inputY++,outputY+=multiple)for(var inputX=0,outputX=leftPadding;inputX<inputWidth;inputX++,outputX+=multiple)input.get(inputX,inputY)&&output.setRegion(outputX,outputY,multiple,multiple);return output}}();var common_HTMLCanvasElementLuminanceSource_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),HTMLCanvasElementLuminanceSource_HTMLCanvasElementLuminanceSource=function(_super){function HTMLCanvasElementLuminanceSource(canvas){var _this=_super.call(this,canvas.width,canvas.height)||this;return _this.canvas=canvas,_this.tempCanvasElement=null,_this.buffer=HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(canvas),_this}return common_HTMLCanvasElementLuminanceSource_extends(HTMLCanvasElementLuminanceSource,_super),HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData=function(canvas){var canvasCtx;try{canvasCtx=canvas.getContext("2d",{willReadFrequently:!0})}catch(e){canvasCtx=canvas.getContext("2d")}if(!canvasCtx)throw new Error("Couldn't get canvas context.");var imageData=canvasCtx.getImageData(0,0,canvas.width,canvas.height);return HTMLCanvasElementLuminanceSource.toGrayscaleBuffer(imageData.data,canvas.width,canvas.height)},HTMLCanvasElementLuminanceSource.toGrayscaleBuffer=function(imageBuffer,width,height){for(var grayscaleBuffer=new Uint8ClampedArray(width*height),i=0,j=0,length_1=imageBuffer.length;i<length_1;i+=4,j++){var gray=void 0;if(0===imageBuffer[i+3])gray=255;else gray=306*imageBuffer[i]+601*imageBuffer[i+1]+117*imageBuffer[i+2]+512>>10;grayscaleBuffer[j]=gray}return grayscaleBuffer},HTMLCanvasElementLuminanceSource.prototype.getRow=function(y,row){if(y<0||y>=this.getHeight())throw new core_IllegalArgumentException("Requested row is outside the image: "+y);var width=this.getWidth(),start=y*width;return null===row?row=this.buffer.slice(start,start+width):(row.length<width&&(row=new Uint8ClampedArray(width)),row.set(this.buffer.slice(start,start+width))),row},HTMLCanvasElementLuminanceSource.prototype.getMatrix=function(){return this.buffer},HTMLCanvasElementLuminanceSource.prototype.isCropSupported=function(){return!0},HTMLCanvasElementLuminanceSource.prototype.crop=function(left,top,width,height){return _super.prototype.crop.call(this,left,top,width,height),this},HTMLCanvasElementLuminanceSource.prototype.isRotateSupported=function(){return!0},HTMLCanvasElementLuminanceSource.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},HTMLCanvasElementLuminanceSource.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},HTMLCanvasElementLuminanceSource.prototype.invert=function(){return new core_InvertedLuminanceSource(this)},HTMLCanvasElementLuminanceSource.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var tempCanvasElement=this.canvas.ownerDocument.createElement("canvas");tempCanvasElement.width=this.canvas.width,tempCanvasElement.height=this.canvas.height,this.tempCanvasElement=tempCanvasElement}return this.tempCanvasElement},HTMLCanvasElementLuminanceSource.prototype.rotate=function(angle){var tempCanvasElement=this.getTempCanvasElement();if(!tempCanvasElement)throw new Error("Could not create a Canvas element.");var angleRadians=angle*HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS,width=this.canvas.width,height=this.canvas.height,newWidth=Math.ceil(Math.abs(Math.cos(angleRadians))*width+Math.abs(Math.sin(angleRadians))*height),newHeight=Math.ceil(Math.abs(Math.sin(angleRadians))*width+Math.abs(Math.cos(angleRadians))*height);tempCanvasElement.width=newWidth,tempCanvasElement.height=newHeight;var tempContext=tempCanvasElement.getContext("2d");if(!tempContext)throw new Error("Could not create a Canvas Context element.");return tempContext.translate(newWidth/2,newHeight/2),tempContext.rotate(angleRadians),tempContext.drawImage(this.canvas,width/-2,height/-2),this.buffer=HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(tempCanvasElement),this},HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS=Math.PI/180,HTMLCanvasElementLuminanceSource}(core_LuminanceSource);function hasNavigator(){return"undefined"!=typeof navigator}function canEnumerateDevices(){return!(!function isMediaDevicesSupported(){return hasNavigator()&&!!navigator.mediaDevices}()||!navigator.mediaDevices.enumerateDevices)}var _staticBlock,_staticBlock2,__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},BrowserCodeReader_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},BrowserCodeReader_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},readers_BrowserCodeReader_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},defaultOptions={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},BrowserCodeReader_BrowserCodeReader=function(){function BrowserCodeReader(reader,hints,options){void 0===hints&&(hints=new Map),void 0===options&&(options={}),this.reader=reader,this.hints=hints,this.options=__assign(__assign({},defaultOptions),options)}return Object.defineProperty(BrowserCodeReader.prototype,"possibleFormats",{set:function(formats){this.hints.set(core_DecodeHintType.POSSIBLE_FORMATS,formats)},enumerable:!1,configurable:!0}),BrowserCodeReader.addVideoSource=function(videoElement,stream){try{videoElement.srcObject=stream}catch(err){console.error("got interrupted by new loading request")}},BrowserCodeReader.mediaStreamSetTorch=function(track,onOff){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return[4,track.applyConstraints({advanced:[{fillLightMode:onOff?"flash":"off",torch:!!onOff}]})];case 1:return _a.sent(),[2]}})})},BrowserCodeReader.mediaStreamIsTorchCompatible=function(params){var e_1,_a,tracks=params.getVideoTracks();try{for(var tracks_1=readers_BrowserCodeReader_values(tracks),tracks_1_1=tracks_1.next();!tracks_1_1.done;tracks_1_1=tracks_1.next()){var track=tracks_1_1.value;if(BrowserCodeReader.mediaStreamIsTorchCompatibleTrack(track))return!0}}catch(e_1_1){e_1={error:e_1_1}}finally{try{tracks_1_1&&!tracks_1_1.done&&(_a=tracks_1.return)&&_a.call(tracks_1)}finally{if(e_1)throw e_1.error}}return!1},BrowserCodeReader.mediaStreamIsTorchCompatibleTrack=function(track){try{return"torch"in track.getCapabilities()}catch(err){return console.error(err),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},BrowserCodeReader.isVideoPlaying=function(video){return video.currentTime>0&&!video.paused&&video.readyState>2},BrowserCodeReader.getMediaElement=function(mediaElementId,type){var mediaElement=document.getElementById(mediaElementId);if(!mediaElement)throw new core_ArgumentException("element with id '".concat(mediaElementId,"' not found"));if(mediaElement.nodeName.toLowerCase()!==type.toLowerCase())throw new core_ArgumentException("element with id '".concat(mediaElementId,"' must be an ").concat(type," element"));return mediaElement},BrowserCodeReader.createVideoElement=function(videoThingy){if(videoThingy instanceof HTMLVideoElement)return videoThingy;if("string"==typeof videoThingy)return BrowserCodeReader.getMediaElement(videoThingy,"video");if(!videoThingy&&"undefined"!=typeof document){var videoElement=document.createElement("video");return videoElement.width=200,videoElement.height=200,videoElement}throw new Error("Couldn't get videoElement from videoSource!")},BrowserCodeReader.prepareImageElement=function(imageSource){if(imageSource instanceof HTMLImageElement)return imageSource;if("string"==typeof imageSource)return BrowserCodeReader.getMediaElement(imageSource,"img");if(void 0===imageSource){var imageElement=document.createElement("img");return imageElement.width=200,imageElement.height=200,imageElement}throw new Error("Couldn't get imageElement from imageSource!")},BrowserCodeReader.prepareVideoElement=function(videoElem){var videoElement=BrowserCodeReader.createVideoElement(videoElem);return videoElement.setAttribute("autoplay","true"),videoElement.setAttribute("muted","true"),videoElement.setAttribute("playsinline","true"),videoElement},BrowserCodeReader.isImageLoaded=function(img){return!!img.complete&&0!==img.naturalWidth},BrowserCodeReader.createBinaryBitmapFromCanvas=function(canvas){var luminanceSource=new HTMLCanvasElementLuminanceSource_HTMLCanvasElementLuminanceSource(canvas),hybridBinarizer=new common_HybridBinarizer(luminanceSource);return new core_BinaryBitmap(hybridBinarizer)},BrowserCodeReader.drawImageOnCanvas=function(canvasElementContext,srcElement){canvasElementContext.drawImage(srcElement,0,0)},BrowserCodeReader.getMediaElementDimensions=function(mediaElement){if(mediaElement instanceof HTMLVideoElement)return{height:mediaElement.videoHeight,width:mediaElement.videoWidth};if(mediaElement instanceof HTMLImageElement)return{height:mediaElement.naturalHeight||mediaElement.height,width:mediaElement.naturalWidth||mediaElement.width};throw new Error("Couldn't find the Source's dimensions!")},BrowserCodeReader.createCaptureCanvas=function(mediaElement){if(!mediaElement)throw new core_ArgumentException("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var canvasElement=document.createElement("canvas"),_a=BrowserCodeReader.getMediaElementDimensions(mediaElement),width=_a.width,height=_a.height;return canvasElement.style.width=width+"px",canvasElement.style.height=height+"px",canvasElement.width=width,canvasElement.height=height,canvasElement},BrowserCodeReader.tryPlayVideo=function(videoElement){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var error_1;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(null==videoElement?void 0:videoElement.ended)return console.error("Trying to play video that has ended."),[2,!1];if(BrowserCodeReader.isVideoPlaying(videoElement))return console.warn("Trying to play video that is already playing."),[2,!0];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,videoElement.play()];case 2:return _a.sent(),[2,!0];case 3:return error_1=_a.sent(),console.warn("It was not possible to play the video.",error_1),[2,!1];case 4:return[2]}})})},BrowserCodeReader.createCanvasFromMediaElement=function(mediaElement){var canvas=BrowserCodeReader.createCaptureCanvas(mediaElement),ctx=canvas.getContext("2d");if(!ctx)throw new Error("Couldn't find Canvas 2D Context.");return BrowserCodeReader.drawImageOnCanvas(ctx,mediaElement),canvas},BrowserCodeReader.createBinaryBitmapFromMediaElem=function(mediaElement){var canvas=BrowserCodeReader.createCanvasFromMediaElement(mediaElement);return BrowserCodeReader.createBinaryBitmapFromCanvas(canvas)},BrowserCodeReader.destroyImageElement=function(imageElement){imageElement.src="",imageElement.removeAttribute("src"),imageElement=void 0},BrowserCodeReader.listVideoInputDevices=function(){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var devices,videoDevices,devices_1,devices_1_1,device,kind,deviceId,label,groupId,videoDevice,e_2,_a;return BrowserCodeReader_generator(this,function(_b){switch(_b.label){case 0:if(!hasNavigator())throw new Error("Can't enumerate devices, navigator is not present.");if(!canEnumerateDevices())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:devices=_b.sent(),videoDevices=[];try{for(devices_1=readers_BrowserCodeReader_values(devices),devices_1_1=devices_1.next();!devices_1_1.done;devices_1_1=devices_1.next())device=devices_1_1.value,"videoinput"===(kind="video"===device.kind?"videoinput":device.kind)&&(deviceId=device.deviceId||device.id,label=device.label||"Video device ".concat(videoDevices.length+1),groupId=device.groupId,videoDevice={deviceId,label,kind,groupId},videoDevices.push(videoDevice))}catch(e_2_1){e_2={error:e_2_1}}finally{try{devices_1_1&&!devices_1_1.done&&(_a=devices_1.return)&&_a.call(devices_1)}finally{if(e_2)throw e_2.error}}return[2,videoDevices]}})})},BrowserCodeReader.findDeviceById=function(deviceId){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var devices;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return[4,BrowserCodeReader.listVideoInputDevices()];case 1:return(devices=_a.sent())?[2,devices.find(function(x){return x.deviceId===deviceId})]:[2]}})})},BrowserCodeReader.cleanVideoSource=function(videoElement){if(videoElement){try{videoElement.srcObject=null}catch(err){videoElement.src=""}videoElement&&videoElement.removeAttribute("src")}},BrowserCodeReader.releaseAllStreams=function(){0!==BrowserCodeReader.streamTracker.length&&BrowserCodeReader.streamTracker.forEach(function(mediaStream){mediaStream.getTracks().forEach(function(track){return track.stop()})}),BrowserCodeReader.streamTracker=[]},BrowserCodeReader.playVideoOnLoadAsync=function(element,timeout){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return[4,BrowserCodeReader.tryPlayVideo(element)];case 1:return _a.sent()?[2,!0]:[2,new Promise(function(resolve,reject){var timeoutId=setTimeout(function(){BrowserCodeReader.isVideoPlaying(element)||(reject(!1),element.removeEventListener("canplay",videoCanPlayListener))},timeout),videoCanPlayListener=function(){BrowserCodeReader.tryPlayVideo(element).then(function(hasPlayed){clearTimeout(timeoutId),element.removeEventListener("canplay",videoCanPlayListener),resolve(hasPlayed)})};element.addEventListener("canplay",videoCanPlayListener)})]}})})},BrowserCodeReader.attachStreamToVideo=function(stream,preview,previewPlayTimeout){return void 0===previewPlayTimeout&&(previewPlayTimeout=5e3),BrowserCodeReader_awaiter(this,void 0,void 0,function(){var videoElement;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return videoElement=BrowserCodeReader.prepareVideoElement(preview),BrowserCodeReader.addVideoSource(videoElement,stream),[4,BrowserCodeReader.playVideoOnLoadAsync(videoElement,previewPlayTimeout)];case 1:return _a.sent(),[2,videoElement]}})})},BrowserCodeReader._waitImageLoad=function(element){return new Promise(function(resolve,reject){var timeoutId=setTimeout(function(){BrowserCodeReader.isImageLoaded(element)||(element.removeEventListener("load",imageLoadedListener),reject())},1e4),imageLoadedListener=function(){clearTimeout(timeoutId),element.removeEventListener("load",imageLoadedListener),resolve()};element.addEventListener("load",imageLoadedListener)})},BrowserCodeReader.checkCallbackFnOrThrow=function(callbackFn){if(!callbackFn)throw new core_ArgumentException("`callbackFn` is a required parameter, you cannot capture results without it.")},BrowserCodeReader.disposeMediaStream=function(stream){stream.getVideoTracks().forEach(function(x){return x.stop()}),stream=void 0},BrowserCodeReader.prototype.decode=function(element){var canvas=BrowserCodeReader.createCanvasFromMediaElement(element);return this.decodeFromCanvas(canvas)},BrowserCodeReader.prototype.decodeBitmap=function(binaryBitmap){return this.reader.decode(binaryBitmap,this.hints)},BrowserCodeReader.prototype.decodeFromCanvas=function(canvas){var binaryBitmap=BrowserCodeReader.createBinaryBitmapFromCanvas(canvas);return this.decodeBitmap(binaryBitmap)},BrowserCodeReader.prototype.decodeFromImageElement=function(source){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var element;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(!source)throw new core_ArgumentException("An image element must be provided.");return element=BrowserCodeReader.prepareImageElement(source),[4,this._decodeOnLoadImage(element)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeFromImageUrl=function(url){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var element;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(!url)throw new core_ArgumentException("An URL must be provided.");(element=BrowserCodeReader.prepareImageElement()).src=url,_a.label=1;case 1:return _a.trys.push([1,,3,4]),[4,this.decodeFromImageElement(element)];case 2:return[2,_a.sent()];case 3:return BrowserCodeReader.destroyImageElement(element),[7];case 4:return[2]}})})},BrowserCodeReader.prototype.decodeFromConstraints=function(constraints,previewElem,callbackFn){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var stream,error_2;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return BrowserCodeReader.checkCallbackFnOrThrow(callbackFn),[4,this.getUserMedia(constraints)];case 1:stream=_a.sent(),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,this.decodeFromStream(stream,previewElem,callbackFn)];case 3:return[2,_a.sent()];case 4:throw error_2=_a.sent(),BrowserCodeReader.disposeMediaStream(stream),error_2;case 5:return[2]}})})},BrowserCodeReader.prototype.decodeFromStream=function(stream,preview,callbackFn){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var timeout,video,finalizeCallback,originalControls,videoTracks,controls,torchTrack_1,switchTorch_1,_this=this;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return BrowserCodeReader.checkCallbackFnOrThrow(callbackFn),timeout=this.options.tryPlayVideoTimeout,[4,BrowserCodeReader.attachStreamToVideo(stream,preview,timeout)];case 1:return video=_a.sent(),finalizeCallback=function(){BrowserCodeReader.disposeMediaStream(stream),BrowserCodeReader.cleanVideoSource(video)},originalControls=this.scan(video,callbackFn,finalizeCallback),videoTracks=stream.getVideoTracks(),controls=__assign(__assign({},originalControls),{stop:function(){originalControls.stop()},streamVideoConstraintsApply:function(constraints,trackFilter){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var tracks,tracks_2,tracks_2_1,e_3_1,e_3,_a;return BrowserCodeReader_generator(this,function(_b){switch(_b.label){case 0:tracks=trackFilter?videoTracks.filter(trackFilter):videoTracks,_b.label=1;case 1:_b.trys.push([1,6,7,8]),tracks_2=readers_BrowserCodeReader_values(tracks),tracks_2_1=tracks_2.next(),_b.label=2;case 2:return tracks_2_1.done?[3,5]:[4,tracks_2_1.value.applyConstraints(constraints)];case 3:_b.sent(),_b.label=4;case 4:return tracks_2_1=tracks_2.next(),[3,2];case 5:return[3,8];case 6:return e_3_1=_b.sent(),e_3={error:e_3_1},[3,8];case 7:try{tracks_2_1&&!tracks_2_1.done&&(_a=tracks_2.return)&&_a.call(tracks_2)}finally{if(e_3)throw e_3.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(trackFilter){return videoTracks.find(trackFilter).getConstraints()},streamVideoSettingsGet:function(trackFilter){return videoTracks.find(trackFilter).getSettings()},streamVideoCapabilitiesGet:function(trackFilter){return videoTracks.find(trackFilter).getCapabilities()}}),BrowserCodeReader.mediaStreamIsTorchCompatible(stream)&&(torchTrack_1=null==videoTracks?void 0:videoTracks.find(function(t){return BrowserCodeReader.mediaStreamIsTorchCompatibleTrack(t)}),switchTorch_1=function(onOff){return BrowserCodeReader_awaiter(_this,void 0,void 0,function(){return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return[4,BrowserCodeReader.mediaStreamSetTorch(torchTrack_1,onOff)];case 1:return _a.sent(),[2]}})})},controls.switchTorch=switchTorch_1,controls.stop=function(){return BrowserCodeReader_awaiter(_this,void 0,void 0,function(){return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return originalControls.stop(),[4,switchTorch_1(!1)];case 1:return _a.sent(),[2]}})})}),[2,controls]}})})},BrowserCodeReader.prototype.decodeFromVideoDevice=function(deviceId,previewElem,callbackFn){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var constraints;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return BrowserCodeReader.checkCallbackFnOrThrow(callbackFn),constraints={video:deviceId?{deviceId:{exact:deviceId}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(constraints,previewElem,callbackFn)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeFromVideoElement=function(source,callbackFn){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var element,timeout;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(BrowserCodeReader.checkCallbackFnOrThrow(callbackFn),!source)throw new core_ArgumentException("A video element must be provided.");return element=BrowserCodeReader.prepareVideoElement(source),timeout=this.options.tryPlayVideoTimeout,[4,BrowserCodeReader.playVideoOnLoadAsync(element,timeout)];case 1:return _a.sent(),[2,this.scan(element,callbackFn)]}})})},BrowserCodeReader.prototype.decodeFromVideoUrl=function(url,callbackFn){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var element,finalizeCallback,timeout;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(BrowserCodeReader.checkCallbackFnOrThrow(callbackFn),!url)throw new core_ArgumentException("An URL must be provided.");return(element=BrowserCodeReader.prepareVideoElement()).src=url,finalizeCallback=function(){BrowserCodeReader.cleanVideoSource(element)},timeout=this.options.tryPlayVideoTimeout,[4,BrowserCodeReader.playVideoOnLoadAsync(element,timeout)];case 1:return _a.sent(),[2,this.scan(element,callbackFn,finalizeCallback)]}})})},BrowserCodeReader.prototype.decodeOnceFromConstraints=function(constraints,videoSource){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var stream;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return[4,this.getUserMedia(constraints)];case 1:return stream=_a.sent(),[4,this.decodeOnceFromStream(stream,videoSource)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeOnceFromStream=function(stream,preview){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var receivedPreview,video;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return receivedPreview=Boolean(preview),[4,BrowserCodeReader.attachStreamToVideo(stream,preview)];case 1:video=_a.sent(),_a.label=2;case 2:return _a.trys.push([2,,4,5]),[4,this.scanOneResult(video)];case 3:return[2,_a.sent()];case 4:return receivedPreview||BrowserCodeReader.cleanVideoSource(video),[7];case 5:return[2]}})})},BrowserCodeReader.prototype.decodeOnceFromVideoDevice=function(deviceId,videoSource){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var constraints;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return constraints={video:deviceId?{deviceId:{exact:deviceId}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(constraints,videoSource)];case 1:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeOnceFromVideoElement=function(source){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var element,timeout;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(!source)throw new core_ArgumentException("A video element must be provided.");return element=BrowserCodeReader.prepareVideoElement(source),timeout=this.options.tryPlayVideoTimeout,[4,BrowserCodeReader.playVideoOnLoadAsync(element,timeout)];case 1:return _a.sent(),[4,this.scanOneResult(element)];case 2:return[2,_a.sent()]}})})},BrowserCodeReader.prototype.decodeOnceFromVideoUrl=function(url){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var element,task;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:if(!url)throw new core_ArgumentException("An URL must be provided.");(element=BrowserCodeReader.prepareVideoElement()).src=url,task=this.decodeOnceFromVideoElement(element),_a.label=1;case 1:return _a.trys.push([1,,3,4]),[4,task];case 2:return[2,_a.sent()];case 3:return BrowserCodeReader.cleanVideoSource(element),[7];case 4:return[2]}})})},BrowserCodeReader.prototype.scanOneResult=function(element,retryIfNotFound,retryIfChecksumError,retryIfFormatError){var _this=this;return void 0===retryIfNotFound&&(retryIfNotFound=!0),void 0===retryIfChecksumError&&(retryIfChecksumError=!0),void 0===retryIfFormatError&&(retryIfFormatError=!0),new Promise(function(resolve,reject){_this.scan(element,function(result,error,controls){if(result)return resolve(result),void controls.stop();if(error){if(error instanceof core_NotFoundException&&retryIfNotFound)return;if(error instanceof core_ChecksumException&&retryIfChecksumError)return;if(error instanceof core_FormatException&&retryIfFormatError)return;controls.stop(),reject(error)}})})},BrowserCodeReader.prototype.scan=function(element,callbackFn,finalizeCallback){var _this=this;BrowserCodeReader.checkCallbackFnOrThrow(callbackFn);var captureCanvasContext,captureCanvas=BrowserCodeReader.createCaptureCanvas(element);try{captureCanvasContext=captureCanvas.getContext("2d",{willReadFrequently:!0})}catch(e){captureCanvasContext=captureCanvas.getContext("2d")}if(!captureCanvasContext)throw new Error("Couldn't create canvas for visual element scan.");var lastTimeoutId,disposeCanvas=function(){captureCanvasContext=void 0,captureCanvas=void 0},stopScan=!1,controls={stop:function(){stopScan=!0,clearTimeout(lastTimeoutId),disposeCanvas(),finalizeCallback&&finalizeCallback()}},loop=function(){if(!stopScan)try{BrowserCodeReader.drawImageOnCanvas(captureCanvasContext,element);var result=_this.decodeFromCanvas(captureCanvas);callbackFn(result,void 0,controls),lastTimeoutId=setTimeout(loop,_this.options.delayBetweenScanSuccess)}catch(error){if(callbackFn(void 0,error,controls),error instanceof core_ChecksumException||error instanceof core_FormatException||error instanceof core_NotFoundException)return void(lastTimeoutId=setTimeout(loop,_this.options.delayBetweenScanAttempts));disposeCanvas(),finalizeCallback&&finalizeCallback(error)}};return loop(),controls},BrowserCodeReader.prototype._decodeOnLoadImage=function(element){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return BrowserCodeReader.isImageLoaded(element)?[3,2]:[4,BrowserCodeReader._waitImageLoad(element)];case 1:_a.sent(),_a.label=2;case 2:return[2,this.decode(element)]}})})},BrowserCodeReader.prototype.getUserMedia=function(constraints){return BrowserCodeReader_awaiter(this,void 0,void 0,function(){var stream;return BrowserCodeReader_generator(this,function(_a){switch(_a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(constraints)];case 1:return stream=_a.sent(),BrowserCodeReader.streamTracker.push(stream),[2,stream]}})})},BrowserCodeReader.streamTracker=[],BrowserCodeReader}(),readers_BrowserAztecCodeReader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),BrowserMultiFormatOneDReader_extends=(function(_super){function BrowserAztecCodeReader(hints,options){return _super.call(this,new aztec_AztecReader,hints,options)||this}readers_BrowserAztecCodeReader_extends(BrowserAztecCodeReader,_super)}(BrowserCodeReader_BrowserCodeReader),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),readers_BrowserDatamatrixCodeReader_extends=(function(_super){function BrowserMultiFormatOneDReader(hints,options){return _super.call(this,new oned_MultiFormatOneDReader(hints),hints,options)||this}BrowserMultiFormatOneDReader_extends(BrowserMultiFormatOneDReader,_super)}(BrowserCodeReader_BrowserCodeReader),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),readers_BrowserMultiFormatReader_extends=(function(_super){function BrowserDatamatrixCodeReader(hints,options){return _super.call(this,new datamatrix_DataMatrixReader,hints,options)||this}readers_BrowserDatamatrixCodeReader_extends(BrowserDatamatrixCodeReader,_super)}(BrowserCodeReader_BrowserCodeReader),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),BrowserMultiFormatReader_BrowserMultiFormatReader=function(_super){function BrowserMultiFormatReader(hints,options){var _this=this,reader=new core_MultiFormatReader;return reader.setHints(hints),(_this=_super.call(this,reader,hints,options)||this).reader=reader,_this}return readers_BrowserMultiFormatReader_extends(BrowserMultiFormatReader,_super),Object.defineProperty(BrowserMultiFormatReader.prototype,"possibleFormats",{set:function(formats){this.hints.set(core_DecodeHintType.POSSIBLE_FORMATS,formats),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),BrowserMultiFormatReader.prototype.decodeBitmap=function(binaryBitmap){return this.reader.decodeWithState(binaryBitmap)},BrowserMultiFormatReader.prototype.setHints=function(hints){this.hints=hints,this.reader.setHints(this.hints)},BrowserMultiFormatReader}(BrowserCodeReader_BrowserCodeReader),readers_BrowserPDF417Reader_extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),readers_BrowserQRCodeReader_extends=(function(_super){function BrowserPDF417Reader(hints,options){return _super.call(this,new pdf417_PDF417Reader,hints,options)||this}readers_BrowserPDF417Reader_extends(BrowserPDF417Reader,_super)}(BrowserCodeReader_BrowserCodeReader),function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),svgNs=(function(_super){function BrowserQRCodeReader(hints,options){return _super.call(this,new qrcode_QRCodeReader,hints,options)||this}readers_BrowserQRCodeReader_extends(BrowserQRCodeReader,_super)}(BrowserCodeReader_BrowserCodeReader),"http://www.w3.org/2000/svg"),BehaviorSubject=(function(){function BrowserCodeSvgWriter(containerElement){if("string"==typeof containerElement){var container=document.getElementById(containerElement);if(!container)throw new Error("Could not find a Container element with '".concat(containerElement,"'."));this.containerElement=container}else this.containerElement=containerElement}BrowserCodeSvgWriter.prototype.write=function(contents,width,height,hints){if(0===contents.length)throw new core_IllegalArgumentException("Found empty contents");if(width<0||height<0)throw new core_IllegalArgumentException("Requested dimensions are too small: "+width+"x"+height);var quietZone=hints&&void 0!==hints.get(core_EncodeHintType.MARGIN)?Number.parseInt(hints.get(core_EncodeHintType.MARGIN).toString(),10):BrowserCodeSvgWriter.QUIET_ZONE_SIZE,code=this.encode(hints,contents);return this.renderResult(code,width,height,quietZone)},BrowserCodeSvgWriter.prototype.createSVGElement=function(w,h){var el=document.createElementNS(BrowserCodeSvgWriter.SVG_NS,"svg");return el.setAttributeNS(svgNs,"width",h.toString()),el.setAttributeNS(svgNs,"height",w.toString()),el},BrowserCodeSvgWriter.prototype.createSvgPathPlaceholderElement=function(w,h){var el=document.createElementNS(BrowserCodeSvgWriter.SVG_NS,"path");return el.setAttributeNS(svgNs,"d","M0 0h".concat(w,"v").concat(h,"H0z")),el.setAttributeNS(svgNs,"fill","none"),el},BrowserCodeSvgWriter.prototype.createSvgRectElement=function(x,y,w,h){var el=document.createElementNS(BrowserCodeSvgWriter.SVG_NS,"rect");return el.setAttributeNS(svgNs,"x",x.toString()),el.setAttributeNS(svgNs,"y",y.toString()),el.setAttributeNS(svgNs,"height",w.toString()),el.setAttributeNS(svgNs,"width",h.toString()),el.setAttributeNS(svgNs,"fill","#000000"),el},BrowserCodeSvgWriter.prototype.encode=function(hints,contents){var errorCorrectionLevel=decoder_ErrorCorrectionLevel.L;if(hints&&void 0!==hints.get(core_EncodeHintType.ERROR_CORRECTION)){var correctionStr=hints.get(core_EncodeHintType.ERROR_CORRECTION).toString();errorCorrectionLevel=decoder_ErrorCorrectionLevel.fromString(correctionStr)}return encoder_Encoder.encode(contents,errorCorrectionLevel,hints)},BrowserCodeSvgWriter.prototype.renderResult=function(code,width,height,quietZone){var input=code.getMatrix();if(null===input)throw new core_IllegalStateException;var inputWidth=input.getWidth(),inputHeight=input.getHeight(),qrWidth=inputWidth+2*quietZone,qrHeight=inputHeight+2*quietZone,outputWidth=Math.max(width,qrWidth),outputHeight=Math.max(height,qrHeight),multiple=Math.min(Math.floor(outputWidth/qrWidth),Math.floor(outputHeight/qrHeight)),leftPadding=Math.floor((outputWidth-inputWidth*multiple)/2),topPadding=Math.floor((outputHeight-inputHeight*multiple)/2),svgElement=this.createSVGElement(outputWidth,outputHeight),placeholder=this.createSvgPathPlaceholderElement(width,height);svgElement.appendChild(placeholder),this.containerElement.appendChild(svgElement);for(var inputY=0,outputY=topPadding;inputY<inputHeight;inputY++,outputY+=multiple)for(var inputX=0,outputX=leftPadding;inputX<inputWidth;inputX++,outputX+=multiple)if(1===input.get(inputX,inputY)){var svgRectElement=this.createSvgRectElement(outputX,outputY,multiple,multiple);svgElement.appendChild(svgRectElement)}return svgElement},BrowserCodeSvgWriter.QUIET_ZONE_SIZE=4,BrowserCodeSvgWriter.SVG_NS="http://www.w3.org/2000/svg"}(),function(){function BrowserQRCodeSvgWriter(){}BrowserQRCodeSvgWriter.prototype.write=function(contents,width,height,hints){if(0===contents.length)throw new core_IllegalArgumentException("Found empty contents");if(width<0||height<0)throw new core_IllegalArgumentException("Requested dimensions are too small: "+width+"x"+height);var errorCorrectionLevel=decoder_ErrorCorrectionLevel.L,quietZone=BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;if(hints){if(void 0!==hints.get(core_EncodeHintType.ERROR_CORRECTION)){var correctionStr=hints.get(core_EncodeHintType.ERROR_CORRECTION).toString();errorCorrectionLevel=decoder_ErrorCorrectionLevel.fromString(correctionStr)}void 0!==hints.get(core_EncodeHintType.MARGIN)&&(quietZone=Number.parseInt(hints.get(core_EncodeHintType.MARGIN).toString(),10))}var code=encoder_Encoder.encode(contents,errorCorrectionLevel,hints);return this.renderResult(code,width,height,quietZone)},BrowserQRCodeSvgWriter.prototype.writeToDom=function(containerElement,contents,width,height,hints){if("string"==typeof containerElement){var targetEl=document.querySelector(containerElement);if(!targetEl)throw new Error("Could no find the target HTML element.");containerElement=targetEl}var svgElement=this.write(contents,width,height,hints);containerElement instanceof HTMLElement&&containerElement.appendChild(svgElement)},BrowserQRCodeSvgWriter.prototype.renderResult=function(code,width,height,quietZone){var input=code.getMatrix();if(null===input)throw new core_IllegalStateException;for(var inputWidth=input.getWidth(),inputHeight=input.getHeight(),qrWidth=inputWidth+2*quietZone,qrHeight=inputHeight+2*quietZone,outputWidth=Math.max(width,qrWidth),outputHeight=Math.max(height,qrHeight),multiple=Math.min(Math.floor(outputWidth/qrWidth),Math.floor(outputHeight/qrHeight)),leftPadding=Math.floor((outputWidth-inputWidth*multiple)/2),topPadding=Math.floor((outputHeight-inputHeight*multiple)/2),svgElement=this.createSVGElement(outputWidth,outputHeight),inputY=0,outputY=topPadding;inputY<inputHeight;inputY++,outputY+=multiple)for(var inputX=0,outputX=leftPadding;inputX<inputWidth;inputX++,outputX+=multiple)if(1===input.get(inputX,inputY)){var svgRectElement=this.createSvgRectElement(outputX,outputY,multiple,multiple);svgElement.appendChild(svgRectElement)}return svgElement},BrowserQRCodeSvgWriter.prototype.createSVGElement=function(w,h){var svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),width=w.toString(),height=h.toString();return svgElement.setAttribute("height",height),svgElement.setAttribute("width",width),svgElement.setAttribute("viewBox","0 0 "+width+" "+height),svgElement},BrowserQRCodeSvgWriter.prototype.createSvgRectElement=function(x,y,w,h){var rect=document.createElementNS("http://www.w3.org/2000/svg","rect");return rect.setAttribute("x",x.toString()),rect.setAttribute("y",y.toString()),rect.setAttribute("height",w.toString()),rect.setAttribute("width",h.toString()),rect.setAttribute("fill","#000000"),rect},BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE=4}(),__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"));const _c0=["preview"];class BrowserMultiFormatContinuousReader extends BrowserMultiFormatReader_BrowserMultiFormatReader{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(deviceId,previewEl){var _this=this;return(0,asyncToGenerator.A)(function*(){const scan$=new BehaviorSubject.t({});let ctrls;try{ctrls=yield _this.decodeFromVideoDevice(deviceId,previewEl,(result,error)=>{if(!error)return void scan$.next({result});const errorName=error.name;errorName===core_NotFoundException.name||errorName===core_ChecksumException.name||errorName===core_FormatException.name||error.message.includes("No MultiFormat Readers were able to detect the code.")?scan$.next({error}):(scan$.error(error),_this.scannerControls.stop(),_this.scannerControls=void 0)}),_this.scannerControls={...ctrls,stop(){ctrls.stop(),scan$.complete()}}}catch(e){scan$.error(e),_this.scannerControls?.stop(),_this.scannerControls=void 0}return scan$.asObservable()})()}}class ZXingScannerComponent{get codeReader(){return this._codeReader}set device(device){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(device)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(device):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=device}get device(){return this._device}get formats(){return this.hints.get(core_DecodeHintType.POSSIBLE_FORMATS)}set formats(input){if("string"==typeof input)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const formats=input.map(f=>this.getBarcodeFormatOrFail(f)),hints=this.hints;hints.set(core_DecodeHintType.POSSIBLE_FORMATS,formats),this.hints=hints}get hints(){return this._hints}set hints(hints){this._hints=hints,this.codeReader?.setHints(this._hints)}set videoConstraints(constraints){const controls=this.codeReader?.getScannerControls();controls&&controls?.streamVideoConstraintsApply(constraints)}set isAutostarting(state){this._isAutostarting=state,this.autostarting.next(state)}get isAutostarting(){return this._isAutostarting}set torch(onOff){try{this.getCodeReader().getScannerControls().switchTorch(onOff)}catch(error){}}set enable(enabled){this._enabled!==Boolean(enabled)&&(this._enabled=Boolean(enabled),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),BrowserMultiFormatContinuousReader.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(core_DecodeHintType.TRY_HARDER)}set tryHarder(enable){const hints=this.hints;enable?hints.set(core_DecodeHintType.TRY_HARDER,!0):hints.delete(core_DecodeHintType.TRY_HARDER),this.hints=hints}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new debug_node.bkB,this.autostarting=new debug_node.bkB,this.torchCompatible=new debug_node.bkB(!1),this.scanSuccess=new debug_node.bkB,this.scanFailure=new debug_node.bkB,this.scanError=new debug_node.bkB,this.scanComplete=new debug_node.bkB,this.camerasFound=new debug_node.bkB,this.camerasNotFound=new debug_node.bkB,this.permissionResponse=new debug_node.bkB(!0),this.hasDevices=new debug_node.bkB,this.deviceChange=new debug_node.bkB,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[core_BarcodeFormat.QR_CODE],this.hasNavigator="undefined"!=typeof navigator,this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){var _this2=this;return(0,asyncToGenerator.A)(function*(){if(!_this2.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),_this2.setPermission(null),_this2.hasPermission;if(!_this2.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),_this2.setPermission(null),_this2.hasPermission;let stream,permission;try{stream=yield _this2.getAnyVideoDevice(),permission=!!stream}catch(err){return _this2.handlePermissionException(err)}finally{_this2.terminateStream(stream)}return _this2.setPermission(permission),permission})()}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(stream){stream&&stream.getTracks().forEach(t=>t.stop()),stream=void 0}init(){var _this3=this;return(0,asyncToGenerator.A)(function*(){if(!_this3.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),_this3.initAutostartOff(),void(_this3._ready=!0);yield _this3.initAutostartOn(),_this3._ready=!0})()}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){var _this4=this;return(0,asyncToGenerator.A)(function*(){let hasPermission;_this4.isAutostarting=!0;try{hasPermission=yield _this4.askForPermission()}catch(e){return void console.error("Exception occurred while asking for permission:",e)}if(hasPermission){const devices=yield _this4.updateVideoInputDevices();yield _this4.autostartScanner([...devices])}_this4.isAutostarting=!1,_this4.autostarted.next()})()}isCurrentDevice(device){return device?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),BrowserCodeReader_BrowserCodeReader.cleanVideoSource(this.previewElemRef.nativeElement),BrowserMultiFormatContinuousReader.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const prevDevice=this._reset();prevDevice&&(this.device=prevDevice)}updateVideoInputDevices(){var _this5=this;return(0,asyncToGenerator.A)(function*(){const devices=(yield BrowserCodeReader_BrowserCodeReader.listVideoInputDevices())||[],hasDevices=devices&&devices.length>0;return _this5.hasDevices.next(hasDevices),_this5.camerasFound.next([...devices]),hasDevices||_this5.camerasNotFound.next(null),devices})()}autostartScanner(devices){var _this6=this;return(0,asyncToGenerator.A)(function*(){const device=devices.find(({label})=>/back|trás|rear|traseira|environment|ambiente/gi.test(label))||devices.pop();if(!device)throw new Error("Impossible to autostart, no input devices available.");yield _this6.setDevice(device),_this6.deviceChange.next(device)})()}dispatchScanSuccess(result){this.scanSuccess.next(result.getText())}dispatchScanFailure(reason){this.scanFailure.next(reason)}dispatchScanError(error){this.scanError.observed||(console.error(`zxing scanner component: ${error.name}`,error),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(error)}dispatchScanComplete(result){this.scanComplete.next(result)}handlePermissionException(err){let permission;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",err),err.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",err.message),permission=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",err.message),permission=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",err.message),permission=null,this.hasDevices.next(!1),this.camerasNotFound.next(err);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),permission=null,this.hasDevices.next(!1),this.camerasNotFound.next(err);break;case"AbortError":console.warn("@zxing/ngx-scanner","It seems that the required permissions have been granted, but something else failed",err),permission=!0,this.hasDevices.next(null),this.camerasNotFound.next(err);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",err),permission=null}return this.setPermission(permission),this.permissionResponse.error(err),permission}getBarcodeFormatOrFail(format){return"string"==typeof format?core_BarcodeFormat[format.trim().toUpperCase()]:format}getCodeReader(){if(!this._codeReader){const options={delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess};this._codeReader=new BrowserMultiFormatContinuousReader(this.hints,options)}return this._codeReader}scanFromDevice(deviceId){var _this7=this;return(0,asyncToGenerator.A)(function*(){const videoElement=_this7.previewElemRef.nativeElement,codeReader=_this7.getCodeReader(),scanStream=yield codeReader.scanFromDeviceObservable(deviceId,videoElement);if(!scanStream)throw new Error("Undefined decoding stream, aborting.");if(_this7._scanSubscription=scanStream.subscribe(x=>_this7._onDecodeResult(x.result,x.error),err=>_this7._onDecodeError(err),()=>{}),_this7._scanSubscription.closed)return;const hasTorchControl=void 0!==codeReader.getScannerControls().switchTorch;_this7.torchCompatible.next(hasTorchControl)})()}_onDecodeError(err){this.dispatchScanError(err)}_onDecodeResult(result,error){result?this.dispatchScanSuccess(result):this.dispatchScanFailure(error),this.dispatchScanComplete(result)}_reset(){if(!this._codeReader)return;this.scanStop();try{const videoElement=this.previewElemRef.nativeElement;BrowserCodeReader_BrowserCodeReader.cleanVideoSource(videoElement)}catch(err){}try{BrowserCodeReader_BrowserCodeReader.releaseAllStreams()}catch(err){}this._codeReader=void 0;const device=this._device;return this.device=void 0,device}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(device){var _this8=this;return(0,asyncToGenerator.A)(function*(){_this8.scanStop(),_this8._device=device||void 0,_this8._device||BrowserCodeReader_BrowserCodeReader.cleanVideoSource(_this8.previewElemRef.nativeElement),_this8._enabled&&device&&(yield _this8.scanFromDevice(device.deviceId))})()}setPermission(hasPermission){this.hasPermission=hasPermission,this.permissionResponse.next(hasPermission)}static#_=_staticBlock=()=>(this.ɵfac=function ZXingScannerComponent_Factory(__ngFactoryType__){return new(__ngFactoryType__||ZXingScannerComponent)},this.ɵcmp=debug_node.VBU({type:ZXingScannerComponent,selectors:[["zxing-scanner"]],viewQuery:function ZXingScannerComponent_Query(rf,ctx){if(1&rf&&debug_node.GBs(_c0,7),2&rf){let _t;debug_node.mGM(_t=debug_node.lsd())&&(ctx.previewElemRef=_t.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},standalone:!1,decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function ZXingScannerComponent_Template(rf,ctx){1&rf&&(debug_node.j41(0,"video",1,0)(2,"p"),debug_node.EFF(3," Your browser does not support this feature, please try to upgrade it. "),debug_node.k0s(),debug_node.j41(4,"p"),debug_node.EFF(5," Seu navegador não suporta este recurso, por favor tente atualizá-lo. "),debug_node.k0s()()),2&rf&&(debug_node.xc7("object-fit",ctx.previewFitMode),debug_node.Y8G("poster",ctx.poster,debug_node.B4B))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0}))}_staticBlock(),("undefined"==typeof ngDevMode||ngDevMode)&&debug_node.cDI(ZXingScannerComponent,[{type:debug_node.uAl,args:[{selector:"zxing-scanner",changeDetection:debug_node.Ngq.OnPush,standalone:!1,template:'<video #preview [style.object-fit]="previewFitMode" [poster]="poster">\n  <p>\n    Your browser does not support this feature, please try to upgrade it.\n  </p>\n  <p>\n    Seu navegador não suporta este recurso, por favor tente atualizá-lo.\n  </p>\n</video>\n',styles:[":host{display:block}video{width:100%;height:auto;object-fit:contain}\n"]}]}],()=>[],{previewElemRef:[{type:core.ViewChild,args:["preview",{static:!0}]}],autofocusEnabled:[{type:debug_node.pde}],timeBetweenScans:[{type:debug_node.pde}],delayBetweenScanSuccess:[{type:debug_node.pde}],autostarted:[{type:debug_node.k7i}],autostarting:[{type:debug_node.k7i}],autostart:[{type:debug_node.pde}],previewFitMode:[{type:debug_node.pde}],poster:[{type:debug_node.pde}],torchCompatible:[{type:debug_node.k7i}],scanSuccess:[{type:debug_node.k7i}],scanFailure:[{type:debug_node.k7i}],scanError:[{type:debug_node.k7i}],scanComplete:[{type:debug_node.k7i}],camerasFound:[{type:debug_node.k7i}],camerasNotFound:[{type:debug_node.k7i}],permissionResponse:[{type:debug_node.k7i}],hasDevices:[{type:debug_node.k7i}],device:[{type:debug_node.pde}],deviceChange:[{type:debug_node.k7i}],formats:[{type:debug_node.pde}],videoConstraints:[{type:debug_node.pde}],torch:[{type:debug_node.pde}],enable:[{type:debug_node.pde}],tryHarder:[{type:debug_node.pde}]});class ZXingScannerModule{static#_=_staticBlock2=()=>(this.ɵfac=function ZXingScannerModule_Factory(__ngFactoryType__){return new(__ngFactoryType__||ZXingScannerModule)},this.ɵmod=debug_node.$C({type:ZXingScannerModule,declarations:[ZXingScannerComponent],imports:[common_module.MD,fesm2022_forms.YN],exports:[ZXingScannerComponent]}),this.ɵinj=root_effect_scheduler.G2t({imports:[common_module.MD,fesm2022_forms.YN]}))}_staticBlock2(),("undefined"==typeof ngDevMode||ngDevMode)&&debug_node.cDI(ZXingScannerModule,[{type:debug_node.UQu,args:[{imports:[common_module.MD,fesm2022_forms.YN],declarations:[ZXingScannerComponent],exports:[ZXingScannerComponent]}]}],null,null)}}]);